<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="1600" end="1800" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-7428] StartupFilter not reliably stopped (and still returning 503) when executing org.apache.sling.scripting.sightly.testing</title>
                <link>https://issues.apache.org/jira/browse/SLING-7428</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For me the IT &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content&lt;/a&gt; fails every second time stating that client received status code 503. This is due to the fact that the condition in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/blob/dbe9746f945312a05f99648357ed4c88b01d325a/src/main/java/org/apache/sling/starter/startup/impl/Activator.java#L107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter-startup/blob/dbe9746f945312a05f99648357ed4c88b01d325a/src/main/java/org/apache/sling/starter/startup/impl/Activator.java#L107&lt;/a&gt; to stop the StartupFilter (which returns the 503) is never fulfilled.&lt;br/&gt;
There is always the untransformed resource at &lt;tt&gt;/apps/sightly/install/README&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/master/src/main/resources/SLING-INF/apps/sightly/install/README&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/master/src/main/resources/SLING-INF/apps/sightly/install/README&lt;/a&gt;). We should either remove this resource from the install folder (so that this is no longer being picked up by the JCR installer) or we should no longer check for untransformed resources (not sure about the implications).&lt;/p&gt;

&lt;p&gt;I am not sure why I am not running into this every time I execute the IT but only about half of the time. Seems to be related to some unfortunate timings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133021">SLING-7428</key>
            <summary>StartupFilter not reliably stopped (and still returning 503) when executing org.apache.sling.scripting.sightly.testing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 11:43:09 +0000</created>
                <updated>Thu, 1 Feb 2018 16:01:39 +0000</updated>
                            <resolved>Tue, 23 Jan 2018 14:48:39 +0000</resolved>
                                                    <fixVersion>Scripting HTL Testing Content 1.0.8-1.3.1</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16335711" author="cziegeler" created="Tue, 23 Jan 2018 12:32:20 +0000"  >&lt;p&gt;I think waiting for untransformed resources makes sense, at least in our setup. It means that the installer has resources that can&apos;t be processed. Clearly, the README can&apos;t.&lt;/p&gt;

&lt;p&gt;I don&apos;t want to create special cases like excluding the README from the check or something along those lines. So I guess moving that README to somewhere else is the better option&lt;/p&gt;</comment>
                            <comment id="16335803" author="radu.cotescu" created="Tue, 23 Jan 2018 14:05:02 +0000"  >&lt;p&gt;ACK: I&apos;ll move the README file. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16335806" author="kwin" created="Tue, 23 Jan 2018 14:07:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, any idea why this issue did not occur with every execution?&lt;/p&gt;</comment>
                            <comment id="16335865" author="radu.cotescu" created="Tue, 23 Jan 2018 14:48:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/commit/771e739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 771e739&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16336259" author="cziegeler" created="Tue, 23 Jan 2018 19:10:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; No, it might be a timing issue, when everything is ready and the readme is written later on. But I&apos;m not sure about that&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p8rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7427] Package names should be all lowercase</title>
                <link>https://issues.apache.org/jira/browse/SLING-7427</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.pipes.internal.slingQuery&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Naming a Package&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132859">SLING-7427</key>
            <summary>Package names should be all lowercase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jan 2018 20:37:37 +0000</created>
                <updated>Tue, 24 Apr 2018 13:32:49 +0000</updated>
                            <resolved>Tue, 23 Jan 2018 09:23:36 +0000</resolved>
                                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16335554" author="npeltier" created="Tue, 23 Jan 2018 09:23:55 +0000"  >&lt;p&gt;thanks for your vigilance &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p7rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7421] JcrResourceBundle does not correctly support multiple base names</title>
                <link>https://issues.apache.org/jira/browse/SLING-7421</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4547&quot; title=&quot;JcrResourceBundle does not support multiple base names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4547&quot;&gt;&lt;del&gt;SLING-4547&lt;/del&gt;&lt;/a&gt; is incompete - the &lt;tt&gt;baseNames&lt;/tt&gt; property is read but not used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132662">SLING-7421</key>
            <summary>JcrResourceBundle does not correctly support multiple base names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jan 2018 11:49:39 +0000</created>
                <updated>Mon, 29 Jan 2018 14:14:33 +0000</updated>
                            <resolved>Mon, 22 Jan 2018 11:56:38 +0000</resolved>
                                                    <fixVersion>i18n 2.5.12</fixVersion>
                                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16334180" author="rombert" created="Mon, 22 Jan 2018 11:56:38 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/commit/c1d8ad1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-i18n commit c1d8ad1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - FYI&lt;/p&gt;</comment>
                            <comment id="16335677" author="kwin" created="Tue, 23 Jan 2018 12:05:53 +0000"  >&lt;p&gt;I think the base name handling should be rethought a bit.&lt;br/&gt;
Currently it is not possible to explicitly select a dictionary not having a base name (compare with &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&lt;/a&gt;). But the IT in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/blob/master/src/test/java/org/apache/sling/scripting/sightly/it/SlingSpecificsSightlyIT.java#L341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/blob/master/src/test/java/org/apache/sling/scripting/sightly/it/SlingSpecificsSightlyIT.java#L341&lt;/a&gt; is relying on that. It expects that with a given basename of &lt;tt&gt;null&lt;/tt&gt; the i18n bundle always returns the value of the dictionary in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/91e9397133eea906372aae2ea1f4a1e2e46f4c70/src/main/resources/SLING-INF/apps/sightly/locales/de.json#L25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/91e9397133eea906372aae2ea1f4a1e2e46f4c70/src/main/resources/SLING-INF/apps/sightly/locales/de.json#L25&lt;/a&gt; (i.e. the one from the dictionary without the basename). But theoretically the i18n bundle might also return the value from the dictionary with another basename according to the semantics defined in &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I will try to come up with an IT covering the actual fault here but I still think that the Sightly IT needs to be revised or we need to rethink the basename handling more globally. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Please give your input.&lt;/p&gt;</comment>
                            <comment id="16335679" author="kwin" created="Tue, 23 Jan 2018 12:10:19 +0000"  >&lt;p&gt;To clarify the impact of this bug: Whenever a resource bundle with a certain basename is requested the key of any dictionary might be returned (even of another one without the basename). This is clearly violating the specs of &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&lt;/a&gt; and IMHO is quite critical.&lt;/p&gt;</comment>
                            <comment id="16335683" author="rombert" created="Tue, 23 Jan 2018 12:13:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - that&apos;s what we risk by releasing Sling 10 as-is, right? If that is the case I will cancel the Sling 10 release vote again and re-spin once we have a release of the i18n bundle with this fix.&lt;/p&gt;</comment>
                            <comment id="16335686" author="kwin" created="Tue, 23 Jan 2018 12:16:26 +0000"  >&lt;p&gt;Yes exactly. But even after having this one fixed Sightly is making wrong assumptions on what key is returned in its IT (and other consumers might as well). I think the semantics in &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&lt;/a&gt; are kind of unexpected and we should discuss whether we should change those.&lt;/p&gt;</comment>
                            <comment id="16335722" author="radu.cotescu" created="Tue, 23 Jan 2018 12:39:13 +0000"  >&lt;p&gt;It could very well be that the Sightly IT is making wrong assumptions, but I also have the impression that the documentation from Sling&apos;s I18n is not really clear regarding the value of the &lt;tt&gt;basename&lt;/tt&gt; parameter. What&apos;s the solution?&lt;/p&gt;</comment>
                            <comment id="16335739" author="kwin" created="Tue, 23 Jan 2018 12:51:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; IMHO the documentation of Sling i18n with regards to basenames is quite clear. But I doubt whether the default behaviour for null and empty string are wisely choosen. Therefore I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7429&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7429&lt;/a&gt; to start the dicussion on how to improve it. Feel free to propose a different handling there.&lt;br/&gt;
With regards to the wrong assumptions in the IT I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7430&quot; title=&quot;Invalid assumptions in SlingSpecificsSightlyIT#testI18nBasename&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7430&quot;&gt;SLING-7430&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16335831" author="kwin" created="Tue, 23 Jan 2018 14:28:53 +0000"  >&lt;p&gt;I added an IT for this in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/commit/b1ab32bc1c470e5509c915ae97530ea933989219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-i18n/commit/b1ab32bc1c470e5509c915ae97530ea933989219&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12786190">SLING-4547</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p6jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7415] [ServiceUser WebConsole] - Remove Unnecessary Exposed Package</title>
                <link>https://issues.apache.org/jira/browse/SLING-7415</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the ServiceUser WebConsole exposes the package&#160;org.apache.sling.serviceuser.webconsole which should be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132306">SLING-7415</key>
            <summary>[ServiceUser WebConsole] - Remove Unnecessary Exposed Package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2018 22:23:34 +0000</created>
                <updated>Fri, 3 May 2019 15:38:22 +0000</updated>
                            <resolved>Fri, 26 Apr 2019 17:47:37 +0000</resolved>
                                                    <fixVersion>Service User WebConsole 1.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16827158" author="klcodanr" created="Fri, 26 Apr 2019 17:47:37 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-serviceuser-webconsole/commit/2a8c0eaaa23d63a8323304a69c303a24ba1dbd7d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-serviceuser-webconsole/commit/2a8c0eaaa23d63a8323304a69c303a24ba1dbd7d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p4xb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7414] WebConsole security provider 1.1.0 or newer do not work with the Sling Starter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7414</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When upgrading the webconsole security provider in the Sling starter to 1.2.0, the following problems occur:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the SmokeIT fails since accessing &lt;tt&gt;/system/console/bundles.json&lt;/tt&gt; redirects to an HTML login form&lt;/li&gt;
	&lt;li&gt;accessing the OSGi console at &lt;tt&gt;/system/console&lt;/tt&gt; presents a login form at &lt;a href=&quot;http://localhost:8080/system/sling/form/login?resource=%2Fsystem%2Fconsole&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/sling/form/login?resource=%2Fsystem%2Fconsole&lt;/a&gt;, but then redirects to &lt;a href=&quot;http://localhost:8080/system/console/j_security_check&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/j_security_check&lt;/a&gt; . Re-accessing &lt;tt&gt;/system/console&lt;/tt&gt; brings up the login form again.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13132195">SLING-7414</key>
            <summary>WebConsole security provider 1.1.0 or newer do not work with the Sling Starter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2018 14:20:16 +0000</created>
                <updated>Fri, 19 Oct 2018 14:16:12 +0000</updated>
                            <resolved>Mon, 15 Oct 2018 14:42:18 +0000</resolved>
                                    <version>Form Based Authentication 1.0.10</version>
                                    <fixVersion>Form Based Authentication 1.0.12</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16650289" author="rombert" created="Mon, 15 Oct 2018 14:25:46 +0000"  >&lt;p&gt;As far as I can tell, the problem is that the default login page uses an action URL of &lt;tt&gt;${requestContextPath}/j_security_check&lt;/tt&gt; . When the url is &lt;tt&gt;/system/console&lt;/tt&gt;, the form is POST-ed to &lt;tt&gt;/system/console/j_security_check&lt;/tt&gt;. In that scenario, the username and password request parameters are not available to the &lt;tt&gt;SlingAuthenticator&lt;/tt&gt;. A simple fix is to POST the request to a different URL, for instance &lt;tt&gt;${contextPath}/j_security_check.&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16650308" author="rombert" created="Mon, 15 Oct 2018 14:42:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/commit/156d2c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-auth-form commit 156d2c2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13184905">SLING-7922</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p48n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7407] A thread pool with min size 1 uses only 1 thread for processing</title>
                <link>https://issues.apache.org/jira/browse/SLING-7407</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a thread pool is configured like below&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; org.apache.sling.commons.threads.impl.DefaultThreadPool.factory-oak
    name=&quot;oak&quot;
    minPoolSize=I&quot;1&quot;
    maxPoolSize=I&quot;5&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then only 1 thread would be used even if multiple jobs are assigned to the pool. This happens because of strange behaviour of Java &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ThreadPoolExecutor&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If there are more than corePoolSize but less than maximumPoolSize threads running, a new thread will be created only &lt;b&gt;if the queue is full&lt;/b&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With unbounded queue used this lead to current behaviour. As a fix Sling Thread Pool should adapt such a config &lt;/p&gt;</description>
                <environment></environment>
        <key id="13132165">SLING-7407</key>
            <summary>A thread pool with min size 1 uses only 1 thread for processing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2018 12:28:44 +0000</created>
                <updated>Thu, 2 Nov 2023 17:21:48 +0000</updated>
                            <resolved>Mon, 22 Jan 2018 10:53:50 +0000</resolved>
                                                    <fixVersion>Commons Threads 3.2.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16332409" author="egli" created="Fri, 19 Jan 2018 15:36:20 +0000"  >&lt;ul&gt;
	&lt;li&gt;committed change in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/2c637f96d1c0db99c3bbd1a4bbf56eac7621665a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/2c637f96d1c0db99c3bbd1a4bbf56eac7621665a&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could you please have a quick review of the above change before I release, thx!&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16332432" author="cziegeler" created="Fri, 19 Jan 2018 15:50:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Lgtm, thanks - not sure if we should log with level warn, info or debug might be ok as well.&lt;/p&gt;</comment>
                            <comment id="16332464" author="egli" created="Fri, 19 Jan 2018 16:05:16 +0000"  >&lt;p&gt;good point, &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/d91ee5fa57b2d8f2f9738d377663bc2f97f1aa59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;lowered to info&lt;/a&gt;, perhaps useful to have at info for visibility as we&apos;re changing a user&apos;s config.&lt;/p&gt;</comment>
                            <comment id="16332596" author="egli" created="Fri, 19 Jan 2018 17:38:36 +0000"  >&lt;p&gt;note that unfortunately the commit was done with my wrong user (@adobe.com instead of @apache.org) - but I hope this is fine&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#FF0000&quot;&gt;EDIT&lt;/font&gt;: changed the author back to @apache.org using the steps described&#160;in &lt;a href=&quot;https://stackoverflow.com/questions/3042437/change-commit-author-at-one-specific-commit&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this guide&lt;/a&gt; and doing a &lt;tt&gt;git push -f&lt;/tt&gt; (force) subsequently. Problem was that my git client was set to use the other email address globally (which you can change following &lt;a href=&quot;https://help.github.com/articles/setting-your-commit-email-address-in-git/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;these steps here&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13556566">SLING-12128</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p41z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7405] [o.a.s.testing.clients] The poller in {{Polling}} should wait for the delay even in case of exceptions</title>
                <link>https://issues.apache.org/jira/browse/SLING-7405</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case of an exception, &lt;a href=&quot;https://github.com/andreituicu/sling-org-apache-sling-testing-clients/blob/master/src/main/java/org/apache/sling/testing/clients/util/poller/Polling.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Polling#poll&lt;/a&gt; doesn&apos;t get to the &lt;tt&gt;Thread.sleep&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132138">SLING-7405</key>
            <summary>[o.a.s.testing.clients] The poller in {{Polling}} should wait for the delay even in case of exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2018 10:35:39 +0000</created>
                <updated>Fri, 19 Jan 2018 10:41:50 +0000</updated>
                            <resolved>Fri, 19 Jan 2018 10:37:32 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.1.12</version>
                                    <fixVersion>Apache Sling Testing Clients 1.2.0</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16332093" author="andrei.dulvac" created="Fri, 19 Jan 2018 10:37:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.tuicu&quot; class=&quot;user-hover&quot; rel=&quot;andrei.tuicu&quot;&gt;andrei.tuicu&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p3vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7404] ObjectModel and similar classes need consistent null checks</title>
                <link>https://issues.apache.org/jira/browse/SLING-7404</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.compiler.util.ObjectModel&lt;/tt&gt; and similar classes need consistent null checks, so that none of the public methods can throw a &lt;tt&gt;NullPointerException&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131950">SLING-7404</key>
            <summary>ObjectModel and similar classes need consistent null checks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2018 16:50:02 +0000</created>
                <updated>Thu, 1 Feb 2018 16:02:08 +0000</updated>
                            <resolved>Fri, 19 Jan 2018 14:14:34 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.38</version>
                    <version>Scripting HTL Compiler 1.0.12</version>
                    <version>Scripting HTL Java Compiler 1.0.12</version>
                                    <fixVersion>Scripting HTL Engine 1.0.48-1.3.1</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.20-1.3.1</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.22-1.3.1</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16332264" author="githubbot" created="Fri, 19 Jan 2018 13:42:06 +0000"  >&lt;p&gt;raducotescu opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332265" author="githubbot" created="Fri, 19 Jan 2018 13:42:09 +0000"  >&lt;p&gt;raducotescu opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332266" author="githubbot" created="Fri, 19 Jan 2018 13:42:11 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332287" author="githubbot" created="Fri, 19 Jan 2018 13:59:21 +0000"  >&lt;p&gt;raducotescu closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332288" author="githubbot" created="Fri, 19 Jan 2018 14:00:02 +0000"  >&lt;p&gt;raducotescu closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332292" author="githubbot" created="Fri, 19 Jan 2018 14:02:39 +0000"  >&lt;p&gt;raducotescu closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7404&quot; title=&quot;ObjectModel and similar classes need consistent null checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7404&quot;&gt;&lt;del&gt;SLING-7404&lt;/del&gt;&lt;/a&gt; - ObjectModel and similar classes need consistent null checks&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16332301" author="radu.cotescu" created="Fri, 19 Jan 2018 14:14:23 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/commit/0afdc96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 0afdc96&lt;/a&gt;, &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/commit/e9bdb14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit e9bdb14&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/d8bfb67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit d8bfb67&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13097314">SLING-7085</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p2qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7402] Sling Server Icon is all red</title>
                <link>https://issues.apache.org/jira/browse/SLING-7402</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When creating a new server the &quot;Sling Server (external)&quot; item has a completely red icon (see attached screenshot)&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12906651/12906651_Sling_Server_Icon_wrong.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13131917">SLING-7402</key>
            <summary>Sling Server Icon is all red</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2018 15:18:27 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:33 +0000</updated>
                            <resolved>Thu, 18 Jan 2018 21:39:15 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.2.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16330655" author="kwin" created="Thu, 18 Jan 2018 15:46:21 +0000"  >&lt;p&gt;I tested with the p2 repo from &lt;a href=&quot;https://dist.apache.org/repos/dist/dev/sling/ide-tooling-1.2.0/org.apache.sling.ide.p2update-1.2.0.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dist.apache.org/repos/dist/dev/sling/ide-tooling-1.2.0/org.apache.sling.ide.p2update-1.2.0.zip&lt;/a&gt; and the contained plugin &lt;tt&gt;org.apache.sling.ide.eclipse-ui_1.2.0.jar&lt;/tt&gt; does not have an &lt;tt&gt;icons&lt;/tt&gt; directory (&lt;a href=&quot;https://github.com/apache/sling-ide-tooling/tree/master/eclipse-ui/icons&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-ide-tooling/tree/master/eclipse-ui/icons&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16330720" author="rombert" created="Thu, 18 Jan 2018 16:26:44 +0000"  >&lt;p&gt;I think I know the root cause. Apparently the jar names are mixed up. For instance the sightly-ui bundle is named as the m2e-ui bundle should be. I think this is an error in the code signing plugin I used. So probably I need to redo the release. Or - just this once, rename the files in-place.&lt;/p&gt;</comment>
                            <comment id="16330723" author="kwin" created="Thu, 18 Jan 2018 16:29:04 +0000"  >&lt;p&gt;This is not only a matter of renaming but also of moving files, because &lt;tt&gt;org.apache.sling.ide.eclipse-sightly-core_1.2.0.jar&lt;/tt&gt; is currently placed below &lt;tt&gt;plugins&lt;/tt&gt; but is in fact a feature.&lt;/p&gt;</comment>
                            <comment id="16331273" author="rombert" created="Thu, 18 Jan 2018 21:39:15 +0000"  >&lt;p&gt;Thanks for catching this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;! I&apos;ve re-tested on a fresh instance and the icon is appears correctly for me. The code signing fixes are in &lt;a href=&quot;https://github.com/apache/sling-whiteboard/commit/f5f84bb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit f5f84bb&lt;/a&gt; and should fix the weird issues that you&apos;ve encountered.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12906651" name="Sling_Server_Icon_wrong.png" size="70210" author="kwin" created="Thu, 18 Jan 2018 15:18:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p2j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7385] Unable to import from repository - No valid filter found</title>
                <link>https://issues.apache.org/jira/browse/SLING-7385</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create a Sling content project using the New Project wizard&lt;/li&gt;
	&lt;li&gt;Right-click on the jcr_root directory and select import&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The dialog pops up, but it says that &quot;No valid filter found in this project!&quot; and the &apos;Finish&apos; button is disabled&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131192">SLING-7385</key>
            <summary>Unable to import from repository - No valid filter found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jan 2018 10:18:29 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:36 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 16:43:27 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16327339" author="rombert" created="Tue, 16 Jan 2018 16:30:15 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-ide-tooling/commit/2e01d9e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 2e01d9e6&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16327341" author="rombert" created="Tue, 16 Jan 2018 16:32:12 +0000"  >&lt;p&gt;Actually the fix is incomplete - the error is gone but the finish button is still not enabled.&lt;/p&gt;</comment>
                            <comment id="16327354" author="rombert" created="Tue, 16 Jan 2018 16:43:27 +0000"  >&lt;p&gt;Follow-up fix in &lt;a href=&quot;https://github.com/apache/sling-ide-tooling/commit/3750fbff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 3750fbff&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12906208" name="import-dialog.png" size="38353" author="rombert" created="Tue, 16 Jan 2018 10:18:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0klu7:ii</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7383] Update to Oak 1.6.8</title>
                <link>https://issues.apache.org/jira/browse/SLING-7383</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13131096">SLING-7383</key>
            <summary>Update to Oak 1.6.8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jan 2018 20:45:53 +0000</created>
                <updated>Mon, 15 Jan 2018 20:48:55 +0000</updated>
                            <resolved>Mon, 15 Jan 2018 20:48:55 +0000</resolved>
                                                    <fixVersion>Starter 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oxhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7380] Querying maps with Integer keys returns null</title>
                <link>https://issues.apache.org/jira/browse/SLING-7380</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Querying maps with &lt;tt&gt;Integer&lt;/tt&gt; keys returns &lt;tt&gt;null&lt;/tt&gt; in HTL. The following code can be used to reproduce the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pre data-sly-use.m=&lt;span class=&quot;code-quote&quot;&gt;&quot;MapsPojo&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
Integer Map: \${m.INTEGER_MAP[&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;]}: ${m.INTEGER_MAP[&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;]}
Strings Map: \${m.STRINGS_MAP[1]}: ${m.STRINGS_MAP[1]}
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pre&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MapsPojo {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; INTEGER_MAP = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;() {{
        put(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, 1);
    }};

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; STRINGS_MAP = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;() {{
        put(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;);
    }};


}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The expected output is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
Integer Map: ${m.INTEGER_MAP[&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;]}: 1
Strings Map: ${m.STRINGS_MAP[1]}: one
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the current output is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
Integer Map: ${m.INTEGER_MAP[&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;]}: 1
Strings Map: ${m.STRINGS_MAP[1]}:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13131012">SLING-7380</key>
            <summary>Querying maps with Integer keys returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jan 2018 12:42:35 +0000</created>
                <updated>Thu, 1 Feb 2018 16:02:09 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 10:49:49 +0000</resolved>
                                    <version>Scripting HTL Compiler 1.0.12</version>
                    <version>Scripting HTL Java Compiler 1.0.12</version>
                                    <fixVersion>Scripting HTL Compiler 1.0.20-1.3.1</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.22-1.3.1</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16326215" author="githubbot" created="Mon, 15 Jan 2018 13:09:30 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7380&quot; title=&quot;Querying maps with Integer keys returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7380&quot;&gt;&lt;del&gt;SLING-7380&lt;/del&gt;&lt;/a&gt; - Querying maps with Integer keys returns null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;allow maps with any type of key to be queried directly&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16326915" author="githubbot" created="Tue, 16 Jan 2018 09:12:58 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7380&quot; title=&quot;Querying maps with Integer keys returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7380&quot;&gt;&lt;del&gt;SLING-7380&lt;/del&gt;&lt;/a&gt; - Querying maps with Integer keys returns null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;corrected object property resolution in `org.apache.sling.scripting.sightly.render.AbstractRuntimeObjectModel#resolveProperty`&lt;br/&gt;
   and `org.apache.sling.scripting.sightly.render.AbstractRuntimeObjectModel#getProperty`&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16326949" author="githubbot" created="Tue, 16 Jan 2018 09:58:34 +0000"  >&lt;p&gt;raducotescu closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7380&quot; title=&quot;Querying maps with Integer keys returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7380&quot;&gt;&lt;del&gt;SLING-7380&lt;/del&gt;&lt;/a&gt; - Querying maps with Integer keys returns null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16326951" author="githubbot" created="Tue, 16 Jan 2018 10:04:15 +0000"  >&lt;p&gt;raducotescu closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7380&quot; title=&quot;Querying maps with Integer keys returns null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7380&quot;&gt;&lt;del&gt;SLING-7380&lt;/del&gt;&lt;/a&gt; - Querying maps with Integer keys returns null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16326994" author="radu.cotescu" created="Tue, 16 Jan 2018 10:49:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/commit/0d962c0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 0d962c0&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/commit/34ca236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 34ca236&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3owzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7379] Fix Issues with Gulp Usage in Launchpad Content</title>
                <link>https://issues.apache.org/jira/browse/SLING-7379</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The front end code for the Launchpad Content bundle uses&#160;Gulp for it&apos;s build, however:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This is not integrated into the Maven build&lt;/li&gt;
	&lt;li&gt;Running this build updates files in source control&lt;/li&gt;
	&lt;li&gt;Running this build adds a large number of files in the node_modules folder into the built artifact&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13130790">SLING-7379</key>
            <summary>Fix Issues with Gulp Usage in Launchpad Content</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Jan 2018 14:20:59 +0000</created>
                <updated>Fri, 2 Feb 2018 10:08:50 +0000</updated>
                            <resolved>Mon, 15 Jan 2018 06:06:33 +0000</resolved>
                                    <version>Launchpad Content 2.0.12</version>
                                    <fixVersion>Launchpad Content 2.0.14</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16325914" author="klcodanr" created="Mon, 15 Jan 2018 06:06:33 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-content/commit/0e7b2dcd664fa383c3777b892d104753c636876f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-content/commit/0e7b2dcd664fa383c3777b892d104753c636876f&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/commit/f7fdc54b9ee9289843645aba442aabfc558ad70f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-form/commit/f7fdc54b9ee9289843645aba442aabfc558ad70f&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13135732">SLING-7465</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3owdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7376] Upgrade slingstart-maven-plugin to 1.7.16</title>
                <link>https://issues.apache.org/jira/browse/SLING-7376</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7334&lt;/a&gt; the version in the pluginMgmt for slingstart-maven-plugin should be upgraded to 1.7.16 (once the release is out).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13130507">SLING-7376</key>
            <summary>Upgrade slingstart-maven-plugin to 1.7.16</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2018 12:15:56 +0000</created>
                <updated>Sat, 20 Jan 2018 20:04:18 +0000</updated>
                            <resolved>Mon, 15 Jan 2018 18:54:11 +0000</resolved>
                                                    <fixVersion>Parent 33</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16326516" author="kwin" created="Mon, 15 Jan 2018 18:54:04 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-parent/commit/07bcaa55d5d79d8b6974140f2f044f57e9b82c41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-parent/commit/07bcaa55d5d79d8b6974140f2f044f57e9b82c41&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oumn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7375] Sling Resource Merger: Moving order using overlapping children causing IndexOutOfBoundException</title>
                <link>https://issues.apache.org/jira/browse/SLING-7375</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7366&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7366&lt;/a&gt;, the order of children affected using overlap and order before is causing index out of bound exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13130505">SLING-7375</key>
            <summary>Sling Resource Merger: Moving order using overlapping children causing IndexOutOfBoundException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rishimehta">Rishi Mehta</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2018 11:49:46 +0000</created>
                <updated>Sat, 20 Jan 2018 14:49:57 +0000</updated>
                            <resolved>Fri, 12 Jan 2018 13:05:37 +0000</resolved>
                                    <version>Resource Merger 1.3.6</version>
                                    <fixVersion>Resource Merger 1.3.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16323864" author="rishimehta" created="Fri, 12 Jan 2018 11:54:17 +0000"  >&lt;p&gt;Examples:&lt;br/&gt;
OrderBefore attribute set on overlapping children&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/libs/p1/components/c1
  node1
  node2
/libs/p2/components/c1 (sling:resourceSuperType=/libs/p1/components/c1)
  node1 
  node3 (orderBefore - node2)
  node2 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is causing an Index Out of bound exception.&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16323907" author="rishimehta" created="Fri, 12 Jan 2018 12:51:35 +0000"  >&lt;p&gt;PR created at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16323921" author="cziegeler" created="Fri, 12 Jan 2018 13:05:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rishimehta&quot; class=&quot;user-hover&quot; rel=&quot;rishimehta&quot;&gt;rishimehta&lt;/a&gt; for your PR. It&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13129284">SLING-7366</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oum7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7374] Some tags for releases done before the git migration are missing</title>
                <link>https://issues.apache.org/jira/browse/SLING-7374</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; noticed the following tags are missing ( see &lt;a href=&quot;https://lists.apache.org/thread.html/748e8276091fa07e9a58144dcf0d107d8211f5517ed25bef568432d2@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Tag for org.apache.sling.testing.sling-mock-2.2.14 and others missing&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.caconfig.impl-1.4.4/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.caconfig.impl-1.4.4/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.caconfig.impl-1.4.6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.caconfig.impl-1.4.6/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/maven-sling-plugin-2.3.2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/maven-sling-plugin-2.3.2/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/maven-sling-plugin-2.3.4/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/maven-sling-plugin-2.3.4/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.servlet-helpers-1.0.2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.servlet-helpers-1.0.2/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.servlet-helpers-1.1.2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.servlet-helpers-1.1.2/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.jcr-mock-1.3.2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.jcr-mock-1.3.2/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.resourceresolver-mock-1.1.20/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.resourceresolver-mock-1.1.20/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.osgi-mock-2.3.4/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.osgi-mock-2.3.4/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.sling-mock-1.9.10/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.sling-mock-1.9.10/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.sling-mock-2.2.14/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/tags/org.apache.sling.testing.sling-mock-2.2.14/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13130501">SLING-7374</key>
            <summary>Some tags for releases done before the git migration are missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2018 11:32:13 +0000</created>
                <updated>Thu, 28 Sep 2023 14:22:10 +0000</updated>
                            <resolved>Thu, 28 Sep 2023 14:22:10 +0000</resolved>
                                                                    <component>Build and Source Control</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17770078" author="rombert" created="Thu, 28 Sep 2023 14:22:10 +0000"  >&lt;p&gt;This seems to not be important anymore&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oulb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7371] ResourceProviderTracker.updateProviderContext can cause ConcurrentModificationException</title>
                <link>https://issues.apache.org/jira/browse/SLING-7371</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The updateProviderContext method accesses the &quot;handler&quot; member outside of a &quot;synchronized (this.handler)&quot; block which can lead to a ConcurrentModificationException similar to:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.ConcurrentModificationException: null
	at java.util.HashMap$HashIterator.nextNode(HashMap.java:1442)
	at java.util.HashMap$KeyIterator.next(HashMap.java:1466)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.updateProviderContext(ResourceProviderTracker.java:484)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.activate(ResourceProviderTracker.java:352)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.register(ResourceProviderTracker.java:190)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$200(ResourceProviderTracker.java:59)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:130)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:106)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13129679">SLING-7371</key>
            <summary>ResourceProviderTracker.updateProviderContext can cause ConcurrentModificationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jan 2018 21:45:48 +0000</created>
                <updated>Wed, 17 Jan 2018 14:09:42 +0000</updated>
                            <resolved>Wed, 10 Jan 2018 16:47:40 +0000</resolved>
                                    <version>Resource Resolver 1.5.32</version>
                                    <fixVersion>Resource Resolver 1.5.34</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16319254" author="githubbot" created="Tue, 9 Jan 2018 21:55:37 +0000"  >&lt;p&gt;karlpauls opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7371&quot; title=&quot;ResourceProviderTracker.updateProviderContext can cause ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7371&quot;&gt;&lt;del&gt;SLING-7371&lt;/del&gt;&lt;/a&gt;: synchronize access to the handlers inside ResourceProvide&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;rTracker to avoid a ConcurrentModificationException.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16319255" author="karlpauls" created="Tue, 9 Jan 2018 21:56:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, does this look ok?&lt;/p&gt;</comment>
                            <comment id="16319877" author="cziegeler" created="Wed, 10 Jan 2018 08:14:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; No &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; updateProviderContext is called from two places, one of them is already using a synchronized block, the other - activate is not. The  fix is to put the sync around the call to updateProviderContext in activate.&lt;/p&gt;</comment>
                            <comment id="16319893" author="karlpauls" created="Wed, 10 Jan 2018 08:33:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I did see that but it is synchronizing on the same member - hence, it shouldn&apos;t do any harm and it seemed saver to synchronize inside the method to avoid making the same mistake (calling it without the lock) at a later point. But I don&apos;t fell strongly about it either way - I&apos;ll commit it synchronizing the call in activate. Thanks!&lt;/p&gt;</comment>
                            <comment id="16320621" author="githubbot" created="Wed, 10 Jan 2018 16:46:53 +0000"  >&lt;p&gt;karlpauls closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7371&quot; title=&quot;ResourceProviderTracker.updateProviderContext can cause ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7371&quot;&gt;&lt;del&gt;SLING-7371&lt;/del&gt;&lt;/a&gt;: synchronize access to the handlers inside ResourceProvide&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16320622" author="karlpauls" created="Wed, 10 Jan 2018 16:47:40 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oplj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7370] File system resource provider may never recover from JSON/XML syntax errors</title>
                <link>https://issues.apache.org/jira/browse/SLING-7370</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While using the file system resource provider in a development scenario, with sample content in JSON format, it turned out that the resource provider never recovered from a syntax error in a JSON file, even after the error was fixed. Only after restarting the bundle the resource was ok again. The same behaviour was then also verified with the FileVault XML format.&lt;/p&gt;

&lt;p&gt;The scenario was observed on a Sling system with multiple listeners for resource change events, which access the changed resource right after the change. It seems that there is a race in the way &lt;tt&gt;FileMonitor&lt;/tt&gt; updates the &lt;tt&gt;ContentFileCache&lt;/tt&gt; ans sends events.&lt;/p&gt;

&lt;p&gt;Sending the events after removing the cache-entry seems to fix the problem.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13129661">SLING-7370</key>
            <summary>File system resource provider may never recover from JSON/XML syntax errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jan 2018 20:48:40 +0000</created>
                <updated>Wed, 10 Jan 2018 08:06:02 +0000</updated>
                            <resolved>Wed, 10 Jan 2018 08:06:01 +0000</resolved>
                                    <version>File System Resource Provider 2.1.8</version>
                                    <fixVersion>File System Resource Provider 2.1.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16319114" author="jsedding" created="Tue, 9 Jan 2018 20:49:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; any objections to the attached patch?&lt;/p&gt;</comment>
                            <comment id="16319243" author="sseifert@pro-vision.de" created="Tue, 9 Jan 2018 21:50:29 +0000"  >&lt;p&gt;looks good to me&lt;/p&gt;</comment>
                            <comment id="16319868" author="jsedding" created="Wed, 10 Jan 2018 08:06:02 +0000"  >&lt;p&gt;Fixed with commit &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-fsresource.git;a=commitdiff;h=6790568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6790568&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12905338" name="SLING-7370.patch" size="1660" author="jsedding" created="Tue, 9 Jan 2018 20:49:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ophj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7369] Remove deprecated bndlib dependency</title>
                <link>https://issues.apache.org/jira/browse/SLING-7369</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The annotations being provided from dependency &lt;tt&gt;biz.aQute.bnd:biz.aQute.bndlib&lt;/tt&gt; are deprecated since bnd 3.2.0 (&lt;a href=&quot;https://github.com/bndtools/bnd/wiki/Changes-in-3.2.0#backwards-compatibility&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bndtools/bnd/wiki/Changes-in-3.2.0#backwards-compatibility&lt;/a&gt;) and should therefore no longer be used. The according dependency from parent should be removed.&lt;/p&gt;

&lt;p&gt;The according discussion can be found at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7347?focusedCommentId=16314706&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16314706&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7347?focusedCommentId=16314706&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16314706&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129459">SLING-7369</key>
            <summary>Remove deprecated bndlib dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jan 2018 08:32:11 +0000</created>
                <updated>Sat, 20 Jan 2018 20:04:08 +0000</updated>
                            <resolved>Tue, 9 Jan 2018 08:35:55 +0000</resolved>
                                    <version>Parent 32</version>
                                    <fixVersion>Parent 33</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16318030" author="kwin" created="Tue, 9 Jan 2018 08:35:56 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-parent/commit/c36872ef7907abb875dfdc36a17e784edcc0c4b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-parent/commit/c36872ef7907abb875dfdc36a17e784edcc0c4b9&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16318241" author="olli" created="Tue, 9 Jan 2018 10:46:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; mentioned modules in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7347&quot; title=&quot;Update plugins to the most recent versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7347&quot;&gt;&lt;del&gt;SLING-7347&lt;/del&gt;&lt;/a&gt; where &lt;tt&gt;bndlib&lt;/tt&gt; is used. In some cases &lt;tt&gt;bndlib&lt;/tt&gt; will be required in the future, e.g. Tinybundles is using  &lt;tt&gt;bndlib&lt;/tt&gt; to build bundles on-the-fly.&lt;/p&gt;</comment>
                            <comment id="16318250" author="sseifert@pro-vision.de" created="Tue, 9 Jan 2018 10:57:10 +0000"  >&lt;p&gt;it&apos;s no problem to add such a dependency to the project pom itself, no need to have it in the parent pom.&lt;/p&gt;</comment>
                            <comment id="16318254" author="kwin" created="Tue, 9 Jan 2018 10:59:59 +0000"  >&lt;p&gt;Yes, let&apos;s please add that then as project specific dependency. Having it in the dependencyMgmt is not good as it should be really rarely used. &lt;/p&gt;</comment>
                            <comment id="16318289" author="olli" created="Tue, 9 Jan 2018 11:37:57 +0000"  >&lt;p&gt;Of course it&apos;s not a problem &#8211; that was just for info. Some of those modules (have to) use a different version of &lt;tt&gt;bndlib&lt;/tt&gt; anyway (due to launchpad ITs).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13128196">SLING-7347</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oo8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7366] Sling Resource Merger: Order Before Property not being honored during resource merging</title>
                <link>https://issues.apache.org/jira/browse/SLING-7366</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6956&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6956&lt;/a&gt;, the &lt;b&gt;orderBefore&lt;/b&gt; property in resource is not honored correctly during resource merging.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129284">SLING-7366</key>
            <summary>Sling Resource Merger: Order Before Property not being honored during resource merging</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rishimehta">Rishi Mehta</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jan 2018 16:05:20 +0000</created>
                <updated>Fri, 12 Jan 2018 12:00:12 +0000</updated>
                            <resolved>Wed, 10 Jan 2018 09:54:03 +0000</resolved>
                                    <version>Resource Merger 1.3.4</version>
                                    <fixVersion>Resource Merger 1.3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16316542" author="rishimehta" created="Mon, 8 Jan 2018 16:14:46 +0000"  >&lt;p&gt;An example,&lt;br/&gt;
Order before attribute set on overlaid resource,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/libs/p1/components/c1
  node1
  node2
  node3
  node4
/libs/p2/components/c1 (sling:resourceSuperType=/libs/p1/components/c1)
  node5 (orderBefore - node2)
  node6 (orderBefore - node2)
  node7 (orderBefore - node4)
  node8 (orderBefore - node3)
  node9 (orderBefore - node3)
  node10  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should lead to this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  node1
  node5
  node6
  node2
  node8
  node9
  node3
  node7
  node4
  node10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Child Resource being added by the overlaid resource along with order before attribute set on overlaid resource,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/libs/p1/components/c1
  node1
  node2
  node3
  node4
/libs/p2/components/c1 (sling:resourceSuperType=/libs/p1/components/c1)
  node5 (orderBefore - node2)
  node6 (orderBefore - node2)
  node7 (orderBefore - node4)
  node8 (orderBefore - node3)
  node9 (orderBefore - node3)
  node10  
  node3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should lead to this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  node1
  node5
  node6
  node2
  node8
  node9
  node7
  node4
  node10
  node3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16316544" author="kwin" created="Mon, 8 Jan 2018 16:15:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rishimehta&quot; class=&quot;user-hover&quot; rel=&quot;rishimehta&quot;&gt;rishimehta&lt;/a&gt; Can you come up with a failing unit test to show that error? &lt;/p&gt;</comment>
                            <comment id="16316551" author="rishimehta" created="Mon, 8 Jan 2018 16:24:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Yes, I have the test case and the fix ready. I will shortly create a PR for you to review it.&lt;/p&gt;</comment>
                            <comment id="16316556" author="rishimehta" created="Mon, 8 Jan 2018 16:29:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; You can take a look at the test case here &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/compare/master...rishi05091989:master?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/compare/master...rishi05091989:master?expand=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16318402" author="cziegeler" created="Tue, 9 Jan 2018 13:31:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rishimehta&quot; class=&quot;user-hover&quot; rel=&quot;rishimehta&quot;&gt;rishimehta&lt;/a&gt; Could you please create a PR&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; The change looks fine to me, but could you please double check?&lt;/p&gt;</comment>
                            <comment id="16318525" author="githubbot" created="Tue, 9 Jan 2018 14:45:20 +0000"  >&lt;p&gt;rishi05091989 opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7366&quot; title=&quot;Sling Resource Merger: Order Before Property not being honored during resource merging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7366&quot;&gt;&lt;del&gt;SLING-7366&lt;/del&gt;&lt;/a&gt; OrderBefore property not being honored during resource mer&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;ging&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16319760" author="rishimehta" created="Wed, 10 Jan 2018 06:29:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I have created the PR. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Can you review the PR and release the Resource Merger module ?&lt;/p&gt;</comment>
                            <comment id="16319980" author="githubbot" created="Wed, 10 Jan 2018 09:50:31 +0000"  >&lt;p&gt;cziegeler closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7366&quot; title=&quot;Sling Resource Merger: Order Before Property not being honored during resource merging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7366&quot;&gt;&lt;del&gt;SLING-7366&lt;/del&gt;&lt;/a&gt; OrderBefore property not being honored during resource mer&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/resourcemerger/impl/MergingResourceProvider.java b/src/main/java/org/apache/sling/resourcemerger/impl/MergingResourceProvider.java&lt;br/&gt;
index 8cf6d2b..3ba9c9e 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/resourcemerger/impl/MergingResourceProvider.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/resourcemerger/impl/MergingResourceProvider.java&lt;br/&gt;
@@ -378,7 +378,6 @@ public Resource getResource(final ResolveContext&amp;lt;Void&amp;gt; ctx, final String path, f&lt;br/&gt;
                     if (orderBeforeIndex &amp;gt; -1) &lt;/p&gt;
{
                         candidates.add(orderBeforeIndex, holder);
                         candidates.remove(candidates.size() - 1);
-                        previousChildPositionInCandidateList = orderBeforeIndex;
                     }
&lt;p&gt; else {&lt;br/&gt;
                         // or reorder because overlaid resource has a different order&lt;br/&gt;
                         if (childPositionInCandidateList != -1 &amp;amp;&amp;amp; previousChildPositionInCandidateList != -1) &lt;/p&gt;
{
diff --git a/src/test/java/org/apache/sling/resourcemerger/impl/CommonMergedResourceProviderTest.java b/src/test/java/org/apache/sling/resourcemerger/impl/CommonMergedResourceProviderTest.java
index c213d99..07c1904 100644
--- a/src/test/java/org/apache/sling/resourcemerger/impl/CommonMergedResourceProviderTest.java
+++ b/src/test/java/org/apache/sling/resourcemerger/impl/CommonMergedResourceProviderTest.java
@@ -402,12 +402,20 @@ public void testOrderBeingModifiedThroughOrderBefore() throws PersistenceExcepti
         MockHelper.create(this.resolver)
             .resource(&quot;/apps/base/child1&quot;)
             .resource(&quot;/apps/base/child2&quot;)
-            .resource(&quot;/apps/overlay/child3&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child2&quot;)
+            .resource(&quot;/apps/base/child3&quot;)
+            .resource(&quot;/apps/base/child4&quot;)
+            .resource(&quot;/apps/overlay/child5&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child2&quot;)
+            .resource(&quot;/apps/overlay/child6&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child2&quot;)
+            .resource(&quot;/apps/overlay/child7&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child4&quot;)
+            .resource(&quot;/apps/overlay/child8&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child3&quot;)
+            .resource(&quot;/apps/overlay/child9&quot;).p(MergedResourceConstants.PN_ORDER_BEFORE, &quot;child3&quot;)
+            .resource(&quot;/apps/overlay/child10&quot;)
+            .resource(&quot;/apps/overlay/child3&quot;)
             .commit();
         Resource mergedResource = this.provider.getResource(ctx, &quot;/merged&quot;, ResourceContext.EMPTY_CONTEXT, null);
         // convert the iterator returned by list children into an iterable (to be able to perform some tests)
         IteratorIterable&amp;lt;Resource&amp;gt; iterable = new IteratorIterable&amp;lt;Resource&amp;gt;(provider.listChildren(ctx, mergedResource), true);
         
-        Assert.assertThat(iterable, Matchers.contains(ResourceMatchers.name(&quot;child1&quot;),ResourceMatchers.name(&quot;child3&quot;), ResourceMatchers.name(&quot;child2&quot;)));
+        Assert.assertThat(iterable, Matchers.contains(ResourceMatchers.name(&quot;child1&quot;),ResourceMatchers.name(&quot;child5&quot;), ResourceMatchers.name(&quot;child6&quot;), ResourceMatchers.name(&quot;child2&quot;), ResourceMatchers.name(&quot;child8&quot;),ResourceMatchers.name(&quot;child9&quot;), ResourceMatchers.name(&quot;child7&quot;),ResourceMatchers.name(&quot;child4&quot;),ResourceMatchers.name(&quot;child10&quot;),ResourceMatchers.name(&quot;child3&quot;)));
     }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16319986" author="cziegeler" created="Wed, 10 Jan 2018 09:54:03 +0000"  >&lt;p&gt;Thanks for the PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rishimehta&quot; class=&quot;user-hover&quot; rel=&quot;rishimehta&quot;&gt;rishimehta&lt;/a&gt;. It&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13130505">SLING-7375</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3on5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7365] Some JSP tests fail under Java 10 -  parameterized types are only available if source level is 1.5 or greater</title>
                <link>https://issues.apache.org/jira/browse/SLING-7365</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;An error occurred at line: 792 in the generated java file
Syntax error, parameterized types are only available if source level is 1.5 or greater
	at org.apache.sling.scripting.jsp.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
	at org.apache.sling.scripting.jsp.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:136)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:304)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:282)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:269)
	at org.apache.sling.scripting.jsp.jasper.JspCompilationContext.compile(JspCompilationContext.java:501)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.prepareServlet(JspServletWrapper.java:427)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:486)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.NoPropertyFilter.doFilter(NoPropertyFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.SlingFilter.doFilter(SlingFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
	at org.apache.sling.junit.impl.servlet.TestLogServlet$TestNameLoggingFilter.doFilter(TestLogServlet.java:257)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at org.apache.felix.http.bridge.internal.BridgeActivator$1.service(BridgeActivator.java:83)
	at org.apache.felix.http.proxy.ProxyServlet.service(ProxyServlet.java:123)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at org.apache.sling.launchpad.base.webapp.SlingServletDelegate.service(SlingServletDelegate.java:286)
	at org.apache.sling.launchpad.webapp.SlingServlet.service(SlingServlet.java:175)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:837)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
	at org.eclipse.jetty.server.Server.handle(Server.java:523)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)
	at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)
	at java.base/java.lang.Thread.run(Thread.java:844)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7105&quot; title=&quot;Some JSP tests fail under Java 9 -  parameterized types are only available if source level is 1.5 or greater&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7105&quot;&gt;&lt;del&gt;SLING-7105&lt;/del&gt;&lt;/a&gt; just this time for Java 10 (latest EA). We should try to come up with a more &quot;persistent&quot; fix as the Java release cycle will be shorter in the future and Java 10 will be released in March 2018 (&lt;a href=&quot;http://openjdk.java.net/projects/jdk/10/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/projects/jdk/10/&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129281">SLING-7365</key>
            <summary>Some JSP tests fail under Java 10 -  parameterized types are only available if source level is 1.5 or greater</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                            <label>Sling-10-ReleaseNotes</label>
                    </labels>
                <created>Mon, 8 Jan 2018 15:48:02 +0000</created>
                <updated>Thu, 3 Jun 2021 12:14:26 +0000</updated>
                            <resolved>Mon, 15 Jan 2018 09:36:11 +0000</resolved>
                                    <version>Commons Compiler 2.3.4</version>
                                    <fixVersion>Commons Compiler 2.3.6</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16316522" author="kwin" created="Mon, 8 Jan 2018 15:54:11 +0000"  >&lt;p&gt;ECJ now supports proper release versions (i.e. the same as javac): &lt;a href=&quot;http://git.eclipse.org/c/gerrit/jdt/eclipse.jdt.core.git/commit/org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/impl/CompilerOptions.java?id=4f45a6731c312108c51502feb3fbac24aa3a8fd3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git.eclipse.org/c/gerrit/jdt/eclipse.jdt.core.git/commit/org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/impl/CompilerOptions.java?id=4f45a6731c312108c51502feb3fbac24aa3a8fd3&lt;/a&gt; (&lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=480992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=480992&lt;/a&gt;) but only up to version 9. I think it is reasonable to fall back to the closest known version in case you are running with an unknown java version instead of falling back to Java 5.&lt;/p&gt;</comment>
                            <comment id="16316529" author="kwin" created="Mon, 8 Jan 2018 15:58:27 +0000"  >&lt;p&gt;The correct GAV for ECJ is &lt;tt&gt;org.eclipse.jdt:ecj&lt;/tt&gt;. We should definitely switch to that. Other GAVs are not published by Eclipse (&lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=499019#c19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=499019#c19&lt;/a&gt;). The latest version (supporting Java 9) is 3.13.100  (equals the one shipped with Oxygen.2).&lt;/p&gt;</comment>
                            <comment id="16316782" author="rombert" created="Mon, 8 Jan 2018 18:57:16 +0000"  >&lt;p&gt;I suggest that if we find an unknown Java version we log a WARN message ( once, not for every compilation ) and then assume it&apos;s the most recent known version - Java 9 in our case. This should work nicely for the purpose of running newer Java versions without adding explicit support.&lt;/p&gt;</comment>
                            <comment id="16323942" author="kwin" created="Fri, 12 Jan 2018 13:12:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Please check out the PR at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-compiler/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-compiler/pull/1&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Regarding logging, it is hard to do that only once, as the compiler is not only used by JSP but also from the Java Scripting Compiler. I would therefore rather log this issue every time an invalid source/target version is given.&lt;/p&gt;

&lt;p&gt;Although this is quite verbose in case you compile JSPs on Java 10 or above I don&apos;t see a good way to log that only once per calling bundle. Once after the commons-compiler is started is IMHO not often enough. It could also point to a bundle parameterizing the commons compiler in a wrong fashion.&lt;/p&gt;</comment>
                            <comment id="16326033" author="githubbot" created="Mon, 15 Jan 2018 09:34:49 +0000"  >&lt;p&gt;rombert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7365&quot; title=&quot;Some JSP tests fail under Java 10 -  parameterized types are only available if source level is 1.5 or greater&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7365&quot;&gt;&lt;del&gt;SLING-7365&lt;/del&gt;&lt;/a&gt; for unsupported java version fall back to Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-compiler/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-compiler/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16326035" author="rombert" created="Mon, 15 Jan 2018 09:36:11 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-compiler/commit/e6ae4d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit e6ae4d4&lt;/a&gt; , thanks Konrad!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13079447">SLING-6952</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13099674">SLING-7105</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13148902">SLING-7561</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3on5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7363] Dictionary is not always invalidated for resource bundles using sling:basename</title>
                <link>https://issues.apache.org/jira/browse/SLING-7363</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the sling:basename property, there are two dictionaries that will have the language root path, namely Key&amp;lt;null, language&amp;gt; and Key&amp;lt;basename, language&amp;gt;. The current implementation does not invalidate both resource bundles but only the first one that is found&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129225">SLING-7363</key>
            <summary>Dictionary is not always invalidated for resource bundles using sling:basename</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jan 2018 12:24:36 +0000</created>
                <updated>Mon, 29 Jan 2018 14:14:40 +0000</updated>
                            <resolved>Mon, 8 Jan 2018 14:12:43 +0000</resolved>
                                    <version>i18n 2.5.10</version>
                                    <fixVersion>i18n 2.5.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16316208" author="royteeuwen" created="Mon, 8 Jan 2018 12:27:09 +0000"  >&lt;p&gt;I have created a fix using a github pr: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-i18n/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16316381" author="kwin" created="Mon, 8 Jan 2018 14:12:43 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/commit/bedcbccacfefe91331ca64ee7ea8ce4c6997c13c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-i18n/commit/bedcbccacfefe91331ca64ee7ea8ce4c6997c13c&lt;/a&gt;.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=royteeuwen&quot; class=&quot;user-hover&quot; rel=&quot;royteeuwen&quot;&gt;royteeuwen&lt;/a&gt; for the contribution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3omsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7361] CAConfig Impl: Fix potential NPE in ConfigurationBuilder</title>
                <link>https://issues.apache.org/jira/browse/SLING-7361</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the method ConfigurationBuilderImpl.convert accesses a configResource object which may be null at this position.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13129203">SLING-7361</key>
            <summary>CAConfig Impl: Fix potential NPE in ConfigurationBuilder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>contextaware-config</label>
                    </labels>
                <created>Mon, 8 Jan 2018 09:54:58 +0000</created>
                <updated>Fri, 19 Jan 2018 10:39:49 +0000</updated>
                            <resolved>Mon, 8 Jan 2018 09:55:55 +0000</resolved>
                                    <version>Context-Aware Configuration Impl 1.4.8</version>
                                    <fixVersion>Context-Aware Configuration Impl 1.4.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16315986" author="sseifert@pro-vision.de" created="Mon, 8 Jan 2018 09:55:55 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-caconfig-impl/commit/394418f7fc579d846c8ef9cb2361b7199ec7dbe2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-caconfig-impl/commit/394418f7fc579d846c8ef9cb2361b7199ec7dbe2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3omnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7359] DistributionEventDistributeDistributionTrigger causes distribution loop</title>
                <link>https://issues.apache.org/jira/browse/SLING-7359</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The DistributionEventDistributeDistributionTrigger &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTrigger.java#L67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;is listening for org/apache/sling/distribution/agent/package/distributed events&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Assuming we have &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;an agent configured for the allowed root path /foo with DistributionEventDistributeDistributionTrigger &quot;trigger-on-foo-distrib&quot; and&lt;/li&gt;
	&lt;li&gt;a DistributionEventDistributeDistributionTrigger &quot;trigger-on-foo-distrib&quot; for /foo as well,&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the agent&apos;s successful delivery will trigger another distribution on the same agent. &lt;/p&gt;

&lt;p&gt;To circumvent that the DistributionEventDistributeDistributionTrigger should check the DistributionRequestHandler against the component that fired the event it handles and should stop propagation when the event&apos;s origin is the same request handler. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13129083">SLING-7359</key>
            <summary>DistributionEventDistributeDistributionTrigger causes distribution loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="diru">Dirk Rudolph</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jan 2018 13:15:28 +0000</created>
                <updated>Tue, 9 Jan 2018 10:25:13 +0000</updated>
                            <resolved>Tue, 9 Jan 2018 10:25:13 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16315307" author="githubbot" created="Sun, 7 Jan 2018 14:18:11 +0000"  >&lt;p&gt;Buuhuu opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is done by exposing information of the trigger.DispatcherRequestHandler to the trigger implementations, which allow them to filter events they are handling. The DistributionEventDistributeDistributionTrigger has been changed to not propagate events to the handler which have there origin at the handler&apos;s owner itself. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16318183" author="githubbot" created="Tue, 9 Jan 2018 10:10:55 +0000"  >&lt;p&gt;tteofili commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356239600&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356239600&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Buuhuu could you please rebase against latest trunk, merging of PR #2 requires now &lt;em&gt;TestSerializer&lt;/em&gt; in &lt;em&gt;FileDistributionPackageBuilderTest&lt;/em&gt; implements #getContentType.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16318191" author="githubbot" created="Tue, 9 Jan 2018 10:13:43 +0000"  >&lt;p&gt;tteofili commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356240324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356240324&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   sorry, it was my mistake not having rebased PR #2 when merging it. I&apos;ll fix it and then we can apply this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16318195" author="githubbot" created="Tue, 9 Jan 2018 10:16:49 +0000"  >&lt;p&gt;Buuhuu commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356241115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356241115&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I updated the PR already&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16318196" author="githubbot" created="Tue, 9 Jan 2018 10:17:16 +0000"  >&lt;p&gt;tteofili closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgent.java b/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgent.java&lt;br/&gt;
index 68b3ebd..1d97a89 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgent.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgent.java&lt;br/&gt;
@@ -297,7 +297,7 @@ public void enable() {&lt;br/&gt;
         active = true;&lt;/p&gt;

&lt;p&gt;         // register triggers if any&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;agentBasedRequestHandler = new TriggerAgentRequestHandler(this, agentAuthenticationInfo, log, active);&lt;br/&gt;
+        agentBasedRequestHandler = new TriggerAgentRequestHandler(this, name, agentAuthenticationInfo, log, active);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         if (!isPassive()) {&lt;br/&gt;
             try {&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandler.java b/src/main/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandler.java&lt;br/&gt;
index 34badbc..07851dc 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandler.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandler.java&lt;br/&gt;
@@ -24,6 +24,7 @@&lt;br/&gt;
 import org.apache.sling.api.resource.ResourceResolver;&lt;br/&gt;
 import org.apache.sling.distribution.DistributionRequest;&lt;br/&gt;
 import org.apache.sling.distribution.agent.DistributionAgent;&lt;br/&gt;
+import org.apache.sling.distribution.component.impl.DistributionComponentKind;&lt;br/&gt;
 import org.apache.sling.distribution.log.impl.DefaultDistributionLog;&lt;br/&gt;
 import org.apache.sling.distribution.trigger.DistributionRequestHandler;&lt;br/&gt;
 import org.apache.sling.distribution.util.impl.DistributionUtils;&lt;br/&gt;
@@ -36,8 +37,10 @@&lt;br/&gt;
     private final DefaultDistributionLog log;&lt;br/&gt;
     private final boolean active;&lt;br/&gt;
     private final DistributionAgent agent;&lt;br/&gt;
+    private final String agentName;&lt;/p&gt;

&lt;p&gt;     public TriggerAgentRequestHandler(@Nonnull DistributionAgent agent,&lt;br/&gt;
+                                      @Nonnull String agentName,&lt;br/&gt;
                                       @Nonnull SimpleDistributionAgentAuthenticationInfo authenticationInfo,&lt;br/&gt;
                                       @Nonnull DefaultDistributionLog log,&lt;br/&gt;
                                       boolean active) &lt;/p&gt;
{
@@ -45,6 +48,15 @@ public TriggerAgentRequestHandler(@Nonnull DistributionAgent agent,
         this.log = log;
         this.active = active;
         this.agent = agent;
+        this.agentName = agentName;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public String getName() &lt;/p&gt;
{
+        return agentName;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public DistributionComponentKind getComponentKind() &lt;/p&gt;
{
+        return DistributionComponentKind.AGENT;
     }

&lt;p&gt;     public void handle(@Nullable ResourceResolver resourceResolver, @Nonnull DistributionRequest request) &lt;/p&gt;
{
@@ -77,4 +89,11 @@ public void handle(@Nullable ResourceResolver resourceResolver, @Nonnull Distrib
         }

&lt;p&gt;     }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String toString() {&lt;br/&gt;
+        return &quot;TriggerAgentRequestHandler&lt;/p&gt;
{&quot; +
+                &quot;agentName=&apos;&quot; + agentName+ &apos;\&apos;&apos; +
+                &apos;}
&lt;p&gt;&apos;;&lt;br/&gt;
+    }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/distribution/servlet/DistributionTriggerServlet.java b/src/main/java/org/apache/sling/distribution/servlet/DistributionTriggerServlet.java&lt;br/&gt;
index 2fd9e37..fc3f771 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/distribution/servlet/DistributionTriggerServlet.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/distribution/servlet/DistributionTriggerServlet.java&lt;br/&gt;
@@ -32,6 +32,7 @@&lt;br/&gt;
 import org.apache.sling.api.servlets.SlingAllMethodsServlet;&lt;br/&gt;
 import org.apache.sling.distribution.DistributionRequest;&lt;br/&gt;
 import org.apache.sling.distribution.common.DistributionException;&lt;br/&gt;
+import org.apache.sling.distribution.component.impl.DistributionComponentKind;&lt;br/&gt;
 import org.apache.sling.distribution.resources.DistributionResourceTypes;&lt;br/&gt;
 import org.apache.sling.distribution.trigger.DistributionRequestHandler;&lt;br/&gt;
 import org.apache.sling.distribution.trigger.DistributionTrigger;&lt;br/&gt;
@@ -80,6 +81,14 @@ protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse r&lt;br/&gt;
         final PrintWriter writer = response.getWriter();&lt;/p&gt;

&lt;p&gt;         DistributionRequestHandler distributionRequestHandler = new DistributionRequestHandler() {&lt;br/&gt;
+            public String getName() &lt;/p&gt;
{
+                return DistributionTriggerServlet.this.getClass().getSimpleName();
+            }
&lt;p&gt;+&lt;br/&gt;
+            public DistributionComponentKind getComponentKind() &lt;/p&gt;
{
+                return null; // unknown
+            }
&lt;p&gt;+&lt;br/&gt;
             public void handle(@Nullable ResourceResolver resourceResolver, @Nonnull DistributionRequest request) &lt;/p&gt;
{
                 writeEvent(writer, request);
             }
&lt;p&gt;diff --git a/src/main/java/org/apache/sling/distribution/trigger/DistributionRequestHandler.java b/src/main/java/org/apache/sling/distribution/trigger/DistributionRequestHandler.java&lt;br/&gt;
index 93d7271..d690ff0 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/distribution/trigger/DistributionRequestHandler.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/distribution/trigger/DistributionRequestHandler.java&lt;br/&gt;
@@ -18,12 +18,14 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.distribution.trigger;&lt;/p&gt;

&lt;p&gt;+import javax.annotation.CheckForNull;&lt;br/&gt;
 import javax.annotation.Nonnull;&lt;br/&gt;
 import javax.annotation.Nullable;&lt;/p&gt;

&lt;p&gt; import aQute.bnd.annotation.ConsumerType;&lt;br/&gt;
 import org.apache.sling.api.resource.ResourceResolver;&lt;br/&gt;
 import org.apache.sling.distribution.DistributionRequest;&lt;br/&gt;
+import org.apache.sling.distribution.component.impl.DistributionComponentKind;&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;An handler for 
{@link org.apache.sling.distribution.DistributionRequest}
&lt;p&gt;s passed to a&lt;br/&gt;
@@ -32,6 +34,20 @@&lt;br/&gt;
 @ConsumerType&lt;br/&gt;
 public interface DistributionRequestHandler &lt;/p&gt;
{
 
+    /**
+     * returns the name of the owner of this request handler.
+     * @return
+     */
+    @Nonnull
+    String getName();
+
+    /**
+     * returns the kind of component that owns this request handler. Might be null, for unknown kinds of components.
+     * @return
+     */
+    @CheckForNull
+    DistributionComponentKind getComponentKind();
+
     /**
      * handle the request according to the trigger implementation.
      *
diff --git a/src/main/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTrigger.java b/src/main/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTrigger.java
index b7ea954..2e037a0 100644
--- a/src/main/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTrigger.java
+++ b/src/main/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTrigger.java
@@ -26,6 +26,7 @@
 
 import org.apache.sling.distribution.DistributionRequestType;
 import org.apache.sling.distribution.SimpleDistributionRequest;
+import org.apache.sling.distribution.component.impl.DistributionComponentKind;
 import org.apache.sling.distribution.event.DistributionEventProperties;
 import org.apache.sling.distribution.event.DistributionEventTopics;
 import org.apache.sling.distribution.common.DistributionException;
@@ -105,6 +106,22 @@ public TriggerAgentEventListener(DistributionRequestHandler requestHandler, Stri
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         public void handleEvent(Event event) {&lt;br/&gt;
+            String originKindName = String.valueOf(event.getProperty(DistributionEventProperties.DISTRIBUTION_COMPONENT_KIND));&lt;br/&gt;
+            String originName = String.valueOf(event.getProperty(DistributionEventProperties.DISTRIBUTION_COMPONENT_NAME));&lt;br/&gt;
+&lt;br/&gt;
+            DistributionComponentKind originKind;&lt;br/&gt;
+            try &lt;/p&gt;
{
+                originKind = DistributionComponentKind.valueOf(originKindName);
+            }
&lt;p&gt; catch (IllegalArgumentException ex) {&lt;br/&gt;
+                log.debug(&quot;Unknown component kind {} of event {}.&quot;, originKindName, event);&lt;br/&gt;
+                originKind = null;&lt;br/&gt;
+            }&lt;br/&gt;
+&lt;br/&gt;
+            if (requestHandler.getName().equals(originName) &amp;amp;&amp;amp; requestHandler.getComponentKind() == originKind) {&lt;br/&gt;
+                log.info(&quot;skip chain distribution from event {} to {}&quot;, event, requestHandler);&lt;br/&gt;
+                return;&lt;br/&gt;
+            }&lt;br/&gt;
+&lt;br/&gt;
             Object actionProperty = event.getProperty(DistributionEventProperties.DISTRIBUTION_TYPE);&lt;br/&gt;
             Object pathProperty = event.getProperty(DistributionEventProperties.DISTRIBUTION_PATHS);&lt;br/&gt;
             if (actionProperty != null &amp;amp;&amp;amp; pathProperty != null) {&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandlerTest.java b/src/test/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandlerTest.java&lt;br/&gt;
index 46d6453..9f949e4 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandlerTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/distribution/agent/impl/TriggerAgentRequestHandlerTest.java&lt;br/&gt;
@@ -36,7 +36,7 @@ public void testHandleActive() throws Exception {&lt;br/&gt;
         DistributionAgent agent = mock(DistributionAgent.class);&lt;br/&gt;
         SimpleDistributionAgentAuthenticationInfo authenticationInfo = mock(SimpleDistributionAgentAuthenticationInfo.class);&lt;br/&gt;
         DefaultDistributionLog log = mock(DefaultDistributionLog.class);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TriggerAgentRequestHandler triggerAgentRequestHandler = new TriggerAgentRequestHandler(agent,&lt;br/&gt;
+        TriggerAgentRequestHandler triggerAgentRequestHandler = new TriggerAgentRequestHandler(agent, &quot;agent&quot;,&lt;br/&gt;
                 authenticationInfo, log, true);&lt;br/&gt;
         ResourceResolver resourceResolver = mock(ResourceResolver.class);&lt;br/&gt;
         DistributionRequest request = mock(DistributionRequest.class);&lt;br/&gt;
@@ -48,7 +48,7 @@ public void testHandlePassive() throws Exception 
{
         DistributionAgent agent = mock(DistributionAgent.class);
         SimpleDistributionAgentAuthenticationInfo authenticationInfo = mock(SimpleDistributionAgentAuthenticationInfo.class);
         DefaultDistributionLog log = mock(DefaultDistributionLog.class);
-        TriggerAgentRequestHandler triggerAgentRequestHandler = new TriggerAgentRequestHandler(agent,
+        TriggerAgentRequestHandler triggerAgentRequestHandler = new TriggerAgentRequestHandler(agent, &quot;name&quot;,
                 authenticationInfo, log, false);
         ResourceResolver resourceResolver = mock(ResourceResolver.class);
         DistributionRequest request = mock(DistributionRequest.class);
diff --git a/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java b/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java
index ea6072c..33fc0c2 100644
--- a/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java
+++ b/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java
@@ -62,6 +62,10 @@ public void testDefaultTempDirectory() throws DistributionException, IOException
             }
&lt;p&gt;         }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        @Override public String getContentType() &lt;/p&gt;
{
+            return &quot;text/plain&quot;;
+        }
&lt;p&gt;+&lt;br/&gt;
         @Override public void importFromStream(ResourceResolver resourceResolver, InputStream inputStream) throws DistributionException &lt;/p&gt;
{
             throw new DistributionException(&quot;unsupported&quot;);
         }
&lt;p&gt;diff --git a/src/test/java/org/apache/sling/distribution/trigger/impl/ChainDistributionTriggerTest.java b/src/test/java/org/apache/sling/distribution/trigger/impl/ChainDistributionTriggerTest.java&lt;br/&gt;
deleted file mode 100644&lt;br/&gt;
index 58bf444..0000000&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/distribution/trigger/impl/ChainDistributionTriggerTest.java&lt;br/&gt;
+++ /dev/null&lt;br/&gt;
@@ -1,58 +0,0 @@&lt;br/&gt;
-/*&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Licensed to the Apache Software Foundation (ASF) under one&lt;/li&gt;
	&lt;li&gt;* or more contributor license agreements.  See the NOTICE file&lt;/li&gt;
	&lt;li&gt;* distributed with this work for additional information&lt;/li&gt;
	&lt;li&gt;* regarding copyright ownership.  The ASF licenses this file&lt;/li&gt;
	&lt;li&gt;* to you under the Apache License, Version 2.0 (the&lt;/li&gt;
	&lt;li&gt;* &quot;License&quot;); you may not use this file except in compliance&lt;/li&gt;
	&lt;li&gt;* with the License.  You may obtain a copy of the License at&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;*   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* Unless required by applicable law or agreed to in writing,&lt;/li&gt;
	&lt;li&gt;* software distributed under the License is distributed on an&lt;/li&gt;
	&lt;li&gt;* &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;/li&gt;
	&lt;li&gt;* KIND, either express or implied.  See the License for the&lt;/li&gt;
	&lt;li&gt;* specific language governing permissions and limitations&lt;/li&gt;
	&lt;li&gt;* under the License.&lt;/li&gt;
	&lt;li&gt;*/&lt;br/&gt;
-package org.apache.sling.distribution.trigger.impl;&lt;br/&gt;
-&lt;br/&gt;
-import org.apache.sling.distribution.trigger.DistributionRequestHandler;&lt;br/&gt;
-import org.junit.Test;&lt;br/&gt;
-import org.osgi.framework.BundleContext;&lt;br/&gt;
-&lt;br/&gt;
-import static org.mockito.Mockito.mock;&lt;br/&gt;
-&lt;br/&gt;
-/**&lt;/li&gt;
	&lt;li&gt;* Testcase for 
{@link DistributionEventDistributeDistributionTrigger}&lt;br/&gt;
- */&lt;br/&gt;
-public class ChainDistributionTriggerTest {&lt;br/&gt;
-&lt;br/&gt;
-    @Test&lt;br/&gt;
-    public void testRegister() throws Exception {
-        String pathPrefix = &quot;/prefix&quot;;
-        BundleContext bundleContext = mock(BundleContext.class);
-        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
-        DistributionRequestHandler handler = mock(DistributionRequestHandler.class);
-        chainDistributeDistributionTrigger.register(handler);
-    }&lt;br/&gt;
-&lt;br/&gt;
-    @Test&lt;br/&gt;
-    public void testUnregister() throws Exception {
-        String pathPrefix = &quot;/prefix&quot;;
-        BundleContext bundleContext = mock(BundleContext.class);
-        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
-        DistributionRequestHandler handler = mock(DistributionRequestHandler.class);
-        chainDistributeDistributionTrigger.unregister(handler);
-    }&lt;br/&gt;
-&lt;br/&gt;
-&lt;br/&gt;
-    @Test&lt;br/&gt;
-    public void testDisable() throws Exception {
-        String pathPrefix = &quot;/prefix&quot;;
-        BundleContext bundleContext = mock(BundleContext.class);
-        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
-        chainDistributeDistributionTrigger.disable();
-    }&lt;br/&gt;
-}&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTriggerTest.java b/src/test/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTriggerTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..1b2544e&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/distribution/trigger/impl/DistributionEventDistributeDistributionTriggerTest.java&lt;br/&gt;
@@ -0,0 +1,131 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.distribution.trigger.impl;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.resource.ResourceResolver;&lt;br/&gt;
+import org.apache.sling.distribution.DistributionRequest;&lt;br/&gt;
+import org.apache.sling.distribution.DistributionRequestType;&lt;br/&gt;
+import org.apache.sling.distribution.common.DistributionException;&lt;br/&gt;
+import org.apache.sling.distribution.component.impl.DistributionComponentKind;&lt;br/&gt;
+import org.apache.sling.distribution.event.DistributionEventTopics;&lt;br/&gt;
+import org.apache.sling.distribution.event.impl.DefaultDistributionEventFactory;&lt;br/&gt;
+import org.apache.sling.distribution.event.impl.DistributionEventFactory;&lt;br/&gt;
+import org.apache.sling.distribution.packaging.DistributionPackageInfo;&lt;br/&gt;
+import org.apache.sling.distribution.trigger.DistributionRequestHandler;&lt;br/&gt;
+import org.apache.sling.testing.mock.osgi.junit.OsgiContext;&lt;br/&gt;
+import org.junit.Rule;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.osgi.framework.BundleContext;&lt;br/&gt;
+&lt;br/&gt;
+import static org.mockito.Mockito.mock;&lt;br/&gt;
+import static org.junit.Assert.*;&lt;br/&gt;
+import static org.mockito.Mockito.spy;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicBoolean;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicInteger;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Testcase for {@link DistributionEventDistributeDistributionTrigger}
&lt;p&gt;+ */&lt;br/&gt;
+public class DistributionEventDistributeDistributionTriggerTest {&lt;br/&gt;
+&lt;br/&gt;
+    @Rule&lt;br/&gt;
+    public final OsgiContext osgiContext = new OsgiContext();&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testRegister() throws Exception &lt;/p&gt;
{
+        String pathPrefix = &quot;/prefix&quot;;
+        BundleContext bundleContext = mock(BundleContext.class);
+        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
+        DistributionRequestHandler handler = mock(DistributionRequestHandler.class);
+        chainDistributeDistributionTrigger.register(handler);
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testUnregister() throws Exception &lt;/p&gt;
{
+        String pathPrefix = &quot;/prefix&quot;;
+        BundleContext bundleContext = mock(BundleContext.class);
+        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
+        DistributionRequestHandler handler = mock(DistributionRequestHandler.class);
+        chainDistributeDistributionTrigger.unregister(handler);
+    }
&lt;p&gt;+&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDisable() throws Exception &lt;/p&gt;
{
+        String pathPrefix = &quot;/prefix&quot;;
+        BundleContext bundleContext = mock(BundleContext.class);
+        DistributionEventDistributeDistributionTrigger chainDistributeDistributionTrigger = new DistributionEventDistributeDistributionTrigger(pathPrefix, bundleContext);
+        chainDistributeDistributionTrigger.disable();
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDistributionLoop() throws Exception {&lt;br/&gt;
+        final AtomicInteger handled = new AtomicInteger(0);&lt;br/&gt;
+        final Map&amp;lt;String, Object&amp;gt; infoData = new HashMap&amp;lt;String, Object&amp;gt;();&lt;br/&gt;
+        infoData.put(DistributionPackageInfo.PROPERTY_REQUEST_PATHS, new String[] &lt;/p&gt;
{ &quot;/foo/bar&quot; }
&lt;p&gt;);&lt;br/&gt;
+        infoData.put(DistributionPackageInfo.PROPERTY_REQUEST_TYPE, DistributionRequestType.ADD);&lt;br/&gt;
+        final DistributionPackageInfo info = new DistributionPackageInfo(&quot;any&quot;, infoData);&lt;br/&gt;
+&lt;br/&gt;
+        Thread testExecution = new Thread() {&lt;br/&gt;
+            @Override public void run() {&lt;br/&gt;
+                try {&lt;br/&gt;
+                    final DistributionEventFactory eventFactory = new DefaultDistributionEventFactory();&lt;br/&gt;
+                    osgiContext.registerInjectActivateService(eventFactory);&lt;br/&gt;
+&lt;br/&gt;
+                    DistributionEventDistributeDistributionTrigger trigger = new DistributionEventDistributeDistributionTrigger(&quot;/foo&quot;,&lt;br/&gt;
+                            osgiContext.bundleContext());&lt;br/&gt;
+                    DistributionRequestHandler testHandler = new DistributionRequestHandler() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                        public String getName() {
+                            return &quot;test&quot;;
+                        }++                        public DistributionComponentKind getComponentKind() {
+                            return DistributionComponentKind.AGENT;
+                        }++                        public void handle(ResourceResolver resourceResolver, DistributionRequest request) {
+                            // we simple fire an event, to cause the loop
+                            eventFactory.generatePackageEvent(DistributionEventTopics.AGENT_PACKAGE_DISTRIBUTED,
+                                    DistributionComponentKind.AGENT, &quot;test&quot;, info);
+                            handled.addAndGet(1);
+                        }+                    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;;&lt;br/&gt;
+&lt;br/&gt;
+                    trigger.register(testHandler);&lt;br/&gt;
+                    eventFactory.generatePackageEvent(DistributionEventTopics.AGENT_PACKAGE_DISTRIBUTED, DistributionComponentKind.AGENT,&lt;br/&gt;
+                            &quot;origin&quot;, info);&lt;br/&gt;
+                    trigger.unregister(testHandler);&lt;br/&gt;
+                } catch (DistributionException ex) &lt;/p&gt;
{
+                    throw new AssertionError(ex);
+                }
&lt;p&gt;+            }&lt;br/&gt;
+        };&lt;br/&gt;
+&lt;br/&gt;
+        testExecution.setDaemon(true);&lt;br/&gt;
+        testExecution.run();&lt;br/&gt;
+&lt;br/&gt;
+        Thread.sleep(200);&lt;br/&gt;
+&lt;br/&gt;
+        testExecution.interrupt();&lt;br/&gt;
+        assertEquals(1, handled.get());&lt;br/&gt;
+    }&lt;br/&gt;
+}&lt;br/&gt;
\ No newline at end of file&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16318207" author="githubbot" created="Tue, 9 Jan 2018 10:20:37 +0000"  >&lt;p&gt;tteofili commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7359&quot; title=&quot;DistributionEventDistributeDistributionTrigger causes distribution loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7359&quot;&gt;&lt;del&gt;SLING-7359&lt;/del&gt;&lt;/a&gt;: prevent distribution loop in triggers from distribution events&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356242148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/3#issuecomment-356242148&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   thanks @Buuhuu &lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3olxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7358] FileDistributionPackageBuilder fails with no temp directory configured</title>
                <link>https://issues.apache.org/jira/browse/SLING-7358</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When no temp directory is configured the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java#L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FileDistributionPackageBuilder&lt;/a&gt;&#160;uses null to create a new temp file which, according to the java docs will use the default temp directory. &lt;/p&gt;

&lt;p&gt;On the other hand &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java#L160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reading the file internally&lt;/a&gt;&#160;uses the &lt;tt&gt;File&lt;/tt&gt;&#160;constructor passing &lt;tt&gt;null&lt;/tt&gt; as directory to it. This causes a non-existing file to be returned. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13129061">SLING-7358</key>
            <summary>FileDistributionPackageBuilder fails with no temp directory configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="diru">Dirk Rudolph</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jan 2018 09:44:07 +0000</created>
                <updated>Tue, 9 Jan 2018 10:24:49 +0000</updated>
                            <resolved>Tue, 9 Jan 2018 10:24:49 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16315210" author="githubbot" created="Sun, 7 Jan 2018 12:12:25 +0000"  >&lt;p&gt;Buuhuu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7358&quot; title=&quot;FileDistributionPackageBuilder fails with no temp directory configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7358&quot;&gt;&lt;del&gt;SLING-7358&lt;/del&gt;&lt;/a&gt;: FileDistributionPackageBuilder temp directory fallback&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   fallback to jvm&apos;s default temp directory if not configured in FileDistributionPackageBuilder&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16316679" author="githubbot" created="Mon, 8 Jan 2018 17:57:37 +0000"  >&lt;p&gt;tteofili commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7358&quot; title=&quot;FileDistributionPackageBuilder fails with no temp directory configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7358&quot;&gt;&lt;del&gt;SLING-7358&lt;/del&gt;&lt;/a&gt;: FileDistributionPackageBuilder temp directory fallback&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356043260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356043260&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   the PR looks good to me, except the Apache License header in FileDistributionPackageBuilderTest is missing (mvn clean install fails).&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16316683" author="githubbot" created="Mon, 8 Jan 2018 18:00:37 +0000"  >&lt;p&gt;Buuhuu commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7358&quot; title=&quot;FileDistributionPackageBuilder fails with no temp directory configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7358&quot;&gt;&lt;del&gt;SLING-7358&lt;/del&gt;&lt;/a&gt;: FileDistributionPackageBuilder temp directory fallback&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356044126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356044126&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I added the missing header.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16316688" author="githubbot" created="Mon, 8 Jan 2018 18:04:43 +0000"  >&lt;p&gt;tteofili closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7358&quot; title=&quot;FileDistributionPackageBuilder fails with no temp directory configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7358&quot;&gt;&lt;del&gt;SLING-7358&lt;/del&gt;&lt;/a&gt;: FileDistributionPackageBuilder temp directory fallback&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java b/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java&lt;br/&gt;
index da8c496..66fd0b3 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilder.java&lt;br/&gt;
@@ -70,8 +70,15 @@ public FileDistributionPackageBuilder(String type,&lt;br/&gt;
         this.distributionContentSerializer = distributionContentSerializer;&lt;br/&gt;
         this.nodeFilters = VltUtils.parseFilters(nodeFilters);&lt;br/&gt;
         this.propertyFilters = VltUtils.parseFilters(propertyFilters);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.tempDirectory = VltUtils.getTempFolder(tempFilesFolder);&lt;br/&gt;
         this.digestAlgorithm = digestAlgorithm;&lt;br/&gt;
+&lt;br/&gt;
+        File tempDirectory = VltUtils.getTempFolder(tempFilesFolder);&lt;br/&gt;
+&lt;br/&gt;
+        if (tempDirectory == null) 
{
+            tempDirectory = new File(System.getProperty(&quot;java.io.tmpdir&quot;));
+        }
&lt;p&gt;+&lt;br/&gt;
+        this.tempDirectory = tempDirectory;&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java b/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..ea6072c&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/distribution/packaging/impl/FileDistributionPackageBuilderTest.java&lt;br/&gt;
@@ -0,0 +1,77 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.sling.distribution.packaging.impl;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertNotNull;&lt;br/&gt;
+import static org.mockito.Mockito.mock;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.OutputStream;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.resource.ResourceResolver;&lt;br/&gt;
+import org.apache.sling.distribution.DistributionRequest;&lt;br/&gt;
+import org.apache.sling.distribution.common.DistributionException;&lt;br/&gt;
+import org.apache.sling.distribution.packaging.DistributionPackage;&lt;br/&gt;
+import org.apache.sling.distribution.serialization.DistributionContentSerializer;&lt;br/&gt;
+import org.apache.sling.distribution.serialization.DistributionExportOptions;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+public class FileDistributionPackageBuilderTest {&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDefaultTempDirectory() throws DistributionException, IOException {&lt;br/&gt;
+        FileDistributionPackageBuilder builder = new FileDistributionPackageBuilder(&quot;test&quot;, new TestSerializer(), null, null, new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;,&lt;br/&gt;
+                new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
+        DistributionPackage createdPackage = builder.createPackageForAdd(mock(ResourceResolver.class), mock(DistributionRequest.class));&lt;br/&gt;
+&lt;br/&gt;
+        try &lt;/p&gt;
{
+            assertNotNull(createdPackage.createInputStream());
+            DistributionPackage gotPackage = builder.getPackageInternal(mock(ResourceResolver.class), createdPackage.getId());
+            assertNotNull(gotPackage.createInputStream()); // this will throw an exception when the file doesn&apos;t exist
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            createdPackage.delete();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    class TestSerializer implements DistributionContentSerializer {&lt;br/&gt;
+&lt;br/&gt;
+        @Override public void exportToStream(ResourceResolver resourceResolver, DistributionExportOptions exportOptions,&lt;br/&gt;
+                OutputStream outputStream) throws DistributionException {&lt;br/&gt;
+            try &lt;/p&gt;
{
+                outputStream.write(&quot;test&quot;.getBytes());
+            }
&lt;p&gt; catch (IOException ex) &lt;/p&gt;
{
+                throw new DistributionException(ex);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override public void importFromStream(ResourceResolver resourceResolver, InputStream inputStream) throws DistributionException &lt;/p&gt;
{
+            throw new DistributionException(&quot;unsupported&quot;);
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override public String getName() &lt;/p&gt;
{
+            return &quot;test&quot;;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override public boolean isRequestFiltering() &lt;/p&gt;
{
+            return true;
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16316690" author="githubbot" created="Mon, 8 Jan 2018 18:04:56 +0000"  >&lt;p&gt;tteofili commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7358&quot; title=&quot;FileDistributionPackageBuilder fails with no temp directory configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7358&quot;&gt;&lt;del&gt;SLING-7358&lt;/del&gt;&lt;/a&gt;: FileDistributionPackageBuilder temp directory fallback&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356045369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/1#issuecomment-356045369&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   thanks @Buuhuu for your contribution!&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3olt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7356] Fix siblings selector name in Sling Query documentation</title>
                <link>https://issues.apache.org/jira/browse/SLING-7356</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This is a simple documentation update to improve the consistency of the documentation.&lt;/p&gt;

&lt;p&gt;The siblings selector examples were called &lt;tt&gt;next&lt;/tt&gt; in two places rather than &lt;tt&gt;siblings&lt;/tt&gt;, which made it a little hard to read. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13128504">SLING-7356</key>
            <summary>Fix siblings selector name in Sling Query documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="jshurmer">Jordan Shurmer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2018 14:27:42 +0000</created>
                <updated>Thu, 4 Jan 2018 14:54:05 +0000</updated>
                            <resolved>Thu, 4 Jan 2018 14:54:05 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16311427" author="bdelacretaz" created="Thu, 4 Jan 2018 14:54:05 +0000"  >&lt;p&gt;Thanks for this! &lt;/p&gt;

&lt;p&gt;Patch applied at &lt;a href=&quot;http://sling.apache.org/documentation/bundles/sling-query/hierarchy-operators.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/sling-query/hierarchy-operators.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12904603" name="hierarchy-operators.mdtext" size="939" author="jshurmer" created="Thu, 4 Jan 2018 14:11:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oief:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7352] Validation IT: Deploy Validation API and Core Bundle only once</title>
                <link>https://issues.apache.org/jira/browse/SLING-7352</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Validation API and Validation Core is also defined in the base provisioning model (slingstart). To allow merging with the versions being explicitly specified in the provisioning model of the Validation Core IT the same feature name needs to be used (as documented in &lt;a href=&quot;https://sling.apache.org/documentation/development/slingstart.html#model-merging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/slingstart.html#model-merging&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128433">SLING-7352</key>
            <summary>Validation IT: Deploy Validation API and Core Bundle only once</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2018 07:51:32 +0000</created>
                <updated>Thu, 4 Jan 2018 07:53:01 +0000</updated>
                            <resolved>Thu, 4 Jan 2018 07:53:01 +0000</resolved>
                                    <version>Validation Core 1.0.4</version>
                                    <fixVersion>Validation Core 1.0.6</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16310926" author="kwin" created="Thu, 4 Jan 2018 07:53:01 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/commit/76998647c1b81eb4adc55aef2acfad6f5c624694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/commit/76998647c1b81eb4adc55aef2acfad6f5c624694&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ohyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7350] StreamRendererServlet redirects HEAD requests to external uri if available</title>
                <link>https://issues.apache.org/jira/browse/SLING-7350</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7140&quot; title=&quot;Support redirects to URLs provided by the underlying datastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7140&quot;&gt;&lt;del&gt;SLING-7140&lt;/del&gt;&lt;/a&gt; added a feature to support redirects to external uri of a resource if available. This handled by StreamRendererServlet. See &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.  As per the current implementation, if there&apos;s a uri available, a redirect is done for a http HEAD request as well. This can be problematic for clients which expect the response as sent by the servlet as of now if the response is different from the redirected HEAD request. &lt;/p&gt;

&lt;p&gt;Would it be correct to handle the HEAD request &lt;b&gt;before&lt;/b&gt; the redirect so that its current behavior is retained?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/blob/8ba11a174996ca4b7237c54879d1db8f14796f4d/src/main/java/org/apache/sling/servlets/get/impl/helpers/StreamRendererServlet.java#L171-L173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/blob/8ba11a174996ca4b7237c54879d1db8f14796f4d/src/main/java/org/apache/sling/servlets/get/impl/helpers/StreamRendererServlet.java#L171-L173&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128218">SLING-7350</key>
            <summary>StreamRendererServlet redirects HEAD requests to external uri if available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satyadeep">Satya Deep Maheshwari</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jan 2018 12:50:42 +0000</created>
                <updated>Fri, 16 Feb 2018 09:50:13 +0000</updated>
                            <resolved>Fri, 16 Feb 2018 09:50:06 +0000</resolved>
                                    <version>Servlets Get 2.1.30</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16309604" author="satyadeep" created="Wed, 3 Jan 2018 12:53:51 +0000"  >&lt;p&gt;Attaching a proposed change at &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12904395/12904395_SLING-7350.diff&quot; title=&quot;SLING-7350.diff attached to SLING-7350&quot;&gt;SLING-7350.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. &lt;br/&gt;
cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ieb%40tfd.co.uk&quot; class=&quot;user-hover&quot; rel=&quot;ieb@tfd.co.uk&quot;&gt;ieb@tfd.co.uk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16309646" author="ianeboston" created="Wed, 3 Jan 2018 13:24:02 +0000"  >&lt;p&gt;Patch LGTM.&lt;br/&gt;
Could you open a pull request please.&lt;/p&gt;</comment>
                            <comment id="16363637" author="ianeboston" created="Wed, 14 Feb 2018 08:27:02 +0000"  >&lt;p&gt;I have looked at this again and although the patch fixes the problem I am now not so certain.&lt;/p&gt;

&lt;p&gt;The http spec says GET and HEAD should be treated the same when deciding to perform a 302 redirect or not. see section 10.3.3 of page 62 of rfc2616.&lt;/p&gt;

&lt;p&gt;The reason for a HEAD is often for a browser to determine if something has changed. Changed from what ? Changed from the GET which was a redirect. So the GET after redirect had headers that defined the state of the final resource (etag, length, last modified). Those will have been provided by the&#160; service that served the content. Lets say that is AWS CloudFront. Only AWS CloudFront knows the headers it sent out. Sling has no knowledge of those headers so it cannot emit a valid HEAD response other than to redirect to CloudFront to provide that response.&lt;/p&gt;

&lt;p&gt;If Sling emits a HEAD response for HEAD and a redirect for GET, then the&#160;client will always interpret that as the GET is required and always perform the GET, defeating the purpose of the HEAD.&lt;/p&gt;

&lt;p&gt;If you have a different interpretation of more information please share it. If neither of us are certain about this, then we might need to ask a higher authority, perhaps even Roy Fielding or someone who really knows.&lt;/p&gt;

&lt;p&gt;---------------------&lt;/p&gt;

&lt;p&gt;I appreciate this might break the client, but if it does, the client is probably already broken and has not implemented HEAD properly. I know some clients can&apos;t even follow redirects correctly, not modern browsers fortunately.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Which client is having a problem with the HEAD redirect ?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16366785" author="satyadeep" created="Fri, 16 Feb 2018 09:49:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt;, I agree that treating HEAD and GET any differently would be &#160;incorrect behavior. &lt;a href=&quot;https://tools.ietf.org/html/rfc7231#section-4.3.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc7231#section-4.3.2&lt;/a&gt;&#160;and &lt;a href=&quot;https://tools.ietf.org/html/rfc2616#section-10.3.3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc2616#section-10.3.3&lt;/a&gt;&#160;both&#160;mention it on similar lines.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I came across this problem while using a client coded within a proprietary software.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13103283">SLING-7140</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12904395" name="SLING-7350.diff" size="1325" author="satyadeep" created="Wed, 3 Jan 2018 12:53:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ogmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7349] Plain Servlets registered with the org.apache.sling HTTP Context cannot get requests parameters from POST body</title>
                <link>https://issues.apache.org/jira/browse/SLING-7349</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a servlet is registered using the `org.apache.sling` context, e.g. using&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HttpWhiteboardConstants.HTTP_WHITEBOARD_CONTEXT_SELECT + &lt;span class=&quot;code-quote&quot;&gt;&quot;=(&quot;&lt;/span&gt; + HttpWhiteboardConstants.HTTP_WHITEBOARD_CONTEXT_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot;=org.apache.sling)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and a POST is made to this servlet, any request parameters in the body of the POST return null when retrieved using `request.getParameter()`.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128217">SLING-7349</key>
            <summary>Plain Servlets registered with the org.apache.sling HTTP Context cannot get requests parameters from POST body</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jan 2018 12:50:01 +0000</created>
                <updated>Tue, 9 Jan 2018 10:04:52 +0000</updated>
                            <resolved>Wed, 3 Jan 2018 12:58:03 +0000</resolved>
                                    <version>Engine 2.6.10</version>
                                    <fixVersion>Engine 2.6.12</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16309603" author="karlpauls" created="Wed, 3 Jan 2018 12:53:11 +0000"  >&lt;p&gt;The reason is that we need to look at the post parameters during the handleSecurity of the SlingHttpContext. This is fine in case the request then goes on to a SlingHttpRequest (as that will reuse the ParameterSupport we used during the handleSecurity - however, in case that it is a custom (i.e., plain javax.servlet) Servlet that registered with the org.apache.sling HttpContext (via say, the whiteboard) it will not get the same ParameterSupport and the body has already been parsed. Subsequently, the parameters are lost. &lt;/p&gt;</comment>
                            <comment id="16309607" author="githubbot" created="Wed, 3 Jan 2018 12:56:30 +0000"  >&lt;p&gt;karlpauls opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7349&quot; title=&quot;Plain Servlets registered with the org.apache.sling HTTP Context cannot get requests parameters from POST body&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7349&quot;&gt;&lt;del&gt;SLING-7349&lt;/del&gt;&lt;/a&gt;: register a servlet filter with the org.apache.sling HttpC&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-engine/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;ontext that ensures that requests will use the ParameterSupport used during handleSecurity when no SlingHttpRequest is used.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16309609" author="githubbot" created="Wed, 3 Jan 2018 12:56:49 +0000"  >&lt;p&gt;karlpauls closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7349&quot; title=&quot;Plain Servlets registered with the org.apache.sling HTTP Context cannot get requests parameters from POST body&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7349&quot;&gt;&lt;del&gt;SLING-7349&lt;/del&gt;&lt;/a&gt;: register a servlet filter with the org.apache.sling HttpC&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-engine/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16309610" author="karlpauls" created="Wed, 3 Jan 2018 12:58:03 +0000"  >&lt;p&gt;Fixed by registering a servlet filter with the org.apache.sling HttpContext that will wrap the request if it is not a SlingHttpServletRequest and ensures that the ParameterSupport is used that we used in the handleSecurity.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ogmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7346] Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)</title>
                <link>https://issues.apache.org/jira/browse/SLING-7346</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If you set a value of type as map as a custom property in response type, instead of parsing properly, whole map is converted into one string and therefore, json response does not reach client side in an orderly fashion.&lt;br/&gt;
This can be attributed to &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; which was merged as part of fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6681&quot; title=&quot;Replace commons.json usage in org.apache.sling.servlets.post&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6681&quot;&gt;&lt;del&gt;SLING-6681&lt;/del&gt;&lt;/a&gt;(Replace commons.json usage in org.apache.sling.servlets.post)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -&lt;a href=&quot;https://github.com/apache/sling/commit/a598bd4f6e9fc4f967e118de705643a04a47bc44#diff-2ff02a567147f2cbef2e344d5338dd14R106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/a598bd4f6e9fc4f967e118de705643a04a47bc44#diff-2ff02a567147f2cbef2e344d5338dd14R106&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128194">SLING-7346</key>
            <summary>Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="bhardwajrahul20">Rahul Bhardwaj</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jan 2018 09:53:54 +0000</created>
                <updated>Tue, 30 Jan 2018 11:41:31 +0000</updated>
                            <resolved>Thu, 18 Jan 2018 16:10:20 +0000</resolved>
                                    <version>Servlets Post 2.3.22</version>
                                    <fixVersion>Servlets Post 2.3.24</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16310914" author="bhardwajrahul20" created="Thu, 4 Jan 2018 07:44:48 +0000"  >&lt;p&gt;PR - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16311266" author="githubbot" created="Thu, 4 Jan 2018 12:16:00 +0000"  >&lt;p&gt;bhardwajrahul20 opened a new pull request #2:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;-Adding test case to showcase backward compatibility break&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16311269" author="bhardwajrahul20" created="Thu, 4 Jan 2018 12:17:45 +0000"  >&lt;p&gt;PR for test case - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&lt;/a&gt; (Created separately since it should be merged regardless of the fix)&lt;/p&gt;</comment>
                            <comment id="16312528" author="githubbot" created="Fri, 5 Jan 2018 06:09:56 +0000"  >&lt;p&gt;bhardwajrahul20 closed pull request #2:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;-Adding test case to showcase backward compatibility break&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/test/java/org/apache/sling/servlets/post/JsonResponseTest.java b/src/test/java/org/apache/sling/servlets/post/JsonResponseTest.java&lt;br/&gt;
index d591628..33b1687 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/servlets/post/JsonResponseTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/servlets/post/JsonResponseTest.java&lt;br/&gt;
@@ -107,6 +107,16 @@ public void testSend_3xx() throws Exception {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    public void testSendWithJsonAsPropertyValue() throws Exception {&lt;br/&gt;
+        String testResponseJson = &quot;{\&quot;user\&quot;:\&quot;testUser\&quot;,\&quot;properties\&quot;:{\&quot;id\&quot;:\&quot;testId\&quot;, \&quot;name\&quot;:\&quot;test\&quot;}}&quot;;&lt;br/&gt;
+        JsonObject customProperty = Json.createReader(new StringReader(testResponseJson)).readObject();&lt;br/&gt;
+        res.setProperty(&quot;response&quot;, customProperty);&lt;br/&gt;
+        MockResponseWithHeader response = new MockResponseWithHeader();&lt;br/&gt;
+        res.send(response, true);&lt;br/&gt;
+        JsonObject result = Json.createReader(new StringReader(response.getOutput().toString())).readObject();&lt;br/&gt;
+        assertProperty(result, &quot;response&quot;, customProperty);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     public void testNoChangesOnError() throws Exception &lt;/p&gt;
{
         res.onChange(&quot;modified&quot;, &quot;argument1&quot;);
         res.setError(new Exception(&quot;some exception&quot;));
@@ -127,6 +137,13 @@ private static JsonString assertProperty(JsonObject obj, String key, String expe
         return res;
     }

&lt;p&gt;+    @SuppressWarnings(&lt;/p&gt;
{&quot;unchecked&quot;})&lt;br/&gt;
+    private static JsonObject assertProperty(JsonObject obj, String key, JsonObject expected) {
+        JsonObject res = (JsonObject) assertProperty(obj, key);
+        assertEquals(expected, res);
+        return res;
+    }&lt;br/&gt;
+&lt;br/&gt;
     @SuppressWarnings({&quot;unchecked&quot;}
&lt;p&gt;)&lt;br/&gt;
     private static &amp;lt;T&amp;gt; T assertInstanceOf(Object obj, Class&amp;lt;T&amp;gt; clazz) {&lt;br/&gt;
         try {&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16312697" author="bhardwajrahul20" created="Fri, 5 Jan 2018 08:27:03 +0000"  >&lt;p&gt;Updated PR-1&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; to incorporate review comments and also added test case to the same PR. Closed PR-2&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/1&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16327864" author="githubbot" created="Tue, 16 Jan 2018 21:43:09 +0000"  >&lt;p&gt;karlpauls opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;: handle JSONResponse properties as json if possible.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @bhardwajrahul20 I reworked your patch a little and tried to work in some of suggestions by @kwin.&lt;/p&gt;

&lt;p&gt;   The main idea is to fail fast when a property is set we can&apos;t translate into json and only allow such values (i.e., it is either of type &lt;/p&gt;
{String, Boolean, Number, null}
&lt;p&gt; or the toString() is parseable as json). &lt;/p&gt;

&lt;p&gt;   Furthermore, I added some javadoc to make this explicit.&lt;/p&gt;

&lt;p&gt;   @cziegeler and @rombert - what do you think?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16328796" author="githubbot" created="Wed, 17 Jan 2018 13:57:28 +0000"  >&lt;p&gt;karlpauls commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;: handle JSONResponse properties as json if possible.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-358311846&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-358311846&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I forgot to remove the copy of the JsonTicksParser - its embedded directly from the contentparser now. @rombert does this look like the way to go?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16328903" author="githubbot" created="Wed, 17 Jan 2018 15:51:59 +0000"  >&lt;p&gt;rombert commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;: handle JSONResponse properties as json if possible.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-358347590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-358347590&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This basically looks ok to me. My only slight worry is that the JsonReponse may be used as an implementation of the PostResponse interface and such exceptions may be opaque. On the other hand, setting invalid JSON as property values would be leading to problems anyway so we just report the problem earlier.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16330693" author="githubbot" created="Thu, 18 Jan 2018 16:09:21 +0000"  >&lt;p&gt;karlpauls closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;: handle JSONResponse properties as json if possible.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16330694" author="karlpauls" created="Thu, 18 Jan 2018 16:10:20 +0000"  >&lt;p&gt;I merged the modified PR.&lt;/p&gt;</comment>
                            <comment id="16344926" author="githubbot" created="Tue, 30 Jan 2018 11:41:31 +0000"  >&lt;p&gt;rombert commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7346&quot; title=&quot;Issues with custom fields in PostResponse as a result of fix for SLING-6681(Replace commons.json usage in org.apache.sling.servlets.post)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7346&quot;&gt;&lt;del&gt;SLING-7346&lt;/del&gt;&lt;/a&gt;: handle JSONResponse properties as json if possible.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-361568270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/3#issuecomment-361568270&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @npeltier  - we currently use &lt;a href=&quot;http://johnzon.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://johnzon.apache.org/&lt;/a&gt; for JSON. What exactly did you have in mind?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oghr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7344] Jackson Sling Model Exporter needs correct character encoding</title>
                <link>https://issues.apache.org/jira/browse/SLING-7344</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This is a formal ticket of what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; and I discussed earlier in December 2017.&lt;/p&gt;

&lt;p&gt;The Jackson Sling Model Exporter needs to correctly set the character encoding so content can be correctly handled. It currently defaults out to ISO-8859-1 which makes displaying localized content impossible.&lt;/p&gt;

&lt;p&gt;I have put together a sample project here: &lt;a href=&quot;https://github.com/auniverseaway/sling-exporter-sample&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/auniverseaway/sling-exporter-sample&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This will show how the default JSON get servlet correctly handles the content, but the Jackson exporter does not. I have also attached screenshots of the behaviors to this ticket.&lt;/p&gt;

&lt;p&gt;It sounded like Justin had ideas on where to solve this, so I will defer to him on where it should be done. If I can help implement a solution in the place you want, let me know. Internally, we cannot use the Jackson Exporter until this is fixed, so it&apos;s pretty high priority for me to contribute back if I can.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128035">SLING-7344</key>
            <summary>Jackson Sling Model Exporter needs correct character encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="auniverseaway">Chris Millar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jan 2018 17:59:19 +0000</created>
                <updated>Thu, 20 Feb 2020 20:30:46 +0000</updated>
                            <resolved>Tue, 30 Jan 2018 16:15:46 +0000</resolved>
                                                    <fixVersion>Models Impl 1.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16345303" author="justinedelson" created="Tue, 30 Jan 2018 16:15:46 +0000"  >&lt;p&gt;Although I still think this is really a bug in Jetty, we have already implemented a workaround for the same issue in the default GET servlet, so we can do the same here.&lt;/p&gt;</comment>
                            <comment id="16358007" author="reschke" created="Fri, 9 Feb 2018 06:47:25 +0000"  >&lt;p&gt;FWIW, there is no charset parameter on application/json. Sending it is meaningless. And as of the current JSON spec, JSON labeled as application/json has to be sent as UTF-8 (&lt;a href=&quot;https://www.greenbytes.de/tech/webdav/rfc8259.html#rfc.section.A&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.greenbytes.de/tech/webdav/rfc8259.html#rfc.section.A&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16358369" author="justinedelson" created="Fri, 9 Feb 2018 13:28:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; the problem is that unless we set the charset in the servlet, Jetty automatically sets the charset to ISO-8859-1. I think (as I said on linked the mailing list thread and above) this is clearly a bug in Jetty which we are just working around here (and in the default GET servlet).&lt;/p&gt;</comment>
                            <comment id="16358395" author="kwin" created="Fri, 9 Feb 2018 13:44:00 +0000"  >&lt;p&gt;IMHO Servlet spec mandates ISO-8859-1 as default charset.&lt;/p&gt;</comment>
                            <comment id="16358465" author="reschke" created="Fri, 9 Feb 2018 14:33:59 +0000"  >&lt;p&gt;AFAICT, this happens when you feed Strings characters into the servlet API. Does the same happen when writing bytes to the ServletOutputStream? &lt;/p&gt;</comment>
                            <comment id="16358605" author="justinedelson" created="Fri, 9 Feb 2018 16:11:48 +0000"  >&lt;p&gt;Jetty does the right thing for the text/json content type, just not application/json which is what is used in Sling (and mandated by the RFC).&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="16358880" author="reschke" created="Fri, 9 Feb 2018 20:00:23 +0000"  >&lt;p&gt;FWIW, there is no &quot;right&quot; approach for text/json, as that media type is undefined.&lt;/p&gt;</comment>
                            <comment id="16361002" author="justinedelson" created="Mon, 12 Feb 2018 16:25:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;FWIW, there is no &quot;right&quot; approach for text/json, as that media type is undefined.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Please explain this to the Jetty team.&lt;/p&gt;</comment>
                            <comment id="16361229" author="reschke" created="Mon, 12 Feb 2018 18:27:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; - absolutely. Is there already a ticket related to that for Jetty?&lt;/p&gt;</comment>
                            <comment id="17041286" author="kwin" created="Thu, 20 Feb 2020 20:30:46 +0000"  >&lt;p&gt;Just for the record: The according Jetty fix is in &lt;a href=&quot;https://github.com/eclipse/jetty.project/issues/2280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/issues/2280&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13274890">SLING-8923</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12904255" name="observe-1.png" size="153603" author="auniverseaway" created="Tue, 2 Jan 2018 17:57:53 +0000"/>
                            <attachment id="12904256" name="observe-2.png" size="144485" author="auniverseaway" created="Tue, 2 Jan 2018 17:57:53 +0000"/>
                            <attachment id="12904254" name="observe-3.png" size="141393" author="auniverseaway" created="Tue, 2 Jan 2018 17:57:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://lists.apache.org/thread.html/6bce5ca15e9e06b3369eb78161a4cea9ece802e6651a9b5ee6772fa8@%3Cusers.sling.apache.org%3E]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ofiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7334] slingstart-maven-plugin: DependencyLifecycleParticipant must only consider Maven modules leveraging the same version of slingstart-m-p</title>
                <link>https://issues.apache.org/jira/browse/SLING-7334</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;DependencyLifecycleParticipant&lt;/tt&gt; is always being active for all module leveraging the plugin (in any version). That might lead to problems, when certain modules rely on a newer version of that extension. This is e.g. the case for Validation Core which breaks aggregator builds after switching from &lt;tt&gt;org.apache.sling.testing.paxexam&lt;/tt&gt; to &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7298&quot; title=&quot;Validation IT: Use slingstart-maven-plugin in favour of pax-exam&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7298&quot;&gt;&lt;del&gt;SLING-7298&lt;/del&gt;&lt;/a&gt;) for integration tests. This module relies on version 1.7.14 of the &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; and breaks with older versions.&lt;br/&gt;
The &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; itself is not part of aggregator project (&lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-1911&quot; title=&quot;Building plugins with extensions in a reactor fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-1911&quot;&gt;&lt;del&gt;MNG-1911&lt;/del&gt;&lt;/a&gt;) though.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Internal error: java.lang.IllegalArgumentException: Unable to resolve dependency: mvn:org.apache.sling/org.apache.sling.validation.core/LATEST -&amp;gt; [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Unable to resolve dependency: mvn:org.apache.sling/org.apache.sling.validation.core/LATEST
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:122)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
Caused by: java.lang.IllegalArgumentException: Unable to resolve dependency: mvn:org.apache.sling/org.apache.sling.validation.core/LATEST
    at org.apache.sling.maven.slingstart.PomArtifactVersionResolver.resolve (PomArtifactVersionResolver.java:63)
    at org.apache.sling.provisioning.model.ModelResolveUtility.resolveArtifactVersion (ModelResolveUtility.java:94)
    at org.apache.sling.provisioning.model.EffectiveModelProcessor.processArtifact (EffectiveModelProcessor.java:51)
    at org.apache.sling.provisioning.model.ModelProcessor.process (ModelProcessor.java:62)
    at org.apache.sling.provisioning.model.ModelUtility.getEffectiveModel (ModelUtility.java:155)
    at org.apache.sling.maven.slingstart.ModelPreprocessor.addDependencies (ModelPreprocessor.java:164)
    at org.apache.sling.maven.slingstart.ModelPreprocessor.addDependencies (ModelPreprocessor.java:88)
    at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.afterProjectsRead (DependencyLifecycleParticipant.java:78)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:267)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/InternalErrorException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13127209">SLING-7334</key>
            <summary>slingstart-maven-plugin: DependencyLifecycleParticipant must only consider Maven modules leveraging the same version of slingstart-m-p</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Dec 2017 13:06:52 +0000</created>
                <updated>Mon, 15 Jan 2018 14:49:23 +0000</updated>
                            <resolved>Fri, 12 Jan 2018 12:05:38 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.7.14</version>
                                    <fixVersion>Slingstart Maven Plugin 1.7.16</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16304639" author="kwin" created="Wed, 27 Dec 2017 16:09:27 +0000"  >&lt;p&gt;I cannot reproduce with only the Sling validation modules in the aggregator. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Do you have a minimum aggregator project with which to reproduce the behaviour?&lt;/p&gt;

&lt;p&gt;Also the stack trace from above hints at a wrong version of &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; being taken, as with the most recent 1.7.14 line 63 doesn&apos;t throw (&lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/main/java/org/apache/sling/maven/slingstart/PomArtifactVersionResolver.java#L63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/main/java/org/apache/sling/maven/slingstart/PomArtifactVersionResolver.java#L63&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;I think running with `mvn clean install -X` should expose the version.&lt;/p&gt;</comment>
                            <comment id="16304657" author="kwin" created="Wed, 27 Dec 2017 16:34:10 +0000"  >&lt;p&gt;Ok, could reproduce now. This is a bug in the &lt;tt&gt;DependencyLifecycleParticipant&lt;/tt&gt; of the slingstart-maven-plugin which even in the multimodule build looks for all projects leveraging the plugin with the given artifactId and groupId (&lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/main/java/org/apache/sling/maven/slingstart/DependencyLifecycleParticipant.java#L69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/main/java/org/apache/sling/maven/slingstart/DependencyLifecycleParticipant.java#L69&lt;/a&gt;). But in fact it must only consider those modules, leveraging exactly that artifactId, groupId and version(!!!) (compare also with &lt;a href=&quot;http://takari.io/book/91-maven-classloading.html#build-extension-classloaders&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://takari.io/book/91-maven-classloading.html#build-extension-classloaders&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16304736" author="githubbot" created="Wed, 27 Dec 2017 19:01:15 +0000"  >&lt;p&gt;kwin opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7334&quot; title=&quot;slingstart-maven-plugin: DependencyLifecycleParticipant must only consider Maven modules leveraging the same version of slingstart-m-p&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7334&quot;&gt;&lt;del&gt;SLING-7334&lt;/del&gt;&lt;/a&gt; only consider Maven modules leveraging the same version of&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/pull/3&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   the s-m-p in the DependencyLifecycleParticipant&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16304740" author="kwin" created="Wed, 27 Dec 2017 19:03:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you look at the proposed fix in &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/pull/3?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/pull/3?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16304767" author="olli" created="Wed, 27 Dec 2017 20:09:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, you can pick up the version from &lt;tt&gt;/META-INF/MANIFEST.MF&lt;/tt&gt; or &lt;tt&gt;/META-INF/maven/plugin.xml&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16304782" author="olli" created="Wed, 27 Dec 2017 20:20:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, can you explain why &lt;em&gt;// consider all projects where this plugin is configured&lt;/em&gt; is done at all?&lt;/p&gt;</comment>
                            <comment id="16305187" author="kwin" created="Thu, 28 Dec 2017 08:58:48 +0000"  >&lt;p&gt;This build extension component is used to (potentially) extend the project&#8217;s dependencies (as this cannot happen during the execution of a regular Mojo goal). Since the plugins with extension=true are loaded once per plugin version only (through the Maven classloader) we need to iterate through the relevant modules then. Hope this answers your question. Regarding your suggestion I will try to extract the version from one of the locations you mentioned. &lt;/p&gt;</comment>
                            <comment id="16305255" author="olli" created="Thu, 28 Dec 2017 09:55:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hope this answers your question.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It does. Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16309430" author="githubbot" created="Wed, 3 Jan 2018 10:22:51 +0000"  >&lt;p&gt;kwin closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7334&quot; title=&quot;slingstart-maven-plugin: DependencyLifecycleParticipant must only consider Maven modules leveraging the same version of slingstart-m-p&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7334&quot;&gt;&lt;del&gt;SLING-7334&lt;/del&gt;&lt;/a&gt; only consider Maven modules leveraging the same version of&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16309431" author="kwin" created="Wed, 3 Jan 2018 10:23:26 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/commit/daec8134a2084ee1c45bb3d5a320bba4725ee898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/commit/daec8134a2084ee1c45bb3d5a320bba4725ee898&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16320553" author="kwin" created="Wed, 10 Jan 2018 16:30:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Can you check the aggregator by upgrading to the latest SNAPSHOT?&lt;/p&gt;</comment>
                            <comment id="16321979" author="olli" created="Thu, 11 Jan 2018 09:56:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, aggregator build is still running (with patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12905651/12905651_slingstart.patch&quot; title=&quot;slingstart.patch attached to SLING-7334&quot;&gt;slingstart.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;) but looks good so far.&lt;/p&gt;</comment>
                            <comment id="16323875" author="kwin" created="Fri, 12 Jan 2018 12:04:20 +0000"  >&lt;p&gt;Ok, thanks for confirming. Will start the release then. Afterwards we can upgrade those modules to leverage the latest release version.&lt;/p&gt;</comment>
                            <comment id="16323880" author="olli" created="Fri, 12 Jan 2018 12:13:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, we should update Parent to 1.7.16 and all relevant modules to upcoming Parent 33 (removing the plugin version from all modules).&lt;/p&gt;</comment>
                            <comment id="16323884" author="kwin" created="Fri, 12 Jan 2018 12:16:08 +0000"  >&lt;p&gt;Sounds good, will upgrade parent as soon as this release is done (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7376&quot; title=&quot;Upgrade slingstart-maven-plugin to 1.7.16&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7376&quot;&gt;&lt;del&gt;SLING-7376&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13127109">SLING-7331</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13123907">SLING-7298</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12905651" name="slingstart.patch" size="8291" author="olli" created="Thu, 11 Jan 2018 09:52:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oafb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7333] Build fails due to Animal Sniffer</title>
                <link>https://issues.apache.org/jira/browse/SLING-7333</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The build fails due to Animal Sniffer after switching from Apache Parent 10 to Sling Parent 32. Skipping Animal Sniffer for now.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, can you have a look?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13127207">SLING-7333</key>
            <summary>Build fails due to Animal Sniffer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10101">Abandoned</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Dec 2017 12:37:30 +0000</created>
                <updated>Wed, 16 Mar 2022 10:42:52 +0000</updated>
                            <resolved>Wed, 16 Mar 2022 08:42:44 +0000</resolved>
                                                    <fixVersion>Crankstart Launcher 2.0.0</fixVersion>
                                    <component>Crankstart</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17507478" author="bdelacretaz" created="Wed, 16 Mar 2022 10:42:52 +0000"  >&lt;p&gt;FWIW, &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-crankstart-launcher&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-crankstart-launcher&lt;/a&gt; has been deprecated in the meantime&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oaev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7332] Fix typo in org.apache.sling.cransktart.test.model</title>
                <link>https://issues.apache.org/jira/browse/SLING-7332</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Maven &lt;tt&gt;artifactId&lt;/tt&gt; (and repository name) should be &lt;tt&gt;org.apache.sling.crankstart.test.model&lt;/tt&gt; (&lt;tt&gt;sling-org-apache-sling-crankstart-test-model&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, can we rename Git repos?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13127124">SLING-7332</key>
            <summary>Fix typo in org.apache.sling.cransktart.test.model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Dec 2017 19:38:47 +0000</created>
                <updated>Wed, 10 Jan 2018 13:33:45 +0000</updated>
                            <resolved>Wed, 10 Jan 2018 13:33:45 +0000</resolved>
                                                    <fixVersion>Crankstart Launcher 2.0.0</fixVersion>
                                    <component>Crankstart</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16315995" author="rombert" created="Mon, 8 Jan 2018 09:59:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - not that I know of. Feel free to ask infra though.&lt;/p&gt;</comment>
                            <comment id="16318325" author="olli" created="Tue, 9 Jan 2018 12:17:36 +0000"  >&lt;p&gt;Filed INFRA-15818.&lt;/p&gt;</comment>
                            <comment id="16318326" author="kwin" created="Tue, 9 Jan 2018 12:19:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Can you rephrase the INFRA ticket description. I guess the target repo name should use &quot;-&quot; as separator and not &quot;.&quot;&lt;/p&gt;</comment>
                            <comment id="16318332" author="olli" created="Tue, 9 Jan 2018 12:23:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, done. Thanks!&lt;/p&gt;</comment>
                            <comment id="16318623" author="olli" created="Tue, 9 Jan 2018 15:45:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, infra moved the repo and I&apos;ve adjusted the artifact ids. Any to-do for Jenkins?&lt;/p&gt;</comment>
                            <comment id="16318745" author="rombert" created="Tue, 9 Jan 2018 16:58:53 +0000"  >&lt;p&gt;I think you need to run the sling-seed job once, it only runs when a change is found in its git repo.&lt;/p&gt;</comment>
                            <comment id="16320240" author="olli" created="Wed, 10 Jan 2018 13:33:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, I had to update sling-aggregator before running the seed job.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o9wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7326] Disallow empty strings in repoinit grammar</title>
                <link>https://issues.apache.org/jira/browse/SLING-7326</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JavaCC parser generator warns that the STRING production allowing empty strings could potentially cause infinite loops. &lt;/p&gt;

&lt;p&gt;Empty strings should not be needed in the grammar so far, so we should change the STRING production to disallow them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13126808">SLING-7326</key>
            <summary>Disallow empty strings in repoinit grammar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Dec 2017 12:59:08 +0000</created>
                <updated>Mon, 12 Feb 2018 13:02:57 +0000</updated>
                            <resolved>Fri, 22 Dec 2017 13:00:37 +0000</resolved>
                                    <version>Repoinit Parser 1.2.0</version>
                                    <fixVersion>Repoinit Parser 1.2.2</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16301364" author="bdelacretaz" created="Fri, 22 Dec 2017 13:00:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/f490305727325927b710309992ffefd7b8bfccca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/f490305727325927b710309992ffefd7b8bfccca&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o7yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7323] Optimise URL handling</title>
                <link>https://issues.apache.org/jira/browse/SLING-7323</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;URL inputs should be properly decoded before being passed to AntiSamy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13126768">SLING-7323</key>
            <summary>Optimise URL handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Dec 2017 09:12:35 +0000</created>
                <updated>Fri, 25 Jan 2019 17:14:39 +0000</updated>
                            <resolved>Thu, 28 Dec 2017 13:05:41 +0000</resolved>
                                    <version>XSS Protection API 1.0.4</version>
                    <version>XSS Protection API 2.0.0</version>
                    <version>XSS Protection API Compat 1.1.0</version>
                                    <fixVersion>XSS Protection API 2.0.4</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16301165" author="radu.cotescu" created="Fri, 22 Dec 2017 09:24:53 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/3330a18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 3330a18&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16305422" author="radu.cotescu" created="Thu, 28 Dec 2017 12:54:03 +0000"  >&lt;p&gt;There&apos;s a subtle decoding issue introduced by the fix from &lt;tt&gt;3330a18&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16305429" author="radu.cotescu" created="Thu, 28 Dec 2017 13:05:41 +0000"  >&lt;p&gt;Fixed the mentioned issue in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/ec6764d165abc4df8cffd8439761bb2228887db9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ec6764d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13187600">SLING-7953</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o7pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7320] NPE in sling commons threads</title>
                <link>https://issues.apache.org/jira/browse/SLING-7320</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m currently running a number of integration tests via pax exam and sometimes I see the following stacktrace. I&apos;ve already seen this in a running sling also. This happens only in some runs but on that cases is breaking my CI workflow&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;sling-default-5&quot; java.lang.NullPointerException&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.copy(ThreadLocalCleaner.java:186)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.saveOldThreadLocals(ThreadLocalCleaner.java:176)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.&amp;lt;init&amp;gt;(ThreadLocalCleaner.java:51)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadPoolExecutorCleaningThreadLocals.beforeExecute(ThreadPoolExecutorCleaningThreadLocals.java:55)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;</description>
                <environment>Linux, jdk18</environment>
        <key id="13126255">SLING-7320</key>
            <summary>NPE in sling commons threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Dec 2017 11:46:11 +0000</created>
                <updated>Fri, 26 Jan 2018 15:49:32 +0000</updated>
                            <resolved>Thu, 25 Jan 2018 13:39:59 +0000</resolved>
                                    <version>Commons Threads 3.2.10</version>
                                    <fixVersion>Commons Threads 3.2.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16298367" author="kwin" created="Wed, 20 Dec 2017 12:07:26 +0000"  >&lt;p&gt;This looks related to the NPE observed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6261?focusedCommentId=16174537&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16174537&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6261?focusedCommentId=16174537&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16174537&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16298433" author="ivoleitao" created="Wed, 20 Dec 2017 12:52:58 +0000"  >&lt;p&gt;Yes, it&apos;s similar but this one it&apos;s on the copy method. On that example I&apos;ve not seen a NPE on that method&lt;/p&gt;

&lt;p&gt;Regards,  &lt;/p&gt;</comment>
                            <comment id="16302632" author="ivoleitao" created="Sun, 24 Dec 2017 01:08:26 +0000"  >&lt;p&gt;Just to update this issue I&apos;ve just catched this exception in the change method also. Stacktrace bellow:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;sling-default-1&quot; java.lang.NullPointerException&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.DefaultThreadPool$LoggingThreadLocalChangeListener.changed(DefaultThreadPool.java:160)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.changed(ThreadLocalCleaner.java:141)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.diff(ThreadLocalCleaner.java:119)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.cleanup(ThreadLocalCleaner.java:79)&lt;br/&gt;
	at org.apache.sling.commons.threads.impl.ThreadPoolExecutorCleaningThreadLocals.afterExecute(ThreadPoolExecutorCleaningThreadLocals.java:63)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;</comment>
                            <comment id="16335881" author="kwin" created="Tue, 23 Jan 2018 14:59:05 +0000"  >&lt;p&gt;The latter NPE can only happen if listener is &lt;tt&gt;null&lt;/tt&gt;. &lt;tt&gt;listener&lt;/tt&gt; is a final field in &lt;tt&gt;ThreadLocalCleaner&lt;/tt&gt; and is set only once in the constructor. Can you give a test case how to reproduce? At least from within Sling the listener can never be &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The former NPE can only happen if the initReflectionFields() method has thrown an exception (which may happen with other JDKs than OpenJDK/Oracle). I will guard around this better in the future.&lt;/p&gt;</comment>
                            <comment id="16335915" author="kwin" created="Tue, 23 Jan 2018 15:23:31 +0000"  >&lt;p&gt;Prevented the NPE in copy with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/bb1ec98753d7972a63d961e81725796ac2a918a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/bb1ec98753d7972a63d961e81725796ac2a918a8&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16339222" author="rombert" created="Thu, 25 Jan 2018 13:39:59 +0000"  >&lt;p&gt;Looks like this is fixed, resolving. Please let us know if this happens with the upcoming 3.2.14 release ( release vote will start shortly )&lt;/p&gt;</comment>
                            <comment id="16341182" author="kwin" created="Fri, 26 Jan 2018 15:49:32 +0000"  >&lt;p&gt;Actually my fix was not sufficient. The correct fix for the first NPE is now in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7447&quot; title=&quot;Race condition in ThreadLocalCleaner initialization code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7447&quot;&gt;&lt;del&gt;SLING-7447&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13133854">SLING-7447</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13019472">SLING-6261</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o4jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7319] Dynamic classloader should bootdelegate sun.reflect and jdk.internal.reflect </title>
                <link>https://issues.apache.org/jira/browse/SLING-7319</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On java &amp;lt; 9 use of reflection can lead to accessor classes being magically generated in the sun.reflect namespace. On java &amp;gt;= 9, the same can happen but this time, inside the jdk.internal.reflect namespace. This posses a problem for classloaders that don&apos;t delegate to the system classloader. &lt;/p&gt;

&lt;p&gt;In case of the commons classloader, we right now delegate this somewhat implicitly via the bundle.loadClass don in the BundleProxyClassloader (it happens if the framework bootdelegates sun.reflect - which is the case for sling). However, in case of java9 we don&apos;t bootdelegate jdk.internal.reflect - hence, NCDF can happen after a while. &lt;/p&gt;

&lt;p&gt;Granted, one option would be to bootdelegate jdk.internal.reflect as well via the framework but in general, it seems the better option to just bootdelegate in the commons classloader directly (that makes it independent of the framework configuration). &lt;/p&gt;</description>
                <environment></environment>
        <key id="13125957">SLING-7319</key>
            <summary>Dynamic classloader should bootdelegate sun.reflect and jdk.internal.reflect </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Dec 2017 16:17:04 +0000</created>
                <updated>Tue, 19 Dec 2017 16:57:02 +0000</updated>
                            <resolved>Tue, 19 Dec 2017 16:57:02 +0000</resolved>
                                    <version>Commons ClassLoader 1.4.0</version>
                                    <fixVersion>Commons ClassLoader 1.4.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16297072" author="karlpauls" created="Tue, 19 Dec 2017 16:57:02 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-classloader/commit/5a8e15390770a158ed310a600b965233af80b85f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-classloader/commit/5a8e15390770a158ed310a600b965233af80b85f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o2qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7318] PreparePackageMojoTest.testSubsystemBaseGeneration fails intermittently</title>
                <link>https://issues.apache.org/jira/browse/SLING-7318</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case the test execution fails the Maven output looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.sling.maven.slingstart.PreparePackageMojoTest
testSubsystemBaseGeneration(org.apache.sling.maven.slingstart.PreparePackageMojoTest)  Time elapsed: 0.013 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.maven.plugin.MojoExecutionException: Problem creating subsystem .esa file /tmp/PreparePackageMojoTest3862315247356430887/slingstart-tmp/test1.subsystem-base
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at java.nio.file.Files.copy(Files.java:3068)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.createSubsystemBaseFile(PreparePackageMojo.java:382)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.buildSubsystemBase(PreparePackageMojo.java:255)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.buildContentsMap(PreparePackageMojo.java:235)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.prepareGlobal(PreparePackageMojo.java:141)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.execute(PreparePackageMojo.java:131)
	at org.apache.sling.maven.slingstart.PreparePackageMojoTest.testSubsystemBaseGeneration(PreparePackageMojoTest.java:176)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens from time to time also on the ASF Jenkins (e.g. in &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-slingstart-maven-plugin-1.8/12/org.apache.sling$slingstart-maven-plugin/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-slingstart-maven-plugin-1.8/12/org.apache.sling$slingstart-maven-plugin/console&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This was also reported via &lt;a href=&quot;https://www.mail-archive.com/dev@sling.apache.org/msg73131.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@sling.apache.org/msg73131.html&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13125896">SLING-7318</key>
            <summary>PreparePackageMojoTest.testSubsystemBaseGeneration fails intermittently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Dec 2017 11:52:20 +0000</created>
                <updated>Mon, 15 Jan 2018 14:49:24 +0000</updated>
                            <resolved>Thu, 4 Jan 2018 10:32:15 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.7.10</version>
                                    <fixVersion>Slingstart Maven Plugin 1.7.16</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16296703" author="olli" created="Tue, 19 Dec 2017 12:20:16 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ mvn --version
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T09:58:13+02:00)
Maven home: /usr/local/Cellar/maven/3.5.2/libexec
Java version: 1.8.0_152, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/jre
Default locale: en_DE, platform encoding: UTF-8
OS name: &quot;mac os x&quot;, version: &quot;10.12.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16296717" author="kwin" created="Tue, 19 Dec 2017 12:31:41 +0000"  >&lt;p&gt;I improved the exception message in &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/commit/bec3fb21360e34c49329ad54f43336f47f79df36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/commit/bec3fb21360e34c49329ad54f43336f47f79df36&lt;/a&gt; but cannot reproduce the issue locally with the following configuration&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T09:58:13+02:00)
Maven home: /usr/local/Cellar/maven/3.5.2/libexec
Java version: 1.8.0_151, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac os x&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;10.13.2&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nor on ASF Jenkins (&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-slingstart-maven-plugin-1.8/14/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-slingstart-maven-plugin-1.8/14/console&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Please try again with the latest master.&lt;/p&gt;</comment>
                            <comment id="16296745" author="olli" created="Tue, 19 Dec 2017 12:50:51 +0000"  >&lt;p&gt;Well, that test should be improved (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        // Provide the system with some artifacts that are known to be in the local .m2 repo
        // These are explicitly included in the test section of the pom.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;org.apache.sling/org.apache.sling.commons.osgi/2.3.0&lt;/tt&gt; is currently &lt;b&gt;not&lt;/b&gt; in my local Maven repo as I wiped out everything to exclude issues with local artifacts.&lt;/p&gt;</comment>
                            <comment id="16296753" author="kwin" created="Tue, 19 Dec 2017 12:59:11 +0000"  >&lt;p&gt;Indeed the pom.xml now depends on a different version of commons.osgi (2.4.0, has actually been broken two years ago via &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/commit/03c236beb2ab47c7a11e1e3cb75f9589dddf39f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/commit/03c236beb2ab47c7a11e1e3cb75f9589dddf39f2&lt;/a&gt;) and the test in PreparePackageMojoTest (&lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/test/java/org/apache/sling/maven/slingstart/PreparePackageMojoTest.java#L147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/blob/bec3fb21360e34c49329ad54f43336f47f79df36/src/test/java/org/apache/sling/maven/slingstart/PreparePackageMojoTest.java#L147&lt;/a&gt;) has not been adjusted after this commit. We should find a more reliable way to make sure that pom and test use the same versions.&lt;/p&gt;</comment>
                            <comment id="16301491" author="rombert" created="Fri, 22 Dec 2017 14:13:31 +0000"  >&lt;p&gt;Here&apos;s a wild thought - why not drop subsystem generation altogether? We are not using it in any way . Something to discuss in depth on the dev list in a couple of weeks, as I assume most of us will be offline more or less.&lt;/p&gt;</comment>
                            <comment id="16309478" author="kwin" created="Wed, 3 Jan 2018 11:00:27 +0000"  >&lt;p&gt;The exception message is still not being complete due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1067&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1067&lt;/a&gt;. Only after upgrading to surefire 2.19 or newer we get the full exception&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testSubsystemBaseGeneration(org.apache.sling.maven.slingstart.PreparePackageMojoTest)  Time elapsed: 0.01 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.maven.plugin.MojoExecutionException: Problem creating subsystem .esa file /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/rm/vlg2h6m16mb0f65djmnb12xr0000gq/T/PreparePackageMojoTest3334139902104630437/slingstart-tmp/test1.subsystem-base due to /Users/konradwindszus/.m2/repository/org/apache/sling/org.apache.sling.commons.osgi/2.3.0/org.apache.sling.commons.osgi-2.3.0.jar
	at org.apache.sling.maven.slingstart.PreparePackageMojoTest.testSubsystemBaseGeneration(PreparePackageMojoTest.java:176)
Caused by: java.nio.file.NoSuchFileException: /Users/konradwindszus/.m2/repository/org/apache/sling/org.apache.sling.commons.osgi/2.3.0/org.apache.sling.commons.osgi-2.3.0.jar
	at org.apache.sling.maven.slingstart.PreparePackageMojoTest.testSubsystemBaseGeneration(PreparePackageMojoTest.java:176)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16311134" author="kwin" created="Thu, 4 Jan 2018 10:32:02 +0000"  >&lt;p&gt;Finally fixed the tests by removing the dependency on commons osgi completely in &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/commit/e25e1e8cb7020518677540ea4b43cf578ac9ab7b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/commit/e25e1e8cb7020518677540ea4b43cf578ac9ab7b&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16311168" author="olli" created="Thu, 4 Jan 2018 10:56:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, as soon as a dependency used in &lt;tt&gt;PreparePackageMojoTest&lt;/tt&gt; is updated in &lt;tt&gt;pom.xml&lt;/tt&gt; the build will fail on a fresh system. In Pax Exam we have &lt;tt&gt;mavenBundle()...versionAsInProject()&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16311171" author="kwin" created="Thu, 4 Jan 2018 10:58:07 +0000"  >&lt;p&gt;Yes, I know. I made the comment in the pom.xml even more explicit so that everyone should be warned now, when touching those dependencies. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13020492">SLING-6284</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12905142">SLING-5149</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o2cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7314] Dry run not working</title>
                <link>https://issues.apache.org/jira/browse/SLING-7314</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I worked with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt; to define a pipe to perform content migration, see below for an example of this pipe:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
def plumber = getService(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.pipes.Plumber&quot;&lt;/span&gt;);

plumber.newPipe(resourceResolver)
    .echo(&lt;span class=&quot;code-quote&quot;&gt;&apos;/content/foo/bar&apos;&lt;/span&gt;).name(&lt;span class=&quot;code-quote&quot;&gt;&apos;startPath&apos;&lt;/span&gt;)
    .mv(&lt;span class=&quot;code-quote&quot;&gt;&apos;${path.startPath.replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;/bar&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/xyz&quot;&lt;/span&gt;)}&apos;&lt;/span&gt;)
    .parent().name(&lt;span class=&quot;code-quote&quot;&gt;&apos;parentContent&apos;&lt;/span&gt;)
    .mkdir(&lt;span class=&quot;code-quote&quot;&gt;&apos;${path.parentContent}/bar&apos;&lt;/span&gt;).with(&lt;span class=&quot;code-quote&quot;&gt;&apos;nodeType&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;nt:unstructured&apos;&lt;/span&gt;).name(&lt;span class=&quot;code-quote&quot;&gt;&apos;targetResource&apos;&lt;/span&gt;)
    .write(&lt;span class=&quot;code-quote&quot;&gt;&apos;sling:resourceType&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;test/components/somecomponent&apos;&lt;/span&gt;)
    .echo(&lt;span class=&quot;code-quote&quot;&gt;&apos;${path.parentContent}/xyz&apos;&lt;/span&gt;)
    .mv(&lt;span class=&quot;code-quote&quot;&gt;&apos;${path.targetResource}/xyz&apos;&lt;/span&gt;)
    .runWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;dryRun&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the &lt;tt&gt;dryRun&lt;/tt&gt; argument is not taken into account, the changes are actually persisted in the repository.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124991">SLING-7314</key>
            <summary>Dry run not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="hwong">Honwai Wong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Dec 2017 16:20:03 +0000</created>
                <updated>Tue, 24 Apr 2018 13:32:18 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 11:41:58 +0000</resolved>
                                    <version>Pipes 1.1.0</version>
                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16327035" author="npeltier" created="Tue, 16 Jan 2018 11:41:58 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/commit/0e767394a0f1c42bcecdbb7406fc47c1bb976f71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/commit/0e767394a0f1c42bcecdbb7406fc47c1bb976f71&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nwtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7312] Java 9 requires javax.annotation to be added to the classpath</title>
                <link>https://issues.apache.org/jira/browse/SLING-7312</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When running on Java 9 post &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7186&quot; title=&quot;Update to Felix Framework 5.6.10 and limit system bundle exports to available packages on java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7186&quot;&gt;&lt;del&gt;SLING-7186&lt;/del&gt;&lt;/a&gt; startup fails due to the &lt;tt&gt;javax.annotation&lt;/tt&gt; package no longer being exported by default, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.osgi.framework.BundleException: Unable to resolve org.apache.sling.installer.core [2](R 2.0): missing requirement [org.apache.sling.installer.core [2](R 2.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation) Unresolved requirements: [[org.apache.sling.installer.core [2](R 2.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation)]
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4149)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2119)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1373)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.base/java.lang.Thread.run(Thread.java:844)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The interesting part here is that the &lt;tt&gt;javax.annotation&lt;/tt&gt; classes that are required - for instance &lt;tt&gt;javax.annotation.CheckForNull&lt;/tt&gt; are &lt;em&gt;not&lt;/em&gt; part of the JDK-provided &lt;tt&gt;javax.annotation&lt;/tt&gt; package, they must come from another jar. In fact, we don&apos;t have that Jar deployed in the starter, but instead the JDK provides:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Generated.class
PostConstruct.class
PreDestroy.class
Resource.class
Resources.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In a sense, this is very close to the root cause of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7135&quot; title=&quot;Sling Model object can&amp;#39;t be instantiated on Java 9 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7135&quot;&gt;&lt;del&gt;SLING-7135&lt;/del&gt;&lt;/a&gt; - solving one might solve both but the symptoms are very different so raising it separately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124896">SLING-7312</key>
            <summary>Java 9 requires javax.annotation to be added to the classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Dec 2017 09:16:28 +0000</created>
                <updated>Tue, 23 Oct 2018 09:18:30 +0000</updated>
                            <resolved>Thu, 23 Aug 2018 21:37:18 +0000</resolved>
                                                    <fixVersion>Starter 11</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16290671" author="kwin" created="Thu, 14 Dec 2017 10:18:59 +0000"  >&lt;p&gt;The list of Maven dependencies which can act as replacement for missing packages in Java 9 is listed here: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16290682" author="kwin" created="Thu, 14 Dec 2017 10:26:15 +0000"  >&lt;p&gt;Actually &lt;tt&gt;javax.annotation.CheckForNull&lt;/tt&gt; is not necessary at run time (but still has a runtime retention, &lt;a href=&quot;https://github.com/amaembo/jsr-305/blob/master/ri/src/main/java/javax/annotation/CheckForNull.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amaembo/jsr-305/blob/master/ri/src/main/java/javax/annotation/CheckForNull.java&lt;/a&gt;). We never deployed those classes to Sling (not even for Java 8). More details are available in &lt;a href=&quot;https://github.com/amaembo/jsr-305/issues/31&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/amaembo/jsr-305/issues/31&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So I am wondering, whether this particular class really is the issue here?&lt;br/&gt;
The package though needs to be exported because otherwise OSGi will not start the bundle.&lt;/p&gt;</comment>
                            <comment id="16290689" author="rombert" created="Thu, 14 Dec 2017 10:30:01 +0000"  >&lt;p&gt;Well, the retention policy is the problem, AFAICT this is why the import is generated. It can potentially be used at runtime for instance using &lt;tt&gt;java.lang.reflect.Method.getAnnotation&lt;/tt&gt;, although I really doubt it&apos;s done since it would break now.&lt;/p&gt;

&lt;p&gt;But the bottom line remains - it needs to be exported, also for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7135&quot; title=&quot;Sling Model object can&amp;#39;t be instantiated on Java 9 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7135&quot;&gt;&lt;del&gt;SLING-7135&lt;/del&gt;&lt;/a&gt;. And the &lt;tt&gt;o.a.s.installer.core&lt;/tt&gt; bundle is just the first one, there are dozens of bundles that use the nullness annotations and fail to resolve on Java 9 without the &lt;tt&gt;--add-modules&lt;/tt&gt; flag.&lt;/p&gt;</comment>
                            <comment id="16457540" author="kwin" created="Sat, 28 Apr 2018 11:06:22 +0000"  >&lt;p&gt;There are some hints about this in &lt;a href=&quot;https://blog.codefx.org/java/jsr-305-java-9/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blog.codefx.org/java/jsr-305-java-9/&lt;/a&gt;. Google is considering moving from JSR-305 to Spotbugs annotations for that reason (&lt;a href=&quot;https://github.com/google/guava/issues/2960&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/google/guava/issues/2960&lt;/a&gt;). Oak/Jackrabbit wants to move away as well (&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-4301&quot; title=&quot;get rid of JSR 305 dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCR-4301&quot;&gt;&lt;del&gt;JCR-4301&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16565154" author="reschke" created="Wed, 1 Aug 2018 11:25:05 +0000"  >&lt;p&gt;Note that with Java 11, Sling components do not seem to load anymore:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;01.08.2018 13:15:57.835 *ERROR* [FelixDispatchQueue] org.apache.sling.installer.core FrameworkEvent ERROR (org.osgi.framework.BundleException: Unable to resolve org.apache.sling.installer.core [12](R 12.0): missing requirement [org.apache.sling.installer.core [12](R 12.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation) Unresolved requirements: [[org.apache.sling.installer.core [12](R 12.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation)])
org.osgi.framework.BundleException: Unable to resolve org.apache.sling.installer.core [12](R 12.0): missing requirement [org.apache.sling.installer.core [12](R 12.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation) Unresolved requirements: [[org.apache.sling.installer.core [12](R 12.0)] osgi.wiring.package; (osgi.wiring.package=javax.annotation)]
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4362)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2277)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1535)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
        at java.base/java.lang.Thread.run(Thread.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16565354" author="cziegeler" created="Wed, 1 Aug 2018 13:53:28 +0000"  >&lt;p&gt;I think a runtime dependency for these build time annotations is wrong. If there are viable alternative annotations I think the cleanest solution would be to switch; but that requires updating all of our modules. Do we have a complete list of modules affected?&lt;/p&gt;</comment>
                            <comment id="16565479" author="sseifert@pro-vision.de" created="Wed, 1 Aug 2018 15:21:53 +0000"  >&lt;p&gt;executing this command on all sling repos:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;find . -name &quot;pom.xml&quot; -exec fgrep -q &quot;&amp;lt;artifactId&amp;gt;jsr305&amp;lt;/artifactId&amp;gt;&quot; {} &quot;;&quot; -print
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;returned this list:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./org-apache-sling-api/pom.xml
./org-apache-sling-auth-core/pom.xml
./org-apache-sling-caconfig-api/pom.xml
./org-apache-sling-caconfig-impl/pom.xml
./org-apache-sling-caconfig-spi/pom.xml
./org-apache-sling-commons-clam/pom.xml
./org-apache-sling-commons-messaging/pom.xml
./org-apache-sling-commons-messaging-mail/pom.xml
./org-apache-sling-discovery-commons/pom.xml
./org-apache-sling-distribution-api/pom.xml
./org-apache-sling-distribution-avro-serializer/pom.xml
./org-apache-sling-distribution-core/pom.xml
./org-apache-sling-distribution-kryo-serializer/pom.xml
./org-apache-sling-installer-core/pom.xml
./org-apache-sling-jcr-api/pom.xml
./org-apache-sling-jcr-resource/pom.xml
./org-apache-sling-jms/pom.xml
./org-apache-sling-jobs/pom.xml
./org-apache-sling-jobs-it-services/pom.xml
./org-apache-sling-models-api/pom.xml
./org-apache-sling-models-impl/pom.xml
./org-apache-sling-models-jacksonexporter/pom.xml
./org-apache-sling-models-validation-impl/pom.xml
./org-apache-sling-mom/pom.xml
./org-apache-sling-oak-restrictions/pom.xml
./org-apache-sling-resource-presence/pom.xml
./org-apache-sling-resourceresolver/pom.xml
./org-apache-sling-scripting-core/pom.xml
./org-apache-sling-scripting-sightly/pom.xml
./org-apache-sling-scripting-thymeleaf/pom.xml
./org-apache-sling-tracer/pom.xml
./org-apache-sling-validation-api/pom.xml
./org-apache-sling-validation-core/pom.xml
./org-apache-sling-validation-test-services/pom.xml
./org-apache-sling-xss/pom.xml
./parent/pom.xml
./whiteboard/encrypt/pom.xml
./whiteboard/project-archetype/src/main/resources/archetype-resources/pom.xml
./whiteboard/scripting-resolver/org-apache-sling-scripting-resolver/pom.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;following &lt;a href=&quot;https://lists.apache.org/thread.html/44cac2f3c9454a308b70adb9c73a8e9a928d9c145a12f82f8a3a0ef1@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this discussion&lt;/a&gt; the recommended solution is to switch to jetbrains annotations. spotbugs has license problems (see also discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-4301&quot; title=&quot;get rid of JSR 305 dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCR-4301&quot;&gt;&lt;del&gt;JCR-4301&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; prepared a shell script for converting the annotations in the java sources attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-7511&quot; title=&quot;get rid of JSR 305 dependency - use jetbrains nullability annotations instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-7511&quot;&gt;&lt;del&gt;OAK-7511&lt;/del&gt;&lt;/a&gt; (i&apos;ve not tested it yet).&lt;/p&gt;

&lt;p&gt;should we do a vote on the list to get a consensus to which annotations we should migrate?&lt;/p&gt;</comment>
                            <comment id="16565603" author="reschke" created="Wed, 1 Aug 2018 16:41:06 +0000"  >&lt;p&gt;The script is fairly agnostic about directory structure and does not rely on svn, so it might just work for you. If you want to run it on macos, make sure you have gawk installed.&lt;/p&gt;

&lt;p&gt;It does:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;rewrite Java code&lt;/li&gt;
	&lt;li&gt;rewrite POMs&lt;/li&gt;
	&lt;li&gt;tries to adjust version numbers&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The code works fairly well with the Oak code base (no manual edits needed), but of course that doesn&apos;t mean it might break on other examples...&lt;/p&gt;</comment>
                            <comment id="16566324" author="cziegeler" created="Thu, 2 Aug 2018 04:20:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; - that&apos;s unfortunately a long list&lt;br/&gt;
I assume the jetbrains annotations have retention policy class?&lt;br/&gt;
I think a vote on the list is a good idea - we need support to get releases out for those modules fairly quickly to solve the problem&lt;/p&gt;</comment>
                            <comment id="16566483" author="sseifert@pro-vision.de" created="Thu, 2 Aug 2018 08:19:21 +0000"  >&lt;p&gt;the jetbrains annotations have class retention policy - this is required to have the tooling working.&lt;br/&gt;
&lt;a href=&quot;https://github.com/JetBrains/java-annotations/tree/master/java8/src/main/java/org/jetbrains/annotations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/JetBrains/java-annotations/tree/master/java8/src/main/java/org/jetbrains/annotations&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i will start a vote on the mailing list&lt;/p&gt;</comment>
                            <comment id="16590839" author="karlpauls" created="Thu, 23 Aug 2018 21:37:18 +0000"  >&lt;p&gt;I think we can resolve this issue now.&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7798&quot; title=&quot;Switch from JSR-305 annotations to JetBrains Nullable/NotNull annotations &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7798&quot;&gt;&lt;del&gt;SLING-7798&lt;/del&gt;&lt;/a&gt;&#160;cleaned up the dependencies (pending releases) and I just added a provider of javax.annotation to the starter for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7235&quot; title=&quot;Remove requirement for --add-modules java.se.ee&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7235&quot;&gt;&lt;del&gt;SLING-7235&lt;/del&gt;&lt;/a&gt; (so that we resolve until that is done).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13117422">SLING-7235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13176358">SLING-7798</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13159434">JCR-4301</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13146933">OAK-7368</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nw8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7311] The SlingScriptEngineManager doesn&apos;t correctly flush script engine associations</title>
                <link>https://issues.apache.org/jira/browse/SLING-7311</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SlingScriptEngineManager doesn&apos;t correctly flush script engine associations (name, extensions, mime types), because it doesn&apos;t replace the internal script engine manager once changes are detected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124885">SLING-7311</key>
            <summary>The SlingScriptEngineManager doesn&apos;t correctly flush script engine associations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Dec 2017 07:24:05 +0000</created>
                <updated>Tue, 19 Dec 2017 09:46:10 +0000</updated>
                            <resolved>Thu, 14 Dec 2017 08:04:41 +0000</resolved>
                                    <version>Scripting Core 2.0.52</version>
                                    <fixVersion>Scripting Core 2.0.54</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16290498" author="radu.cotescu" created="Thu, 14 Dec 2017 08:04:41 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/a0bc18cc24dfe543b3214f2cd4ae63b362f63dcc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a0bc18c&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nw67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7310] Sling Dynamic Include: When HTML file is initially created, the includes are not processed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7310</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When creating the initial HTML for a page that has SSI tags, for some reason the includes are not processed.&lt;/p&gt;

&lt;p&gt;I.e. the page is served with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;!--#include virtual=&lt;span class=&quot;code-quote&quot;&gt;&quot;/path/to/content/_jcr_content/root/main/some-component.caching-prevented.html&quot;&lt;/span&gt; --&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, when I then refresh that page (load the HTML file from the docroot), the include &lt;b&gt;is&lt;/b&gt; processed and the sub-request ends up in the backend system.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124732">SLING-7310</key>
            <summary>Sling Dynamic Include: When HTML file is initially created, the includes are not processed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hkui">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Dec 2017 16:44:55 +0000</created>
                <updated>Wed, 13 Dec 2017 16:48:34 +0000</updated>
                                            <version>Dynamic Include 3.0.0</version>
                    <version>Dynamic Include 3.1.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16289513" author="hkui" created="Wed, 13 Dec 2017 16:48:34 +0000"  >&lt;p&gt;For our use-case, using JSI is for now a viable workaround.&lt;/p&gt;

&lt;p&gt;But imho there should not be a difference between the initial request and the requests after that (after caching), in terms of the HTML content that is returned.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nv8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7309] SlingBucks sample - rendering scripts not used</title>
                <link>https://issues.apache.org/jira/browse/SLING-7309</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7308&quot; title=&quot;HTLBlog sample - rendering scripts not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7308&quot;&gt;&lt;del&gt;SLING-7308&lt;/del&gt;&lt;/a&gt;, rendering scripts are not used at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124721">SLING-7309</key>
            <summary>SlingBucks sample - rendering scripts not used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Dec 2017 16:11:28 +0000</created>
                <updated>Thu, 14 Dec 2017 12:50:39 +0000</updated>
                            <resolved>Thu, 14 Dec 2017 12:50:39 +0000</resolved>
                                                                    <component>Samples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16289984" author="auniverseaway" created="Wed, 13 Dec 2017 21:49:24 +0000"  >&lt;p&gt;I think this is a result HTLBlog incorrectly installing first.&lt;/p&gt;

&lt;p&gt;After my PR, Slingbucks appears to behave as expected. Please see screenshot.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13124720">SLING-7308</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12901949" name="Screen Shot 2017-12-13 at 2.48.38 PM.png" size="97459" author="auniverseaway" created="Wed, 13 Dec 2017 21:49:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nv5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7308] HTLBlog sample - rendering scripts not used</title>
                <link>https://issues.apache.org/jira/browse/SLING-7308</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;None of the rendering scripts for the HTL blog sample are used. Instead, the default get servlet serves the response. I tried with Sling 9 and also with 10-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;Initially reported via users@sling - &lt;a href=&quot;https://lists.apache.org/thread.html/ca35a11ce8d4cf8aaf4580c83bbd6072f2aa04a92112bb335d044a12@%3Cusers.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/ca35a11ce8d4cf8aaf4580c83bbd6072f2aa04a92112bb335d044a12@%3Cusers.sling.apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124720">SLING-7308</key>
            <summary>HTLBlog sample - rendering scripts not used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Dec 2017 16:04:23 +0000</created>
                <updated>Thu, 14 Dec 2017 12:50:45 +0000</updated>
                            <resolved>Thu, 14 Dec 2017 12:50:21 +0000</resolved>
                                                                    <component>Samples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16289440" author="rombert" created="Wed, 13 Dec 2017 16:04:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; - you initially imported this sample so could I ask you to take a look when you have some spare cycles?&lt;/p&gt;</comment>
                            <comment id="16289964" author="githubbot" created="Wed, 13 Dec 2017 21:41:32 +0000"  >&lt;p&gt;auniverseaway opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7308&quot; title=&quot;HTLBlog sample - rendering scripts not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7308&quot;&gt;&lt;del&gt;SLING-7308&lt;/del&gt;&lt;/a&gt; - Sling 9 Compatibility&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-samples/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-samples/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   It appears initial content loader has changed in Sling 9&lt;br/&gt;
   which caused this sample to break HTL rendering.&lt;/p&gt;

&lt;p&gt;   Resolves: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7308&quot; title=&quot;HTLBlog sample - rendering scripts not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7308&quot;&gt;&lt;del&gt;SLING-7308&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16289968" author="auniverseaway" created="Wed, 13 Dec 2017 21:42:44 +0000"  >&lt;p&gt;This PR fixes this issue: &lt;a href=&quot;https://github.com/apache/sling-samples/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-samples/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll also see what I can find out on the Slingshot error.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16290790" author="rombert" created="Thu, 14 Dec 2017 12:50:21 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-samples/commit/bfaf7e0a1555b569b0d40b5e21c7e20a7249c23d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-samples/commit/bfaf7e0a1555b569b0d40b5e21c7e20a7249c23d&lt;/a&gt;, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=auniverseaway&quot; class=&quot;user-hover&quot; rel=&quot;auniverseaway&quot;&gt;auniverseaway&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16290791" author="githubbot" created="Thu, 14 Dec 2017 12:50:42 +0000"  >&lt;p&gt;rombert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7308&quot; title=&quot;HTLBlog sample - rendering scripts not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7308&quot;&gt;&lt;del&gt;SLING-7308&lt;/del&gt;&lt;/a&gt; - Sling 9 Compatibility&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-samples/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-samples/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/htlblog/README.md b/htlblog/README.md&lt;br/&gt;
index 2e0c79d..640d664 100644&lt;br/&gt;
&amp;#8212; a/htlblog/README.md&lt;br/&gt;
+++ b/htlblog/README.md&lt;br/&gt;
@@ -11,13 +11,13 @@ This sample is designed as an introduction to Sling and HTL.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Requirements&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Java 8&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&lt;/a&gt;)
	&lt;ul&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Sling 8&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://sling.apache.org/downloads.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/downloads.cgi&lt;/a&gt;)&lt;br/&gt;
+* &lt;span class=&quot;error&quot;&gt;&amp;#91;Sling 9&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://sling.apache.org/downloads.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/downloads.cgi&lt;/a&gt;)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Maven 3+&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://maven.apache.org/download.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/download.cgi&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Installation
		&lt;ol&gt;
			&lt;li&gt;1. Run Sling&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;java -jar org.apache.sling.launchpad-8.jar&lt;br/&gt;
+    java -jar org.apache.sling.launchpad-9.jar&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;2. Install HTLBlog&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;@@ -25,7 +25,7 @@ This sample is designed as an introduction to Sling and HTL.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;3. Explore&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8080/content/htlblog.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/htlblog.html&lt;/a&gt;&lt;br/&gt;
+    &lt;a href=&quot;http://localhost:8080/content/htlblog/posts.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/htlblog/posts.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Parts of the Application
		&lt;ol&gt;
			&lt;li&gt;Java&lt;br/&gt;
@@ -50,9 +50,8 @@ HTL Blog uses Sling Models extensively. You can read about them &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://s&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s&lt;/a&gt;&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;Mostly Bootstrap and some basic custom styles.&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Content&lt;br/&gt;
-The content is built using a single JSON file called `htlblog.json`. It maps to the following nodes:&lt;br/&gt;
+The content is built using a two JSON files under `/content/htlblog`. They map to the following nodes:&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;`/content/htlblog` - Our homepage. Currently lists our posts.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;`/content/htlblog/admin` - Our admin home. Used to list our posts for editing or deleting.&lt;/li&gt;
	&lt;li&gt;`/content/htlblog/admin/edit` - Our edit page. Use to create, or if a post path is supplied, it will edit an existing post.&lt;/li&gt;
	&lt;li&gt;`/content/htlblog/posts` - Another post list, but also used as the parent of our posts.&lt;br/&gt;
diff --git a/htlblog/pom.xml b/htlblog/pom.xml&lt;br/&gt;
index a96f3a9..3d54198 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/htlblog/pom.xml&lt;br/&gt;
+++ b/htlblog/pom.xml&lt;br/&gt;
@@ -56,7 +56,10 @@&lt;br/&gt;
                             org.apache.sling.samples.htlblog&lt;br/&gt;
                         &amp;lt;/Sling-Model-Packages&amp;gt;&lt;br/&gt;
                         &amp;lt;!-- Always overwrite all content to give us a fresh start --&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;Sling-Initial-Content&amp;gt;initial-content;overwrite:=true;uninstall:=true&amp;lt;/Sling-Initial-Content&amp;gt;&lt;br/&gt;
+                        &amp;lt;Sling-Initial-Content&amp;gt;&lt;br/&gt;
+                            initial-content/apps/htlblog;overwrite:=true;uninstall:=true;path:=/apps/htlblog,&lt;br/&gt;
+                            initial-content/content/htlblog;overwrite:=true;uninstall:=true;path:=/content/htlblog&lt;br/&gt;
+                        &amp;lt;/Sling-Initial-Content&amp;gt;&lt;br/&gt;
                   &amp;lt;/instructions&amp;gt;&lt;br/&gt;
                 &amp;lt;/configuration&amp;gt;&lt;br/&gt;
                 &amp;lt;version&amp;gt;3.3.0&amp;lt;/version&amp;gt;&lt;br/&gt;
@@ -66,8 +69,8 @@&lt;br/&gt;
                 &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
                 &amp;lt;version&amp;gt;3.3&amp;lt;/version&amp;gt;&lt;br/&gt;
                 &amp;lt;configuration&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;source&amp;gt;7&amp;lt;/source&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;target&amp;gt;7&amp;lt;/target&amp;gt;&lt;br/&gt;
+                    &amp;lt;source&amp;gt;8&amp;lt;/source&amp;gt;&lt;br/&gt;
+                    &amp;lt;target&amp;gt;8&amp;lt;/target&amp;gt;&lt;br/&gt;
                 &amp;lt;/configuration&amp;gt;&lt;br/&gt;
             &amp;lt;/plugin&amp;gt;&lt;br/&gt;
             &amp;lt;plugin&amp;gt;&lt;br/&gt;
@@ -127,7 +130,7 @@&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;org.apache.sling.api&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;2.9.0&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;2.16.2&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
@@ -156,13 +159,13 @@&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;org.apache.sling.models.api&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;1.2.2&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;1.3.4&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;org.apache.sling.models.impl&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;1.2.2&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;1.4.2&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
diff --git a/htlblog/src/main/resources/initial-content/apps/htlblog/admin/page/nav.html b/htlblog/src/main/resources/initial-content/apps/htlblog/admin/page/nav.html&lt;br/&gt;
index 007b54b..e611072 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/htlblog/src/main/resources/initial-content/apps/htlblog/admin/page/nav.html&lt;br/&gt;
+++ b/htlblog/src/main/resources/initial-content/apps/htlblog/admin/page/nav.html&lt;br/&gt;
@@ -23,7 +23,7 @@&lt;br/&gt;
         &amp;lt;span class=&quot;icon-bar&quot;&amp;gt;&amp;lt;/span&amp;gt;&lt;br/&gt;
         &amp;lt;span class=&quot;icon-bar&quot;&amp;gt;&amp;lt;/span&amp;gt;&lt;br/&gt;
       &amp;lt;/button&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&amp;lt;a class=&quot;navbar-brand&quot; href=&quot;/content/htlblog.html&quot;&amp;gt;HTL Blog&amp;lt;/a&amp;gt;&lt;br/&gt;
+      &amp;lt;a class=&quot;navbar-brand&quot; href=&quot;/content/htlblog/posts.html&quot;&amp;gt;HTL Blog&amp;lt;/a&amp;gt;&lt;br/&gt;
     &amp;lt;/div&amp;gt;&lt;br/&gt;
     &amp;lt;div id=&quot;navbar&quot; class=&quot;collapse navbar-collapse&quot;&amp;gt;&lt;br/&gt;
       &amp;lt;ul class=&quot;nav navbar-nav&quot;&amp;gt;&lt;br/&gt;
diff --git a/htlblog/src/main/resources/initial-content/apps/htlblog/public/page/nav.html b/htlblog/src/main/resources/initial-content/apps/htlblog/public/page/nav.html&lt;br/&gt;
index b97ff94..5cee374 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/htlblog/src/main/resources/initial-content/apps/htlblog/public/page/nav.html&lt;br/&gt;
+++ b/htlblog/src/main/resources/initial-content/apps/htlblog/public/page/nav.html&lt;br/&gt;
@@ -23,7 +23,7 @@&lt;br/&gt;
                 &amp;lt;span class=&quot;icon-bar&quot;&amp;gt;&amp;lt;/span&amp;gt;&lt;br/&gt;
                 &amp;lt;span class=&quot;icon-bar&quot;&amp;gt;&amp;lt;/span&amp;gt;&lt;br/&gt;
             &amp;lt;/button&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&amp;lt;a class=&quot;navbar-brand&quot; href=&quot;/content/htlblog.html&quot;&amp;gt;HTL Blog&amp;lt;/a&amp;gt;&lt;br/&gt;
+            &amp;lt;a class=&quot;navbar-brand&quot; href=&quot;/content/htlblog/posts.html&quot;&amp;gt;HTL Blog&amp;lt;/a&amp;gt;&lt;br/&gt;
         &amp;lt;/div&amp;gt;&lt;br/&gt;
         &amp;lt;div id=&quot;navbar&quot; class=&quot;collapse navbar-collapse&quot;&amp;gt;&lt;br/&gt;
             &amp;lt;ul class=&quot;nav navbar-nav&quot;&amp;gt;&lt;br/&gt;
diff --git a/htlblog/src/main/resources/initial-content/content/htlblog.json b/htlblog/src/main/resources/initial-content/content/htlblog.json&lt;br/&gt;
deleted file mode 100644&lt;br/&gt;
index 83633c3..0000000
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/htlblog/src/main/resources/initial-content/content/htlblog.json&lt;br/&gt;
+++ /dev/null&lt;br/&gt;
@@ -1,39 +0,0 @@&lt;br/&gt;
-{&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&quot;jcr:primaryType&quot;: &quot;nt:unstructured&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;sling:resourceType&quot;: &quot;htlblog/public/list&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;title&quot;: &quot;HTL Blog&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;description&quot;: &quot;The blog homepage.&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;posts&quot;: {&lt;/li&gt;
	&lt;li&gt;&quot;jcr:primaryType&quot;: &quot;sling:OrderedFolder&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;sling:resourceType&quot;: &quot;htlblog/public/list&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;title&quot;: &quot;HTL Blog&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;description&quot;: &quot;The blog homepage.&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;hello-world&quot; : 
{
-			&quot;jcr:primaryType&quot;: &quot;nt:unstructured&quot;,
-			&quot;sling:resourceType&quot;: &quot;htlblog/public/post&quot;,
-			&quot;title&quot;: &quot;Hello World&quot;,
-			&quot;jcr:createdBy&quot;: &quot;admin&quot;,
-			&quot;created&quot;: &quot;2017-04-01T13:26:00.000+01:00&quot;,
-			&quot;body&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&quot;
-		}
&lt;p&gt;,&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&quot;hola-mundo&quot; : 
{
-			&quot;jcr:primaryType&quot;: &quot;nt:unstructured&quot;,
-			&quot;sling:resourceType&quot;: &quot;htlblog/public/post&quot;,
-			&quot;title&quot;: &quot;Hola Mundo&quot;,
-			&quot;jcr:createdBy&quot;: &quot;admin&quot;,
-			&quot;created&quot;: &quot;2017-04-01T13:26:00.000+01:00&quot;,
-			&quot;body&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&quot;
-		}&lt;/li&gt;
	&lt;li&gt;},&lt;/li&gt;
	&lt;li&gt;&quot;admin&quot;: {&lt;/li&gt;
	&lt;li&gt;&quot;jcr:primaryType&quot;: &quot;nt:unstructured&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;sling:resourceType&quot;: &quot;htlblog/admin/list&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;title&quot;: &quot;HTL Blog Admin&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;description&quot;: &quot;The blog admin.&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;edit&quot;: 
{
-			&quot;jcr:primaryType&quot;: &quot;nt:unstructured&quot;,
-			&quot;sling:resourceType&quot;: &quot;htlblog/admin/edit&quot;,
-			&quot;title&quot;: &quot;HTL Blog Edit&quot;
-		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-}&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
diff --git a/htlblog/src/main/resources/initial-content/content/htlblog/admin.json b/htlblog/src/main/resources/initial-content/content/htlblog/admin.json&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..46a6f65
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/htlblog/src/main/resources/initial-content/content/htlblog/admin.json&lt;br/&gt;
@@ -0,0 +1,11 @@&lt;br/&gt;
+
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+    &amp;quot;jcr}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;\ No newline at end of file&lt;br/&gt;
diff --git a/htlblog/src/main/resources/initial-content/content/htlblog/posts.json b/htlblog/src/main/resources/initial-content/content/htlblog/posts.json&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..3eea1fa&lt;/p&gt;&lt;/li&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/htlblog/src/main/resources/initial-content/content/htlblog/posts.json&lt;br/&gt;
@@ -0,0 +1,22 @@&lt;br/&gt;
+
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+    &amp;quot;jcr}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;\ No newline at end of file&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16290792" author="githubbot" created="Thu, 14 Dec 2017 12:50:45 +0000"  >&lt;p&gt;rombert commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7308&quot; title=&quot;HTLBlog sample - rendering scripts not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7308&quot;&gt;&lt;del&gt;SLING-7308&lt;/del&gt;&lt;/a&gt; - Sling 9 Compatibility&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-samples/pull/1#issuecomment-351702010&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-samples/pull/1#issuecomment-351702010&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the fix, @auniverseaway !&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13124721">SLING-7309</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nv5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7307] Sling Model impl should not embed beanutils</title>
                <link>https://issues.apache.org/jira/browse/SLING-7307</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.models.impl&lt;/tt&gt; relies and embeds on Bean Utils.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124391">SLING-7307</key>
            <summary>Sling Model impl should not embed beanutils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="acollign">Alex Collignon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Dec 2017 15:52:43 +0000</created>
                <updated>Mon, 5 Mar 2018 12:24:08 +0000</updated>
                            <resolved>Wed, 13 Dec 2017 14:37:41 +0000</resolved>
                                                    <fixVersion>Models Impl 1.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16287786" author="githubbot" created="Tue, 12 Dec 2017 15:55:22 +0000"  >&lt;p&gt;justinedelson opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7307&quot; title=&quot;Sling Model impl should not embed beanutils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7307&quot;&gt;&lt;del&gt;SLING-7307&lt;/del&gt;&lt;/a&gt; - remove embedded BeanUtils&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16287787" author="justinedelson" created="Tue, 12 Dec 2017 15:56:35 +0000"  >&lt;p&gt;Looking at where this is used, I think it is a trivial removal and we can do it without pain. &lt;tt&gt;PropertiesUtils.getProperty()&lt;/tt&gt; handles things like &lt;tt&gt;DynaBean&lt;/tt&gt; objects which we obviously don&apos;t need to support (and probably wouldn&apos;t work anyway since we&apos;re embedding &lt;tt&gt;BeanUtils&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Pull request created: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16289334" author="githubbot" created="Wed, 13 Dec 2017 14:37:31 +0000"  >&lt;p&gt;justinedelson closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7307&quot; title=&quot;Sling Model impl should not embed beanutils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7307&quot;&gt;&lt;del&gt;SLING-7307&lt;/del&gt;&lt;/a&gt; - remove embedded BeanUtils&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index e670769..ee61eca 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -52,9 +52,6 @@&lt;br/&gt;
                 &amp;lt;extensions&amp;gt;true&amp;lt;/extensions&amp;gt;&lt;br/&gt;
                 &amp;lt;configuration&amp;gt;&lt;br/&gt;
                   &amp;lt;instructions&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;Embed-Dependency&amp;gt;&lt;/li&gt;
	&lt;li&gt;*;artifactId=commons-beanutils;groupId=commons-beanutils&lt;/li&gt;
	&lt;li&gt;&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
                     &amp;lt;!-- Remove those package imports because embedded and relocated via shade plugin (see below) --&amp;gt;&lt;br/&gt;
                     &amp;lt;Import-Package&amp;gt;&lt;br/&gt;
                       !org.apache.sling.commons.osgi,&lt;br/&gt;
@@ -224,13 +221,6 @@&lt;br/&gt;
             &amp;lt;version&amp;gt;2.0.20&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;!-- Artifact is shaded and inlined, only some classes included (see above) --&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;dependency&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;groupId&amp;gt;commons-beanutils&amp;lt;/groupId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;commons-beanutils&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;1.8.3&amp;lt;/version&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/dependency&amp;gt;&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;commons-lang&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;commons-lang&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/models/impl/via/BeanPropertyViaProvider.java b/src/main/java/org/apache/sling/models/impl/via/BeanPropertyViaProvider.java&lt;br/&gt;
index 6b6949b..337ee12 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/main/java/org/apache/sling/models/impl/via/BeanPropertyViaProvider.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/models/impl/via/BeanPropertyViaProvider.java&lt;br/&gt;
@@ -16,7 +16,6 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.models.impl.via;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-import org.apache.commons.beanutils.PropertyUtils;&lt;br/&gt;
 import org.apache.commons.lang3.StringUtils;&lt;br/&gt;
 import org.apache.felix.scr.annotations.Component;&lt;br/&gt;
 import org.apache.felix.scr.annotations.Service;&lt;br/&gt;
@@ -26,6 +25,10 @@&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;/p&gt;

&lt;p&gt;+import java.beans.BeanInfo;&lt;br/&gt;
+import java.beans.Introspector;&lt;br/&gt;
+import java.beans.PropertyDescriptor;&lt;br/&gt;
+&lt;br/&gt;
 @Component&lt;br/&gt;
 @Service&lt;br/&gt;
 public class BeanPropertyViaProvider implements ViaProvider {&lt;br/&gt;
@@ -43,10 +46,15 @@ public Object getAdaptable(Object original, String value) &lt;/p&gt;
{
             return ORIGINAL;
         }
&lt;p&gt;         try {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return PropertyUtils.getProperty(original, value);&lt;br/&gt;
+            BeanInfo beanInfo = Introspector.getBeanInfo(original.getClass());&lt;br/&gt;
+            for (PropertyDescriptor desc : beanInfo.getPropertyDescriptors()) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                if (desc.getName().equals(value)) {
+                    return desc.getReadMethod().invoke(original);
+                }+            }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;         } catch (Exception e) &lt;/p&gt;
{
             log.error(&quot;Unable to execution projection &quot; + value, e);
-            return null;
         }
&lt;p&gt;+        return null;&lt;br/&gt;
     }&lt;br/&gt;
 }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16289335" author="justinedelson" created="Wed, 13 Dec 2017 14:37:41 +0000"  >&lt;p&gt;PR Merged&lt;/p&gt;</comment>
                            <comment id="16289386" author="rombert" created="Wed, 13 Dec 2017 15:27:35 +0000"  >&lt;p&gt;I think this caused a failure in the models ITs, see &lt;a href=&quot;https://builds.apache.org/job/sling-org-apache-sling-models-integration-tests-1.8/10/display/redirect&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-org-apache-sling-models-integration-tests-1.8/10/display/redirect&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16289406" author="justinedelson" created="Wed, 13 Dec 2017 15:36:11 +0000"  >&lt;p&gt;True, but for the worst possible reason. Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-integration-tests/commit/bd7658008d6053622a2b154f8f0e7f22e7da431f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-integration-tests/commit/bd7658008d6053622a2b154f8f0e7f22e7da431f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nt4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7306] The JS Use Provider bundle should explicitly depend on the Rhino Script Engine</title>
                <link>https://issues.apache.org/jira/browse/SLING-7306</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7305&quot; title=&quot;The org.apache.sling.scripting.javascript bundle should add more specific information about the Script Engine it provides&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7305&quot;&gt;&lt;del&gt;SLING-7305&lt;/del&gt;&lt;/a&gt; is implemented the JavaScript Use Provider should make sure that the used Scripting Engine is Rhino, since the Use Provider injects some wrapper objects for the JavaScript &lt;tt&gt;use&lt;/tt&gt; function into the JavaScript context.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124318">SLING-7306</key>
            <summary>The JS Use Provider bundle should explicitly depend on the Rhino Script Engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Dec 2017 09:29:09 +0000</created>
                <updated>Tue, 19 Dec 2017 09:58:17 +0000</updated>
                            <resolved>Wed, 13 Dec 2017 16:30:54 +0000</resolved>
                                    <version>Scripting Sightly JS Use Provider 1.0.0</version>
                    <version>Scripting HTL JS Use Provider 1.0.12</version>
                                    <fixVersion>Scripting HTL JS Use Provider 1.0.26</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16289482" author="radu.cotescu" created="Wed, 13 Dec 2017 16:30:54 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-js-provider/commit/d513dbef4ceef24d7dece038e2ddd967c99e60a3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d513dbe&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13124292">SLING-7305</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nsof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7305] The org.apache.sling.scripting.javascript bundle should add more specific information about the Script Engine it provides</title>
                <link>https://issues.apache.org/jira/browse/SLING-7305</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; all accessible Script Engines are loaded by Apache Sling (Java platform engine, SPI bundles engines and explicitly registered Script Engines). Therefore, the Script Engine provided by the &lt;tt&gt;org.apache.sling.scripting.javascript&lt;/tt&gt; bundle should provide more specific information, in case a script should target this engine and not Nashorn.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124292">SLING-7305</key>
            <summary>The org.apache.sling.scripting.javascript bundle should add more specific information about the Script Engine it provides</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Dec 2017 07:11:06 +0000</created>
                <updated>Tue, 19 Dec 2017 09:58:08 +0000</updated>
                            <resolved>Wed, 13 Dec 2017 14:14:44 +0000</resolved>
                                    <version>Scripting JavaScript 3.0.0</version>
                                    <fixVersion>Scripting JavaScript 3.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16289307" author="radu.cotescu" created="Wed, 13 Dec 2017 14:14:44 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-javascript/commit/1827aac8a0f4caaabe65eaee90bb7f367096cc90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1827aac&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13124318">SLING-7306</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13103074">SLING-7134</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nsin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7304] Add support for primitive arrays in ObjectModel#toString and ObjectModel#toCollection</title>
                <link>https://issues.apache.org/jira/browse/SLING-7304</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.compiler.util.ObjectModel#toCollection&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.scripting.sightly.compiler.util.ObjectModel#toString&lt;/tt&gt; should be extended to be able to convert primitive arrays, the same way they support &lt;tt&gt;Object&lt;/tt&gt; arrays, especially since primitive arrays can be used in &lt;tt&gt;org.apache.sling.scripting.sightly.compiler.util.ObjectModel#toBoolean&lt;/tt&gt;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13124192">SLING-7304</key>
            <summary>Add support for primitive arrays in ObjectModel#toString and ObjectModel#toCollection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Dec 2017 18:33:17 +0000</created>
                <updated>Tue, 19 Dec 2017 10:06:22 +0000</updated>
                            <resolved>Wed, 13 Dec 2017 16:57:33 +0000</resolved>
                                                    <fixVersion>Scripting HTL Compiler 1.0.16</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16289524" author="radu.cotescu" created="Wed, 13 Dec 2017 16:57:33 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/commit/d8bf9529bdc6f7991883beb903f175a0db16ea6c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d8bf952&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nrwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7303] BasicQueryLanguageProvider#queryResources does not return all selected fields</title>
                <link>https://issues.apache.org/jira/browse/SLING-7303</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The method named above iterates over the values returned from the row using &lt;tt&gt;jcrRow.getValues()&lt;/tt&gt; - this unfortunately doesn&apos;t take all capabilities of oak into account. To name just a few:&lt;/p&gt;

&lt;p&gt;1) Selectors: Querying with selector like &lt;tt&gt;select p.[jcr:score] from [cq:Page] as p where contains(p.[*], &apos;some text&apos;)&lt;/tt&gt; returns 0.01 as score because the actual score is stored in &lt;tt&gt;p.jcr:score&lt;/tt&gt; and the fallback is &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/RowImpl.java#L82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;an open todo&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;2) Advanced query functionalities: Queries containing for example rep:facet() don&apos;t take those into account at all, as the colNames are not iterated, only the values which only expose stored fields. See the following for all the cases: &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.1/oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java#L1628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LucenePropertyIndex.java#L1628&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Along with this bug the unit tests for a couple of scenarios should be added to cover what BasicQueryLanguageProvider is doing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124129">SLING-7303</key>
            <summary>BasicQueryLanguageProvider#queryResources does not return all selected fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Dec 2017 13:13:15 +0000</created>
                <updated>Tue, 12 Dec 2017 14:10:24 +0000</updated>
                            <resolved>Tue, 12 Dec 2017 14:10:18 +0000</resolved>
                                    <version>JCR Resource 2.9.2</version>
                    <version>JCR Resource 3.0.8</version>
                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16286042" author="diru" created="Mon, 11 Dec 2017 15:29:20 +0000"  >&lt;p&gt;2) The issue with facets might (in my case) be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6750&quot; title=&quot;Lucene facets don&amp;#39;t work with relative properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6750&quot;&gt;&lt;del&gt;OAK-6750&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16287654" author="diru" created="Tue, 12 Dec 2017 14:10:18 +0000"  >&lt;p&gt;After having a deeper look all seems to work as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nrin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7301] NPE in ScriptCacheImpl when no configuration is present</title>
                <link>https://issues.apache.org/jira/browse/SLING-7301</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A &lt;tt&gt;null&lt;/tt&gt;-check for &lt;tt&gt;additionalExtensions&lt;/tt&gt; is missing (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7234&quot; title=&quot;ServiceFactory.getService() resulted in a cycle in sling karaf &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7234&quot;&gt;&lt;del&gt;SLING-7234&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123984">SLING-7301</key>
            <summary>NPE in ScriptCacheImpl when no configuration is present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Dec 2017 11:42:12 +0000</created>
                <updated>Tue, 19 Dec 2017 09:46:13 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 12:06:58 +0000</resolved>
                                    <version>Scripting Core 2.0.52</version>
                                    <fixVersion>Scripting Core 2.0.54</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7300] CPU spike in i18n job</title>
                <link>https://issues.apache.org/jira/browse/SLING-7300</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m experiencing severe CPU spikes caused by the reload job in the i18n bundle. I&apos;ve uploaded 3 threadumps which I analysed in &lt;a href=&quot;http://fastthread.io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fastthread.io&lt;/a&gt;. The analysis identified a cpu spike in the method scheduleReloadBundles of the class &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/blob/master/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-i18n/blob/master/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This does not happen every time only on some situations. I&apos;ve experienced this problem at least on the previous i18n bundle versions. Since there was changes on the mentioned class I&apos;ve updated it hopping to get rid of this problem. Unfortunately I&apos;m experiencing it again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thread dump bellow:&lt;/p&gt;

&lt;p&gt;sling-default-1-JcrResourceBundleProvider: reload all resource bundles - priority:5 - threadId:0x00007f2ec851e800 - nativeId:0x1f72 - state:RUNNABLE&lt;br/&gt;
stackTrace:&lt;br/&gt;
java.lang.Thread.State: RUNNABLE&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntryAfterMiss(ThreadLocal.java:444)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntry(ThreadLocal.java:419)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:298)&lt;br/&gt;
at java.lang.ThreadLocal.get(ThreadLocal.java:163)&lt;br/&gt;
at org.apache.logging.log4j.core.layout.StringBuilderEncoder.getByteBuffer(StringBuilderEncoder.java:115)&lt;br/&gt;
at org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:54)&lt;br/&gt;
at org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:32)&lt;br/&gt;
at org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:219)&lt;br/&gt;
at org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:57)&lt;br/&gt;
at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.directEncodeEvent(AbstractOutputStreamAppender.java:177)&lt;br/&gt;
at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.tryAppend(AbstractOutputStreamAppender.java:170)&lt;br/&gt;
at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:161)&lt;br/&gt;
at org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender.append(RollingRandomAccessFileAppender.java:218)&lt;br/&gt;
at org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:156)&lt;br/&gt;
at org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:129)&lt;br/&gt;
at org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:120)&lt;br/&gt;
at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:84)&lt;br/&gt;
at org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:448)&lt;br/&gt;
at org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:433)&lt;br/&gt;
at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:417)&lt;br/&gt;
at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:403)&lt;br/&gt;
at org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:63)&lt;br/&gt;
at org.apache.logging.log4j.core.Logger.logMessage(Logger.java:146)&lt;br/&gt;
at org.ops4j.pax.logging.log4j2.internal.PaxLoggerImpl.doLog0(PaxLoggerImpl.java:151)&lt;br/&gt;
at org.ops4j.pax.logging.log4j2.internal.PaxLoggerImpl.doLog(PaxLoggerImpl.java:144)&lt;br/&gt;
at org.ops4j.pax.logging.log4j2.internal.PaxLoggerImpl.inform(PaxLoggerImpl.java:176)&lt;br/&gt;
at org.ops4j.pax.logging.internal.TrackingLogger.inform(TrackingLogger.java:86)&lt;br/&gt;
at org.ops4j.pax.logging.slf4j.Slf4jLogger.info(Slf4jLogger.java:476)&lt;br/&gt;
at org.apache.sling.i18n.impl.JcrResourceBundleProvider$1.run(JcrResourceBundleProvider.java:319)&lt;br/&gt;
at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:347)&lt;br/&gt;
at org.quartz.core.JobRunShell.run(JobRunShell.java:202)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
Locked ownable synchronizers:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;0x00000000e6d47830&amp;gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>Linux, jdk1.8 latest version, Karaf 4.1.3</environment>
        <key id="13123940">SLING-7300</key>
            <summary>CPU spike in i18n job</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Dec 2017 23:07:29 +0000</created>
                <updated>Mon, 1 Nov 2021 16:09:00 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 09:55:25 +0000</resolved>
                                    <version>i18n 2.5.10</version>
                                                    <component>i18n</component>
                    <component>Karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16285589" author="ivoleitao" created="Mon, 11 Dec 2017 07:02:04 +0000"  >&lt;p&gt;I&apos;ve added an image of the jvisualvm cpu profiler. This problem is severely impacting my development. I think I will patch the bundle to disable the job for now.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;</comment>
                            <comment id="16286651" author="alexander.klimetschek" created="Mon, 11 Dec 2017 22:06:00 +0000"  >&lt;p&gt;All 3 dumps are inside the logging. Maybe there is a problem there. Do you see a lot of log output by the i18n? If yes, maybe it&apos;s set to a higher log level, outputting too much for an overloaded logging system (just guessing here) and a workaround is to limit logging for &lt;tt&gt;org.apache.sling.i18n&lt;/tt&gt; to ERROR or the like. HTH&lt;/p&gt;</comment>
                            <comment id="16287536" author="ivoleitao" created="Tue, 12 Dec 2017 12:36:01 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I think this is not related with sling nor with the log4j framework. From my investigations I think I stumbled upon a jvm bug probably only on linux base machines. My colleagues have a mix of mac, windows and linux machines and only the mac and linux users are complaining about this problem. I&apos;ve solved the first one moving the logging infrastructure to asynchronous loggers via the lmax disruptor. However and unfortunately I&apos;ve found the same problem later and the only common part is this part of the stacktrace:&lt;/p&gt;

&lt;p&gt;at java.lang.ThreadLocal$ThreadLocalMap.getEntryAfterMiss(ThreadLocal.java:444)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntry(ThreadLocal.java:419)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:298)&lt;br/&gt;
at java.lang.ThreadLocal.get(ThreadLocal.java:163)&lt;/p&gt;

&lt;p&gt;This new one happens on the sling events, bellow the new stacktrace with 100% cpu signature (notice that it stops on the getEntryAfterMiss like the other one).&lt;/p&gt;

&lt;p&gt;I&apos;ve found multiple reports of similar errors:&lt;br/&gt;
&lt;a href=&quot;https://discuss.elastic.co/t/indexing-performance-degrading-over-time/40229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://discuss.elastic.co/t/indexing-performance-degrading-over-time/40229&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9741&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-9741&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The only clue was on the elastic thread where they recommended a new garbage collector but I&apos;ve not tried that&lt;/p&gt;

&lt;p&gt;I&apos;m going to attach the new dumps in this thread also&lt;/p&gt;

&lt;p&gt;sling-default-1-Registered Service.945 - priority:5 - threadId:0x00007fdaf44ff800 - nativeId:0x6b8b - state:RUNNABLE&lt;br/&gt;
stackTrace:&lt;br/&gt;
java.lang.Thread.State: RUNNABLE&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntryAfterMiss(ThreadLocal.java:444)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntry(ThreadLocal.java:419)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:298)&lt;br/&gt;
at java.lang.ThreadLocal.get(ThreadLocal.java:163)&lt;br/&gt;
at org.apache.felix.framework.ServiceRegistrationImpl.currentThreadMarked(ServiceRegistrationImpl.java:763)&lt;br/&gt;
at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:305)&lt;br/&gt;
at org.apache.felix.framework.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:712)&lt;br/&gt;
at org.apache.felix.framework.EventDispatcher.filterListenersUsingHooks(EventDispatcher.java:559)&lt;br/&gt;
at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:542)&lt;br/&gt;
at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4595)&lt;br/&gt;
at org.apache.felix.framework.Felix.access$000(Felix.java:106)&lt;br/&gt;
at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:420)&lt;br/&gt;
at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)&lt;br/&gt;
at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.jmx.QueuesMBeanImpl.remove(QueuesMBeanImpl.java:171)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.jmx.QueuesMBeanImpl.removeAndNotify(QueuesMBeanImpl.java:140)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.jmx.QueuesMBeanImpl.unbindQueueMBean(QueuesMBeanImpl.java:116)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.jmx.QueuesMBeanImpl.sendEvent(QueuesMBeanImpl.java:95)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.queues.QueueManager.maintain(QueueManager.java:203)&lt;br/&gt;
locked &amp;lt;0x00000000e8c0bf78&amp;gt; (a java.lang.Object)&lt;br/&gt;
at org.apache.sling.event.impl.jobs.queues.QueueManager.run(QueueManager.java:259)&lt;br/&gt;
at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:347)&lt;br/&gt;
at org.quartz.core.JobRunShell.run(JobRunShell.java:202)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
Locked ownable synchronizers:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;0x00000000e721ea50&amp;gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="16287539" author="ivoleitao" created="Tue, 12 Dec 2017 12:42:21 +0000"  >&lt;p&gt;I&apos;ve added the new thread dumps (new1..3.tdump) with the stacktrace in my last comment&lt;/p&gt;</comment>
                            <comment id="16287728" author="ivoleitao" created="Tue, 12 Dec 2017 15:09:58 +0000"  >&lt;p&gt;Just another thing that I have noticed that is common between the two stacktraces. In both cases the initiator is always a quartz job, so all of this happens in another thread:&lt;/p&gt;

&lt;p&gt;at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:347)&lt;br/&gt;
at org.quartz.core.JobRunShell.run(JobRunShell.java:202)&lt;/p&gt;

&lt;p&gt;The lines above are also common to both stacktraces and always end on:&lt;/p&gt;

&lt;p&gt;at java.lang.ThreadLocal$ThreadLocalMap.getEntryAfterMiss(ThreadLocal.java:444)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.getEntry(ThreadLocal.java:419)&lt;br/&gt;
at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:298)&lt;br/&gt;
at java.lang.ThreadLocal.get(ThreadLocal.java:163)&lt;/p&gt;

&lt;p&gt;So this must be related with code running on a another thread.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Ivo Leit&#227;o&lt;/p&gt;</comment>
                            <comment id="16348317" author="rombert" created="Thu, 1 Feb 2018 09:55:25 +0000"  >&lt;p&gt;Sorry for noticing this late &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt;. The problem was in the commons.threads bundle and was fixed for the commons.threads 3.2.16 release.&lt;/p&gt;</comment>
                            <comment id="17436921" author="joerghoh" created="Mon, 1 Nov 2021 16:09:00 +0000"  >&lt;p&gt;Can we close this ticket?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13133059">SLING-7432</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12901374" name="1.tdump" size="248080" author="ivoleitao" created="Sat, 9 Dec 2017 22:57:49 +0000"/>
                            <attachment id="12901373" name="2.tdump" size="248080" author="ivoleitao" created="Sat, 9 Dec 2017 22:57:50 +0000"/>
                            <attachment id="12901372" name="3.tdump" size="248092" author="ivoleitao" created="Sat, 9 Dec 2017 22:57:49 +0000"/>
                            <attachment id="12901454" name="cpuspike.png" size="16921" author="ivoleitao" created="Mon, 11 Dec 2017 06:59:30 +0000"/>
                            <attachment id="12901670" name="new1.tdump" size="211882" author="ivoleitao" created="Tue, 12 Dec 2017 12:41:27 +0000"/>
                            <attachment id="12901669" name="new2.tdump" size="211403" author="ivoleitao" created="Tue, 12 Dec 2017 12:41:27 +0000"/>
                            <attachment id="12901668" name="new3.tdump" size="211882" author="ivoleitao" created="Tue, 12 Dec 2017 12:41:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7294] SlingInstanceRule should also support instances provisioned via slingstart-maven-plugin</title>
                <link>https://issues.apache.org/jira/browse/SLING-7294</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the &lt;tt&gt;SlingInstanceRule&lt;/tt&gt; uses the &lt;tt&gt;SlingTestBase&lt;/tt&gt; from &lt;tt&gt;o.a.s.testing.serversetup&lt;/tt&gt; to bootstrap an instance or connect to an existing one (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-rules/blob/master/src/main/java/org/apache/sling/testing/junit/rules/SlingInstanceRule.java#L44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-rules/blob/master/src/main/java/org/apache/sling/testing/junit/rules/SlingInstanceRule.java#L44&lt;/a&gt;). IMHO right now it is more intuitive to leverage the &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; with a given model.txt to create a new launchpad and also start that, instead of using &lt;tt&gt;o.a.s.testing.serversetup&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;For an example leveraging the bootstrapping and starting with &lt;tt&gt;slingstart-maven-plugin&lt;/tt&gt; look at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-validation-impl/blob/master/pom.xml#L78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-validation-impl/blob/master/pom.xml#L78&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Currently, any IT annotated with &lt;tt&gt;@SlingInstanceRule&lt;/tt&gt; fails for this project with an error like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
No files found in jar folder specified by jar.executor.jar.folder property: &amp;lt;somepath&amp;gt;
	at org.apache.sling.testing.serversetup.jarexec.JarExecutor.&amp;lt;init&amp;gt;(JarExecutor.java:111)
	at org.apache.sling.testing.serversetup.instance.SlingTestBase.&amp;lt;init&amp;gt;(SlingTestBase.java:89)
	at org.apache.sling.testing.serversetup.instance.SlingTestBase.&amp;lt;init&amp;gt;(SlingTestBase.java:70)
	at org.apache.sling.testing.junit.rules.SlingInstanceRule.&amp;lt;clinit&amp;gt;(SlingInstanceRule.java:44)
	....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either this annotation should also support instances started via the slingstart-maven-plugin implicitly or there should be a dedicated annotation for that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123895">SLING-7294</key>
            <summary>SlingInstanceRule should also support instances provisioned via slingstart-maven-plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Dec 2017 10:54:25 +0000</created>
                <updated>Sat, 9 Dec 2017 11:07:11 +0000</updated>
                                            <version>Apache Sling Testing Rules 1.0.6</version>
                                                    <component>Apache Sling Testing Rules</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nq2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7291] HTL to Java compilation might fail under heavy load</title>
                <link>https://issues.apache.org/jira/browse/SLING-7291</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When there&apos;s a high number of concurrent threads accessing the same HTL script that needs to be compiled, compilation might fail since these threads try to write to the same file-system based file.&lt;/p&gt;

&lt;p&gt;In the end the script will be compiled correctly since the HTL engine will retry the operation until a valid Java class is generated, however this should be avoided with a simple locking mechanism.&lt;/p&gt;

&lt;p&gt;See the following stack trace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;05.12.2017 13:28:13.424 *ERROR* [&amp;lt;removed&amp;gt; [1512509292912] GET &amp;lt;removed&amp;gt; HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught SlingException
java.lang.ClassFormatError: Truncated class file
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    at org.apache.sling.commons.fsclassloader.impl.FSDynamicClassLoader.loadClass(FSDynamicClassLoader.java:58)
    at org.apache.sling.scripting.sightly.impl.engine.SightlyJavaCompilerService.compileSource(SightlyJavaCompilerService.java:166)
    at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.internalCompile(SightlyScriptEngine.java:149)
    at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.compile(SightlyScriptEngine.java:80)
    at org.apache.sling.scripting.sightly.impl.engine.extension.use.RenderUnitProvider.provide(RenderUnitProvider.java:127)
    at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:73)
    at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:69)
    at org.apache.sling.scripting.sightly.&amp;lt;removed&amp;gt;
    at org.apache.sling.scripting.sightly.java.compiler.RenderUnit.render(RenderUnit.java:48)
    at org.apache.sling.scripting.sightly.impl.engine.SightlyCompiledScript.eval(SightlyCompiledScript.java:61)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:386)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
    at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13123702">SLING-7291</key>
            <summary>HTL to Java compilation might fail under heavy load</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Dec 2017 14:02:20 +0000</created>
                <updated>Tue, 19 Dec 2017 10:06:27 +0000</updated>
                            <resolved>Fri, 8 Dec 2017 14:46:17 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.20</version>
                                    <fixVersion>Scripting HTL Engine 1.0.46</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16283670" author="radu.cotescu" created="Fri, 8 Dec 2017 14:46:17 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/757534c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;757534c&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16291268" author="sseifert@pro-vision.de" created="Thu, 14 Dec 2017 17:58:03 +0000"  >&lt;p&gt;this is not a blocker for the 1.0.46 release - but wouldn&apos;t had been better to use a ConcurrentHashMap for the compilationLocks variable instead of manually putting a synchronized block on it in the compileSource method? i suppose this would be a bit more performant. a possible improvement for the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3novz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7290] The Sling Servlet Resolver does not work correctly in some inheritance scenarios</title>
                <link>https://issues.apache.org/jira/browse/SLING-7290</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Given the following script structure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/libs/test
    test.jsp
/apps/test
    test.html
/apps/test2
    [sling:resourceSuperType=&apos;test&apos;]
    test2.jsp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Assuming there&apos;s a content resource at &lt;tt&gt;/content/test&lt;/tt&gt; with a &lt;tt&gt;resourceType&lt;/tt&gt; set to &lt;tt&gt;test2&lt;/tt&gt;, the current servlet resolution from &lt;tt&gt;org.apache.sling.servlets.resolver&lt;/tt&gt; 2.4.20 will pick the &lt;tt&gt;test.html&lt;/tt&gt; script instead of the &lt;tt&gt;test2.jsp&lt;/tt&gt; script, due to the fact that the HTL Script Engine Factory has a higher priority than the JSP Script Engine Factory.&lt;/p&gt;

&lt;p&gt;The Script Engine Factory priority should only be taken in consideration for scripts in the same folder.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123636">SLING-7290</key>
            <summary>The Sling Servlet Resolver does not work correctly in some inheritance scenarios</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Dec 2017 07:14:51 +0000</created>
                <updated>Wed, 13 Dec 2017 08:05:50 +0000</updated>
                            <resolved>Fri, 8 Dec 2017 07:39:07 +0000</resolved>
                                    <version>Servlets Resolver 2.4.20</version>
                                    <fixVersion>Servlets Resolver 2.4.22</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16283161" author="radu.cotescu" created="Fri, 8 Dec 2017 07:39:07 +0000"  >&lt;p&gt;Pushed fix in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/commit/8246d7fc1704202c63f2162a2c5b945a1701ce21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;8246d7f&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nohb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7289] Sling Validator Service does not free Validators correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-7289</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a bundle that contains Sling Validators is removed. the Sling Validation Service does not correctly free them.&lt;br/&gt;
The problem is in the ValidatorMap, which fails to remove the service from the map in &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/blob/master/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java#L225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/blob/master/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java#L225&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123473">SLING-7289</key>
            <summary>Sling Validator Service does not free Validators correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Dec 2017 14:00:58 +0000</created>
                <updated>Thu, 21 Dec 2017 15:58:04 +0000</updated>
                            <resolved>Thu, 7 Dec 2017 16:42:11 +0000</resolved>
                                    <version>Validation 1.0.0</version>
                                    <fixVersion>Validation Core 1.0.4</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16281886" author="githubbot" created="Thu, 7 Dec 2017 14:05:47 +0000"  >&lt;p&gt;santiagozky opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7289&quot; title=&quot;Sling Validator Service does not free Validators correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7289&quot;&gt;&lt;del&gt;SLING-7289&lt;/del&gt;&lt;/a&gt; remove validator from ValidatorMap&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16282118" author="githubbot" created="Thu, 7 Dec 2017 16:39:22 +0000"  >&lt;p&gt;kwin closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7289&quot; title=&quot;Sling Validator Service does not free Validators correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7289&quot;&gt;&lt;del&gt;SLING-7289&lt;/del&gt;&lt;/a&gt; remove validator from ValidatorMap&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java b/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java&lt;br/&gt;
index 5c226aa..ae86e6a 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/validation/impl/ValidatorMap.java&lt;br/&gt;
@@ -222,6 +222,7 @@ public boolean remove(String id, ServiceReference&amp;lt;Validator&amp;lt;?&amp;gt;&amp;gt; serviceReference&lt;br/&gt;
         } else {&lt;br/&gt;
             // only actually remove if the service reference is equal&lt;br/&gt;
             if (entry.serviceReference.equals(serviceReference)) &lt;/p&gt;
{
+                validatorMap.remove(id);
                 return true;
             }
&lt;p&gt; else {&lt;br/&gt;
                 LOG.warn(&quot;Could not remove validator with id &apos;{}&apos; from map because it is only contained with a different service reference!&quot;, id);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16282121" author="kwin" created="Thu, 7 Dec 2017 16:42:11 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/commit/9a603e4605faa771417759cd1fc67210d92751f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/commit/9a603e4605faa771417759cd1fc67210d92751f5&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/commit/10c2515830fe0b05e9ce01a517725665ca674703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/commit/10c2515830fe0b05e9ce01a517725665ca674703&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=santiagozky&quot; class=&quot;user-hover&quot; rel=&quot;santiagozky&quot;&gt;santiagozky&lt;/a&gt; for the PR and the bug report.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nnh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7287] htl-maven-plugin:validate fails with windows path names</title>
                <link>https://issues.apache.org/jira/browse/SLING-7287</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the &quot;validate&quot; mojo of the htl-maven-plugin fails on windows due to assumptions of path names only met on unix-like file sytems.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13122543">SLING-7287</key>
            <summary>htl-maven-plugin:validate fails with windows path names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Dec 2017 10:52:43 +0000</created>
                <updated>Fri, 8 Dec 2017 11:14:09 +0000</updated>
                            <resolved>Mon, 4 Dec 2017 10:55:24 +0000</resolved>
                                    <version>HTL Maven Plugin 1.1.0</version>
                                    <fixVersion>HTL Maven Plugin 1.1.2</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16276614" author="sseifert@pro-vision.de" created="Mon, 4 Dec 2017 10:55:24 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-htl-maven-plugin/commit/8d8b140baaac52974733f9c552ee01669a6ae53c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-htl-maven-plugin/commit/8d8b140baaac52974733f9c552ee01669a6ae53c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16278139" author="radu.cotescu" created="Tue, 5 Dec 2017 07:27:07 +0000"  >&lt;p&gt;Ah, good catch. Didn&apos;t think the &lt;tt&gt;String#replaceAll&lt;/tt&gt; was not OS independent in this case... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13122541">SLING-7286</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nhsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7286] JavaEscapeUtils.makeJavaPackage does not work with windows paths</title>
                <link>https://issues.apache.org/jira/browse/SLING-7286</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the implementation assumes file path always use &quot;/&quot; as separator - which is not the case on windows.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13122541">SLING-7286</key>
            <summary>JavaEscapeUtils.makeJavaPackage does not work with windows paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Dec 2017 10:48:04 +0000</created>
                <updated>Fri, 8 Dec 2017 11:13:54 +0000</updated>
                            <resolved>Mon, 4 Dec 2017 10:49:14 +0000</resolved>
                                    <version>Scripting HTL Java Compiler 1.0.16</version>
                                    <fixVersion>Scripting HTL Java Compiler 1.0.18</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16276607" author="sseifert@pro-vision.de" created="Mon, 4 Dec 2017 10:49:14 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/commit/0d774aec2c3addabd1d6e0640542dd758611e2ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/commit/0d774aec2c3addabd1d6e0640542dd758611e2ea&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13122543">SLING-7287</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nhrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7281] Sling query doesn&apos;t release referenced resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-7281</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We were using slingquery 3.0.0 and fsresource 2.1.8. I&apos;m not sure if fsresource actually has anything to do with it, but I&apos;m just adding the info to be complete.&lt;/p&gt;

&lt;p&gt;The exact call done is : $(pageResource).searchStrategy(SearchStrategy.DFS).find(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;expiryDate&amp;#93;&lt;/span&gt;&quot;);&lt;/p&gt;

&lt;p&gt;The goal was to look for subresources under pageResource which contains a property which should be taken into account to do another action. However, what we see is that items are traversed and never released. Something that contains a &amp;lt;50 nodes starts eating up more and more of the heap without ever releasing any references. As you can see from the visualVM screen, we chew through 16GB of heap in less than half an hour&lt;/p&gt;

&lt;p&gt;I&apos;m unsure how to deliver a reproducible case without disclosing customer production data. My suspicion is that if you create a decent tree of nodes and keep invoke the query statement X times you&apos;ll be able to see something similar. In our case, we have a job which runs every minute and runs this query for X items each time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13121988">SLING-7281</key>
            <summary>Sling query doesn&apos;t release referenced resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bart.wulteputte">Bart Wulteputte</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Nov 2017 18:03:03 +0000</created>
                <updated>Thu, 30 Nov 2017 20:00:02 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16273306" author="sseifert@pro-vision.de" created="Thu, 30 Nov 2017 20:00:02 +0000"  >&lt;p&gt;does the problem also occur when you use only sling query and not fsresource?&lt;/p&gt;

&lt;p&gt;please keep in mind that fsresource was designed primary for making development easier, it was never tested for &quot;heavy production usage&quot; with serving lots of thousands or more nodes through it. there is also a simple in-memory cache integrated. this cache is limited by default to 10,000 entries - you might experiment with different values to see if has an effect. it is configurable via the &quot;Apache Sling File System Resource Provider&quot; configuration.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12900063" name="Screen Shot 2017-11-30 at 16.30.33.png" size="162320" author="bart.wulteputte" created="Thu, 30 Nov 2017 17:29:12 +0000"/>
                            <attachment id="12900062" name="Screen Shot 2017-11-30 at 18.19.07.png" size="305323" author="bart.wulteputte" created="Thu, 30 Nov 2017 17:29:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3neen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7280] Repoinit: add support for empty rep:glob restriction</title>
                <link>https://issues.apache.org/jira/browse/SLING-7280</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, I was asked by a colleague at Adobe how to create a &lt;em&gt;rep:glob&lt;/em&gt; restriction with an empty string value as it is possible and documented with Jackrabbit API. I didn&apos;t find how to do that and suspect that it&apos;s simply a bug in the repo init.&lt;/p&gt;

&lt;p&gt;I would appreciate if you could look into this and fix it.&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13121882">SLING-7280</key>
            <summary>Repoinit: add support for empty rep:glob restriction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Nov 2017 10:52:58 +0000</created>
                <updated>Mon, 12 Feb 2018 13:05:39 +0000</updated>
                            <resolved>Fri, 22 Dec 2017 09:16:08 +0000</resolved>
                                    <version>Repoinit JCR 1.1.6</version>
                                    <fixVersion>Repoinit JCR 1.1.8</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16300098" author="bdelacretaz" created="Thu, 21 Dec 2017 14:34:55 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/87994dd2f090591012721d79eb00727f7a2ba4b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/87994dd2f090591012721d79eb00727f7a2ba4b6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;FWIW It looks like an empty rep:glob restriction does not work for all permissions, I initially tried with a &lt;tt&gt;jcr:modifyProperties&lt;/tt&gt; permission and didn&apos;t get the expected behavior.&lt;/p&gt;

&lt;p&gt;It works fine with &lt;tt&gt;jcr:read&lt;/tt&gt; as in this example, similar to the test that I added in the above commit:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
allow jcr:read on /someNode restriction (rep:glob)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And allows reading /someNode but not its children&lt;/p&gt;

&lt;p&gt;Note the repoinit syntax with just &lt;tt&gt;rep:glob&lt;/tt&gt; as opposed to &lt;tt&gt;rep:glob,&quot;&quot;&lt;/tt&gt; - this is already supported by the current repoinit parser module, but the repoinit JCR module didn&apos;t handle it so far.&lt;/p&gt;</comment>
                            <comment id="16301152" author="bdelacretaz" created="Fri, 22 Dec 2017 09:15:55 +0000"  >&lt;p&gt;Also added an example at &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13119941">SLING-7259</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ndr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7278] Unable to synchronize files (nt:file) with mix:language added.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7278</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I&apos;m trying to use per documentation &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&lt;/a&gt; the new i18n dictionary support.&lt;/p&gt;

&lt;p&gt;I&apos;ve created the node with composum as described in the documentation. To be completely sure that I&apos;m creating the correct structure I&apos;ve taken a look at the tests on &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-i18n/blob/master/src/test/java/org/apache/sling/i18n/impl/JcrResourceBundleTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-i18n/blob/master/src/test/java/org/apache/sling/i18n/impl/JcrResourceBundleTest.java&lt;/a&gt;, namely the test_json_dictionary test.&lt;/p&gt;

&lt;p&gt;After the creation of the file I&apos;m unable to synchronize it via the sling support. I&apos;ve also forced through the creation of the xml file but that gives me an error synchronizing. &lt;/p&gt;

&lt;p&gt;For some reason nt:file&apos;s with mix:language added are not synchronizing.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
Ivo Leit&#227;o&lt;/p&gt;</description>
                <environment>Version: Oxygen.1a Release (4.7.1a)&lt;br/&gt;
Build id: 20171005-1200</environment>
        <key id="13121653">SLING-7278</key>
            <summary>Unable to synchronize files (nt:file) with mix:language added.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Nov 2017 13:49:43 +0000</created>
                <updated>Mon, 28 Nov 2022 18:11:42 +0000</updated>
                            <resolved>Mon, 28 Nov 2022 18:11:36 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16270776" author="rombert" created="Wed, 29 Nov 2017 14:10:56 +0000"  >&lt;p&gt;Can you add the error here?&lt;/p&gt;</comment>
                            <comment id="16270863" author="ivoleitao" created="Wed, 29 Nov 2017 14:45:57 +0000"  >&lt;p&gt;I&apos;ve attached screenshots with the steps taken to reproduce the error. I&apos;ve also enabled tracing but I&apos;m not seeing any error. The error that I was mentioning was when I created manually the xml file in eclipse. In that case I receive a cannot publish error.&lt;/p&gt;

&lt;p&gt;In the attached screenshoots I&apos;m trying to add the pt.json file in composum (I&apos;m successfull). But after I try to synchronize with the content server via eclipse (Import from repository) it does not work. A normal nt:file works without problems&lt;/p&gt;</comment>
                            <comment id="16326583" author="rombert" created="Mon, 15 Jan 2018 21:26:07 +0000"  >&lt;p&gt;Sorry, I&apos;m unable to reproduce the error. Can you please add a sample project that fails to sync?&lt;/p&gt;</comment>
                            <comment id="16444374" author="rombert" created="Thu, 19 Apr 2018 16:51:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt; - any updates?&lt;/p&gt;</comment>
                            <comment id="17640176" author="kwin" created="Mon, 28 Nov 2022 18:11:36 +0000"  >&lt;p&gt;No further input received, therefore closing here.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12899835" name="bug01.png" size="147021" author="ivoleitao" created="Wed, 29 Nov 2017 14:45:38 +0000"/>
                            <attachment id="12899834" name="bug02.png" size="134040" author="ivoleitao" created="Wed, 29 Nov 2017 14:45:38 +0000"/>
                            <attachment id="12899833" name="bug03.png" size="140956" author="ivoleitao" created="Wed, 29 Nov 2017 14:45:38 +0000"/>
                            <attachment id="12899832" name="bug04.png" size="21199" author="ivoleitao" created="Wed, 29 Nov 2017 14:45:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0klu7:iirfr</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7268] unable to create principals and use principals in ACLs on import</title>
                <link>https://issues.apache.org/jira/browse/SLING-7268</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Not able to use principals and ACLS on the same bundle when defining initial content&lt;/p&gt;

&lt;p&gt;ie:&lt;br/&gt;
{&lt;br/&gt;
  &quot;jcr:primaryType&quot; : &quot;sling:Folder&quot;,&lt;/p&gt;

&lt;p&gt;  &quot;security:principals&quot;: [&lt;/p&gt;
    { &quot;name&quot;: &quot;*user*&quot;, &quot;password&quot;: &quot;mypassword&quot;}
&lt;p&gt;  ],&lt;/p&gt;

&lt;p&gt;  &quot;security:acl&quot;: [&lt;/p&gt;
    { &quot;principal&quot;: &quot;*user*&quot;, &quot;granted&quot;: [&quot;jcr:read&quot;,&quot;jcr:write&quot;] }
&lt;p&gt;  ]&lt;br/&gt;
}&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13120733">SLING-7268</key>
            <summary>unable to create principals and use principals in ACLs on import</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="andresbott">Andres Bott</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Nov 2017 16:48:46 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:45 +0000</updated>
                            <resolved>Sat, 13 Jan 2018 00:52:03 +0000</resolved>
                                    <version>JCR ContentLoader 2.2.6</version>
                                    <fixVersion>JCR ContentLoader 2.2.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16272631" author="bdelacretaz" created="Thu, 30 Nov 2017 13:00:50 +0000"  >&lt;p&gt;Could you use repoinit instead to create those users and ACLs? That&apos;s the recommended way.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt; for details&lt;/p&gt;</comment>
                            <comment id="16273232" author="enorman" created="Thu, 30 Nov 2017 19:26:53 +0000"  >&lt;p&gt;It&apos;s still worth fixing since the same scenario would happen with the import POST operation if you use JSON input that creates a user or group and an ACE for that principal within the same transaction.&lt;/p&gt;

&lt;p&gt;The solution appears to be the same as what was done to resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6182&quot; title=&quot;repoinit fails to set ACL on previously created principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6182&quot;&gt;&lt;del&gt;SLING-6182&lt;/del&gt;&lt;/a&gt; using what  was pointed out in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-5496&quot; title=&quot;Creating service user and setting ACLs immediately for this user fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-5496&quot;&gt;&lt;del&gt;OAK-5496&lt;/del&gt;&lt;/a&gt;.   We cannot successfully use PrincipalManager#getPrincipal in oak without the session that created the principal getting saved first (and a subsequent index update).   The workaround is to fallback to the UserManager#getAuthorizable API to locate the principal.&lt;/p&gt;</comment>
                            <comment id="16273331" author="enorman" created="Thu, 30 Nov 2017 20:10:02 +0000"  >&lt;p&gt;I committed a fix and a new test for your review at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-contentloader/commit/646984b82c72ccdac055bfaf7bd876adfc0a4664&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-contentloader/commit/646984b82c72ccdac055bfaf7bd876adfc0a4664&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13036535">OAK-5496</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n6o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7266] NPE in resource resolver activator</title>
                <link>https://issues.apache.org/jira/browse/SLING-7266</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When restarting SCR the following NPE happens:&lt;/p&gt;

&lt;p&gt;24.11.2017 15:49:33.647 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixDispatchQueue&amp;#93;&lt;/span&gt; org.apache.sling.resourceresolver FrameworkEvent ERROR (java.lang.NullPointerException)&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.FactoryPreconditions.checkPreconditions(FactoryPreconditions.java:106)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:535)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:73)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerRemoved(ResourceResolverFactoryActivator.java:394)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.unregister(ResourceProviderTracker.java:254)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$100(ResourceProviderTracker.java:59)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.removedService(ResourceProviderTracker.java:114)&lt;br/&gt;
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:967)&lt;br/&gt;
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:870)&lt;br/&gt;
	at org.osgi.util.tracker.AbstractTracked.untrack(AbstractTracked.java:341)&lt;br/&gt;
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:909)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120642">SLING-7266</key>
            <summary>NPE in resource resolver activator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Nov 2017 15:02:00 +0000</created>
                <updated>Wed, 17 Jan 2018 14:09:43 +0000</updated>
                            <resolved>Sat, 25 Nov 2017 19:46:25 +0000</resolved>
                                    <version>Resource Resolver 1.5.30</version>
                    <version>Resource Resolver 1.5.32</version>
                                    <fixVersion>Resource Resolver 1.5.34</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16265832" author="cziegeler" created="Sat, 25 Nov 2017 19:46:25 +0000"  >&lt;p&gt;Added additional null check in rev e10e25b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n63z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7265] NPE on activation of SlingServletResolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-7265</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following happens when SCR is restarted:&lt;br/&gt;
This might be a timing issue as the reference gets stale while the resolver is activating, or for some reason the stale reference did not get removed from the list&lt;/p&gt;

&lt;p&gt;24.11.2017 15:49:21.348 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-4-thread-1&amp;#93;&lt;/span&gt; org.apache.sling.servlets.resolver bundle org.apache.sling.servlets.resolver:2.4.14 (538)&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.servlets.resolver.SlingServletResolver(3037)&amp;#93;&lt;/span&gt; : The activate method has thrown an exception (java.lang.NullPointerException)&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.sling.servlets.resolver.internal.SlingServletResolver.createServlet(SlingServletResolver.java:1010)&lt;br/&gt;
	at org.apache.sling.servlets.resolver.internal.SlingServletResolver.createAllServlets(SlingServletResolver.java:982)&lt;br/&gt;
	at org.apache.sling.servlets.resolver.internal.SlingServletResolver.activate(SlingServletResolver.java:819)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120641">SLING-7265</key>
            <summary>NPE on activation of SlingServletResolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Nov 2017 14:57:23 +0000</created>
                <updated>Mon, 11 Dec 2017 12:18:12 +0000</updated>
                            <resolved>Sat, 25 Nov 2017 19:41:50 +0000</resolved>
                                    <version>Servlets Resolver 2.4.14</version>
                                    <fixVersion>Servlets Resolver 2.4.20</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16265829" author="cziegeler" created="Sat, 25 Nov 2017 19:41:50 +0000"  >&lt;p&gt;Added additional checks in rev 22a6a92&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n63r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7261] Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)</title>
                <link>https://issues.apache.org/jira/browse/SLING-7261</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h3&gt;
&lt;p&gt;Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus). This happens because the AbstractSlingClient#getUrl(String path, List&amp;lt;NameValuePair&amp;gt; parameters) adds an empty parameters array to the url, even when the parameters argument is null. This results in urls that have ? at the end for all GET requests (http(s)://host:port/requestpath?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120390">SLING-7261</key>
            <summary>Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="andrei.tuicu">Andrei Tuicu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Nov 2017 05:51:47 +0000</created>
                <updated>Thu, 23 Nov 2017 07:57:24 +0000</updated>
                            <resolved>Thu, 23 Nov 2017 07:57:24 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.1.4</version>
                                    <fixVersion>Apache Sling Testing Clients 1.1.12</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16263845" author="andrei.tuicu" created="Thu, 23 Nov 2017 05:52:36 +0000"  >&lt;p&gt;It seems that I can&apos;t assign myself to this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Nevertheless, I&apos;ll be submitting a PR.&lt;/p&gt;</comment>
                            <comment id="16263877" author="githubbot" created="Thu, 23 Nov 2017 06:31:19 +0000"  >&lt;p&gt;andreituicu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7261&quot; title=&quot;Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7261&quot;&gt;&lt;del&gt;SLING-7261&lt;/del&gt;&lt;/a&gt; - Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16263930" author="githubbot" created="Thu, 23 Nov 2017 07:56:24 +0000"  >&lt;p&gt;rombert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7261&quot; title=&quot;Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7261&quot;&gt;&lt;del&gt;SLING-7261&lt;/del&gt;&lt;/a&gt; - Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/testing/clients/AbstractSlingClient.java b/src/main/java/org/apache/sling/testing/clients/AbstractSlingClient.java&lt;br/&gt;
index 51c57d8..2d3f70d 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/testing/clients/AbstractSlingClient.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/testing/clients/AbstractSlingClient.java&lt;br/&gt;
@@ -144,7 +144,8 @@ public URI getUrl(String path) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Creates a full URL for a given path with additional parameters. Same as 
{@link #getUrl(String)}
&lt;p&gt;, but adds the parameters in the URI.&lt;br/&gt;
      *&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@param path path relative to server url; can start with / but should not include the server context path&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* @param parameters url parameters to be added to the url&lt;br/&gt;
+     * @param parameters url parameters to be added to the url. If the given argument is 
{@code null}
&lt;p&gt;, nothing will be added to the url.&lt;br/&gt;
+     *                   If the given argument is an empty array, it will force a &quot;?&quot; at the end of the url.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@return full url as URI&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if path or parameters cannot be parsed into an URI&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if path is null&lt;br/&gt;
@@ -153,8 +154,9 @@ public URI getUrl(String path, List&amp;lt;NameValuePair&amp;gt; parameters) {&lt;br/&gt;
         // add server url and path&lt;br/&gt;
         URIBuilder uriBuilder = new URIBuilder(getUrl(path));&lt;br/&gt;
         // add parameters&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parameters = (parameters != null) ? parameters : new ArrayList&amp;lt;NameValuePair&amp;gt;(0);&lt;/li&gt;
	&lt;li&gt;uriBuilder.addParameters(parameters);&lt;br/&gt;
+        if(parameters != null) 
{
+            uriBuilder.addParameters(parameters);
+        }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         try &lt;/p&gt;
{
             return uriBuilder.build();
diff --git a/src/test/java/org/apache/sling/testing/AbstractSlingClientGetUrlTest.java b/src/test/java/org/apache/sling/testing/AbstractSlingClientGetUrlTest.java
index 665b595..9af1f62 100644
--- a/src/test/java/org/apache/sling/testing/AbstractSlingClientGetUrlTest.java
+++ b/src/test/java/org/apache/sling/testing/AbstractSlingClientGetUrlTest.java
@@ -16,6 +16,8 @@
  */
 package org.apache.sling.testing;
 
+import org.apache.http.NameValuePair;
+import org.apache.http.message.BasicNameValuePair;
 import org.apache.sling.testing.clients.ClientException;
 import org.apache.sling.testing.clients.SlingClient;
 import org.junit.Test;
@@ -23,8 +25,10 @@
 import org.junit.runners.Parameterized;
 
 import java.net.URI;
+import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Collection;
+import java.util.List;
 
 import static org.junit.Assert.assertEquals;
 
@@ -105,6 +109,10 @@
         }
&lt;p&gt;);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+&lt;br/&gt;
+    private static final List&amp;lt;NameValuePair&amp;gt; TEST_PARAMETERS = Arrays.&amp;lt;NameValuePair&amp;gt;asList(new BasicNameValuePair(&quot;key&quot;, &quot;value&quot;));&lt;br/&gt;
+    private static final String STRING_TEST_PARAMETERS = &quot;key=value&quot;;&lt;br/&gt;
+&lt;br/&gt;
     @Parameterized.Parameter(value = 0)&lt;br/&gt;
     public String serverUrl;&lt;/p&gt;

&lt;p&gt;@@ -118,5 +126,8 @@&lt;br/&gt;
     public void testGetUrlWithParam() throws ClientException &lt;/p&gt;
{
         SlingClient c = new SlingClient(URI.create(serverUrl), &quot;USER&quot;, &quot;PWD&quot;);
         assertEquals(&quot;&quot;, URI.create(expectedUrl), c.getUrl(inputPath));
+        assertEquals(URI.create(expectedUrl), c.getUrl(inputPath, null));
+        assertEquals(URI.create(expectedUrl + &quot;?&quot;), c.getUrl(inputPath, new ArrayList&amp;lt;NameValuePair&amp;gt;()));
+        assertEquals(URI.create(expectedUrl + &quot;?&quot; + STRING_TEST_PARAMETERS), c.getUrl(inputPath, TEST_PARAMETERS));
     }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16263932" author="githubbot" created="Thu, 23 Nov 2017 07:56:35 +0000"  >&lt;p&gt;rombert commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7261&quot; title=&quot;Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7261&quot;&gt;&lt;del&gt;SLING-7261&lt;/del&gt;&lt;/a&gt; - Caches are invalidated when using AbstractSlingClient#doGet(String requestPath, int... expectedStatus)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1#issuecomment-346550109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/1#issuecomment-346550109&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the contribution&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n4k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7259] Repo Init: Empty glob causes repo-init fail</title>
                <link>https://issues.apache.org/jira/browse/SLING-7259</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/security/authorization/restriction.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/security/authorization/restriction.html&lt;/a&gt; empty glob is supported to restrict access only the node but not its subtrees. &lt;br/&gt;
Doing this it causes the repo-init to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13119941">SLING-7259</key>
            <summary>Repo Init: Empty glob causes repo-init fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lydiapuric">Lydia Puric</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Nov 2017 13:44:20 +0000</created>
                <updated>Mon, 18 Dec 2017 14:02:16 +0000</updated>
                            <resolved>Mon, 18 Dec 2017 14:02:16 +0000</resolved>
                                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16260752" author="bdelacretaz" created="Tue, 21 Nov 2017 13:49:27 +0000"  >&lt;p&gt;Can you provide steps to reproduce, maybe just a failing repoinit statement? Thanks.&lt;/p&gt;</comment>
                            <comment id="16260907" author="lydiapuric" created="Tue, 21 Nov 2017 15:31:20 +0000"  >&lt;p&gt;I tried to enter an empty restriction as following in AEM&apos;s base granite model:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;:repoinit&amp;#93;&lt;/span&gt;&lt;br/&gt;
create service user test-service&lt;br/&gt;
  set ACL for test-service&lt;br/&gt;
      allow jcr:read on / restriction(rep:glob,)&lt;br/&gt;
  end&lt;/p&gt;

&lt;p&gt;and like this:&lt;br/&gt;
restriction(rep:glob,&quot;&quot;)&lt;br/&gt;
restriction(rep:glob,&apos;&apos;)&lt;/p&gt;

&lt;p&gt;In all cases the repository stopped at bundle 29 with an Authorization Failure.&lt;/p&gt;</comment>
                            <comment id="16295022" author="bdelacretaz" created="Mon, 18 Dec 2017 14:02:08 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7280&quot; title=&quot;Repoinit: add support for empty rep:glob restriction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7280&quot;&gt;&lt;del&gt;SLING-7280&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13121882">SLING-7280</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n1sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7258] org.apache.sling.starter.startup.impl.StartupFilter should return 503 when Sling is starting</title>
                <link>https://issues.apache.org/jira/browse/SLING-7258</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.starter.startup.impl.StartupFilter&lt;/tt&gt; should return 503 when Sling is starting, since that&apos;s the correct state of the server until it&apos;s ready to accept requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13119895">SLING-7258</key>
            <summary>org.apache.sling.starter.startup.impl.StartupFilter should return 503 when Sling is starting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Nov 2017 10:29:19 +0000</created>
                <updated>Mon, 27 Nov 2017 12:21:42 +0000</updated>
                            <resolved>Wed, 22 Nov 2017 08:59:22 +0000</resolved>
                                    <version>Starter Startup 1.0.2</version>
                                    <fixVersion>Starter 10</fixVersion>
                    <fixVersion>Starter Startup 1.0.4</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16260919" author="radu.cotescu" created="Tue, 21 Nov 2017 15:36:56 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/60bc335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;60bc335&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16261076" author="bdelacretaz" created="Tue, 21 Nov 2017 17:10:54 +0000"  >&lt;p&gt;Thanks for this, I agree with the logic.&lt;/p&gt;

&lt;p&gt;The new index.html page is very nice but some of its information duplicates stuff found elsewhere, and if the bundle is used outside of the Sling Launchpad some of that might not apply. &lt;/p&gt;

&lt;p&gt;Would it make sense to have less information on that page so it&apos;s less likely to get stale or be invalid in other contexts? Maybe just the &quot;Almost there...&quot; title and then what starts with &quot;To get started with Sling...&quot;, omitting the two paragraphs that are currently in between. And use &quot;Apache Sling&quot; in that first title then instead of &quot;the instance&quot;.&lt;/p&gt;</comment>
                            <comment id="16261101" author="radu.cotescu" created="Tue, 21 Nov 2017 17:27:30 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/94fae1e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;94fae1e&lt;/a&gt;. See &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12898692/12898692_starting.png&quot; title=&quot;starting.png attached to SLING-7258&quot;&gt;starting.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="16261109" author="bdelacretaz" created="Tue, 21 Nov 2017 17:30:31 +0000"  >&lt;p&gt;Thank you! I think that&apos;s enough information.&lt;/p&gt;</comment>
                            <comment id="16262096" author="cziegeler" created="Wed, 22 Nov 2017 07:29:02 +0000"  >&lt;p&gt;Reopening to address the comments from Konrad and myself on the mailing list:&lt;br/&gt;
Konrad: &quot;Only one minor nitpick. I would prefer to fill the field &quot;content&quot; either in the constructor or in the init method of the StartupFilter....Right now it is lazily filled in the doFilter which is called from multiple threads at the same time which could lead to reading the input stream multiple times (due to missing synchronization).&quot;&lt;br/&gt;
Carsten: &quot;And if IOUtils.toString throws, the input stream is never closed&quot;&lt;br/&gt;
Carsten: &quot;do we really need a dependency to another module to read a file? I&lt;br/&gt;
think we should avoid this for this module.&quot;&lt;/p&gt;</comment>
                            <comment id="16262174" author="radu.cotescu" created="Wed, 22 Nov 2017 08:59:15 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/01896bb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;01896bb&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16262261" author="kwin" created="Wed, 22 Nov 2017 10:41:05 +0000"  >&lt;p&gt;Can you use try with resources (&lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&lt;/a&gt;) instead so everything is properly closed with much less code? Also please use this constructor instead &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader(java.io.InputStream,%20java.nio.charset.Charset&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader(java.io.InputStream,%20java.nio.charset.Charset&lt;/a&gt;) with &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html&lt;/a&gt; instead of the magic constant &quot;UTF-8&quot;. Also making the field &lt;tt&gt;content&lt;/tt&gt; final helps to get rid of the null check.&lt;/p&gt;</comment>
                            <comment id="16262300" author="radu.cotescu" created="Wed, 22 Nov 2017 11:09:17 +0000"  >&lt;p&gt;What&apos;s the benefit of &lt;tt&gt;try-with-resources&lt;/tt&gt; here? I&apos;d still have to handle the &lt;tt&gt;IOException&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16262355" author="radu.cotescu" created="Wed, 22 Nov 2017 11:35:05 +0000"  >&lt;p&gt;Changed the used constructor for &lt;tt&gt;InputStreamReader&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/54e998d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;54e998d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12898692" name="starting.png" size="210314" author="radu" created="Tue, 21 Nov 2017 17:25:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n1in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7252] ResourceResolverImpl.map() does not invoke ResourceDecorator</title>
                <link>https://issues.apache.org/jira/browse/SLING-7252</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;ResourceDecorators are invoked by ResourceResolverImpl for resource resolution but not for mapping.&lt;br/&gt;
I&apos;m experiencing this issue with version 1.4.16, but the issue is also there for latest version 1.5.30.&lt;br/&gt;
I&apos;m attaching a patch for 1.4.16 version.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13119579">SLING-7252</key>
            <summary>ResourceResolverImpl.map() does not invoke ResourceDecorator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="fchicharro">Francisco Chicharro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Nov 2017 08:32:38 +0000</created>
                <updated>Thu, 30 Nov 2017 08:49:39 +0000</updated>
                            <resolved>Thu, 23 Nov 2017 21:39:47 +0000</resolved>
                                    <version>Resource Resolver 1.4.16</version>
                    <version>Resource Resolver 1.5.30</version>
                                    <fixVersion>Resource Resolver 1.5.32</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16264798" author="karlpauls" created="Thu, 23 Nov 2017 21:39:47 +0000"  >&lt;p&gt;I applied the patch in:&lt;/p&gt;

&lt;p&gt;0ddea42449200239f972ac64c07abe8110e688a6&lt;/p&gt;

&lt;p&gt;many thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12898432" name="resourceresolverimpl.patch" size="1170" author="fchicharro" created="Mon, 20 Nov 2017 08:31:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mzkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7251] Fix pipes plumber servlet IT </title>
                <link>https://issues.apache.org/jira/browse/SLING-7251</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;new Plumber servlet IT fail. This should be fixed&lt;/p&gt;</description>
                <environment></environment>
        <key id="13119411">SLING-7251</key>
            <summary>Fix pipes plumber servlet IT </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Nov 2017 09:41:49 +0000</created>
                <updated>Tue, 24 Apr 2018 13:29:46 +0000</updated>
                            <resolved>Sat, 3 Feb 2018 11:46:23 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16327060" author="npeltier" created="Tue, 16 Jan 2018 12:17:36 +0000"  >&lt;p&gt;issue depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7202&quot; title=&quot;o.a.j.o.j.o.ObservationManagerImpl times out eventually in pax container init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7202&quot;&gt;&lt;del&gt;SLING-7202&lt;/del&gt;&lt;/a&gt; (add it in model IT, not servlet)&lt;/p&gt;</comment>
                            <comment id="16327101" author="olli" created="Tue, 16 Jan 2018 13:13:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, is your test system under pressure (CPU/IO) when this test fails?&lt;/p&gt;</comment>
                            <comment id="16331951" author="npeltier" created="Fri, 19 Jan 2018 09:02:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; not really, looks more like random failure. Doesn&apos;t it fail for you?&lt;/p&gt;</comment>
                            <comment id="16332008" author="olli" created="Fri, 19 Jan 2018 09:44:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, no &#8211; not a single failure after nearly 20 builds on my system. Will enable the test and build every 15 mins on Jenkins.&lt;/p&gt;</comment>
                            <comment id="16332021" author="npeltier" created="Fri, 19 Jan 2018 09:49:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; interesting. How long does the tests take for you (good indicator of load i guess):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;for me&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

-------------------------------------------------------
&#160;T E S T S
-------------------------------------------------------
Running org.apache.sling.pipes.it.PipeBuilderIT
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 21.548 sec - in org.apache.sling.pipes.it.PipeBuilderIT
Running org.apache.sling.pipes.it.PlumberTestIT
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.367 sec - in org.apache.sling.pipes.it.PlumberTestIT
Running org.apache.sling.pipes.it.PlumberServletIT
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 14.186 sec - in org.apache.sling.pipes.it.PlumberServletIT
Running org.apache.sling.pipes.it.PipeModelIT
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 18.167 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.pipes.it.PipeModelIT
testListComponent(org.apache.sling.pipes.it.PipeModelIT)&#160; Time elapsed: 3.586 sec&#160; &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.FileNotFoundException: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:62056/content/list-component.html
&lt;/span&gt;&#160;&#160; &#160;at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1872)
&#160;&#160; &#160;at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1474)
&#160;&#160; &#160;at java.net.URL.openStream(URL.java:1045)
&#160;&#160; &#160;at org.apache.sling.pipes.it.PipeModelIT.testListComponent(PipeModelIT.java:53)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16332219" author="olli" created="Fri, 19 Jan 2018 12:58:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, didn&apos;t notice I had to activate ITs with profile... after that no succesful build at all.&lt;br/&gt;
The IT has several issues (don&apos;t forget: you&apos;re testing against real Sling):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;request is not authenticated&lt;/li&gt;
	&lt;li&gt;IT uses private Pipes package (&lt;tt&gt;org.apache.sling.pipes.internal.JsonWriter&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.pipes.internal.JsonUtil&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;there is no service user and ACL for Pipes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve done some more optimization:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;updated to Parent 33-SNAPSHOT and Testing PaxExam 1.0.0-SNAPSHOT (not required, for convenience only)&lt;/li&gt;
	&lt;li&gt;added &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resource-presence&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Resource Presence&lt;/a&gt; to ensure presence of &lt;tt&gt;/etc/pipes-it&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;removed &lt;tt&gt;logging()&lt;/tt&gt; as &lt;tt&gt;exam.properties&lt;/tt&gt; is missing and log in &lt;tt&gt;target/failsafe-reports&lt;/tt&gt; is sufficient&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please have a look at branch &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/tree/issue/SLING-7251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;issue/SLING-7251&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ACL should be improved&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;assertEquals(&quot;there should be 2 elements&quot;, 2, ((Double) main.get(&quot;size&quot;)).intValue());&lt;/tt&gt; is ugly&lt;/li&gt;
	&lt;li&gt;use &lt;tt&gt;bnd-maven-plugin&lt;/tt&gt; instead of &lt;tt&gt;maven-bundle-plugin&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16332307" author="npeltier" created="Fri, 19 Jan 2018 14:21:24 +0000"  >&lt;p&gt;wow thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;!&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;for ACLs i don&apos;t see where you&apos;d want some? i was assuming the ones we have in the parents (/etc, /var) are already good?&lt;/li&gt;
	&lt;li&gt;Service user is required for certain tasks (async pipes mostly), but for the rest, i use the user from the request.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;target/failsafe-reports&lt;/tt&gt; is good but i hate the xml format&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16332324" author="olli" created="Fri, 19 Jan 2018 14:34:51 +0000"  >&lt;p&gt;Pipes is writing to the repository (not using the authenticated request resource resolver), this should be restricted as much as possible with a dedicated service user. The current configuration (which I had to add) in &lt;tt&gt;PipesTestSupport&lt;/tt&gt; allows full read/write on &lt;tt&gt;/&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The logs in &lt;tt&gt;target/failsafe-reports&lt;/tt&gt; are in plain text.&lt;/p&gt;</comment>
                            <comment id="16332337" author="npeltier" created="Fri, 19 Jan 2018 14:43:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; for the ACLs, are you referring to loginAdministrative in integration tests?&lt;/p&gt;

&lt;p&gt;everything under &lt;tt&gt;src/main&lt;/tt&gt; is tied to &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;either passed in resolver (delegating to caller code the security)&lt;/li&gt;
	&lt;li&gt;either service-user&apos;s resolver (i hadn&apos;t created in test)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;if you are referring to &lt;tt&gt;src/test&lt;/tt&gt;, i&apos;ll change that (now i know how to do &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;</comment>
                            <comment id="16332353" author="olli" created="Fri, 19 Jan 2018 14:58:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, no. Calls in ITs from test bundle are allowed by whitelisting the bundle:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            newConfiguration(&quot;org.apache.sling.jcr.base.internal.LoginAdminWhitelist&quot;)
                .put(&quot;whitelist.bundles.regexp&quot;, &quot;^PAXEXAM.*$&quot;)
                .asOption(),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now I see service user is configurable. So the current configuration in &lt;tt&gt;PipesTestSupport&lt;/tt&gt; is fine (can we restrict write to &lt;tt&gt;/content&lt;/tt&gt; and &lt;tt&gt;/var&lt;/tt&gt; though?), but required. AFAIR tests failed due to NPE when adapting to &lt;tt&gt;ModifiableValueMap&lt;/tt&gt; in &lt;tt&gt;PlumberImpl&lt;/tt&gt;. &lt;/p&gt;
</comment>
                            <comment id="16334241" author="npeltier" created="Mon, 22 Jan 2018 13:16:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; last (hopefully) question, is testing.paxexam 1.0.0 close to be released? pipes 2.0.0 should be, and i guess snapshot deps are bad&lt;/p&gt;</comment>
                            <comment id="16334252" author="olli" created="Mon, 22 Jan 2018 13:28:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, very close (just waiting for releases under vote and probably new i18n bundle).&lt;/p&gt;</comment>
                            <comment id="16334444" author="npeltier" created="Mon, 22 Jan 2018 15:56:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;integrated your commit, removed service user creation (not used for now, but created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7425&quot; title=&quot;Add service user and base integration tests on this in sling pipes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7425&quot;&gt;SLING-7425&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;didn&apos;t change maven-bundle-plugin to bnd&apos;s could that be discussed more widely as a general best practice for sling&apos;s projects?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;if both points are ok with you, i&apos;ll consider this issue resolved&lt;/p&gt;</comment>
                            <comment id="16334845" author="olli" created="Mon, 22 Jan 2018 20:26:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, fine with me.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13132769">SLING-7425</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3myjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7244] Correct require capability for http whiteboard</title>
                <link>https://issues.apache.org/jira/browse/SLING-7244</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The require capability should not use a fixed version but a version range, otherwise it will not resolve once we update the http implementation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13118618">SLING-7244</key>
            <summary>Correct require capability for http whiteboard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Nov 2017 18:19:49 +0000</created>
                <updated>Fri, 1 Dec 2017 14:43:47 +0000</updated>
                            <resolved>Wed, 15 Nov 2017 18:30:49 +0000</resolved>
                                    <version>i18n 2.5.8</version>
                    <version>Feature Flags 1.2.0</version>
                    <version>Engine 2.6.8</version>
                    <version>Security 1.1.6</version>
                                    <fixVersion>i18n 2.5.10</fixVersion>
                    <fixVersion>Feature Flags 1.2.2</fixVersion>
                    <fixVersion>Engine 2.6.10</fixVersion>
                    <fixVersion>Security 1.1.10</fixVersion>
                                    <component>Engine</component>
                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mtnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7243] Improve validation in AuthUtil.isRedirectValid</title>
                <link>https://issues.apache.org/jira/browse/SLING-7243</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The validation in &lt;tt&gt;AuthUtil.isRedirectValid&lt;/tt&gt; might be improved.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13118547">SLING-7243</key>
            <summary>Improve validation in AuthUtil.isRedirectValid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Nov 2017 13:57:19 +0000</created>
                <updated>Mon, 18 Dec 2017 11:06:15 +0000</updated>
                            <resolved>Fri, 15 Dec 2017 07:02:09 +0000</resolved>
                                                    <fixVersion>Auth Core 1.4.2</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16292129" author="asanso" created="Fri, 15 Dec 2017 07:01:54 +0000"  >&lt;p&gt;fixed in  015fe58b22e0625e9d88b687de50303db539482b&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mt7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7241] [pipes] Nashorn ScriptEngine in PipeBindings is null</title>
                <link>https://issues.apache.org/jira/browse/SLING-7241</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Under some unclear circumstances the ScriptEngine in PipeBindings does not get initialized.&lt;br/&gt;
There is a solution out there to attach Nashorn to the system bundle. Appart from that I was able to fix it by using a different constructor: ScriptEngineManager(null). &lt;/p&gt;

&lt;p&gt;The issue can be reproduced by deploying &lt;a href=&quot;https://github.com/bcsott/migration-tool&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bcsott/migration-tool&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When it fails the following is written to stderror.log:&lt;br/&gt;
ScriptEngineManager providers.next(): javax.script.ScriptEngineFactory:&lt;br/&gt;
Provider jdk.nashorn.api.scripting.NashornScriptEngineFactory not found&lt;/p&gt;
</description>
                <environment>java.runtime.name = Java(TM) SE Runtime Environment&lt;br/&gt;
java.runtime.version = 1.8.0_144-b01</environment>
        <key id="13118362">SLING-7241</key>
            <summary>[pipes] Nashorn ScriptEngine in PipeBindings is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="bcsott">Bj&#246;rn Csott</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Nov 2017 21:00:06 +0000</created>
                <updated>Tue, 24 Apr 2018 13:30:39 +0000</updated>
                            <resolved>Fri, 24 Nov 2017 10:03:23 +0000</resolved>
                                    <version>Pipes 1.0.4</version>
                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16252191" author="githubbot" created="Tue, 14 Nov 2017 21:19:01 +0000"  >&lt;p&gt;bcsott opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7241&quot; title=&quot;[pipes] Nashorn ScriptEngine in PipeBindings is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7241&quot;&gt;&lt;del&gt;SLING-7241&lt;/del&gt;&lt;/a&gt; Fix SciptEngineManager&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Using this constructor instead of the empty one will return Nashorn engine even if not attached to system bundle. Detail &amp;amp; how to repoduce issue see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7241&quot; title=&quot;[pipes] Nashorn ScriptEngine in PipeBindings is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7241&quot;&gt;&lt;del&gt;SLING-7241&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16252223" author="karlpauls" created="Tue, 14 Nov 2017 21:34:49 +0000"  >&lt;p&gt;It looks like this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt;. At a minimum, the rework required there might be fixing this issue as well (or maybe it is the other way around).&lt;/p&gt;</comment>
                            <comment id="16253239" author="npeltier" created="Wed, 15 Nov 2017 10:29:23 +0000"  >&lt;p&gt;thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt; for the issue &amp;amp; PR!&lt;/p&gt;

&lt;p&gt;i think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; the issue is correlated with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt;, but i&apos;m not sure it would fix it. Anyway specifying system classloader might be a good idea to avoid future headaches about why nahshorn is not here in pipes case. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt; could you add some comment explaining the choice of the engine manager (something like &quot;we take the system classloader&apos;s engine manager to ensure consistent execution of pipes across contexts&quot;)&lt;/p&gt;</comment>
                            <comment id="16253246" author="karlpauls" created="Wed, 15 Nov 2017 10:34:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, I guess what I&apos;m trying to point out is that it looks like we have to rework the way we handle script engines in general due to java9 and the issues mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt;. Furthermore, it is unclear if using the system classloader is the right thing todo in this case as that might just make it so that we get the same problem we have for java9 on java8 as well.&lt;/p&gt;

&lt;p&gt;I&apos;m planning to look into &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; asap - if I do, I&apos;ll try to keep this issue in mind and report back.&lt;/p&gt;</comment>
                            <comment id="16253260" author="npeltier" created="Wed, 15 Nov 2017 10:40:28 +0000"  >&lt;p&gt;ok &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; then i&apos;ll wait &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16254980" author="bcsott" created="Thu, 16 Nov 2017 09:08:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, I was debugging several solutions. Using the PlumberServlet via curl always works. So I started to investigate whats the difference. I added the &amp;lt;Bundle-RequiredExecutionEnvironenment&amp;gt; which was the only missing piece in my bundle.&lt;/p&gt;

&lt;p&gt;The result of my investigation was:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Copy of Plumber Servlet in my Bundle -&amp;gt; does not work&lt;/li&gt;
	&lt;li&gt;Plumber in Service called from Servlet -&amp;gt; does not work&lt;/li&gt;
	&lt;li&gt;Plumber in Service executed via JMX -&amp;gt; works&lt;/li&gt;
	&lt;li&gt;Plumber in Servlet -&amp;gt;does not work&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;No difference on Mac or Windows. Also tried several JVM versions. No difference.&lt;br/&gt;
The only stable solution I found (besides adding Nashorn to system bundle) is using the other constructor. I think &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134?focusedCommentId=16187822&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16187822&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7134?focusedCommentId=16187822&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16187822&lt;/a&gt; describes also this strange behavior.&lt;/p&gt;</comment>
                            <comment id="16255053" author="karlpauls" created="Thu, 16 Nov 2017 10:09:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt;, oh sorry - I see now that you are talking about using the ScriptEngineManager directly. I was assuming this would use the sling scriptengine. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, in that case, I agree, while this is related to problems in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; it will not be addressed directly. Sorry for the noice. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt;, I think the difference you see is due to a ThreadContextClassloader. Probably that is set to something different in the JMX case as in the others (maybe worthwhile to figure out what the ThreadContextClassloader is set to in each case).&lt;/p&gt;</comment>
                            <comment id="16255107" author="npeltier" created="Thu, 16 Nov 2017 10:43:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; that&apos;s not noise, it&apos;s fine enriching this ticket with your lights. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt; i&apos;m fine merging in your change, but with some comment explaining that parameter as said (pls amend your commit and push --force so you have only one commit)&lt;br/&gt;
thanks!&lt;/p&gt;</comment>
                            <comment id="16265112" author="bcsott" created="Fri, 24 Nov 2017 09:53:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt; i&apos;ve updated the PR with a fallback. This should only use the systems classloader if the first option fails. Also I throw an exception to avoid the nullpointer exception if its still failing (wrong jvm e.g.).  &lt;/p&gt;</comment>
                            <comment id="16265116" author="githubbot" created="Fri, 24 Nov 2017 10:00:15 +0000"  >&lt;p&gt;npeltier closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7241&quot; title=&quot;[pipes] Nashorn ScriptEngine in PipeBindings is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7241&quot;&gt;&lt;del&gt;SLING-7241&lt;/del&gt;&lt;/a&gt; Fix SciptEngineManager&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/pipes/PipeBindings.java b/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
index b50ab57..923302d 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
@@ -74,8 +74,16 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;public constructor, built from pipe&apos;s resource&lt;/li&gt;
	&lt;li&gt;@param resource pipe&apos;s configuration resource&lt;br/&gt;
      */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public PipeBindings(Resource resource){&lt;/li&gt;
	&lt;li&gt;engine.setContext(scriptContext);&lt;br/&gt;
+    public PipeBindings(Resource resource) throws Exception {&lt;br/&gt;
+    	//In some contexts the nashorn engine cannot be obtained. Do fallback to system classloader.&lt;br/&gt;
+    	if(engine == null)
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+    		engine = new ScriptEngineManager(null).getEngineByName(&amp;quot;nashorn&amp;quot;);+    		//Check if nashorn can still not be instantiated+    		if(engine == null){
+    			throw new Exception(&quot;Can not instantiate nashorn scriptengine. Check JVM version &amp;amp; capabilities.&quot;);
+    		}+    	}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+    	engine.setContext(scriptContext);&lt;br/&gt;
         //add path bindings where path.MyPipe will give MyPipe current resource path&lt;br/&gt;
         getBindings().put(PATH_BINDING, pathBindings);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/src/test/java/org/apache/sling/pipes/PipeBindingsTest.java b/src/test/java/org/apache/sling/pipes/PipeBindingsTest.java&lt;br/&gt;
index aff153b..864812c 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/pipes/PipeBindingsTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/pipes/PipeBindingsTest.java&lt;br/&gt;
@@ -45,13 +45,13 @@ public void setup() throws PersistenceException &lt;/p&gt;
{
         context.load().json(&quot;/container.json&quot;, PATH_PIPE);
     }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private PipeBindings getDummyTreeBinding(){&lt;br/&gt;
+    private PipeBindings getDummyTreeBinding() throws Exception
{
         Resource resource = context.resourceResolver().getResource(PATH_PIPE + &quot;/&quot; + ContainerPipeTest.NN_DUMMYTREE);
         return new PipeBindings(resource);
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Test&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void testEvaluateSimpleString() throws ScriptException {&lt;br/&gt;
+    public void testEvaluateSimpleString() throws Exception {&lt;br/&gt;
         PipeBindings bindings = getDummyTreeBinding();&lt;br/&gt;
         String simple = &quot;simple string&quot;;&lt;br/&gt;
         String evaluated = (String)bindings.evaluate(simple);&lt;br/&gt;
@@ -59,7 +59,7 @@ public void testEvaluateSimpleString() throws ScriptException {&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Test&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void computeEcma5Expression() {&lt;br/&gt;
+    public void computeEcma5Expression() throws Exception {&lt;br/&gt;
         PipeBindings bindings = getDummyTreeBinding();&lt;br/&gt;
         Map&amp;lt;String,String&amp;gt; expressions = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
         expressions.put(&quot;blah ${blah} blah&quot;, &quot;&apos;blah &apos; + blah + &apos; blah&apos;&quot;);&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16265120" author="npeltier" created="Fri, 24 Nov 2017 10:03:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt;! Did merge your commit (your commit author mail btw is not registered in github, hope it&apos;s ok)&lt;/p&gt;</comment>
                            <comment id="16265124" author="bdelacretaz" created="Fri, 24 Nov 2017 10:07:32 +0000"  >&lt;p&gt;IIUC there&apos;s a classloader related reason for calling &lt;tt&gt;ScriptEngineManager(null).getEngineByName(&quot;nashorn&quot;)&lt;/tt&gt; twice?&lt;/p&gt;

&lt;p&gt;If that&apos;s correct please add comments to explain the idea - right now I&apos;d say one of those calls should go away but it looks like there&apos;s a specific reason for doing that.&lt;/p&gt;

&lt;p&gt;Also, &quot;nashorn&quot; should be a constant I guess &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16265134" author="npeltier" created="Fri, 24 Nov 2017 10:22:40 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;/p&gt;

&lt;p&gt;&quot;first&quot; call is done with no parameter, which will take thread&apos;s class loader &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;. Second &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;with &quot;null&quot; parameter which takes root classloader, and fixes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt; issue. May be a method getScriptEngine with both calls in the same place would make things clearer.&lt;br/&gt;
agreed with the constant&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/bcsott/sling-org-apache-sling-pipes/blob/bd15e86e7b3f37112fe06f26d86342a0832f969a/src/main/java/org/apache/sling/pipes/PipeBindings.java#L53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bcsott/sling-org-apache-sling-pipes/blob/bd15e86e7b3f37112fe06f26d86342a0832f969a/src/main/java/org/apache/sling/pipes/PipeBindings.java#L53&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/bcsott/sling-org-apache-sling-pipes/blob/bd15e86e7b3f37112fe06f26d86342a0832f969a/src/main/java/org/apache/sling/pipes/PipeBindings.java#L80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bcsott/sling-org-apache-sling-pipes/blob/bd15e86e7b3f37112fe06f26d86342a0832f969a/src/main/java/org/apache/sling/pipes/PipeBindings.java#L80&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16265145" author="bdelacretaz" created="Fri, 24 Nov 2017 10:43:36 +0000"  >&lt;p&gt;Ok, I understand the classloader trick now - and yes a method which does that more clearly is useful. &lt;/p&gt;

&lt;p&gt;My angle is that we might encounter a similar issue in other places, so it&apos;s good to briefly explain the &quot;trick&quot; in the code.&lt;/p&gt;</comment>
                            <comment id="16265514" author="githubbot" created="Fri, 24 Nov 2017 20:20:34 +0000"  >&lt;p&gt;bcsott opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7241&quot; title=&quot;[pipes] Nashorn ScriptEngine in PipeBindings is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7241&quot;&gt;&lt;del&gt;SLING-7241&lt;/del&gt;&lt;/a&gt; ScriptEngine Initialization &amp;amp; Cleanup&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Separated the ScriptEngine initialisation (L251)&lt;br/&gt;
   Sort methods&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16265516" author="bcsott" created="Fri, 24 Nov 2017 20:27:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; Thanks for the remarks. I created an additional PR.&lt;/p&gt;</comment>
                            <comment id="16266522" author="githubbot" created="Mon, 27 Nov 2017 08:49:50 +0000"  >&lt;p&gt;npeltier closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7241&quot; title=&quot;[pipes] Nashorn ScriptEngine in PipeBindings is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7241&quot;&gt;&lt;del&gt;SLING-7241&lt;/del&gt;&lt;/a&gt; ScriptEngine Initialization &amp;amp; Cleanup&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/pipes/PipeBindings.java b/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
index 923302d..5cbb46d 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/pipes/PipeBindings.java&lt;br/&gt;
@@ -44,46 +44,52 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Execution bindings of a pipe, and all expression related&lt;br/&gt;
  */&lt;br/&gt;
 public class PipeBindings {&lt;br/&gt;
+    /**&lt;br/&gt;
+     * interface mapping a javascript date&lt;br/&gt;
+     */&lt;br/&gt;
+    public interface JsDate 
{
+        long getTime();
+        int getTimezoneOffset();
+    }
&lt;p&gt;+&lt;br/&gt;
     private static final Logger log = LoggerFactory.getLogger(PipeBindings.class);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    public static final String NASHORNSCRIPTENGINE = &quot;nashorn&quot;;&lt;br/&gt;
+    &lt;br/&gt;
     public static final String NN_ADDITIONALBINDINGS = &quot;additionalBindings&quot;;&lt;/p&gt;

&lt;p&gt;     public static final String PN_ADDITIONALSCRIPTS = &quot;additionalScripts&quot;;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;nashorn&quot;);&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;ScriptContext scriptContext = new SimpleScriptContext();&lt;br/&gt;
-&lt;br/&gt;
     /**&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;add ${path.pipeName} binding allowing to retrieve pipeName&apos;s current resource path&lt;br/&gt;
      */&lt;br/&gt;
     public static final String PATH_BINDING = &quot;path&quot;;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Map&amp;lt;String, String&amp;gt; pathBindings = new HashMap&amp;lt;&amp;gt;();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add ${name.pipeName} binding allowing to retrieve pipeName&apos;s current resource name&lt;br/&gt;
      */&lt;br/&gt;
     public static final String NAME_BINDING = &quot;name&quot;;&lt;br/&gt;
+    &lt;br/&gt;
+    private static final Pattern INJECTED_SCRIPT = Pattern.compile(&quot;\\$\\{((&lt;span class=&quot;error&quot;&gt;&amp;#91;^\\{^\\}&amp;#93;&lt;/span&gt;*(&lt;br class=&quot;atl-forced-newline&quot; /&gt;
{[0-9,]+\\})?)*)&lt;br class=&quot;atl-forced-newline&quot; /&gt;}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    ScriptEngine engine;&lt;br/&gt;
+    &lt;br/&gt;
+    ScriptContext scriptContext = new SimpleScriptContext();&lt;br/&gt;
+&lt;br/&gt;
+    Map&amp;lt;String, String&amp;gt; pathBindings = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
     Map&amp;lt;String, String&amp;gt; nameBindings = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
 &lt;br/&gt;
     Map&amp;lt;String, Resource&amp;gt; outputResources = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
 &lt;br/&gt;
-    private static final Pattern INJECTED_SCRIPT = Pattern.compile(&quot;\\$\\{((&lt;span class=&quot;error&quot;&gt;&amp;#91;^\\{^\\}&amp;#93;&lt;/span&gt;*(&lt;br class=&quot;atl-forced-newline&quot; /&gt;{[0-9,]+\}
&lt;p&gt;)?)*)&lt;br class=&quot;atl-forced-newline&quot; /&gt;}&quot;);&lt;br/&gt;
-&lt;br/&gt;
     /**&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;public constructor, built from pipe&apos;s resource&lt;/li&gt;
	&lt;li&gt;@param resource pipe&apos;s configuration resource&lt;br/&gt;
      */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public PipeBindings(Resource resource) throws Exception {&lt;/li&gt;
	&lt;li&gt;//In some contexts the nashorn engine cannot be obtained. Do fallback to system classloader.&lt;/li&gt;
	&lt;li&gt;if(engine == null){&lt;/li&gt;
	&lt;li&gt;engine = new ScriptEngineManager(null).getEngineByName(&quot;nashorn&quot;);&lt;/li&gt;
	&lt;li&gt;//Check if nashorn can still not be instantiated&lt;/li&gt;
	&lt;li&gt;if(engine == null)
{
-    			throw new Exception(&quot;Can not instantiate nashorn scriptengine. Check JVM version &amp;amp; capabilities.&quot;);
-    		}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;engine.setContext(scriptContext);&lt;br/&gt;
+    public PipeBindings(Resource resource) throws ScriptException {&lt;br/&gt;
+    	//Setup script engines&lt;br/&gt;
+    	initializeScriptEngine();&lt;br/&gt;
+    	&lt;br/&gt;
         //add path bindings where path.MyPipe will give MyPipe current resource path&lt;br/&gt;
         getBindings().put(PATH_BINDING, pathBindings);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -111,6 +117,25 @@ public PipeBindings(Resource resource) throws Exception {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    /**&lt;br/&gt;
+     * add a binding&lt;br/&gt;
+     * @param name binding&apos;s name&lt;br/&gt;
+     * @param value binding&apos;s value&lt;br/&gt;
+     */&lt;br/&gt;
+    public void addBinding(String name, Object value){&lt;br/&gt;
+        log.debug(&quot;Adding binding {}={}&quot;, name, value);&lt;br/&gt;
+        getBindings().put(name, value);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * adds additional bindings (global variables to use in child pipes expressions)&lt;br/&gt;
+     * @param bindings key/values bindings to add to the existing bindings&lt;br/&gt;
+     */&lt;br/&gt;
+    public void addBindings(Map bindings) {&lt;br/&gt;
+        log.info(&quot;Adding bindings {}&quot;, bindings);&lt;br/&gt;
+        getBindings().putAll(bindings);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add a script file to the engine&lt;/li&gt;
	&lt;li&gt;@param resolver resolver with which the file should be read&lt;br/&gt;
@@ -144,73 +169,6 @@ public void addScript(ResourceResolver resolver, String path) {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* adds additional bindings (global variables to use in child pipes expressions)&lt;/li&gt;
	&lt;li&gt;* @param bindings key/values bindings to add to the existing bindings&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public void addBindings(Map bindings) {&lt;/li&gt;
	&lt;li&gt;log.info(&quot;Adding bindings {}&quot;, bindings);&lt;/li&gt;
	&lt;li&gt;getBindings().putAll(bindings);&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* copy bindings&lt;/li&gt;
	&lt;li&gt;* @param original original bindings to copy&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public void copyBindings(PipeBindings original)
{
-        getBindings().putAll(original.getBindings());
-    }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Update current resource of a given pipe, and appropriate binding&lt;/li&gt;
	&lt;li&gt;* @param pipe pipe we&apos;ll extract the output binding from&lt;/li&gt;
	&lt;li&gt;* @param resource current resource in the pipe execution&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public void updateBindings(Pipe pipe, Resource resource) 
{
-        outputResources.put(pipe.getName(), resource);
-        updateStaticBindings(pipe.getName(), resource);
-        addBinding(pipe.getName(), pipe.getOutputBinding());
-    }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Update all the static bindings related to a given resource&lt;/li&gt;
	&lt;li&gt;* @param name name under which static bindings should be recorded&lt;/li&gt;
	&lt;li&gt;* @param resource resource from which static bindings will be built&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public void updateStaticBindings(String name, Resource resource){&lt;/li&gt;
	&lt;li&gt;if (resource != null) 
{
-            pathBindings.put(name, resource.getPath());
-            nameBindings.put(name, resource.getName());
-        }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* add a binding&lt;/li&gt;
	&lt;li&gt;* @param name binding&apos;s name&lt;/li&gt;
	&lt;li&gt;* @param value binding&apos;s value&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public void addBinding(String name, Object value){&lt;/li&gt;
	&lt;li&gt;log.debug(&quot;Adding binding {}={}&quot;, name, value);&lt;/li&gt;
	&lt;li&gt;getBindings().put(name, value);&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* check if a given bindings is defined or not&lt;/li&gt;
	&lt;li&gt;* @param name name of the binding&lt;/li&gt;
	&lt;li&gt;* @return true if &amp;lt;code&amp;gt;name&amp;lt;/code&amp;gt; is registered&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public boolean isBindingDefined(String name)
{
-        return getBindings().containsKey(name);
-    }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* return registered bindings&lt;/li&gt;
	&lt;li&gt;* @return bindings&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;public Bindings getBindings() 
{
-        return scriptContext.getBindings(ScriptContext.ENGINE_SCOPE);
-    }
&lt;p&gt;-&lt;br/&gt;
     /**&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;Doesn&apos;t look like nashorn likes template strings &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;@param expr ECMA like expression &amp;lt;code&amp;gt;blah${&apos;some&apos; + &apos;ecma&apos; + &apos;expression&apos;}&amp;lt;/code&amp;gt;&lt;br/&gt;
@@ -245,6 +203,14 @@ protected String computeECMA5Expression(String expr)
{
         return null;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    /**&lt;br/&gt;
+     * copy bindings&lt;br/&gt;
+     * @param original original bindings to copy&lt;br/&gt;
+     */&lt;br/&gt;
+    public void copyBindings(PipeBindings original)&lt;/p&gt;
{
+        getBindings().putAll(original.getBindings());
+    }
&lt;p&gt;+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;evaluate a given expression&lt;/li&gt;
	&lt;li&gt;@param expr ecma like expression&lt;br/&gt;
@@ -260,6 +226,41 @@ protected Object evaluate(String expr) throws ScriptException 
{
         return expr;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    /**&lt;br/&gt;
+     * return registered bindings&lt;br/&gt;
+     * @return bindings&lt;br/&gt;
+     */&lt;br/&gt;
+    public Bindings getBindings() &lt;/p&gt;
{
+        return scriptContext.getBindings(ScriptContext.ENGINE_SCOPE);
+    }
&lt;p&gt;+    &lt;br/&gt;
+    /**&lt;br/&gt;
+     * return Pipe &amp;lt;code&amp;gt;name&amp;lt;/code&amp;gt;&apos;s output binding&lt;br/&gt;
+     * @param name name of the pipe&lt;br/&gt;
+     * @return resource corresponding to that pipe output&lt;br/&gt;
+     */&lt;br/&gt;
+    public Resource getExecutedResource(String name) &lt;/p&gt;
{
+        return outputResources.get(name);
+    }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * Initialize the ScriptEngine.&lt;br/&gt;
+     * In some contexts the nashorn engine cannot be obtained from thread&apos;s class loader. Do fallback to system classloader.&lt;br/&gt;
+     * @throws ScriptException&lt;br/&gt;
+     */&lt;br/&gt;
+    private void initializeScriptEngine() throws ScriptException{&lt;br/&gt;
+    	engine = new ScriptEngineManager().getEngineByName(PipeBindings.NASHORNSCRIPTENGINE);&lt;br/&gt;
+    	if(engine == null){&lt;br/&gt;
+        	//Fallback to system classloader&lt;br/&gt;
+    		engine = new ScriptEngineManager(null).getEngineByName(PipeBindings.NASHORNSCRIPTENGINE);&lt;br/&gt;
+    		//Check if nashorn can still not be instantiated&lt;br/&gt;
+    		if(engine == null)&lt;/p&gt;
{
+    			throw new ScriptException(&quot;Can not instantiate nashorn scriptengine. Check JVM version &amp;amp; capabilities.&quot;);
+    		}
&lt;p&gt;+    	}&lt;br/&gt;
+    	engine.setContext(scriptContext);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Expression is a function of variables from execution context, that&lt;/li&gt;
	&lt;li&gt;we implement here as a String&lt;br/&gt;
@@ -302,19 +303,34 @@ public Object instantiateObject(String expr){&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* return Pipe &amp;lt;code&amp;gt;name&amp;lt;/code&amp;gt;&apos;s output binding&lt;/li&gt;
	&lt;li&gt;* @param name name of the pipe&lt;/li&gt;
	&lt;li&gt;* @return resource corresponding to that pipe output&lt;br/&gt;
+     * check if a given bindings is defined or not&lt;br/&gt;
+     * @param name name of the binding&lt;br/&gt;
+     * @return true if &amp;lt;code&amp;gt;name&amp;lt;/code&amp;gt; is registered&lt;br/&gt;
      */&lt;/li&gt;
	&lt;li&gt;public Resource getExecutedResource(String name) {&lt;/li&gt;
	&lt;li&gt;return outputResources.get(name);&lt;br/&gt;
+    public boolean isBindingDefined(String name)
{
+        return getBindings().containsKey(name);
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* interface mapping a javascript date&lt;br/&gt;
+     * Update current resource of a given pipe, and appropriate binding&lt;br/&gt;
+     * @param pipe pipe we&apos;ll extract the output binding from&lt;br/&gt;
+     * @param resource current resource in the pipe execution&lt;br/&gt;
      */&lt;/li&gt;
	&lt;li&gt;public interface JsDate {&lt;/li&gt;
	&lt;li&gt;long getTime();&lt;/li&gt;
	&lt;li&gt;int getTimezoneOffset();&lt;br/&gt;
+    public void updateBindings(Pipe pipe, Resource resource) 
{
+        outputResources.put(pipe.getName(), resource);
+        updateStaticBindings(pipe.getName(), resource);
+        addBinding(pipe.getName(), pipe.getOutputBinding());
+    }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * Update all the static bindings related to a given resource&lt;br/&gt;
+     * @param name name under which static bindings should be recorded&lt;br/&gt;
+     * @param resource resource from which static bindings will be built&lt;br/&gt;
+     */&lt;br/&gt;
+    public void updateStaticBindings(String name, Resource resource)&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        if (resource != null) {
+            pathBindings.put(name, resource.getPath());
+            nameBindings.put(name, resource.getName());
+        }     }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16266534" author="npeltier" created="Mon, 27 Nov 2017 09:10:15 +0000"  >&lt;p&gt;thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bcsott&quot; class=&quot;user-hover&quot; rel=&quot;bcsott&quot;&gt;bcsott&lt;/a&gt;! as mentionned in the PR, pls next time provide one  fix per commit, as mixing them make review longer&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13103074">SLING-7134</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12897632" name="error.log" size="14541" author="bcsott" created="Tue, 14 Nov 2017 21:28:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/bcsott/migration-tool]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ms2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7240] Update to launchpad.base 5.6.10-2.6.26 and add the http.bridge bundle to the webapp</title>
                <link>https://issues.apache.org/jira/browse/SLING-7240</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If we update to that next launchpad.base release 5.6.10-2.6.26 we need to add the http.bridge in the webapp as it has been removed from the base in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7232&quot; title=&quot;Remove http.bridge from launchpad base&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7232&quot;&gt;&lt;del&gt;SLING-7232&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13118076">SLING-7240</key>
            <summary>Update to launchpad.base 5.6.10-2.6.26 and add the http.bridge bundle to the webapp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Nov 2017 21:44:08 +0000</created>
                <updated>Tue, 21 Nov 2017 22:21:02 +0000</updated>
                            <resolved>Tue, 21 Nov 2017 22:21:02 +0000</resolved>
                                                    <fixVersion>Starter 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16261584" author="karlpauls" created="Tue, 21 Nov 2017 22:21:02 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/commit/d1d8412ae5896ad20b65bd1454e3a39b6c8823ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter/commit/d1d8412ae5896ad20b65bd1454e3a39b6c8823ea&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13116891">SLING-7232</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mqbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7239] LogbackManager may miss out some OSGi config at time of startup</title>
                <link>https://issues.apache.org/jira/browse/SLING-7239</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;LogbackManager&lt;/tt&gt; currently upon construction reads all the OSGi config and configure them in Logback. Config which comes laters leads to logback reset. &lt;/p&gt;

&lt;p&gt;However during the time when its getting constructed it has a logic to ignore the reset flag initialization for startup. This may lead to a race condition where some OSGi configs are picked up while it is getting constructed and some OSGi config arriving later are not picked up. For e.g.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;LogbackManager constructor is invoked&lt;/li&gt;
	&lt;li&gt;It constructs LogConfigManager which registers the managed services&lt;/li&gt;
	&lt;li&gt;ManagedServices receive some OSGi config and push them to LogConfigManager&lt;/li&gt;
	&lt;li&gt;LogbackManager picks them up and add them to Logback but still startup is not finished i.e. started = true is not called&lt;/li&gt;
	&lt;li&gt;Some more OSGi config arrive - These would get ignored as LogbackManager#configChanged would ignore the calls because started != true&lt;/li&gt;
	&lt;li&gt;LogbackManager startup completes and started = true&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So here configs at #5 would not be picked up unless at #7 some more OSGi config arrive. Or some one modifies the config post system start&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117961">SLING-7239</key>
            <summary>LogbackManager may miss out some OSGi config at time of startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Nov 2017 15:10:33 +0000</created>
                <updated>Fri, 1 Dec 2017 06:34:57 +0000</updated>
                            <resolved>Mon, 27 Nov 2017 06:22:32 +0000</resolved>
                                                    <fixVersion>Commons Log 5.1.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16266423" author="chetanm" created="Mon, 27 Nov 2017 06:22:23 +0000"  >&lt;p&gt;Fixed this with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-commons-log.git;a=commitdiff;h=3271098b98cc661a3ee3cdb72aa1ef653b5d873d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The test creates around 200+ OSGi config for loggers which then fails on my setup as number of log files created are lesser. Post fix the test passes. The test does not fail for lower config count like 100 on my machine. So failure depends on machine as it is due to race condition&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mplr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7238] Import fail if user does not have access to the root path</title>
                <link>https://issues.apache.org/jira/browse/SLING-7238</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current FileVault API used to import content is the following&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.jackrabbit.vault.fs.io.Importer#run(archive,importRoot)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which fail to import content for sessions that don&apos;t have access to the root node.&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-227&quot; title=&quot;Import fail if user does not have access to the root path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-227&quot;&gt;&lt;del&gt;JCRVLT-227&lt;/del&gt;&lt;/a&gt;, a new API signature has been added which does not require access to the root node anymore.&lt;/p&gt;

&lt;p&gt;This issue tracks leveraging &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-227&quot; title=&quot;Import fail if user does not have access to the root path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-227&quot;&gt;&lt;del&gt;JCRVLT-227&lt;/del&gt;&lt;/a&gt; in SCD core.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117879">SLING-7238</key>
            <summary>Import fail if user does not have access to the root path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Nov 2017 09:08:55 +0000</created>
                <updated>Mon, 13 Nov 2017 09:57:43 +0000</updated>
                            <resolved>Mon, 13 Nov 2017 09:57:43 +0000</resolved>
                                    <version>Content Distribution Core 0.2.8</version>
                                    <fixVersion>Content Distribution Core 0.2.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16249294" author="marett" created="Mon, 13 Nov 2017 09:38:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/16a4ed809aaf935c29c2b19237e5c54c5d0c9384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/16a4ed809aaf935c29c2b19237e5c54c5d0c9384&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mp3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7237] JcrValueMap escapes legal &apos;:&apos; character in namespace</title>
                <link>https://issues.apache.org/jira/browse/SLING-7237</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;See &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; wherein while reading a jcr property, &lt;br/&gt;
the name is escaped of illegal jcr character &apos;:&apos; . For e.g. if I say &lt;br/&gt;
&lt;tt&gt;valueMap.get(&quot;jcr:content/xyz&quot;)&lt;/tt&gt; then it is escaped as &lt;tt&gt;jcr%3Acontent/xyz&lt;/tt&gt; . This is not correct if I have a namespace by the name &quot;jcr&quot; registered already because then &lt;tt&gt;jcr:content/xyz&lt;/tt&gt; is a valid property path.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/jackrabbit/blob/trunk/jackrabbit-jcr-commons/src/main/java/org/apache/jackrabbit/util/Text.java#L482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit/blob/trunk/jackrabbit-jcr-commons/src/main/java/org/apache/jackrabbit/util/Text.java#L482&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117536">SLING-7237</key>
            <summary>JcrValueMap escapes legal &apos;:&apos; character in namespace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satyadeep">Satya Deep Maheshwari</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Nov 2017 10:10:18 +0000</created>
                <updated>Fri, 10 Nov 2017 10:11:15 +0000</updated>
                                            <version>JCR Resource 3.0.6</version>
                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mmzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7234] ServiceFactory.getService() resulted in a cycle in sling karaf </title>
                <link>https://issues.apache.org/jira/browse/SLING-7234</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Once in a while on the first startup of Sling on Karaf I&apos;m seeing the exception ServiceFactory.getService() resulted in a cycle. This does not happen every time only on some startups. &lt;/p&gt;

&lt;p&gt;After the first startup on the next restart this exception does not appear anymore.&lt;/p&gt;

&lt;p&gt;I&apos;ve picked a sample of the exception. Unfortunately this seems like a concurrency issue and therefore much harder to find a pattern but it happens mostly with sling scripting. I&apos;ve seen other exceptions also with sling scripting but this one is the most common &lt;/p&gt;

&lt;p&gt;I&apos;ve uploaded two log files:&lt;/p&gt;

&lt;p&gt;clean.log.1 with a clean startup and&lt;br/&gt;
sample.log.1 with the aforementioned exception&lt;/p&gt;</description>
                <environment>Debian linux, jdk 1.8.0_151-b12</environment>
        <key id="13117123">SLING-7234</key>
            <summary>ServiceFactory.getService() resulted in a cycle in sling karaf </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Nov 2017 23:15:52 +0000</created>
                <updated>Wed, 13 Dec 2017 16:28:26 +0000</updated>
                            <resolved>Wed, 13 Dec 2017 16:28:26 +0000</resolved>
                                    <version>Scripting Core 2.0.50</version>
                                                    <component>Karaf</component>
                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16284129" author="olli" created="Fri, 8 Dec 2017 19:50:35 +0000"  >&lt;p&gt;Scripting Core 2.0.48 and newer is broken and fails on Karaf (update Scripting Core in Sling&apos;s Karaf Features and Launchpad Oak Tar ITs will fail immediately).&lt;br/&gt;
I hadn&apos;t time to dig into it yet, but will probably next week. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; you both did some major changes recently &#8211; any ideas?&lt;/p&gt;</comment>
                            <comment id="16284206" author="karlpauls" created="Fri, 8 Dec 2017 21:08:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, hard to say. We did some changes to the classloading so it certainly is possible that this causes problems in karaf but at the same time, I would hope that is not the case  - what are the problems you are seeing (and by extension, is this related at all to this issue or some new observation)? &lt;/p&gt;</comment>
                            <comment id="16284317" author="olli" created="Fri, 8 Dec 2017 22:13:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, see &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12901312/12901312_grep-errors.log&quot; title=&quot;grep-errors.log attached to SLING-7234&quot;&gt;grep-errors.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &#8211; the errors look similar at least (Karaf 4.2.0.M1 with Felix Framework 5.6.8).&lt;/p&gt;</comment>
                            <comment id="16284348" author="karlpauls" created="Fri, 8 Dec 2017 22:33:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, that looks like a bug. However, I&apos;m not sure that this is related to this bug because that is about a cycle while in your case it is about a none existing config that doesn&apos;t get handled correctly. I think for now (i.e., until the bug is fixed) you have two options namely, a) create a ScriptCache configuration similar to the one in the sling starter &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; (it needs to have at least one value for the additionalExtensions) or b) update to the latest R7 SCR SNAPSHOT (2.1.0-SNAPSHOT) which might fix this (but will not be released for at least another month or two).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, if you call a property method on a config object that returns an array it will return null if there is no config (regardless of whether you set a default of {} or not). Thats one spec oddity of the old DS spec (it will be changed for the new DS). As a consequence, it looks like &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is blowing up because there is no config (or it doesn&apos;t have a value for addtionalExtensions) and hence, additionalExtensions is set to null in &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. &lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/blob/master/src/main/provisioning/scripting.txt#L54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter/blob/master/src/main/provisioning/scripting.txt#L54&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/ScriptCacheImpl.java#L251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/ScriptCacheImpl.java#L251&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/ScriptCacheImpl.java#L219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/ScriptCacheImpl.java#L219&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16284687" author="radu.cotescu" created="Sat, 9 Dec 2017 09:46:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, the line you mentioned &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; has not been changed in two years, however the configuration &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; was updated 6 months ago by Oliver. Why would this blow up now? Or do you think that nobody noticed until this report? We can definitely add a check in the code, though I&apos;m pretty sure that our recent changes from 2.0.50 and 2.0.52 didn&apos;t affect the &lt;tt&gt;ScriptCacheImpl&lt;/tt&gt; component.&lt;/p&gt;</comment>
                            <comment id="16284688" author="radu.cotescu" created="Sat, 9 Dec 2017 09:52:33 +0000"  >&lt;p&gt;BTW, version 2.0.48 was broken due to the wrong OSGi R6 annotations migration, because the &lt;tt&gt;ScriptEngineFactories&lt;/tt&gt; were not bound any more - see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7201&quot; title=&quot;ScriptCache implementation doesn&amp;#39;t correctly flush stale entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7201&quot;&gt;&lt;del&gt;SLING-7201&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16285220" author="olli" created="Sun, 10 Dec 2017 12:21:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, thanks for looking into it. The cycle-issue is indeed unrelated, but there are more issues besides &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7301&quot; title=&quot;NPE in ScriptCacheImpl when no configuration is present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7301&quot;&gt;&lt;del&gt;SLING-7301&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, I was disrupted when migrating to R6 and Carsten took over and checking for null was unfortunately missed.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt;, the versions in Sling&apos;s Karaf Features are more tested and &quot;safe&quot;. Downgrade to 2.0.46 until all issues are fixed.&lt;/p&gt;</comment>
                            <comment id="16287472" author="olli" created="Tue, 12 Dec 2017 11:29:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt;, can you please check with latest 2.0.53-SNAPSHOT and report back? ITs are fine with latest releases and 2.0.53-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="16287542" author="ivoleitao" created="Tue, 12 Dec 2017 12:44:57 +0000"  >&lt;p&gt;Ok Olivier I&apos;m gonna check and report back.&lt;/p&gt;

&lt;p&gt;Tnks&lt;br/&gt;
Regards,&lt;br/&gt;
Ivo Leit&#227;o&lt;/p&gt;</comment>
                            <comment id="16288321" author="karlpauls" created="Tue, 12 Dec 2017 21:48:50 +0000"  >&lt;p&gt;Just to mention it: there seems to be an issue with the scr that may or  may not be related: &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-5618&lt;/a&gt;. I plan to cut a new scr release with the fix soon.&lt;/p&gt;</comment>
                            <comment id="16288398" author="ivoleitao" created="Tue, 12 Dec 2017 22:39:28 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Well I think I have good news (well sort of &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;). The error disappeared from the logs and out of 4 restarts only one produced a nasty stracktrace, however not with this error in particular. Just to give some context I&apos;m working on a product where we have a lot of bundles (500 +) and what I have noticed is that as soon as the amount of bundles increases which necessarily means that we have a higher amount of concurrence, the startup sometimes throws errors from the framework and / or components. I don&apos;t know if this is something related with karaf in particular or more general but I&apos;ve certainly seen this behavior in AEM even in the most recent version (i.e. 6.3). &lt;/p&gt;

&lt;p&gt;Anyway, I&apos;ve uploaded new logs 3 with clean restarts (karaf.clean.x.log) and one where out of luck I&apos;ve captured that behavior (karaf.error.1.log).&lt;/p&gt;

&lt;p&gt;In that one I&apos;m seeing something that could be another bug in the scripting core:&lt;/p&gt;

&lt;p&gt;017-12-12T22:08:52,830 | ERROR | pool-48-thread-1 | core                             | 337 - org.apache.sling.scripting.core - 2.0.53.SNAPSHOT | &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.scripting.core.impl.ScriptCacheImpl(20)&amp;#93;&lt;/span&gt; The deactivate method has thrown an exception&lt;br/&gt;
java.lang.IllegalStateException: Service already unregistered.&lt;br/&gt;
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:140) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.scripting.core.impl.ScriptCacheImpl.deactivate(ScriptCacheImpl.java:277) &lt;span class=&quot;error&quot;&gt;&amp;#91;337:org.apache.sling.scripting.core:2.0.53.SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Which produces latter an error (multiple ones) in scripting.javascript&lt;/p&gt;

&lt;p&gt;2017-12-12T22:08:52,960 | WARN  | EventAdminThread #10 | RhinoJavaScriptEngineFactory     | 338 - org.apache.sling.scripting.javascript - 3.0.2 | addHostObjects: Cannot prepare host object class org.apache.sling.scripting.javascript.wrapper.ScriptableResource&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory.addHostObjects(RhinoJavaScriptEngineFactory.java:296) &lt;span class=&quot;error&quot;&gt;&amp;#91;338:org.apache.sling.scripting.javascript:3.0.2&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory.getRootScope(RhinoJavaScriptEngineFactory.java:176) &lt;span class=&quot;error&quot;&gt;&amp;#91;338:org.apache.sling.scripting.javascript:3.0.2&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory.getScriptEngine(RhinoJavaScriptEngineFactory.java:128) &lt;span class=&quot;error&quot;&gt;&amp;#91;338:org.apache.sling.scripting.javascript:3.0.2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also another thing of notice but I think this one is less serious, there&apos;s an unclosed resource resolver on i18n (JcrResourceBundleProvider). I&apos;ve seen this one a lot of times on other contexts.&lt;/p&gt;

&lt;p&gt;2017-12-12T22:08:53,487 | INFO  | Apache Sling Resource Resolver Finalizer Thread | CommonResourceResolverFactoryImpl | 335 - org.apache.sling.resourceresolver - 1.5.32 | Unclosed ResourceResolver was created here: &lt;br/&gt;
java.lang.Exception: Opening Stacktrace&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl$ResolverReference.&amp;lt;init&amp;gt;(CommonResourceResolverFactoryImpl.java:521) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.register(CommonResourceResolverFactoryImpl.java:218) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:101) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:94) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolverInternal(CommonResourceResolverFactoryImpl.java:263) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getServiceResourceResolver(CommonResourceResolverFactoryImpl.java:396) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.getResourceTypeResourceResolver(ResourceResolverControl.java:704) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.getParentResourceType(ResourceResolverControl.java:728) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.getParentResourceType(ResourceResolverImpl.java:1219) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.isResourceType(ResourceResolverImpl.java:1242) &lt;span class=&quot;error&quot;&gt;&amp;#91;335:org.apache.sling.resourceresolver:1.5.32&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.api.resource.AbstractResource.isResourceType(AbstractResource.java:121) &lt;span class=&quot;error&quot;&gt;&amp;#91;285:org.apache.sling.api:2.16.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.isDictionaryResource(JcrResourceBundleProvider.java:268) &lt;span class=&quot;error&quot;&gt;&amp;#91;310:org.apache.sling.i18n:2.5.10&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Anyway, the error that I was reporting does not appear anymore.&lt;/p&gt;

&lt;p&gt;Tnks a lot,&lt;br/&gt;
Regards,&lt;br/&gt;
Ivo Leit&#227;o&lt;/p&gt;</comment>
                            <comment id="16289478" author="olli" created="Wed, 13 Dec 2017 16:28:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt;, I&apos;m resolving this issue. Please open new issues for the observed errors from above. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12896763" name="clean.log.1" size="654689" author="ivoleitao" created="Wed, 8 Nov 2017 23:17:42 +0000"/>
                            <attachment id="12901312" name="grep-errors.log" size="295206" author="olli" created="Fri, 8 Dec 2017 22:07:46 +0000"/>
                            <attachment id="12901776" name="karaf.clean.1.log" size="534786" author="ivoleitao" created="Tue, 12 Dec 2017 22:40:54 +0000"/>
                            <attachment id="12901775" name="karaf.clean.2.log" size="521605" author="ivoleitao" created="Tue, 12 Dec 2017 22:40:53 +0000"/>
                            <attachment id="12901777" name="karaf.clean.3.log" size="531683" author="ivoleitao" created="Tue, 12 Dec 2017 22:41:17 +0000"/>
                            <attachment id="12901774" name="karaf.errors.log" size="573099" author="ivoleitao" created="Tue, 12 Dec 2017 22:40:54 +0000"/>
                            <attachment id="12896762" name="sample.log.1" size="920534" author="ivoleitao" created="Wed, 8 Nov 2017 23:16:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mkgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7233] MockConfigurationAdmin ignores configuration PID</title>
                <link>https://issues.apache.org/jira/browse/SLING-7233</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The class currently assumes the configuration PID is always the service PID. It ignores a potentially different configuration PID on the component.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13116989">SLING-7233</key>
            <summary>MockConfigurationAdmin ignores configuration PID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Nov 2017 14:18:10 +0000</created>
                <updated>Mon, 11 Dec 2017 12:19:05 +0000</updated>
                            <resolved>Wed, 8 Nov 2017 17:31:58 +0000</resolved>
                                    <version>Testing OSGi Mock 2.3.4</version>
                                    <fixVersion>Testing OSGi Mock 2.3.6</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16244014" author="githubbot" created="Wed, 8 Nov 2017 14:24:07 +0000"  >&lt;p&gt;mreutegg opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7233&quot; title=&quot;MockConfigurationAdmin ignores configuration PID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7233&quot;&gt;&lt;del&gt;SLING-7233&lt;/del&gt;&lt;/a&gt;: MockConfigurationAdmin ignores configuration PID&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16244115" author="sseifert@pro-vision.de" created="Wed, 8 Nov 2017 15:11:05 +0000"  >&lt;p&gt;thanks for the PR!&lt;/p&gt;

&lt;p&gt;i mostly agree with the solution, one question: if no configuration PID is configured you fall back to &lt;tt&gt;clazz.getName()&lt;/tt&gt;.&lt;br/&gt;
is it not more correct to fallback to the component name (which may be different from the class name)?&lt;/p&gt;</comment>
                            <comment id="16244136" author="mreutegg" created="Wed, 8 Nov 2017 15:23:41 +0000"  >&lt;p&gt;Agreed. See updated PR.&lt;/p&gt;</comment>
                            <comment id="16244376" author="githubbot" created="Wed, 8 Nov 2017 17:30:24 +0000"  >&lt;p&gt;stefanseifert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7233&quot; title=&quot;MockConfigurationAdmin ignores configuration PID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7233&quot;&gt;&lt;del&gt;SLING-7233&lt;/del&gt;&lt;/a&gt;: MockConfigurationAdmin ignores configuration PID&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/testing/mock/osgi/MapMergeUtil.java b/src/main/java/org/apache/sling/testing/mock/osgi/MapMergeUtil.java&lt;br/&gt;
index d690752..d2f71d5 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/testing/mock/osgi/MapMergeUtil.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/testing/mock/osgi/MapMergeUtil.java&lt;br/&gt;
@@ -78,14 +78,15 @@ private MapMergeUtil() {&lt;/p&gt;

&lt;p&gt;                 // merge with configuration from config admin&lt;br/&gt;
                 if (configAdmin != null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Object pid = metadata.getPID();&lt;/li&gt;
	&lt;li&gt;if (pid != null) {&lt;/li&gt;
	&lt;li&gt;try 
{
-                            Configuration config = configAdmin.getConfiguration(pid.toString());
-                            mergedProperties.putAll(toMap(config.getProperties()));
-                        }&lt;/li&gt;
	&lt;li&gt;catch (IOException ex) {&lt;/li&gt;
	&lt;li&gt;throw new RuntimeException(&quot;Unable to read config for pid &quot; + pid, ex);&lt;br/&gt;
+                    for (String pid : metadata.getConfigurationPID()) {&lt;br/&gt;
+                        if (pid != null) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                            try {
+                                Configuration config = configAdmin.getConfiguration(pid);
+                                mergedProperties.putAll(toMap(config.getProperties()));
+                            }+                            catch (IOException ex) {
+                                throw new RuntimeException(&quot;Unable to read config for pid &quot; + pid, ex);
+                            }                         }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;                     }&lt;br/&gt;
                 }&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/testing/mock/osgi/OsgiMetadataUtil.java b/src/main/java/org/apache/sling/testing/mock/osgi/OsgiMetadataUtil.java&lt;br/&gt;
index a4c5a4b..1fca7a5 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/main/java/org/apache/sling/testing/mock/osgi/OsgiMetadataUtil.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/testing/mock/osgi/OsgiMetadataUtil.java&lt;br/&gt;
@@ -263,7 +263,20 @@ private static String getComponentName(Class clazz, Document metadata) {&lt;br/&gt;
         if (nodes != null &amp;amp;&amp;amp; nodes.getLength() &amp;gt; 0) 
{
             return getAttributeValue(nodes.item(0), &quot;name&quot;);
         }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;return null;&lt;br/&gt;
+        return clazz.getName();&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private static String[] getConfigurationPID(Class clazz, Document metadata) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        String value = null;+        String query = getComponentXPathQuery(clazz);+        NodeList nodes = queryNodes(metadata, query);+        if (nodes != null &amp;amp;&amp;amp; nodes.getLength() &amp;gt; 0) {
+            value = getAttributeValue(nodes.item(0), &quot;configuration-pid&quot;);
+        }+        if (value == null) {
+            value = getComponentName(clazz, metadata);
+        }+        return StringUtils.split(value);     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private static Set&amp;lt;String&amp;gt; getServiceInterfaces(Class clazz, Document metadata) {&lt;br/&gt;
@@ -377,6 +390,7 @@ private static String getAttributeValue(Node node, String attributeName) {&lt;/p&gt;

&lt;p&gt;         private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
         private final String name;&lt;br/&gt;
+        private final String[] configurationPID;&lt;br/&gt;
         private final Set&amp;lt;String&amp;gt; serviceInterfaces;&lt;br/&gt;
         private final Map&amp;lt;String, Object&amp;gt; properties;&lt;br/&gt;
         private final List&amp;lt;Reference&amp;gt; references;&lt;br/&gt;
@@ -387,6 +401,7 @@ private static String getAttributeValue(Node node, String attributeName) {&lt;br/&gt;
         private OsgiMetadata(Class&amp;lt;?&amp;gt; clazz, Document metadataDocument) {&lt;br/&gt;
             this.clazz = clazz;&lt;br/&gt;
             this.name = OsgiMetadataUtil.getComponentName(clazz, metadataDocument);&lt;br/&gt;
+            this.configurationPID = OsgiMetadataUtil.getConfigurationPID(clazz, metadataDocument);&lt;br/&gt;
             this.serviceInterfaces = OsgiMetadataUtil.getServiceInterfaces(clazz, metadataDocument);&lt;br/&gt;
             this.properties = OsgiMetadataUtil.getProperties(clazz, metadataDocument);&lt;br/&gt;
             this.references = OsgiMetadataUtil.getReferences(clazz, metadataDocument);&lt;br/&gt;
@@ -398,6 +413,7 @@ private OsgiMetadata(Class&amp;lt;?&amp;gt; clazz, Document metadataDocument) {&lt;br/&gt;
         private OsgiMetadata() {&lt;br/&gt;
             this.clazz = null;&lt;br/&gt;
             this.name = null;&lt;br/&gt;
+            this.configurationPID = null;&lt;br/&gt;
             this.serviceInterfaces = null;&lt;br/&gt;
             this.properties = null;&lt;br/&gt;
             this.references = null;&lt;br/&gt;
@@ -422,6 +438,10 @@ public String getPID() &lt;/p&gt;
{
             return StringUtils.defaultString(pid, name);
         }

&lt;p&gt;+        public String[] getConfigurationPID() &lt;/p&gt;
{
+            return configurationPID;
+        }
&lt;p&gt;+&lt;br/&gt;
         public Set&amp;lt;String&amp;gt; getServiceInterfaces() &lt;/p&gt;
{
             return serviceInterfaces;
         }
&lt;p&gt;diff --git a/src/test/java/org/apache/sling/testing/mock/osgi/MockConfigurationAdminTest.java b/src/test/java/org/apache/sling/testing/mock/osgi/MockConfigurationAdminTest.java&lt;br/&gt;
index 857ebb7..187efbd 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/testing/mock/osgi/MockConfigurationAdminTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/testing/mock/osgi/MockConfigurationAdminTest.java&lt;br/&gt;
@@ -69,4 +69,39 @@ public void testGetConfigurationString() throws IOException &lt;/p&gt;
{
         assertEquals(&quot;org.apache.sling.testing.mock.osgi.OsgiMetadataUtilTest$ServiceWithMetadata&quot;, reference.getProperty(Constants.SERVICE_PID));
     }

&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testConfigurationPID() throws IOException &lt;/p&gt;
{
+        MockOsgi.setConfigForPid(context.bundleContext(), ServiceWithConfigurationPID.class.getSimpleName(),
+                &quot;prop1&quot;, 1);
+
+        context.registerInjectActivateService(new ServiceWithConfigurationPID(), ImmutableMap.&amp;lt;String, Object&amp;gt;builder()
+                .put(&quot;prop2&quot;, 2)
+                .build());
+
+        ServiceReference reference = context.bundleContext().getServiceReference(Comparable.class.getName());
+
+        assertEquals(1, reference.getProperty(&quot;prop1&quot;));
+        assertEquals(2, reference.getProperty(&quot;prop2&quot;));
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testMultipleConfigurationPID() throws IOException &lt;/p&gt;
{
+        MockOsgi.setConfigForPid(context.bundleContext(), &quot;Configuration1&quot;,
+                &quot;prop1&quot;, 1);
+        MockOsgi.setConfigForPid(context.bundleContext(), &quot;Configuration2&quot;,
+                &quot;prop1&quot;, 2);
+
+        context.registerInjectActivateService(new ServiceWithMultipleConfigurationPID(), ImmutableMap.&amp;lt;String, Object&amp;gt;builder()
+                .put(&quot;prop2&quot;, 2)
+                .build());
+
+        ServiceReference reference = context.bundleContext().getServiceReference(Comparable.class.getName());
+
+        assertEquals(2, reference.getProperty(&quot;prop1&quot;));
+        assertEquals(2, reference.getProperty(&quot;prop2&quot;));
+    }
&lt;p&gt;+&lt;br/&gt;
+    static class ServiceWithConfigurationPID {}&lt;br/&gt;
+&lt;br/&gt;
+    static class ServiceWithMultipleConfigurationPID {}&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/src/test/resources/OSGI-INF/serviceComponents.xml b/src/test/resources/OSGI-INF/serviceComponents.xml&lt;br/&gt;
index f173b6b..db1c94a 100644&lt;br/&gt;
&amp;#8212; a/src/test/resources/OSGI-INF/serviceComponents.xml&lt;br/&gt;
+++ b/src/test/resources/OSGI-INF/serviceComponents.xml&lt;br/&gt;
@@ -18,10 +18,10 @@&lt;br/&gt;
   under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
 &amp;lt;!-- This file follows the old SCR convention using a fixed name &quot;serviceComponents.xml&quot; --&amp;gt;&lt;br/&gt;
-&amp;lt;components xmlns:scr=&quot;http://www.osgi.org/xmlns/scr/v1.1.0&quot;&amp;gt;&lt;br/&gt;
+&amp;lt;components xmlns:scr=&quot;http://www.osgi.org/xmlns/scr/v1.3.0&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;scr:component name=&quot;org.apache.sling.testing.mock.osgi.OsgiMetadataUtilTest$ServiceWithMetadata&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;implementation class=&quot;org.apache.sling.testing.mock.osgi.OsgiMetadataUtilTest$ServiceWithMetadata&quot;/&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;service servicefactory=&quot;false&quot;&amp;gt;&lt;br/&gt;
+    &amp;lt;service&amp;gt;&lt;br/&gt;
       &amp;lt;provide interface=&quot;org.apache.sling.models.spi.Injector&quot;/&amp;gt;&lt;br/&gt;
       &amp;lt;provide interface=&quot;org.apache.sling.models.spi.injectorspecific.InjectAnnotationProcessorFactory&quot;/&amp;gt;&lt;br/&gt;
       &amp;lt;provide interface=&quot;java.lang.Comparable&quot;/&amp;gt;&lt;br/&gt;
@@ -33,4 +33,18 @@&lt;br/&gt;
        org.apache.sling.api.resource.ResourceResolver&lt;br/&gt;
     &amp;lt;/property&amp;gt;&lt;br/&gt;
   &amp;lt;/scr:component&amp;gt;&lt;br/&gt;
+  &amp;lt;scr:component name=&quot;org.apache.sling.testing.mock.osgi.MockConfigurationAdminTest$ServiceWithConfigurationPID&quot;&lt;br/&gt;
+                 configuration-pid=&quot;ServiceWithConfigurationPID&quot;&amp;gt;&lt;br/&gt;
+    &amp;lt;implementation class=&quot;org.apache.sling.testing.mock.osgi.MockConfigurationAdminTest$ServiceWithConfigurationPID&quot;/&amp;gt;&lt;br/&gt;
+    &amp;lt;service&amp;gt;&lt;br/&gt;
+      &amp;lt;provide interface=&quot;java.lang.Comparable&quot;/&amp;gt;&lt;br/&gt;
+    &amp;lt;/service&amp;gt;&lt;br/&gt;
+  &amp;lt;/scr:component&amp;gt;&lt;br/&gt;
+  &amp;lt;scr:component name=&quot;org.apache.sling.testing.mock.osgi.MockConfigurationAdminTest$ServiceWithMultipleConfigurationPID&quot;&lt;br/&gt;
+                 configuration-pid=&quot;Configuration1 Configuration2&quot;&amp;gt;&lt;br/&gt;
+    &amp;lt;implementation class=&quot;org.apache.sling.testing.mock.osgi.MockConfigurationAdminTest$ServiceWithMultipleConfigurationPID&quot;/&amp;gt;&lt;br/&gt;
+    &amp;lt;service&amp;gt;&lt;br/&gt;
+      &amp;lt;provide interface=&quot;java.lang.Comparable&quot;/&amp;gt;&lt;br/&gt;
+    &amp;lt;/service&amp;gt;&lt;br/&gt;
+  &amp;lt;/scr:component&amp;gt;&lt;br/&gt;
 &amp;lt;/components&amp;gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16244378" author="sseifert@pro-vision.de" created="Wed, 8 Nov 2017 17:31:58 +0000"  >&lt;p&gt;thanks - its merged&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13116962">OAK-6917</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mjn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7229] DistributionAgentServlet throws NPE upon test action</title>
                <link>https://issues.apache.org/jira/browse/SLING-7229</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since the move to Johnzon JSON library, the DistributionAgentServlet throws the following exception upon TEST action.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: value must not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
at org.apache.johnzon.core.JsonStringImpl.&amp;lt;init&amp;gt;(JsonStringImpl.java:32)
at org.apache.johnzon.core.JsonObjectBuilderImpl.add(JsonObjectBuilderImpl.java:43)
at org.apache.sling.distribution.servlet.ServletJsonUtils.writeJson(ServletJsonUtils.java:50)
at org.apache.sling.distribution.servlet.DistributionAgentServlet.doPost(DistributionAgentServlet.java:64)
at org.apache.sling.api.servlets.SlingAllMethodsServlet.mayService(SlingAllMethodsServlet.java:149)
at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:346)
at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:378)
at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:138)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.WCMComponentFilter.filterRootInclude(WCMComponentFilter.java:375)
at com.day.cq.wcm.core.impl.WCMComponentFilter.doFilter(WCMComponentFilter.java:190)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:71)
at com.day.cq.dam.core.impl.assetlinkshare.AdhocAssetShareAuthHandler.doFilter(AdhocAssetShareAuthHandler.java:436)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.dam.core.impl.servlet.ActivityRecordHandler.doFilter(ActivityRecordHandler.java:154)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.warp.TimeWarpFilter.doFilter(TimeWarpFilter.java:109)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.cq.social.ugcbase.security.impl.SaferSlingPostServlet.doFilter(SaferSlingPostServlet.java:126)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
at com.adobe.granite.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.impl.servlet.ApiResourceFilter.doFilter(ApiResourceFilter.java:70)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.granite.requests.logging.impl.RequestLoggerImpl.doFilter(RequestLoggerImpl.java:113)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.granite.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.assets.impl.AssetContentDispositionFilter.doFilter(AssetContentDispositionFilter.java:96)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.granite.csrf.impl.CSRFFilter.doFilter(CSRFFilter.java:217)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.security.impl.ContentDispositionFilter.doFilter(ContentDispositionFilter.java:180)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.AuthoringUIModeServiceImpl.doFilter(AuthoringUIModeServiceImpl.java:367)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.mobile.core.impl.redirect.RedirectFilter.doFilter(RedirectFilter.java:248)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.hero.belkin.dam.core.filters.LoggingFilter.doFilter(LoggingFilter.java:50)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.cq.social.commons.cors.CORSAuthenticationFilter.doFilter(CORSAuthenticationFilter.java:91)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.foundation.forms.FormsHandlingServletHelper.handleFilter(FormsHandlingServletHelper.java:221)
at com.day.cq.wcm.foundation.forms.impl.FormsHandlingServlet.doFilter(FormsHandlingServlet.java:138)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.granite.optout.impl.OptOutFilter.doFilter(OptOutFilter.java:76)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.WCMRequestFilter.doFilter(WCMRequestFilter.java:90)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.cq.history.impl.HistoryRequestFilter.doFilter(HistoryRequestFilter.java:122)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.cq.mcm.campaign.servlets.CampaignCopyTracker.doFilter(CampaignCopyTracker.java:100)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.rewriter.impl.RewriterFilter.doFilter(RewriterFilter.java:83)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.adobe.granite.httpcache.impl.InnerCacheFilter.doFilter(InnerCacheFilter.java:81)
at com.adobe.granite.httpcache.impl.InnerCacheFilter.doFilter(InnerCacheFilter.java:60)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
at com.adobe.granite.resourceresolverhelper.impl.ResourceResolverHelperImpl.doFilter(ResourceResolverHelperImpl.java:83)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:219)
at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
at com.adobe.granite.license.impl.LicenseCheckFilter.doFilter(LicenseCheckFilter.java:308)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.sling.security.impl.ReferrerFilter.doFilter(ReferrerFilter.java:295)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.sling.featureflags.impl.FeatureManager.doFilter(FeatureManager.java:116)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:587)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
at org.eclipse.jetty.server.Server.handle(Server.java:499)
at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)
at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13115872">SLING-7229</key>
            <summary>DistributionAgentServlet throws NPE upon test action</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Nov 2017 09:54:46 +0000</created>
                <updated>Fri, 3 Nov 2017 13:53:45 +0000</updated>
                            <resolved>Fri, 3 Nov 2017 13:53:45 +0000</resolved>
                                    <version>Content Distribution Core 0.2.8</version>
                                    <fixVersion>Content Distribution Core 0.2.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16237618" author="marett" created="Fri, 3 Nov 2017 13:53:36 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/57abab27db7adfc3bcd06083e090c83f8e82e10b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/57abab27db7adfc3bcd06083e090c83f8e82e10b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mcrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7228] JsonRendererServlet should not close but flush the response when done.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7228</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Looks like I added a close to the JsonRendererServlet.doGet instead of a flush in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6683&quot; title=&quot;Replace commons.json usage in org.apache.sling.servlets.get&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6683&quot;&gt;&lt;del&gt;SLING-6683&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13115668">SLING-7228</key>
            <summary>JsonRendererServlet should not close but flush the response when done.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Nov 2017 16:38:18 +0000</created>
                <updated>Thu, 9 Nov 2017 14:36:30 +0000</updated>
                            <resolved>Thu, 2 Nov 2017 23:08:07 +0000</resolved>
                                    <version>Servlets Get 2.1.26</version>
                                    <fixVersion>Servlets Get 2.1.30</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16236783" author="karlpauls" created="Thu, 2 Nov 2017 23:08:07 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/commit/3fbf470683a9a53f2151e94f86e5ca4121b43bea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/commit/3fbf470683a9a53f2151e94f86e5ca4121b43bea&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mbi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7223] Spikes in RRD after restart</title>
                <link>https://issues.apache.org/jira/browse/SLING-7223</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Running the reporter for some time and then restarting the process shows spikes in the collected data. These are caused by counter gauges that are reset to zero after a restart. RRD interprets them as 32bit or 64bit integer overflows and calculates incorrect values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13112990">SLING-7223</key>
            <summary>Spikes in RRD after restart</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Oct 2017 10:13:09 +0000</created>
                <updated>Fri, 1 Dec 2017 06:33:47 +0000</updated>
                            <resolved>Wed, 1 Nov 2017 04:51:15 +0000</resolved>
                                    <version>Commons Metrics RRD4J 1.0.0</version>
                                    <fixVersion>Commons Metrics RRD4J 1.0.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16224974" author="mreutegg" created="Mon, 30 Oct 2017 13:39:14 +0000"  >&lt;p&gt;Attached a patch with proposed changes. Please note, this depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7222&quot; title=&quot;Too frequent samples&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7222&quot;&gt;&lt;del&gt;SLING-7222&lt;/del&gt;&lt;/a&gt; and likely requires some manual conflict resolution when applied on top of those changes.&lt;/p&gt;

&lt;p&gt;Whenever the RRD4JReporter is initialized or closed, a sample with unknown values is inserted. This indicates to rrdtool (and RRD4J) that no overflow occurred.&lt;/p&gt;</comment>
                            <comment id="16226250" author="chetanm" created="Tue, 31 Oct 2017 04:51:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; You can also send PR now with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j&lt;/a&gt;. Let me know if you want to send a PR or I should apply this patch&lt;/p&gt;</comment>
                            <comment id="16226407" author="mreutegg" created="Tue, 31 Oct 2017 07:38:42 +0000"  >&lt;p&gt;I didn&apos;t know Sling is on github now. Can you please take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7222&quot; title=&quot;Too frequent samples&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7222&quot;&gt;&lt;del&gt;SLING-7222&lt;/del&gt;&lt;/a&gt; first and commit the patch there if it looks OK to you? The patch here will require some conflict resolution, which I can do afterwards and then create a PR.&lt;/p&gt;</comment>
                            <comment id="16226943" author="githubbot" created="Tue, 31 Oct 2017 15:02:00 +0000"  >&lt;p&gt;mreutegg opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7223&quot; title=&quot;Spikes in RRD after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7223&quot;&gt;&lt;del&gt;SLING-7223&lt;/del&gt;&lt;/a&gt;: Spikes in RRD after restart&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16233654" author="githubbot" created="Wed, 1 Nov 2017 04:49:24 +0000"  >&lt;p&gt;chetanmeh commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7223&quot; title=&quot;Spikes in RRD after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7223&quot;&gt;&lt;del&gt;SLING-7223&lt;/del&gt;&lt;/a&gt;: Spikes in RRD after restart&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1#issuecomment-340977441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1#issuecomment-340977441&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Merged the PR via cherry pick d6d22d0f6f431e2f9c2bf465833cf3831095636d&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16233655" author="githubbot" created="Wed, 1 Nov 2017 04:49:32 +0000"  >&lt;p&gt;chetanmeh closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7223&quot; title=&quot;Spikes in RRD after restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7223&quot;&gt;&lt;del&gt;SLING-7223&lt;/del&gt;&lt;/a&gt;: Spikes in RRD after restart&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-metrics-rrd4j/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/commons/metrics/rrd4j/impl/RRD4JReporter.java b/src/main/java/org/apache/sling/commons/metrics/rrd4j/impl/RRD4JReporter.java&lt;br/&gt;
index 40dbd7c..5cb9418 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/commons/metrics/rrd4j/impl/RRD4JReporter.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/commons/metrics/rrd4j/impl/RRD4JReporter.java&lt;br/&gt;
@@ -18,6 +18,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.commons.metrics.rrd4j.impl;&lt;/p&gt;

&lt;p&gt;+import com.codahale.metrics.Clock;&lt;br/&gt;
 import com.codahale.metrics.Counter;&lt;br/&gt;
 import com.codahale.metrics.Gauge;&lt;br/&gt;
 import com.codahale.metrics.Histogram;&lt;br/&gt;
@@ -62,6 +63,7 @@&lt;/p&gt;

&lt;p&gt;     private final Map&amp;lt;String, Integer&amp;gt; dictionary = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
     private final RrdDb rrdDB;&lt;br/&gt;
+    private final Clock clock;&lt;br/&gt;
     private long lastSampleTime;&lt;/p&gt;

&lt;p&gt;     static Builder forRegistry(MetricRegistry metricRegistry) {&lt;br/&gt;
@@ -70,6 +72,7 @@ static Builder forRegistry(MetricRegistry metricRegistry) {&lt;/p&gt;

&lt;p&gt;     static class Builder {&lt;br/&gt;
         private MetricRegistry metricRegistry;&lt;br/&gt;
+        private Clock clock = Clock.defaultClock();&lt;br/&gt;
         private TimeUnit ratesUnit = TimeUnit.SECONDS;&lt;br/&gt;
         private TimeUnit durationUnit = TimeUnit.MICROSECONDS;&lt;br/&gt;
         private File path = new File(&quot;.&quot;);&lt;br/&gt;
@@ -144,6 +147,11 @@ Builder withStep(int step) &lt;/p&gt;
{
             return this;
         }

&lt;p&gt;+        Builder withClock(Clock clock) &lt;/p&gt;
{
+            this.clock = clock;
+            return this;
+        }
&lt;p&gt;+&lt;br/&gt;
         Builder convertRatesTo(TimeUnit ratesUnit) {&lt;br/&gt;
             this.ratesUnit = ratesUnit;&lt;br/&gt;
             return this;&lt;br/&gt;
@@ -159,7 +167,7 @@ RRD4JReporter build() throws IOException &lt;/p&gt;
{
                 return null;
             }
&lt;p&gt;             return new RRD4JReporter(metricRegistry, &quot;RRD4JReporter&quot;, MetricFilter.ALL, ratesUnit, durationUnit,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;dictionary, createDef());&lt;br/&gt;
+                    dictionary, createDef(), clock);&lt;br/&gt;
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         private String checkDataSource(String ds) throws IllegalArgumentException {&lt;br/&gt;
@@ -190,16 +198,23 @@ private RrdDef createDef() {&lt;br/&gt;
                   TimeUnit rateUnit,&lt;br/&gt;
                   TimeUnit durationUnit,&lt;br/&gt;
                   Map&amp;lt;String, Integer&amp;gt; dictionary,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;RrdDef rrdDef) throws IOException {&lt;br/&gt;
+                  RrdDef rrdDef,&lt;br/&gt;
+                  Clock clock) throws IOException 
{
         super(registry, name, filter, rateUnit, durationUnit);
         this.dictionary.putAll(dictionary);
         this.rrdDB = createDB(rrdDef);
+        this.clock = clock;
         storeDictionary(rrdDef.getPath() + PROPERTIES_SUFFIX);
+        writeUnknownSample();
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public void close() {&lt;br/&gt;
         try {&lt;br/&gt;
+            // write an unknown sample before closing the DB&lt;br/&gt;
+            if (!rrdDB.isClosed()) &lt;/p&gt;
{
+                writeUnknownSample();
+            }
&lt;p&gt;             rrdDB.close();&lt;br/&gt;
         } catch (IOException e) {&lt;br/&gt;
             LOGGER.warn(&quot;Closing RRD failed&quot;, e);&lt;br/&gt;
@@ -213,7 +228,7 @@ public void report(SortedMap&amp;lt;String, Gauge&amp;gt; gauges,&lt;br/&gt;
                        SortedMap&amp;lt;String, Histogram&amp;gt; histograms,&lt;br/&gt;
                        SortedMap&amp;lt;String, Meter&amp;gt; meters,&lt;br/&gt;
                        SortedMap&amp;lt;String, Timer&amp;gt; timers) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;long sampleTime = System.currentTimeMillis() / 1000;&lt;br/&gt;
+        long sampleTime = clock.getTime() / 1000;&lt;br/&gt;
         if (sampleTime &amp;lt;= lastSampleTime) {&lt;br/&gt;
             // sample at most once a second&lt;br/&gt;
             return;&lt;br/&gt;
@@ -341,6 +356,12 @@ private void storeDictionary(String path) throws IOException {&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    private void writeUnknownSample() throws IOException &lt;/p&gt;
{
+        long updateTime = rrdDB.getLastUpdateTime() + 1;
+        rrdDB.createSample(updateTime).update();
+        lastSampleTime = updateTime;
+    }
&lt;p&gt;+&lt;br/&gt;
     private static RrdDb createDB(RrdDef definition) throws IOException {&lt;br/&gt;
         File dbFile = new File(definition.getPath());&lt;br/&gt;
         if (!dbFile.getParentFile().exists()) {&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/commons/metrics/rrd4j/impl/RestartTest.java b/src/test/java/org/apache/sling/commons/metrics/rrd4j/impl/RestartTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..7dd4c88&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/commons/metrics/rrd4j/impl/RestartTest.java&lt;br/&gt;
@@ -0,0 +1,142 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.commons.metrics.rrd4j.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.util.concurrent.TimeUnit;&lt;br/&gt;
+import java.util.concurrent.atomic.AtomicLong;&lt;br/&gt;
+&lt;br/&gt;
+import com.codahale.metrics.Clock;&lt;br/&gt;
+import com.codahale.metrics.Counter;&lt;br/&gt;
+import com.codahale.metrics.MetricRegistry;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.After;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.rrd4j.core.RrdDb;&lt;br/&gt;
+&lt;br/&gt;
+import static java.util.concurrent.TimeUnit.SECONDS;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+public class RestartTest {&lt;br/&gt;
+&lt;br/&gt;
+    private static final File RRD = new File(new File(&quot;target&quot;, &quot;metrics&quot;), &quot;metrics.rrd&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    private MetricRegistry registry = new MetricRegistry();&lt;br/&gt;
+    private RRD4JReporter reporter;&lt;br/&gt;
+    private Counter counter = new Counter();&lt;br/&gt;
+    private TestClock clock = new TestClock();&lt;br/&gt;
+&lt;br/&gt;
+    @Before&lt;br/&gt;
+    public void before() throws IOException &lt;/p&gt;
{
+        RRD.delete();
+        clock.waitUntil(System.currentTimeMillis());
+        registry.register(&quot;myCounter&quot;, counter);
+        reporter = createReporter();
+    }
&lt;p&gt;+&lt;br/&gt;
+    @After&lt;br/&gt;
+    public void after() &lt;/p&gt;
{
+        reporter.close();
+        RRD.delete();
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void restart() throws Exception &lt;/p&gt;
{
+        restart(10);
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void restartNoDelay() throws Exception &lt;/p&gt;
{
+        restart(0);
+    }
&lt;p&gt;+&lt;br/&gt;
+    private void restart(int delaySecs) throws Exception {&lt;br/&gt;
+        long start = clock.getTime() / 1000;&lt;br/&gt;
+        // report some samples&lt;br/&gt;
+        for (int i = 0; i &amp;lt; 3; i++) &lt;/p&gt;
{
+            counter.inc();
+            wait(1, SECONDS);
+            reporter.report();
+        }&lt;br/&gt;
+        // shut down&lt;br/&gt;
+        reporter.close();&lt;br/&gt;
+        // set count to zero&lt;br/&gt;
+        counter.dec(counter.getCount());&lt;br/&gt;
+        // restart after some delay&lt;br/&gt;
+        wait(delaySecs, SECONDS);&lt;br/&gt;
+        reporter = createReporter();&lt;br/&gt;
+        // report some samples&lt;br/&gt;
+        for (int i = 0; i &amp;lt; 3; i++) {+            counter.inc();+            wait(1, SECONDS);+            reporter.report();+        }
&lt;p&gt;+        // shut down&lt;br/&gt;
+        reporter.close();&lt;br/&gt;
+        long end = clock.getTime() / 1000;&lt;br/&gt;
+        // check DB&lt;br/&gt;
+        RrdDb db = new RrdDb(RRD.getPath());&lt;br/&gt;
+        try {&lt;br/&gt;
+            double[] values = db.createFetchRequest(&lt;br/&gt;
+                    db.getArchive(0).getConsolFun(), start, end)&lt;br/&gt;
+                        .fetchData().getValues(&quot;0&quot;);&lt;br/&gt;
+            for (double v : values) {&lt;br/&gt;
+                if (Double.isNaN(v)) &lt;/p&gt;
{
+                    continue;
+                }
&lt;p&gt;+                long longValue = (long) v;&lt;br/&gt;
+                assertTrue(longValue + &quot; &amp;gt; 1&quot;, longValue &amp;lt;= 1L);&lt;br/&gt;
+            }&lt;br/&gt;
+        } finally &lt;/p&gt;
{
+            db.close();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void wait(long duration, TimeUnit unit) &lt;/p&gt;
{
+        clock.waitUntil(clock.getTime() + unit.toMillis(duration));
+    }
&lt;p&gt;+&lt;br/&gt;
+    private RRD4JReporter createReporter() throws IOException {&lt;br/&gt;
+        return RRD4JReporter.forRegistry(registry)&lt;br/&gt;
+                .withPath(RRD)&lt;br/&gt;
+                .withArchives(new String[]&lt;/p&gt;
{&quot;RRA:AVERAGE:0.5:1:60&quot;}
&lt;p&gt;)&lt;br/&gt;
+                .withDatasources(new String[]&lt;/p&gt;
{&quot;DS:myCounter:COUNTER:300:0:U&quot;}
&lt;p&gt;)&lt;br/&gt;
+                .withStep(1)&lt;br/&gt;
+                .withClock(clock)&lt;br/&gt;
+                .build();&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private static class TestClock extends Clock.UserTimeClock {&lt;br/&gt;
+&lt;br/&gt;
+        private AtomicLong time = new AtomicLong();&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public long getTime() &lt;/p&gt;
{
+            return time.get();
+        }
&lt;p&gt;+&lt;br/&gt;
+        void waitUntil(long time) {&lt;br/&gt;
+            while (this.time.get() &amp;lt; time) &lt;/p&gt;
{
+                this.time.compareAndSet(this.time.get(), time);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+    }&lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16233656" author="chetanm" created="Wed, 1 Nov 2017 04:50:57 +0000"  >&lt;p&gt;Done with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-commons-metrics-rrd4j.git;a=commitdiff;h=d6d22d0f6f431e2f9c2bf465833cf3831095636d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13112976">SLING-7222</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12894740" name="SLING-7223.patch" size="8686" author="mreutegg" created="Mon, 30 Oct 2017 13:28:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3luzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7222] Too frequent samples</title>
                <link>https://issues.apache.org/jira/browse/SLING-7222</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The metrics reporter sometimes logs error messages telling samples are reported too frequently (more than once a second):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;29.10.2017 19:01:25.384 *ERROR* [metrics-RRD4JReporter-1-thread-1] com.codahale.metrics.ScheduledReporter RuntimeException thrown from RRD4JReporter#report. Exception was suppressed.
java.lang.IllegalArgumentException: Bad sample time: 1509300085. Last update time was 1509300085, at least one second step is required
        at org.rrd4j.core.RrdDb.store(RrdDb.java:517)
        at org.rrd4j.core.Sample.update(Sample.java:194)
        at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.report(RRD4JReporter.java:239)
        at com.codahale.metrics.ScheduledReporter.report(ScheduledReporter.java:162)
        at com.codahale.metrics.ScheduledReporter$1.run(ScheduledReporter.java:117)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13112976">SLING-7222</key>
            <summary>Too frequent samples</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Oct 2017 09:13:50 +0000</created>
                <updated>Fri, 1 Dec 2017 06:33:47 +0000</updated>
                            <resolved>Tue, 31 Oct 2017 14:34:19 +0000</resolved>
                                    <version>Commons Metrics RRD4J 1.0.0</version>
                                    <fixVersion>Commons Metrics RRD4J 1.0.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16224580" author="mreutegg" created="Mon, 30 Oct 2017 09:59:06 +0000"  >&lt;p&gt;Attached proposed changes with test and fix.&lt;/p&gt;</comment>
                            <comment id="16226884" author="chetanm" created="Tue, 31 Oct 2017 14:33:41 +0000"  >&lt;p&gt;Applied patch with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-commons-metrics-rrd4j.git;a=commitdiff;h=a07550a196736d25f0593b5e5b2432db8bd39c1b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13112990">SLING-7223</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12894715" name="SLING-7222.patch" size="4769" author="mreutegg" created="Mon, 30 Oct 2017 09:58:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3luwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7218] NPE in org.apache.sling.security.impl.ContentDispositionFilter#activate</title>
                <link>https://issues.apache.org/jira/browse/SLING-7218</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;09.10.2017 07:05:55.216 *ERROR* [FelixStartLevel] org.apache.sling.security [org.apache.sling.security.impl.ContentDispositionFilter(96)] The activate method has thrown an exception (java.lang.NullPointerException)
java.lang.NullPointerException: null
 at java.util.Objects.requireNonNull(Objects.java:203)
 at java.util.Arrays$ArrayList.&amp;lt;init&amp;gt;(Arrays.java:3813)
 at java.util.Arrays.asList(Arrays.java:3800)
09.10.2017 07:05:55.219 *ERROR* [FelixDispatchQueue] org.apache.sling.engine FrameworkEvent ERROR (org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.security.impl.ContentDispositionFilter (96)))
org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.security.impl.ContentDispositionFilter (96))
 at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:380)
 at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
 at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13111922">SLING-7218</key>
            <summary>NPE in org.apache.sling.security.impl.ContentDispositionFilter#activate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Oct 2017 09:51:35 +0000</created>
                <updated>Mon, 20 Nov 2017 12:20:26 +0000</updated>
                            <resolved>Tue, 31 Oct 2017 13:43:06 +0000</resolved>
                                    <version>Security 1.1.4</version>
                                    <fixVersion>Security 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16221908" author="asanso" created="Fri, 27 Oct 2017 08:14:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; this seems has been introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6316&quot; title=&quot;Clarify description of Content-Disposition-Filter configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6316&quot;&gt;&lt;del&gt;SLING-6316&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Before the default value for &lt;tt&gt;contentDispostionExcludedPathsArray&lt;/tt&gt; used to be &lt;tt&gt;&quot;&quot;&lt;/tt&gt; now is &lt;tt&gt;null&lt;/tt&gt;.&lt;br/&gt;
How do you suggest to handle this? Putting back the default to &lt;tt&gt;&quot;&quot;&lt;/tt&gt; or handle the &lt;tt&gt;null&lt;/tt&gt; value?&lt;/p&gt;</comment>
                            <comment id="16226783" author="kwin" created="Tue, 31 Oct 2017 13:29:16 +0000"  >&lt;p&gt;This is correct. According to DS 1.3 an array property which is not set defaults to null (irrespective of the configuration property fields default value which is only evaluated at build time). This is also described in &lt;a href=&quot;https://osgi.org/bugzilla/show_bug.cgi?id=208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/bugzilla/show_bug.cgi?id=208&lt;/a&gt;. I would suggest to accept &lt;tt&gt;null&lt;/tt&gt; here. Even setting the default to the empty string would not entirely prevent the NPE as the defaults are only relevant for the web console (i.e. for the metatype resource). I will come up with a patch for this.&lt;/p&gt;</comment>
                            <comment id="16226807" author="kwin" created="Tue, 31 Oct 2017 13:43:06 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-security/commit/1c8c11c4c6c11d2fb9da0e15e50a8889663e05e8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-security/commit/1c8c11c4c6c11d2fb9da0e15e50a8889663e05e8&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lofb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7217] Filter Pipe should handle property value regexp betters</title>
                <link>https://issues.apache.org/jira/browse/SLING-7217</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;currently filter pipe uses a match for property value regexp, which might be complicated and confusing. It should use a find&lt;/p&gt;</description>
                <environment></environment>
        <key id="13111743">SLING-7217</key>
            <summary>Filter Pipe should handle property value regexp betters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Oct 2017 16:29:49 +0000</created>
                <updated>Tue, 24 Apr 2018 13:29:53 +0000</updated>
                            <resolved>Tue, 24 Oct 2017 16:43:19 +0000</resolved>
                                    <version>Pipes 1.1.0</version>
                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lnc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7209] [Topology] Removal of PropertyProvider at runtime does not trigger change event</title>
                <link>https://issues.apache.org/jira/browse/SLING-7209</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a &lt;em&gt;PropertyProvider&lt;/em&gt; is stopped at runtime, causing topology properties to no longer be available, the &lt;em&gt;ViewStateManagerImpl&lt;/em&gt; is informed about its removal and compares the old and new view in &lt;em&gt;#handleNewViewNonDelayed&lt;/em&gt;, doing a &lt;em&gt;previousView.equals(newView)&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;This ends up in &lt;em&gt;DefaultTopologyView&lt;/em&gt; where known properties are compared with their stored counterparts. A Topology change event is only issued concerning properties if this comparison yields a difference.&lt;/p&gt;

&lt;p&gt;Since the property names of the removed &lt;em&gt;PropertyProvider&lt;/em&gt; are no longer part of known properties, their removal is ignored, causing no topology event to be issued and orphaned properties in the repo.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13110657">SLING-7209</key>
            <summary>[Topology] Removal of PropertyProvider at runtime does not trigger change event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dominique.jaeggi">Dominique J&#228;ggi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Oct 2017 12:38:14 +0000</created>
                <updated>Thu, 26 Sep 2019 12:39:19 +0000</updated>
                                                                            <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16210969" author="egli" created="Thu, 19 Oct 2017 12:50:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dominique.jaeggi&quot; class=&quot;user-hover&quot; rel=&quot;dominique.jaeggi&quot;&gt;dominique.jaeggi&lt;/a&gt;! Regarding involvement of the &lt;em&gt;ViewStateManagerImpl&lt;/em&gt; : isn&apos;t the core problem rather in &lt;a href=&quot;https://github.com/apache/sling/blob/51eaf62cb6ba5aea236f4798bedddb4d44fa9f88/bundles/extensions/discovery/oak/src/main/java/org/apache/sling/discovery/oak/OakDiscoveryService.java#L518&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;OakDiscoveryService&lt;/a&gt; than in ViewStateManagerImpl?&lt;/p&gt;</comment>
                            <comment id="16210975" author="dominique.jaeggi" created="Thu, 19 Oct 2017 12:54:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt;, yes absolutely, namely in &lt;em&gt;doUpdateProperties&lt;/em&gt; - sorry, i confused the files.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lgnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7204] OSGi R6 annotations: default value of an empty array is propagated as null</title>
                <link>https://issues.apache.org/jira/browse/SLING-7204</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m conferting some of the Oak code to use the OSGi R6 annotations. I have a config that declares a String[] property which defaults to empty, along the lines of:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Component(configurationPolicy = ConfigurationPolicy.REQUIRE)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompositeNodeStoreService {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; @&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Configuration {
        
        /**
         * Writes to these read-only paths won&apos;t fail the commit
         */
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] ignoreReadOnlyWrites() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; {};
    }

    @Activate
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void activate(Configuration cfg, ComponentContext context) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, CommitFailedException {
        ignoreReadOnlyWritePaths = cfg.ignoreReadOnlyWrites()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In a unit test this should default to an empty array, but instead it is null. I checked the generated SCR descriptors, and the property is missing. If I add a property to the default value, the property appears in the SCR descriptor. Maybe a behaviour change in newer revisions of SCR?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13110112">SLING-7204</key>
            <summary>OSGi R6 annotations: default value of an empty array is propagated as null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2017 20:14:09 +0000</created>
                <updated>Tue, 31 Jul 2018 11:16:10 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 11:16:10 +0000</resolved>
                                    <version>Testing OSGi Mock 2.3.4</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16209255" author="sseifert@pro-vision.de" created="Wed, 18 Oct 2017 12:36:46 +0000"  >&lt;p&gt;we are using a class from felix to map the data from service properties to osgi annotations:&lt;br/&gt;
&lt;tt&gt;org.apache.felix.scr.impl.inject.Annotations#toObject&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;we&apos;re getting this class from:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.felix&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.felix.scr&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.0.4&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;compile&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so osgi-mock itself is not doing anything for this mapping.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I checked the generated SCR descriptors, and the property is missing. If I add a property to the default value, the property appears in the SCR descriptor. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;not sure what you meant here&lt;/p&gt;</comment>
                            <comment id="16209296" author="karlpauls" created="Wed, 18 Oct 2017 13:07:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, this is correct. As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; points out (indirectly), this is the correct SCR/DS behaviour as mentioned in the spec. IIRC, the next version of the spec (DS 1.4) will change this to an empty array &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; but for now (with DS 1.2) that is what the spec mandates. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://osgi.org/bugzilla/show_bug.cgi?id=208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/bugzilla/show_bug.cgi?id=208&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16209524" author="rombert" created="Wed, 18 Oct 2017 15:25:23 +0000"  >&lt;p&gt;Ah right, so I should be keeping the null check then as the default empty array is not propagated?&lt;/p&gt;</comment>
                            <comment id="16563480" author="sseifert@pro-vision.de" created="Tue, 31 Jul 2018 11:16:10 +0000"  >&lt;p&gt;yes&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ldon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7203] Sling Model Request-Scoped Caching Not Effective Across Script Include Boundaries</title>
                <link>https://issues.apache.org/jira/browse/SLING-7203</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The request-scoped caching added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6785&quot; title=&quot;Add support for scoped lifecycle of sling models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6785&quot;&gt;&lt;del&gt;SLING-6785&lt;/del&gt;&lt;/a&gt; does not work correctly across included boundaries, i.e. if you have a script like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;sly data-sly-resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;first&apos;&lt;/span&gt; @ resourceType=&lt;span class=&quot;code-quote&quot;&gt;&apos;my/resource/type/first&apos;&lt;/span&gt;}&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;sly data-sly-resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;second&apos;&lt;/span&gt; @ resourceType=&lt;span class=&quot;code-quote&quot;&gt;&apos;my/resource/type/second&apos;&lt;/span&gt;}&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and both &lt;tt&gt;first.html&lt;/tt&gt; the request is adapted to some cacheable model object, the adaptation will happen twice, despite the cache attribute on the &lt;tt&gt;@Model&lt;/tt&gt; annotation.&lt;/p&gt;

&lt;p&gt;The reason for this is that each script actually has a unique request object, instantiated by &lt;tt&gt;ScriptHelper&lt;/tt&gt; (see &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/ScriptHelper.java#L100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/ScriptHelper.java#L100&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I don&apos;t know what a good way to fix this is. One option could be to unwrap the &lt;tt&gt;SlingHttpServletRequestWrapper&lt;/tt&gt; in &lt;tt&gt;SlingModelsUseProvider&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; any ideas?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13109989">SLING-7203</key>
            <summary>Sling Model Request-Scoped Caching Not Effective Across Script Include Boundaries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2017 13:56:27 +0000</created>
                <updated>Tue, 17 Oct 2017 14:43:13 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16207721" author="justinedelson" created="Tue, 17 Oct 2017 14:37:54 +0000"  >&lt;p&gt;Thinking about this some more, unwinding the wrapping would probably break the functionality added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7015&quot; title=&quot;Add Utility Method to ModelFactory to help proper model creation from child resources in a request context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7015&quot;&gt;&lt;del&gt;SLING-7015&lt;/del&gt;&lt;/a&gt; (as well as custom implementations doing similar things).&lt;/p&gt;</comment>
                            <comment id="16207730" author="justinedelson" created="Tue, 17 Oct 2017 14:43:13 +0000"  >&lt;p&gt;One thing which could work would be to unwind the request in the &lt;tt&gt;ModelAdapterFactory&lt;/tt&gt; &lt;b&gt;only&lt;/b&gt; for use as the cache key.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lcxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7202] o.a.j.o.j.o.ObservationManagerImpl times out eventually in pax container init</title>
                <link>https://issues.apache.org/jira/browse/SLING-7202</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;pipes IT intermittently fail. When they do, after having compared to when they don&apos;t, look like the core cause is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2017-10-10 22:32:13,092 WARN [FelixStartLevel] o.a.j.o.j.o.ObservationManagerImpl [ObservationManagerImpl.java : 457] Timed out waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; change processor to stop after 1000 milliseconds. Falling back to asynchronous stop on ChangeProcessor [listenerId=10, tracker=&lt;span class=&quot;code-comment&quot;&gt;//*[11111b]@org.apache.sling.jcr.resource.internal.JcrResourceListener, contentSession=session-17, eventCount=org.apache.jackrabbit.oak.stats.SimpleStats@4405759a, eventDuration=org.apache.jackrabbit.oak.stats.SimpleStats@4aa43935, commitRateLimiter=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, running=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;] (listener details: &lt;span class=&quot;code-quote&quot;&gt;&apos;JcrResourceListener [BasicObserverConfiguration [includeExternal=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, paths=PathSet [paths=[Path [path=/]]], excludedPaths=PathSet [paths=[Path [path=/libs/sling/sightly/js], Path [path=/apps/sling/servlet/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/SLING_av... (1907 chars cut), propertyNamesHint=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, changeTypes=[ADDED, REMOVED, CHANGED], listeners=[ResourceChangeListenerInfo [paths=PathSet [paths=[Path [path=/]]], resourceChangeTypes=[ADDED, REMOVED, CHANGED], providerChangeTypes=[PROVIDER_ADDED, PROVIDER_REMOVED], propertyNamesHint=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, valid=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, external=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, listener=org.apache.sling.servlets.resolver.internal.SlingServletResolver@3993ddcd], ResourceChangeListenerInfo [paths=PathSet [paths=[Path [path=/]]], resourceChangeTypes=[ADDED, REMOVED, CHANGED], providerChangeTypes=[PROVIDER_ADDED, PROVIDER_REMOVED], propertyNamesHint=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, valid=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, external=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, listener=org.apache.sling.resourceresolver.impl.mapping.MapEntries@70b4e2df], ResourceChangeListenerInfo [paths=PathSet [paths=[Path [path=/]]], resourceChangeTypes=[ADDED, REMOVED, CHANGED], providerChangeTypes=[PROVIDER_ADDED, PROVIDER_REMOVED], propertyNamesHint=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, valid=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, external=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, listener=org.apache.sling.i18n.impl.JcrResourceBundleProvider@60af913d]]]]&apos;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;after which content loading does not work, resulting in test failing &lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13109904">SLING-7202</key>
            <summary>o.a.j.o.j.o.ObservationManagerImpl times out eventually in pax container init</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2017 07:52:34 +0000</created>
                <updated>Fri, 19 Jan 2018 16:27:44 +0000</updated>
                            <resolved>Fri, 19 Jan 2018 16:27:38 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16207138" author="npeltier" created="Tue, 17 Oct 2017 07:54:23 +0000"  >&lt;p&gt;pax exam logs when test fails &amp;amp; succeed (without any changes)&lt;/p&gt;</comment>
                            <comment id="16327097" author="olli" created="Tue, 16 Jan 2018 13:09:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, I see test failures related to resource events frequently (code similar to yours from &lt;tt&gt;org.apache.sling.jcr.repository.it.CommonTests&lt;/tt&gt;) &#8211; any ideas?&lt;/p&gt;</comment>
                            <comment id="16327114" author="bdelacretaz" created="Tue, 16 Jan 2018 13:29:20 +0000"  >&lt;p&gt;I don&apos;t remember seeing similar failures, but it&apos;s been a long time since I worked on that CommonTests class.&lt;/p&gt;</comment>
                            <comment id="16332355" author="olli" created="Fri, 19 Jan 2018 15:02:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, can you confirm: Not an issue with Testing PaxExam?&lt;/p&gt;</comment>
                            <comment id="16332408" author="npeltier" created="Fri, 19 Jan 2018 15:35:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; yes i do. Not sure how i was generating that message with pipes IT, but i confirm it&apos;s gone now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12892553" name="success-fail-logs.tar" size="1997749" author="npeltier" created="Tue, 17 Oct 2017 07:55:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lcev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7201] ScriptCache implementation doesn&apos;t correctly flush stale entries</title>
                <link>https://issues.apache.org/jira/browse/SLING-7201</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It seems that the changes added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6737&quot; title=&quot;Migrate to OSGi R6 annotations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6737&quot;&gt;&lt;del&gt;SLING-6737&lt;/del&gt;&lt;/a&gt; made the &lt;tt&gt;org.apache.sling.scripting.core.impl.ScriptCacheImpl&lt;/tt&gt; to not register itself correctly as a &lt;tt&gt;org.apache.sling.api.resource.observation.ResourceChangeListener&lt;/tt&gt;, since the &lt;tt&gt;ScriptEngineFactory&lt;/tt&gt; references are not picked up any more by the &lt;tt&gt;bind&lt;/tt&gt; / &lt;tt&gt;unbind&lt;/tt&gt; methods.&lt;/p&gt;

&lt;p&gt;When the &lt;tt&gt;@Reference&lt;/tt&gt; annotation is used in &lt;tt&gt;Component.reference()&lt;/tt&gt; the &lt;tt&gt;bind&lt;/tt&gt; / &lt;tt&gt;unbind&lt;/tt&gt; methods have to be explicitly defined.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13109725">SLING-7201</key>
            <summary>ScriptCache implementation doesn&apos;t correctly flush stale entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Oct 2017 14:55:39 +0000</created>
                <updated>Mon, 23 Oct 2017 08:54:01 +0000</updated>
                            <resolved>Mon, 16 Oct 2017 15:43:57 +0000</resolved>
                                    <version>Scripting Core 2.0.48</version>
                                    <fixVersion>Scripting Core 2.0.50</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16206073" author="radu.cotescu" created="Mon, 16 Oct 2017 15:43:57 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1812299&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1812299&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Tests enabled through &lt;a href=&quot;https://svn.apache.org/r1812298&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1812298&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1812300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1812300&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13059710">SLING-6737</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lbb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7198] Duplicated lookup for mapping without subserviceName</title>
                <link>https://issues.apache.org/jira/browse/SLING-7198</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; If I am not mistaken there is an extra lookup in the following method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; internalGetPrincipalNames(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serviceName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; subServiceName) {
        log.debug(
                &lt;span class=&quot;code-quote&quot;&gt;&quot;internalGetPrincipalNames: {} active mappings, looking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mapping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {}/{}&quot;&lt;/span&gt;,
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings.length, serviceName, subServiceName });

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Mapping mapping : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; principalNames = mapping.mapPrincipals(serviceName, subServiceName);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (principalNames != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got principalNames [{}] from {}/{}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] {principalNames, serviceName, subServiceName });
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; principalNames;
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Mapping mapping : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; principalNames = mapping.mapPrincipals(serviceName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (principalNames != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got principalNames [{}] from {}/{}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] {principalNames, serviceName });
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; principalNames;
            }
        }

        &lt;span class=&quot;code-comment&quot;&gt;// second round without serviceInfo
&lt;/span&gt;        log.debug(
                &lt;span class=&quot;code-quote&quot;&gt;&quot;internalGetPrincipalNames: {} active mappings, looking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mapping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {}/&amp;lt;no subServiceName&amp;gt;&quot;&lt;/span&gt;,
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings.length, serviceName);

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Mapping mapping : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; principalNames = mapping.mapPrincipals(serviceName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (principalNames != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got principalNames [{}] from {}/&amp;lt;no subServiceName&amp;gt;&quot;&lt;/span&gt;, principalNames, serviceName);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; principalNames;
            }
        }

        log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;internalGetPrincipalNames: no mapping found.&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I read the code properly the lookup that is logged by being the &apos;second round&apos; is actually the third perform once again the lookup without &apos;subServiceName&apos;. If that is correct I would suggest to remove the following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Mapping mapping : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.activeMappings) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; principalNames = mapping.mapPrincipals(serviceName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (principalNames != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got principalNames [{}] from {}/{}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] {principalNames, serviceName });
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; principalNames;
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or the third one that is called the second round &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;But please double check to make sure I didn&apos;t just overlook some subtle diff &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="13109242">SLING-7198</key>
            <summary>Duplicated lookup for mapping without subserviceName</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Oct 2017 11:40:42 +0000</created>
                <updated>Mon, 6 Nov 2017 18:25:52 +0000</updated>
                            <resolved>Fri, 13 Oct 2017 12:28:41 +0000</resolved>
                                    <version>Service User Mapper 1.3.4</version>
                                    <fixVersion>Service User Mapper 1.3.6</fixVersion>
                                    <component>Service User Mapper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16203489" author="karlpauls" created="Fri, 13 Oct 2017 12:28:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; - nice catch! &lt;/p&gt;

&lt;p&gt;I removed it in r1812124. Thanks a lot!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l8of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7197] Completed Scheduled Jobs are not getting fetched</title>
                <link>https://issues.apache.org/jira/browse/SLING-7197</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Scheuled jobs are created as &lt;em&gt;slingevent:TimedEvent&lt;/em&gt; under path &lt;em&gt;/var/eventing/scheduled-jobs&lt;/em&gt;. When these jobs execution are complete, they are moved under path `/var/eventing/jobs/finished`. Prior to completion, we can get scheduled jobs using &lt;a href=&quot;https://sling.apache.org/apidocs/sling7/org/apache/sling/event/jobs/JobManager.html#getScheduledJobs-java.lang.String-long-java.util.Map...-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;API JobManager.getScheduledJobs&lt;/a&gt;. But I could not find any API to get scheduled jobs which are completed. &lt;a href=&quot;https://sling.apache.org/apidocs/sling7/org/apache/sling/event/jobs/JobManager.html#findJobs-org.apache.sling.event.jobs.JobManager.QueryType-java.lang.String-long-java.util.Map...-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;API JobManager.findJobs&lt;/a&gt; returns only jobs of type &lt;em&gt;slingevent:Job&lt;/em&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13109199">SLING-7197</key>
            <summary>Completed Scheduled Jobs are not getting fetched</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="praful.vaishnav">Praful Vaishnav</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Oct 2017 09:00:08 +0000</created>
                <updated>Tue, 14 Nov 2017 09:20:24 +0000</updated>
                            <resolved>Thu, 2 Nov 2017 06:59:35 +0000</resolved>
                                    <version>Event 4.2.8</version>
                                    <fixVersion>Event 4.2.10</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16214911" author="praful.vaishnav" created="Mon, 23 Oct 2017 09:59:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you please look into this. One solution would be to modify JobManager.findJobs API to search for jobs of type slingevent:TimedEvent&lt;/p&gt;</comment>
                            <comment id="16216465" author="cziegeler" created="Tue, 24 Oct 2017 07:42:14 +0000"  >&lt;p&gt;Maybe the easiest solution is to change the type of the job when it&apos;s moved to `/var/eventing/jobs/finished`. Then findJobs will find it without any changes&lt;/p&gt;</comment>
                            <comment id="16216597" author="praful.vaishnav" created="Tue, 24 Oct 2017 09:23:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;  One other solution I can think of is to introduce new API to find Jobs that work on type slingevent:TimedEvent. Changing type of finished jobs would break code of consumer who may be querying for finished scheduled jobs using type slingevent:TimedEvent&lt;/p&gt;</comment>
                            <comment id="16217675" author="cziegeler" created="Tue, 24 Oct 2017 20:50:08 +0000"  >&lt;p&gt;I don&apos;t want to introduce a new API as I don&apos;t think this is really necessary, but I haven&apos;t looked into this in detail and maybe it makes sense.&lt;br/&gt;
Changing the type should be fine, as the way things are stored is an implementation detail. Consumer querying directly the repository are relying on internals and we don&apos;t provide any guarantee. That&apos;s like using reflection to call private/protected methods&lt;/p&gt;</comment>
                            <comment id="16218468" author="githubbot" created="Wed, 25 Oct 2017 12:08:48 +0000"  >&lt;p&gt;prafulVaishnav opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16218494" author="praful.vaishnav" created="Wed, 25 Oct 2017 12:18:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Created PR - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16218495" author="githubbot" created="Wed, 25 Oct 2017 12:18:34 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339311032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339311032&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cziegeler Please review.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16219979" author="cziegeler" created="Thu, 26 Oct 2017 05:19:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=praful.vaishnav&quot; class=&quot;user-hover&quot; rel=&quot;praful.vaishnav&quot;&gt;praful.vaishnav&lt;/a&gt; Thanks for the patch, yes I think that&apos;s the easiest solution&lt;/p&gt;</comment>
                            <comment id="16220015" author="praful.vaishnav" created="Thu, 26 Oct 2017 06:04:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you please review the PR - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1&lt;/a&gt; and provide feedback. Thanks.&lt;/p&gt;</comment>
                            <comment id="16222181" author="githubbot" created="Fri, 27 Oct 2017 11:12:20 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339943489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339943489&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cziegeler Can you please review and provide feedback,&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222415" author="githubbot" created="Fri, 27 Oct 2017 13:59:10 +0000"  >&lt;p&gt;cziegeler commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339979327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339979327&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Patch lgtm, can you confirm that it solves the problem at hand?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16222527" author="githubbot" created="Fri, 27 Oct 2017 15:10:53 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339999255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-339999255&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cziegeler Yes I have tested the patch. Its fixing the problem.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16226237" author="githubbot" created="Tue, 31 Oct 2017 04:35:49 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-340657562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-340657562&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cziegeler Can you plese merge this PR if everything right.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16226238" author="githubbot" created="Tue, 31 Oct 2017 04:35:56 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-340657562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-340657562&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cziegeler Can you please merge this PR if everything right.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16235286" author="githubbot" created="Thu, 2 Nov 2017 06:58:55 +0000"  >&lt;p&gt;cziegeler closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java b/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java&lt;br/&gt;
index 01ca010..0df2a9c 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java&lt;br/&gt;
@@ -28,6 +28,7 @@&lt;br/&gt;
 import java.util.concurrent.atomic.AtomicBoolean;&lt;br/&gt;
 import java.util.concurrent.atomic.AtomicLong;&lt;/p&gt;

&lt;p&gt;+import org.apache.jackrabbit.JcrConstants;&lt;br/&gt;
 import org.apache.sling.api.resource.ModifiableValueMap;&lt;br/&gt;
 import org.apache.sling.api.resource.PersistenceException;&lt;br/&gt;
 import org.apache.sling.api.resource.Resource;&lt;br/&gt;
@@ -295,6 +296,7 @@ private ScheduledJobInfoImpl addOrUpdateScheduledJob(&lt;br/&gt;
         properties.remove(ResourceResolver.PROPERTY_RESOURCE_TYPE);&lt;br/&gt;
         properties.remove(Job.PROPERTY_JOB_CREATED);&lt;br/&gt;
         properties.remove(Job.PROPERTY_JOB_CREATED_INSTANCE);&lt;br/&gt;
+        properties.remove(JcrConstants.JCR_PRIMARYTYPE);&lt;/p&gt;

&lt;p&gt;         final String jobTopic = (String) properties.remove(ResourceHelper.PROPERTY_JOB_TOPIC);&lt;br/&gt;
         final String schedulerName = (String) properties.remove(ResourceHelper.PROPERTY_SCHEDULE_NAME);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16235289" author="cziegeler" created="Thu, 2 Nov 2017 06:59:35 +0000"  >&lt;p&gt;Thanks for the patch, it&apos;s applied&lt;/p&gt;</comment>
                            <comment id="16235623" author="githubbot" created="Thu, 2 Nov 2017 12:07:09 +0000"  >&lt;p&gt;prafulVaishnav commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7197&quot; title=&quot;Completed Scheduled Jobs are not getting fetched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7197&quot;&gt;&lt;del&gt;SLING-7197&lt;/del&gt;&lt;/a&gt; Completed Scheduled Jobs are not getting fetched.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-341401438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/pull/1#issuecomment-341401438&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @cziegeler. I need to get this fix in AEM so it would require a release.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l8ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7196] sling-mock: Make sure SlingContext.registerAdapter can overlay built-in adaptions</title>
                <link>https://issues.apache.org/jira/browse/SLING-7196</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;with SlingContext.registerAdapter you can register your own adaptions in your unit test - or overlay existing adaptions with a mock version on your own.&lt;/p&gt;

&lt;p&gt;with the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7193&quot; title=&quot;osgi-mock: MockServiceReferences.compareTo reverses ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7193&quot;&gt;&lt;del&gt;SLING-7193&lt;/del&gt;&lt;/a&gt; and knowing the problem from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7194&quot; title=&quot;Document that AdapterManager sorts AdapterFactory implementations lowest ranking first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7194&quot;&gt;&lt;del&gt;SLING-7194&lt;/del&gt;&lt;/a&gt; we need to adapt the sling-mock implementation to make sure the overlaying is still working.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13108962">SLING-7196</key>
            <summary>sling-mock: Make sure SlingContext.registerAdapter can overlay built-in adaptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 12 Oct 2017 15:55:41 +0000</created>
                <updated>Tue, 17 Oct 2017 12:55:01 +0000</updated>
                            <resolved>Thu, 12 Oct 2017 15:56:30 +0000</resolved>
                                                    <fixVersion>Testing Sling Mock 2.2.14</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16202151" author="sseifert@pro-vision.de" created="Thu, 12 Oct 2017 15:56:30 +0000"  >&lt;p&gt;Completed: At revision: 1811988  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13108932">SLING-7193</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13108942">SLING-7194</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l73r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7195] Sling Mock Oak not working with AEM uber-jar 6.3.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-7195</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When running unit tests using the Sling Mock Oak repository the tests will fail if AEMs &lt;tt&gt;uber-jar&lt;/tt&gt; is present in the classpath.&lt;/p&gt;

&lt;p&gt;This happens with the following versions:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling:org.apache.sling.testing.sling-mock-oak:2.0.2&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;com.adobe.aem:uber-jar:6.3.0&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;h2&gt;&lt;a name=&quot;Exception&quot;&gt;&lt;/a&gt;Exception&lt;/h2&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.RuntimeException: Unable to initialize JCR_OAK resource resolver factory: Unable to invoke method &lt;span class=&quot;code-quote&quot;&gt;&apos;activate&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository

	at org.apache.sling.testing.mock.sling.context.ContextResourceResolverFactory.get(ContextResourceResolverFactory.java:66)
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.newResourceResolverFactory(SlingContextImpl.java:154)
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.setUp(SlingContextImpl.java:145)
	at org.apache.sling.testing.mock.sling.junit.SlingContext.access$100(SlingContext.java:40)
	at org.apache.sling.testing.mock.sling.junit.SlingContext$1.before(SlingContext.java:127)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.lang.RuntimeException: Unable to invoke method &lt;span class=&quot;code-quote&quot;&gt;&apos;activate&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:320)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeLifecycleMethod(OsgiServiceUtil.java:149)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:84)
	at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:169)
	at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.registerServiceIfNotPresent(ResourceResolverFactoryInitializer.java:155)
	at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.registerServiceIfNotPresent(ResourceResolverFactoryInitializer.java:140)
	at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.setUp(ResourceResolverFactoryInitializer.java:62)
	at org.apache.sling.testing.mock.sling.MockSling.newResourceResolverFactory(MockSling.java:75)
	at org.apache.sling.testing.mock.sling.context.ContextResourceResolverFactory.get(ContextResourceResolverFactory.java:45)
	... 20 more
Caused by: java.lang.NoClassDefFoundError: org/apache/jackrabbit/oak/plugins/document/bundlor/BundlingConfigInitializer
	at org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContent.initialize(InitialContent.java:88)
	at org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContent.createInitialContent(InitialContent.java:61)
	at org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContent.&amp;lt;clinit&amp;gt;(InitialContent.java:57)
	at org.apache.jackrabbit.oak.jcr.Jcr.&amp;lt;init&amp;gt;(Jcr.java:114)
	at org.apache.jackrabbit.oak.jcr.Jcr.&amp;lt;init&amp;gt;(Jcr.java:141)
	at org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository.activate(OakMockSlingRepository.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:311)
	... 28 more
Caused by: java.lang.ClassNotFoundException: org.apache.jackrabbit.oak.plugins.document.bundlor.BundlingConfigInitializer
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
	... 39 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;&lt;a name=&quot;Cause&quot;&gt;&lt;/a&gt;Cause&lt;/h2&gt;

&lt;p&gt;I debugged for a while and came to the conclusion that the main problem is that there are two versions of the &lt;tt&gt;org.apache.jackrabbit:oak-core&lt;/tt&gt; and &lt;tt&gt;org.apache.jackrabbit:oak-jcr&lt;/tt&gt; library present:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling:org.apache.sling.testing.sling-mock-oak:2.0.2&lt;/tt&gt; provides/requires version &lt;tt&gt;1.4.1&lt;/tt&gt; of both dependencies.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;com.adobe.aem:uber-jar:6.3.0&lt;/tt&gt; provides/requires version &lt;tt&gt;1.6.1&lt;/tt&gt; of both dependencies.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The exception is caused when &lt;tt&gt;org.apache.jackrabbit.oak.jcr.Jcr&lt;/tt&gt;&#160;is instantiated in &lt;tt&gt;org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository#activate&lt;/tt&gt;. The constructor of class &lt;tt&gt;Jcr&lt;/tt&gt; instantiates &lt;tt&gt;org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContent&lt;/tt&gt;. This class imports &lt;tt&gt;org.apache.jackrabbit.oak.plugins.document.bundlor.BundlingConfigInitializer&lt;/tt&gt; in version &lt;tt&gt;1.6.1&lt;/tt&gt; but not in version &lt;tt&gt;1.4.1&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This is where the exception (see above) should be coming from.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;HowtoReproduce&quot;&gt;&lt;/a&gt;How to Reproduce&lt;/h2&gt;

&lt;p&gt;To reproduce this issue I have attached a small demo project. Just do the following:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Download and extract archive.&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean test&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;There will be no error.&lt;/li&gt;
	&lt;li&gt;Open &lt;tt&gt;pom.xml&lt;/tt&gt;&#160;and make uber-jar dependency available by removing the comments.&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean test&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Exception will appear.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>AEM 6.3.0</environment>
        <key id="13108944">SLING-7195</key>
            <summary>Sling Mock Oak not working with AEM uber-jar 6.3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jenslauterbach">Jens Lauterbach</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Thu, 12 Oct 2017 15:18:53 +0000</created>
                <updated>Thu, 12 Oct 2017 16:56:15 +0000</updated>
                            <resolved>Thu, 12 Oct 2017 16:56:15 +0000</resolved>
                                    <version>Testing Sling Mock Oak 2.0.2</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16202100" author="jenslauterbach" created="Thu, 12 Oct 2017 15:23:41 +0000"  >&lt;p&gt;Added demo project to help reproduce error.&lt;/p&gt;</comment>
                            <comment id="16202102" author="sseifert@pro-vision.de" created="Thu, 12 Oct 2017 15:25:49 +0000"  >&lt;p&gt;if you are working with AEM i recommend to directly use &lt;a href=&quot;http://wcm.io/testing/aem-mock/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wcm.io/testing/aem-mock/&lt;/a&gt; (AEM Mock 2.x).&lt;br/&gt;
this comes with a hand-picked list of transitive dependencies wich is compatible with the uber jars from AEM 6.2 and AEM 6.3, which is be a bit hart to get right when doing it manually.&lt;br/&gt;
see also &lt;a href=&quot;https://adapt.to/2016/en/schedule/unit-testing-with-sling-aem-mocks.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://adapt.to/2016/en/schedule/unit-testing-with-sling-aem-mocks.html&lt;/a&gt; for some hints&lt;/p&gt;</comment>
                            <comment id="16202121" author="jenslauterbach" created="Thu, 12 Oct 2017 15:45:34 +0000"  >&lt;p&gt;I just checked the poms for &lt;tt&gt;io.wcm:io.wcm.testing.aem-mock:2.2.6&lt;/tt&gt; and they indeed have a dependency on the &lt;tt&gt;com.adobe.aem:uber-jar&lt;/tt&gt;. But sadly, the have a dependency on version &lt;tt&gt;6.2.0&lt;/tt&gt; of the &lt;tt&gt;uber-jar&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;And as far as I can tell the dependency is not &quot;propagated&quot; to my project if I include `aem-mock` as dependency. Therefore, I would still have to have an explicit dependency on the &lt;tt&gt;uber-jar&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Having both of them as dependency did not fix the problem.&lt;/p&gt;</comment>
                            <comment id="16202125" author="sseifert@pro-vision.de" created="Thu, 12 Oct 2017 15:46:58 +0000"  >&lt;p&gt;that&apos;s no problem, just give it a try (with dependency to 6.3.0 uber-jar in your project should work fine)&lt;/p&gt;</comment>
                            <comment id="16202137" author="jenslauterbach" created="Thu, 12 Oct 2017 15:51:24 +0000"  >&lt;p&gt;Ok. I found out how to fix this with &lt;tt&gt;aem-mock&lt;/tt&gt;. It did not work on first try because of the order of the dependencies.&lt;/p&gt;

&lt;p&gt;This works:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.wcm&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;io.wcm.testing.aem-mock&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.2.6&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.adobe.aem&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;uber-jar&amp;lt;/artifactId&amp;gt;
    &amp;lt;classifier&amp;gt;apis&amp;lt;/classifier&amp;gt;
    &amp;lt;version&amp;gt;6.3.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This does not work:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.adobe.aem&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;uber-jar&amp;lt;/artifactId&amp;gt;
    &amp;lt;classifier&amp;gt;apis&amp;lt;/classifier&amp;gt;
    &amp;lt;version&amp;gt;6.3.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.wcm&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;io.wcm.testing.aem-mock&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.2.6&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16202193" author="jenslauterbach" created="Thu, 12 Oct 2017 16:15:09 +0000"  >&lt;p&gt;Just for other people finding this: Even if you fix the problem described in this ticket you might get another exception. For a solution for this exception look here: &lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/sling-mocks-quot-Creating-resource-resolver-failed-quot-td4073079.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/sling-mocks-quot-Creating-resource-resolver-failed-quot-td4073079.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12891734" name="sling-7195-demo.zip" size="5493" author="jenslauterbach" created="Thu, 12 Oct 2017 15:23:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l6zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7193] osgi-mock: MockServiceReferences.compareTo reverses ordering</title>
                <link>https://issues.apache.org/jira/browse/SLING-7193</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;according to specification the compareTo method of the OSGi Framework ServiceReference implementation should implement an ascending ordering, with lowest ranking/highest service id first.&lt;/p&gt;

&lt;p&gt;in osgi-mock this is contrary - highest ranking/lowest service id first. this has no effect on the MockBundleContext.getServiceReference method - this correctly returns the service with the highest ranking/lowest service id.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13108932">SLING-7193</key>
            <summary>osgi-mock: MockServiceReferences.compareTo reverses ordering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 12 Oct 2017 14:48:39 +0000</created>
                <updated>Thu, 4 Feb 2021 18:52:26 +0000</updated>
                            <resolved>Thu, 12 Oct 2017 15:47:11 +0000</resolved>
                                    <version>Testing OSGi Mock 1.9.6</version>
                    <version>Testing OSGi Mock 2.3.2</version>
                                    <fixVersion>Testing OSGi Mock 1.9.8</fixVersion>
                    <fixVersion>Testing OSGi Mock 2.3.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16202127" author="sseifert@pro-vision.de" created="Thu, 12 Oct 2017 15:47:11 +0000"  >&lt;p&gt;Completed: At revision: 1811972  (2.x)&lt;br/&gt;
Completed: At revision: 1811983  (1.x)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13356540">SLING-10124</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13108962">SLING-7196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l6x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7190] i18n translations not updated unless bundle is restarted</title>
                <link>https://issues.apache.org/jira/browse/SLING-7190</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Required System Setup - AEM 6.2SP1-CFP6 &lt;br/&gt;
Navigate to - &lt;a href=&quot;http://localhost:4502/libs/cq/i18n/translator.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/libs/cq/i18n/translator.html&lt;/a&gt;&lt;br/&gt;
Select dictionary /libs/granite/i18n &lt;br/&gt;
Dictionary would get loaded in the UI&lt;br/&gt;
Update fr Translation for &apos;Create&apos; to any random string&lt;br/&gt;
Click on save&lt;br/&gt;
Change System Language to fr&lt;br/&gt;
Navigate to - &lt;a href=&quot;http://localhost:4502/sites.html/content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/sites.html/content&lt;/a&gt;&lt;br/&gt;
Check Create button label on the top right. It&apos;s not updated&lt;/p&gt;

&lt;p&gt;Restarting the bundle (sling i18n) and refreshing the page loads the new translation. &lt;/p&gt;

&lt;p&gt;Prior to CFP6 (sling i18n 2.4.4) no restart was required. The bundle automatically got refreshed after any change in the resource. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13108810">SLING-7190</key>
            <summary>i18n translations not updated unless bundle is restarted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vikramsr">Shivendra Vikram Srinet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Oct 2017 05:51:23 +0000</created>
                <updated>Wed, 17 Jan 2018 10:18:06 +0000</updated>
                            <resolved>Wed, 17 Jan 2018 10:18:01 +0000</resolved>
                                    <version>i18n 2.5.6</version>
                                    <fixVersion>i18n 2.5.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16201762" author="kwin" created="Thu, 12 Oct 2017 10:26:04 +0000"  >&lt;p&gt;If I understand correctly, it used to work with Sling i18n 2.4.4 (which included &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4814&quot; title=&quot;i18n translations not working unless server is restarted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4814&quot;&gt;&lt;del&gt;SLING-4814&lt;/del&gt;&lt;/a&gt;) but does no longer work with Sling i18n 2.5.6. Therefore I strongly assume a relation with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5999&quot; title=&quot;JcrResourceBundleProvider should move to new ResourceChangeListener API &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5999&quot;&gt;&lt;del&gt;SLING-5999&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you have a look as you migrated from the OSGi Event Admin to the Resource Change Listener?&lt;/p&gt;</comment>
                            <comment id="16328536" author="cziegeler" created="Wed, 17 Jan 2018 09:30:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikramsr&quot; class=&quot;user-hover&quot; rel=&quot;vikramsr&quot;&gt;vikramsr&lt;/a&gt; I tested this with 2.5.10 and it seems to work (at least with using other latest releases from Sling). I assume that the resource resolver, jcr resource and Oak version do not support the features used by this i18n version or have bugs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12838399">SLING-4814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12999565">SLING-5999</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l65z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7189] Misleading Artifact Coordinates message for ResourceResolverType.JCR_OAK</title>
                <link>https://issues.apache.org/jira/browse/SLING-7189</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When you create a &lt;tt&gt;SlingContext&lt;/tt&gt; using &lt;tt&gt;ResourceResolverType.JCR_OAK&lt;/tt&gt; you get the following error if you do not have the required dependency:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;java.lang.RuntimeException: Unable to initialize JCR_OAK resource resolver factory: Unable to instantiate resourcer resolver: org.apache.sling.testing.mock.sling.oak.OakMockResourceResolverAdapter. Make sure this maven dependency is included: org.apache.sling:org.apache.sling.testing.sling-mock-jackrabbit-oak&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The message contains the &lt;tt&gt;groupId&lt;/tt&gt; and &lt;tt&gt;artifactId&lt;/tt&gt;&#160;of the dependency you are supposed to add to your project:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;org.apache.sling:org.apache.sling.testing.sling-mock-jackrabbit-oak&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is that this dependency does not seem to exist. I was able to solve this issue by adding the following dependency:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;org.apache.sling.testing.sling-mock-oak&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.0.2&amp;lt;/version&amp;gt;
 &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This dependency does include the class &lt;tt&gt;org.apache.sling.testing.mock.sling.oak.OakMockResourceResolverAdapter&lt;/tt&gt; which is apparently the class that is supposed to be loaded by all of this.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Therefore, I would propose to update the artifact coordinates in the error message.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I added a demo project that can be used to re-produce this issue:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Extract the attached archive&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean test&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Error occurs&lt;/li&gt;
	&lt;li&gt;Uncomment dependency in &lt;tt&gt;pom.xml&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean test&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Error is gone&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13108605">SLING-7189</key>
            <summary>Misleading Artifact Coordinates message for ResourceResolverType.JCR_OAK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="jenslauterbach">Jens Lauterbach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Oct 2017 13:27:55 +0000</created>
                <updated>Tue, 17 Oct 2017 12:54:27 +0000</updated>
                            <resolved>Wed, 11 Oct 2017 14:54:07 +0000</resolved>
                                    <version>Testing Sling Mock 2.2.12</version>
                                    <fixVersion>Testing Sling Mock 1.9.10</fixVersion>
                    <fixVersion>Testing Sling Mock 2.2.14</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16200286" author="jenslauterbach" created="Wed, 11 Oct 2017 13:43:39 +0000"  >&lt;p&gt;Added demo code.&lt;/p&gt;</comment>
                            <comment id="16200397" author="jenslauterbach" created="Wed, 11 Oct 2017 14:50:46 +0000"  >&lt;p&gt;Added patch to fix the issue.&lt;/p&gt;</comment>
                            <comment id="16200403" author="sseifert@pro-vision.de" created="Wed, 11 Oct 2017 14:54:07 +0000"  >&lt;p&gt;you&apos;re right - this is a typo - thanks for reporting.&lt;br/&gt;
fixed in the next release.&lt;/p&gt;

&lt;p&gt;Completed: At revision: 1811834  (2.x)&lt;br/&gt;
Completed: At revision: 1811833  (1.x)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12891482" name="sling-7189-code.zip" size="6048" author="jenslauterbach" created="Wed, 11 Oct 2017 13:43:25 +0000"/>
                            <attachment id="12891499" name="sling-7189.patch" size="955" author="jenslauterbach" created="Wed, 11 Oct 2017 14:50:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l4wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7187] Use of Injector-specific annotation and @Optional results in required-value</title>
                <link>https://issues.apache.org/jira/browse/SLING-7187</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If there is a model class like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Model(adaptables = Resource.class)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ModelClass {

        @ValueMapValue
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; otherText;

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getOtherText() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; otherText;
        }

        @ValueMapValue
        @Optional
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; emptyText;

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEmptyText() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; emptyText;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be a reasonable expectation that the &lt;tt&gt;emptyText&lt;/tt&gt; field will be optional. But that is not actually the case since the &lt;tt&gt;@ValueMapValue&lt;/tt&gt; has a default &lt;tt&gt;optional&lt;/tt&gt; attribute of &lt;tt&gt;false&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Can be worked around by using &lt;tt&gt;@ValueMapValue(optional = true)&lt;/tt&gt; instead of having the separate &lt;tt&gt;@Optional&lt;/tt&gt; annotation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13108322">SLING-7187</key>
            <summary>Use of Injector-specific annotation and @Optional results in required-value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Oct 2017 15:31:35 +0000</created>
                <updated>Tue, 12 Dec 2017 15:42:34 +0000</updated>
                            <resolved>Tue, 10 Oct 2017 17:18:46 +0000</resolved>
                                    <version>Models Impl 1.4.4</version>
                                    <fixVersion>Models Impl 1.4.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16198835" author="justinedelson" created="Tue, 10 Oct 2017 15:33:52 +0000"  >&lt;p&gt;patch attached. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; can you take a look at this since I think you did the original implementation.&lt;/p&gt;</comment>
                            <comment id="16198900" author="kwin" created="Tue, 10 Oct 2017 16:15:38 +0000"  >&lt;p&gt;The patch in general looks fine but it would modify the behavior in case both the optional attribute is set to &lt;tt&gt;false&lt;/tt&gt; as well as the @Optional annotation is set, as with your patch the @Optional would take precedence. But since this would be rather unexpected I don&apos;t think this is a problem. &lt;br/&gt;
I would just like to highlight that the optional attribute is anyhow deprecated since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4155&quot; title=&quot;DefaultInjectionStrategy not considered for injector-specific annotations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4155&quot;&gt;&lt;del&gt;SLING-4155&lt;/del&gt;&lt;/a&gt; and instead the injectionStrategy attribute should be used.&lt;/p&gt;</comment>
                            <comment id="16198999" author="justinedelson" created="Tue, 10 Oct 2017 17:16:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;The patch in general looks fine but it would modify the behavior in case both the optional attribute is set to false as well as the @Optional annotation is set, as with your patch the @Optional would take precedence. But since this would be rather unexpected I don&apos;t think this is a problem. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, that&apos;s the whole point &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; since the optional attribute is set to false by default.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would just like to highlight that the optional attribute is anyhow deprecated since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4155&quot; title=&quot;DefaultInjectionStrategy not considered for injector-specific annotations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4155&quot;&gt;&lt;del&gt;SLING-4155&lt;/del&gt;&lt;/a&gt; and instead the injectionStrategy attribute should be used.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is that even if someone doesn&apos;t use it, it is still set. I guess the other alternative to this would be to remove support for the optional attribute entirely (i.e. just ignore it if set). I don&apos;t think we need to do that.&lt;/p&gt;</comment>
                            <comment id="16199005" author="justinedelson" created="Tue, 10 Oct 2017 17:18:30 +0000"  >&lt;p&gt;I did find one additional oddity.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@ValueMapValue(optional=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
@Required
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, the field is optional. BUT...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@ValueMapValue(injectionStrategy = InjectionStrategy.OPTIONAL)
@Required
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The field is optional.&lt;/p&gt;

&lt;p&gt;Since, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; notes the optional attribute is deprecated, I&apos;m not going to fix that, but I did add the test cases to save the behavior.&lt;/p&gt;</comment>
                            <comment id="16199006" author="justinedelson" created="Tue, 10 Oct 2017 17:18:46 +0000"  >&lt;p&gt;fixed in r1811741&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12754697">SLING-4155</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12891287" name="SLING-7187.diff" size="9694" author="justinedelson" created="Tue, 10 Oct 2017 15:33:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l36f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7184] SlingOptions.slingScriptingSightly fails to </title>
                <link>https://issues.apache.org/jira/browse/SLING-7184</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;trying to use SlingOptions.slingScriptingSightly  in pipes IT i get the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.osgi.framework.BundleException: Unable to resolve org.apache.sling.scripting.sightly.js.provider [208](R 208.0): missing requirement [org.apache.sling.scripting.sightly.js.provider [208](R 208.0)] io.sightly; (&amp;amp;(version&amp;gt;=1.0)(!(version&amp;gt;=2.0))) [caused by: Unable to resolve org.apache.sling.scripting.sightly [205](R 205.0): missing requirement [org.apache.sling.scripting.sightly [205](R 205.0)] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (&amp;amp;(osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.apache.sling.xss)(version&amp;gt;=1.0.0)(!(version&amp;gt;=2.0.0))) [caused by: Unable to resolve org.apache.sling.xss [201](R 201.0): missing requirement [org.apache.sling.xss [201](R 201.0)] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=javax.mail.internet)]] Unresolved requirements: [[org.apache.sling.scripting.sightly.js.provider [208](R 208.0)] io.sightly; (&amp;amp;(version&amp;gt;=1.0)(!(version&amp;gt;=2.0)))]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;fixing&quot; this with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        SlingOptions.versionResolver.setVersion(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.xss&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.18&quot;&lt;/span&gt;);
...
            mavenBundle().groupId(&lt;span class=&quot;code-quote&quot;&gt;&quot;javax.mail&quot;&lt;/span&gt;).artifactId(&lt;span class=&quot;code-quote&quot;&gt;&quot;mail&quot;&lt;/span&gt;).version(&lt;span class=&quot;code-quote&quot;&gt;&quot;1.5.0-b01&quot;&lt;/span&gt;),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13108008">SLING-7184</key>
            <summary>SlingOptions.slingScriptingSightly fails to </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Oct 2017 15:45:13 +0000</created>
                <updated>Fri, 2 Feb 2018 13:45:05 +0000</updated>
                            <resolved>Fri, 22 Dec 2017 15:40:32 +0000</resolved>
                                    <version>Testing PaxExam 0.0.4</version>
                                    <fixVersion>Testing PaxExam 1.0.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16197172" author="npeltier" created="Mon, 9 Oct 2017 15:45:44 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16301572" author="olli" created="Fri, 22 Dec 2017 15:40:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, Sling XSS 2.0.0 does not import &lt;tt&gt;javax.mail.internet&lt;/tt&gt; anymore so this issue is resolved by updating to latest release.&lt;br/&gt;
To prevent such issues in the future all generated options are now backed by tests also, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7325&quot; title=&quot;Add tests for generated options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7325&quot;&gt;&lt;del&gt;SLING-7325&lt;/del&gt;&lt;/a&gt;. Thanks for reporting!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l19j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7174] Using MockSlingHttpServletRequest for In-Sling Rendering fails when used with Export Servlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-7174</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When I use MockSlingHttpServletRequest with SlingRequestProcessor to render a page within sling then I will get an Unsupported Operation Exception when I hit the Export Servlet.&lt;/p&gt;

&lt;p&gt;The reason is that the Export Servlet is retrieving Request Reader in addScriptBindings():&lt;/p&gt;

&lt;p&gt;        bindings.put(READER, request.getReader());&lt;/p&gt;

&lt;p&gt;In my opinion Sling should provide a Request / Response class for in-Sling rendering that is for that specific purpose as using that class for testing does clash with the the rendering.&lt;/p&gt;</description>
                <environment>Sling 9, Java 1.8</environment>
        <key id="13106476">SLING-7174</key>
            <summary>Using MockSlingHttpServletRequest for In-Sling Rendering fails when used with Export Servlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Oct 2017 16:52:29 +0000</created>
                <updated>Tue, 17 Oct 2017 12:52:26 +0000</updated>
                            <resolved>Mon, 2 Oct 2017 17:40:10 +0000</resolved>
                                                    <fixVersion>Servlet Helpers 1.1.2</fixVersion>
                    <fixVersion>Models Impl 1.4.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16188425" author="justinedelson" created="Mon, 2 Oct 2017 17:00:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;In my opinion Sling should provide a Request / Response class for in-Sling rendering that is for that specific purpose as using that class for testing does clash with the the rendering.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It does. That&apos;s the purpose of the Servlet Helpers bundle.&lt;/p&gt;</comment>
                            <comment id="16188432" author="schaefa" created="Mon, 2 Oct 2017 17:05:35 +0000"  >&lt;p&gt;If that Request / Response pair if for In-Sling rendering why is it then prefixed with &apos;Mock&apos; and why does it throw an Unsupported Operation Exception?&lt;/p&gt;

&lt;p&gt;If fixed that for our project by just returning null in the getReader() in the Request class and it works just fine.&lt;/p&gt;</comment>
                            <comment id="16188477" author="justinedelson" created="Mon, 2 Oct 2017 17:33:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;If that Request / Response pair if for In-Sling rendering why is it then prefixed with &apos;Mock&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because naming things is hard.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;why does it throw an Unsupported Operation Exception?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Presumably because no one thought that was an issue.&lt;/p&gt;</comment>
                            <comment id="16188487" author="justinedelson" created="Mon, 2 Oct 2017 17:40:04 +0000"  >&lt;p&gt;Fixed in r1810562/r1810564 by properly implementing the &lt;tt&gt;getReader&lt;/tt&gt; method. Also fixed the implementation of &lt;tt&gt;getInputStream&lt;/tt&gt; to properly through &lt;tt&gt;IllegalStateException&lt;/tt&gt; if the reader has already been accessed.&lt;/p&gt;

&lt;p&gt;Also fixed in r1810563 by catching the exception in &lt;tt&gt;ExportServlet&lt;/tt&gt; since even with these changes, an &lt;tt&gt;IllegalStateException&lt;/tt&gt; could be thrown by a call to &lt;tt&gt;getReader&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16188656" author="rombert" created="Mon, 2 Oct 2017 19:17:55 +0000"  >&lt;p&gt;I think the changes lead to some tests failing - see &lt;a href=&quot;https://builds.apache.org/job/sling-bundles-extensions-servlet-helpers-1.8/9/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-bundles-extensions-servlet-helpers-1.8/9/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16188675" author="justinedelson" created="Mon, 2 Oct 2017 19:34:12 +0000"  >&lt;p&gt;that&apos;s just me forgetting to commit a file. Should be fixed now.&lt;/p&gt;</comment>
                            <comment id="16188700" author="rombert" created="Mon, 2 Oct 2017 19:43:02 +0000"  >&lt;p&gt;thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ksdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7169] FullTextIndexingTest sometimes fails with a timeout</title>
                <link>https://issues.apache.org/jira/browse/SLING-7169</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The test fails maybe 1 in 10 runs. I could reproduce this locally by running many times. I&apos;ve also seen it once on Jenkins.&lt;/p&gt;

&lt;p&gt;*&lt;b&gt;Old description below&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;After upgrading the launchpad to commons.threads 3.2.10 the FullTextIndexingTest failed ( &lt;a href=&quot;https://builds.apache.org/job/sling-launchpad-testing-1.8/1547/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build 1547&lt;/a&gt; ).&lt;/p&gt;

&lt;p&gt;I also reproduced it once locally.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - since the commons.threads release is the potential root cause, can you please take a look at the failure and see if it&apos;s related?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13106373">SLING-7169</key>
            <summary>FullTextIndexingTest sometimes fails with a timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Mon, 2 Oct 2017 10:18:38 +0000</created>
                <updated>Tue, 8 Oct 2019 15:22:02 +0000</updated>
                                                                            <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16187918" author="kwin" created="Mon, 2 Oct 2017 12:13:35 +0000"  >&lt;p&gt;I currently fail to see the relation to commons.threads and cannot reproduce either. For me the ITs run fine with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T21:39:06+02:00)
Maven home: /usr/local/Cellar/maven/3.5.0/libexec
Java version: 1.8.0_144, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac os x&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;10.13&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Isn&apos;t this more likely to be a timing issue? I.e. Oak not having indexed yet the according PDF? Also I don&apos;t think anywhere in the &lt;tt&gt;FullTextIndexingTest&lt;/tt&gt; there is commons.threads being used. Neither for the upload of the PDF nor for the execution of the query (&lt;tt&gt;o.a.s.lanuchpad.testservices.jcr.FullTextQueryServlet&lt;/tt&gt;), both should IMHO be blocking operations being executed within the request&apos;s thread. Can you provide the server logs for the failing test?&lt;/p&gt;</comment>
                            <comment id="16187960" author="kwin" created="Mon, 2 Oct 2017 12:18:15 +0000"  >&lt;p&gt;I triggered a new build (unfortunately haven&apos;t saved the logs from the previous build) and that was executed just fine (&lt;a href=&quot;https://builds.apache.org/job/sling-launchpad-testing-1.8/1548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-launchpad-testing-1.8/1548&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16188116" author="rombert" created="Mon, 2 Oct 2017 14:27:19 +0000"  >&lt;p&gt;Try something like &lt;tt&gt;for i in $(seq 1 20); do mvn -q clean verify -Dit.test=FullTextIndexingTest; done&lt;/tt&gt;. I get 2 out of 20 failures - so 10% . I&apos;ll attach the logs as well.&lt;/p&gt;</comment>
                            <comment id="16188197" author="rombert" created="Mon, 2 Oct 2017 14:39:33 +0000"  >&lt;p&gt;Well, it seems that the test also sometimes fails with the older version, so not related to the commons.threads update.&lt;/p&gt;</comment>
                            <comment id="16188313" author="kwin" created="Mon, 2 Oct 2017 15:21:41 +0000"  >&lt;p&gt;In case of failure something like this can be observed in the error.log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.10.2017 13:14:50.655 *INFO* [127.0.0.1 [1506939290651] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In case of a successful execution of that IT that error isn&apos;t logged. So it seems to me that sometimes Oak is not using the internal index for the query and falling back to the traversal mechanism which obviously times out:&lt;/p&gt;

&lt;p&gt;During the startup of the server the following is logged:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.10.2017 13:13:47.535 *INFO* [async-index-update-async] org.apache.jackrabbit.oak.plugins.index.IndexUpdate Reindexing will be performed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; following indexes: [/oak:index/counter, /oak:index/lucene]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the according completion message cannot be observed. While for successful runs I see something like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.10.2017 14:04:36.561 *INFO* [async-index-update-async] org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate [async] Reindexing completed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; indexes: [/oak:index/counter*(16), /oak:index/lucene*(2166)] in 1.269 s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems that this particular IT needs to wait for the reindexing to be finished first before it should be executed.&lt;/p&gt;</comment>
                            <comment id="16192967" author="rombert" created="Thu, 5 Oct 2017 14:50:38 +0000"  >&lt;p&gt;Asked on the Oak list for a way to wait for indexing to complete - &lt;a href=&quot;https://lists.apache.org/thread.html/a49a31f823a6dc014f3a2ff7956fca89efa6db76bacea14c637ea48a@%3Coak-dev.jackrabbit.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/a49a31f823a6dc014f3a2ff7956fca89efa6db76bacea14c637ea48a@%3Coak-dev.jackrabbit.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16194322" author="alex.parvulescu" created="Fri, 6 Oct 2017 09:07:26 +0000"  >&lt;p&gt;This seems timing related indeed. on slower machines the async indexer doesn&apos;t finish before the test starts so you&apos;ll probably have to find a way to check the index status via the mbean &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and run the test once the repo is ready.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/stillalex/jackrabbit-oak/blob/trunk/oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/IndexStatsMBean.java#L26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stillalex/jackrabbit-oak/blob/trunk/oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/IndexStatsMBean.java#L26&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16194335" author="rombert" created="Fri, 6 Oct 2017 09:15:44 +0000"  >&lt;p&gt;I&apos;ll take a look, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16194343" author="volteanu" created="Fri, 6 Oct 2017 09:22:35 +0000"  >&lt;p&gt;Note that waiting for async indexer might be trickier than it seems. There are multiple indexing lanes and you have to know for which one to wait. Also, you&apos;ll sometimes have to wait for 2 indexing cycles to finish to be sure the new content was indexed. &lt;/p&gt;</comment>
                            <comment id="16194350" author="rombert" created="Fri, 6 Oct 2017 09:30:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; - is there a way of accesing the MBean information via HTTP? I can access for instance &lt;a href=&quot;http://localhost:8080/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3Dasync%2Ctype%3DIndexStats&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3Dasync%2Ctype%3DIndexStats&lt;/a&gt; but only in HTML.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;edit&lt;/em&gt;: oops, wrong mention&lt;/p&gt;</comment>
                            <comment id="16194395" author="jsedding" created="Fri, 6 Oct 2017 10:07:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Via &lt;tt&gt;org.apache.sling.jmx.provider&lt;/tt&gt; there&apos;s a &lt;tt&gt;ResourceProvider&lt;/tt&gt; exposed at &lt;tt&gt;/system/sling/monitoring/mbeans&lt;/tt&gt;. Not sure this is installed in your test. But you should then be able to access the resources via the default GET servlet, e.g. &lt;a href=&quot;http://localhost:8080/system/sling/monitoring/mbeans/org/apache/jackrabbit/oak.tidy.2.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/sling/monitoring/mbeans/org/apache/jackrabbit/oak.tidy.2.json&lt;/a&gt;. Note that I didn&apos;t manage to access the child resource &lt;tt&gt;&quot;IndexStats&quot;&lt;/tt&gt; directly, possibly because of the quotes.&lt;/p&gt;</comment>
                            <comment id="16194401" author="kwin" created="Fri, 6 Oct 2017 10:16:41 +0000"  >&lt;p&gt;Also coming up with our own &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/jmx/remote/custom.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JMX Client&lt;/a&gt; would be an option. That would maybe good to add as a rule to &lt;a href=&quot;https://github.com/apache/sling/tree/trunk/testing/junit/rules&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/tree/trunk/testing/junit/rules&lt;/a&gt;. I am thinking about a generic WaitForJmxAttributeValue rule.&lt;/p&gt;</comment>
                            <comment id="16194455" author="volteanu" created="Fri, 6 Oct 2017 11:02:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also coming up with our own JMX Client would be an option.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;A JMX Client would indeed be the canonical solution, but in reality something over http is more convenient because you don&apos;t have to open another port, pass it to the client, open firewalls etc. &lt;/p&gt;

&lt;p&gt;Maybe the system console can be improved to also output json? I know some of the pages are already doing it (e.g. &lt;tt&gt;/system/console/bundles&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="16194464" author="alex.parvulescu" created="Fri, 6 Oct 2017 11:23:30 +0000"  >&lt;p&gt;I&apos;m really not familiar with the sling options here, but I know there was an issue recently to expose the same info via the inventory plugin (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6215&quot; title=&quot;Dump index stats and index definitions &quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6215&quot;&gt;&lt;del&gt;OAK-6215&lt;/del&gt;&lt;/a&gt;). does the following link work for you? &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There are multiple indexing lanes and you have to know for which one to wait.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, here we&apos;re probably going to need to monitor the &apos;async=fulltext-async&apos; lane&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://localhost:4502/system/console/status-oak-index-stats.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/status-oak-index-stats.json&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ninja edit, &apos;fulltext-async&apos; is probably the one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16194676" author="rombert" created="Fri, 6 Oct 2017 14:43:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://localhost:4502/system/console/status-oak-index-stats.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/status-oak-index-stats.json&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wow, that&apos;s some creative use of Json &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So what should I be looking at?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    &quot;Async Indexers State&quot;,
    &quot;====================&quot;,
    &quot;Number of async indexer lanes : 2&quot;,
    &quot;&quot;,
    &quot;fulltext-async&quot;,
    &quot;    Last indexed to      : 2017-10-06T17:30:34.986+03:00&quot;,
    &quot;    Status              : done&quot;,
    &quot;    Failing             : false&quot;,
    &quot;    Paused              : false&quot;,
    &quot;&quot;,
    &quot;async&quot;,
    &quot;    Last indexed to      : 2017-10-06T17:30:32.578+03:00&quot;,
    &quot;    Status              : done&quot;,
    &quot;    Failing             : false&quot;,
    &quot;    Paused              : false&quot;,
    &quot;&quot;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Assume I upload a document at time=T, should I for wait for both lames to be &quot;Status: done&quot; and &quot;last indexed to&quot; after T ?&lt;/p&gt;</comment>
                            <comment id="16194682" author="rombert" created="Fri, 6 Oct 2017 14:46:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://localhost:8080/system/sling/monitoring/mbeans/org/apache/jackrabbit/oak.tidy.2.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/sling/monitoring/mbeans/org/apache/jackrabbit/oak.tidy.2.json&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s probably a more structured approach, and I assume that MBean format is more or less published API. And I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; that a implementing as a rule would be best, but probably as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; mentioned this should be done over HTTP.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;edit&lt;/em&gt;: typo&lt;/p&gt;</comment>
                            <comment id="16194689" author="volteanu" created="Fri, 6 Oct 2017 14:50:10 +0000"  >&lt;p&gt;You should wait for each lane to &lt;b&gt;start a cycle after T&lt;/b&gt; and finish (after T), but the MBean doesn&apos;t provide all this info. That&apos;s why you basically need to wait for two &quot;last indexed&quot; after T...&lt;br/&gt;
BTW, there&apos;s something about NRT indexing that might interfere :/&lt;/p&gt;</comment>
                            <comment id="16194717" author="rombert" created="Fri, 6 Oct 2017 15:06:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; - so what would be missing here? The times for both the start and the end of the indexing cycle?&lt;/p&gt;</comment>
                            <comment id="16194726" author="volteanu" created="Fri, 6 Oct 2017 15:12:06 +0000"  >&lt;p&gt;Yes, the start time of the same cycle as &quot;last indexed&quot; (both should be updated at the end of a cycle).&lt;/p&gt;</comment>
                            <comment id="16195132" author="rombert" created="Fri, 6 Oct 2017 19:34:22 +0000"  >&lt;p&gt;Anyway, taking a step back, I&apos;ve been looking at the logs. Since this is Oak 1.6, this seems to be hitting the following code in &lt;tt&gt;QueryImpl&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; message = &lt;span class=&quot;code-quote&quot;&gt;&quot;Traversal query (query without index): &quot;&lt;/span&gt; + statement + &lt;span class=&quot;code-quote&quot;&gt;&quot;; consider creating an index&quot;&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (traversal) {
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; OK:
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; WARN:
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!potentiallySlowTraversalQueryLogged) {
                    LOG.info(message);
                    potentiallySlowTraversalQueryLogged = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; FAIL:
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!potentiallySlowTraversalQueryLogged) {
                    LOG.warn(message);
                    potentiallySlowTraversalQueryLogged = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(message);
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the message is logged at info level, the query is not aborted. And I only see INFO messages, which means that technically the query should have been executed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02.10.2017 13:14:05.469 *INFO* [127.0.0.1 [1506939245456] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.523 *INFO* [127.0.0.1 [1506939245519] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.580 *INFO* [127.0.0.1 [1506939245577] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.642 *INFO* [127.0.0.1 [1506939245636] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.700 *INFO* [127.0.0.1 [1506939245698] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.756 *INFO* [127.0.0.1 [1506939245754] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.811 *INFO* [127.0.0.1 [1506939245809] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
02.10.2017 13:14:05.868 *INFO* [127.0.0.1 [1506939245865] GET /testing/fullTextQuery HTTP/1.1] org.apache.jackrabbit.oak.query.QueryImpl Traversal query (query without index): SELECT * FROM [nt:base] AS s WHERE CONTAINS(s.*, $queryText); consider creating an index
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does this mean that full text queries don&apos;t work in traversal mode or is there something else going on here?&lt;/p&gt;</comment>
                            <comment id="16195170" author="kwin" created="Fri, 6 Oct 2017 19:58:05 +0000"  >&lt;p&gt;I guess with traversing we just run into a timeout because it takes way too long for the IT.&lt;/p&gt;</comment>
                            <comment id="16311340" author="tmueller" created="Thu, 4 Jan 2018 13:47:54 +0000"  >&lt;p&gt;I wouldn&apos;t use the JMX bean, as that might change in the future.&lt;/p&gt;

&lt;p&gt;What I would do is: create a method &quot;waitForAsyncIndex&quot;, and call that before you run queries. That way, you will only have to call this method, and if changes are needed, change this method. In that method, do the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add a node &quot;/temp/node&amp;lt;random&amp;gt;&quot;, with indexed property set to a random value. Ensure a fulltext index can be used for this content.&lt;/li&gt;
	&lt;li&gt;In a lop, do the following&lt;/li&gt;
	&lt;li&gt;Query for that node using something like &lt;tt&gt;/jcr:root/tmp//*[jcr:contains($value)] option(traversal fail)&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;The &quot;option(traversal fail)&quot; will ensure the query fails with an exception if the index is not initialized&lt;/li&gt;
	&lt;li&gt;If the newly added node is return, end the loop&lt;/li&gt;
	&lt;li&gt;Remove the temporary node&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16316872" author="rombert" created="Mon, 8 Jan 2018 19:43:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, that sounds like a solid approach. Does the &lt;tt&gt;option(traversal fail)&lt;/tt&gt; syntax work on all versions of Oak or is it restricted to specific ones? We&apos;re still running 1.6 in Sling ( though that may change soon ).&lt;/p&gt;</comment>
                            <comment id="16353624" author="tmueller" created="Tue, 6 Feb 2018 09:24:58 +0000"  >&lt;p&gt;&quot;option(traversal fail)&quot; works with Oak 1.5.13 and newer (see &lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/query/query-engine.html#Query_Option_Traversal&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-4888&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-4888&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16353650" author="kwin" created="Tue, 6 Feb 2018 09:47:01 +0000"  >&lt;p&gt;Looks good, we should implement a JUnit Rule in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-rules&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-rules&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16365331" author="volteanu" created="Thu, 15 Feb 2018 10:17:33 +0000"  >&lt;p&gt;I&apos;ve started to draft a tool for this in &lt;a href=&quot;https://github.com/volteanu/sling-org-apache-sling-testing-clients/blob/SLING-7169/src/main/java/org/apache/sling/testing/clients/indexing/IndexingPoller.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/volteanu/sling-org-apache-sling-testing-clients/blob/SLING-7169/src/main/java/org/apache/sling/testing/clients/indexing/IndexingPoller.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problems to be solved:&lt;/p&gt;

&lt;p&gt;1.&#160;index definitions to be installed (to cover all the async index lanes)&lt;/p&gt;

&lt;p&gt;2. query servlet - FWIK there&apos;s none available in sling OOTB, so one needs to be created and installed&lt;/p&gt;

&lt;p&gt;3. nodes to be created (depending on the index definitions)&lt;/p&gt;

&lt;p&gt;4. queries to be executed (again depending on the index definitions)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, I will need your help for 1. 3. and 4. Please put drop here any idea for that.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, I know I asked that before, but to double check: is there a sling servlet that accepts queries? If not what would be the easiest way to create one and install it on the fly?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16365507" author="rombert" created="Thu, 15 Feb 2018 13:19:28 +0000"  >&lt;p&gt;Thanks for looking into this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; . There was a query servlet but we removed it because the functionality was a bit confusing (IIRC) - it was bound to a resource but the resource&apos;s path did not play any role in the query.&lt;/p&gt;

&lt;p&gt;The simplest way I think would be to deploy a script (JSP/Sightly) during the test and perform the querying there. The resource type can even match the one of the resource that needs to be indexed, to keep things simple.&lt;/p&gt;</comment>
                            <comment id="16374290" author="volteanu" created="Fri, 23 Feb 2018 12:34:36 +0000"  >&lt;p&gt;2. will&#160;be fixed&#160;in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7509&quot; title=&quot;Add QueryClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7509&quot;&gt;&lt;del&gt;SLING-7509&lt;/del&gt;&lt;/a&gt;.&#160;&lt;/p&gt;</comment>
                            <comment id="16374342" author="tmueller" created="Fri, 23 Feb 2018 13:30:40 +0000"  >&lt;p&gt;As for index definitions to be installed and queries to run: I would recommend installing the indexes and running the queries in /tmp/waitingIndexingDone. Then the index definitions (two of them):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/tmp/waitingIndexingDone/oak:index/

testIndexAsync (oak:QueryIndexDefinition)
type=lucene
async=async
tags=async
indexRules/nt:base/properties/test
  name=test
  analyzed=true

testIndexFulltextAsync (oak:QueryIndexDefinition)
type=lucene
async=fulltext-async
tags=fulltextAsync
indexRules/nt:base/properties/test
  name=test
  analyzed=true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So this covers the &quot;async&quot; and &quot;fulltext-async&quot; lanes. Queries:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/jcr:root/tmp/waitingIndexingDone//*[jcr:contains(@test, &apos;&amp;lt;testVal&amp;gt;&apos;)] 
option(traversal ok, index tag async)

/jcr:root/tmp/waitingIndexingDone//*[jcr:contains(@test, &apos;&amp;lt;testVal&amp;gt;&apos;)] 
option(traversal ok, index tag fulltextAsync)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the same query, twice; once for the index with tag async, and once for the index with tag fulltextAsync.&lt;/p&gt;

&lt;p&gt;Before running the query, a randomly named node with a randomly set testVal needs to be created (and removed at the end). The query is re-run until it returns the expected nodes.&lt;/p&gt;</comment>
                            <comment id="16376956" author="volteanu" created="Mon, 26 Feb 2018 14:32:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, I&apos;ve just encountered a problem: sling launchpad is still using Oak 1.6, which doesn&apos;t support &lt;tt&gt;option(index tag ...)&lt;/tt&gt;. Could we adapt the index definitions and queries to not use that option, but be specific enough to guarantee they are always selected?&lt;/p&gt;</comment>
                            <comment id="16376994" author="rombert" created="Mon, 26 Feb 2018 15:02:22 +0000"  >&lt;p&gt;Also you could wait for Sling to adopt 1.8 - there is nothing blocking from doing that except we need someone to do the work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16377185" author="githubbot" created="Mon, 26 Feb 2018 17:12:50 +0000"  >&lt;p&gt;volteanu opened a new pull request #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16377186" author="githubbot" created="Mon, 26 Feb 2018 17:13:35 +0000"  >&lt;p&gt;volteanu commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#issuecomment-368576193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#issuecomment-368576193&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   should be merged after #5 and #6 &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16377213" author="volteanu" created="Mon, 26 Feb 2018 17:29:42 +0000"  >&lt;p&gt;I&apos;ve&#160;committed a working patch in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR#7&lt;/a&gt;, which introduces the &lt;a href=&quot;https://github.com/volteanu/sling-org-apache-sling-testing-clients/blob/SLING-7169/src/main/java/org/apache/sling/testing/clients/indexing/IndexingClient.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;IndexingClient&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;I&apos;ve tried the patch by:&lt;br/&gt;
1. pause the async index lange&lt;br/&gt;
2. start &lt;/p&gt;
{IndexingClient#waitForAsyncIndexing()}
&lt;p&gt;3. wait 20s to see if the method returns (should not)&lt;br/&gt;
4. resume the lane&lt;br/&gt;
5. the method returns after a few seconds&lt;br/&gt;
6. repeat for the fulltextasync lane&lt;/p&gt;

&lt;p&gt;Note that the patch is based on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7509&quot; title=&quot;Add QueryClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7509&quot;&gt;&lt;del&gt;SLING-7509&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7511&quot; title=&quot;Add importContent to SlingClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7511&quot;&gt;&lt;del&gt;SLING-7511&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The only thing I&apos;m not sure about is whether the queries will always pick the right index (are they specific enough?). Will need &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; advice for this.&lt;/p&gt;

&lt;p&gt;In total, a call to &lt;tt&gt;#waitForAsyncIndexing()&lt;/tt&gt; will potentially:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;create index definitions under &lt;tt&gt;/tmp/test/waitForAsyncIndexing/oak:index&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;create nodes under &lt;tt&gt;/tmp/test/waitForAsyncIndexing/content&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;install a bundle with a jsp exposed as a resource in &lt;tt&gt;/apps/testQuery&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;create a node &lt;tt&gt;/content/testquery&lt;/tt&gt; with the previously created resourceType&lt;/li&gt;
	&lt;li&gt;run queries via the previously created resource&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, do you see any issues with this procedure in the context of 0DT? I want to have this tool working in all the cases.&lt;/p&gt;</comment>
                            <comment id="16378312" author="tmueller" created="Tue, 27 Feb 2018 09:57:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; The queries you have used are problematic. At they stand, they can also use the generic &quot;lucene&quot; index. This we need to prevent. Please change them as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private static final List&amp;lt;String&amp;gt; queries = Arrays.asList(
+            &quot;/jcr:root&quot; + WAIT_FOR_ASYNC_INDEXING_ROOT + &quot;//*[jcr:contains(@testPropAsync, &apos;testval-&quot; + VAL_PLACEHOLDER +&quot;&apos;)] option(traversal ok, index tag async))&quot;,
+            &quot;/jcr:root&quot; + WAIT_FOR_ASYNC_INDEXING_ROOT + &quot;//*[jcr:contains(@testPropFulltextAsync, &apos;testval-&quot; + VAL_PLACEHOLDER + &quot;&apos;)] option(traversal ok, index tag fulltextAsync)&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another change, please replace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&apos;analyzed&apos;: &apos;true&apos;\n&quot; +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;with&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&apos;analyzed&apos;: true\n&quot; +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(technically it still works if the property is a string, however it&apos;s outside of the spec).&lt;/p&gt;
</comment>
                            <comment id="16378681" author="githubbot" created="Tue, 27 Feb 2018 14:40:22 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#issuecomment-368899442&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#issuecomment-368899442&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @volteanu  - you seem to include the changes from #5 and #6 . Can you push a review with just the individual changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;? This would make it easier to review.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16378800" author="tmueller" created="Tue, 27 Feb 2018 15:44:03 +0000"  >&lt;p&gt;For older versions of Oak, if &quot;option(index tag fulltextAsync)&quot; is not available, one option is to run the query with the &quot;explain&quot; feature, and check if the right index is used. If not, then re-run the query until it is. The &quot;explain&quot; feature means: prepend the term &quot;explain &quot; to the query. See &lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/query/grammar-xpath.html#explain&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the docs&lt;/a&gt; for &quot;explain&quot;. This feature is available since Oak 1.0 I believe.&lt;/p&gt;</comment>
                            <comment id="16378807" author="rombert" created="Tue, 27 Feb 2018 15:46:43 +0000"  >&lt;p&gt;Moving to Oak 1.8 is &quot;in progress&quot;, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7446&quot; title=&quot;Support Oak 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7446&quot;&gt;&lt;del&gt;SLING-7446&lt;/del&gt;&lt;/a&gt; . Adding Oak 1.6 support depends on how much of in a hurry you are &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16380082" author="tmueller" created="Wed, 28 Feb 2018 10:04:40 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;. I personally would prefer Oak 1.8, as this solution would be a bit simpler. But either way is fine for me.&lt;/p&gt;</comment>
                            <comment id="16387556" author="volteanu" created="Tue, 6 Mar 2018 10:04:11 +0000"  >&lt;p&gt;After a few iterations, I&apos;ve came up with the following algorithm that works on all the cases (including older sling/oak):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;get configured lanes from &lt;tt&gt;AsyncIndexerService&lt;/tt&gt; (in sling there&apos;s only 1)&lt;/li&gt;
	&lt;li&gt;for each lane:
	&lt;ul&gt;
		&lt;li&gt;create an index&lt;/li&gt;
		&lt;li&gt;create content specific to that index&lt;/li&gt;
		&lt;li&gt;try query with &lt;tt&gt;option(index tag mytag)&lt;/tt&gt;, if it&apos;s not working, drop the option&lt;/li&gt;
		&lt;li&gt;get the plan of the query to make sure it is served by the proper index&lt;/li&gt;
		&lt;li&gt;get number of results&lt;/li&gt;
		&lt;li&gt;repeat until we get 1 result&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There are more details hidden in the patch: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16387640" author="githubbot" created="Tue, 6 Mar 2018 11:19:26 +0000"  >&lt;p&gt;rombert commented on a change in pull request #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172485158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172485158&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/test/resources/simplelogger.properties&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,20 @@&lt;br/&gt;
+#&lt;br/&gt;
+#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+#  distributed with this work for additional information&lt;br/&gt;
+#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+#  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+#  software distributed under the License is distributed on an&lt;br/&gt;
+#  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+#  KIND, either express or implied.  See the License for the&lt;br/&gt;
+#  specific language governing permissions and limitations&lt;br/&gt;
+#  under the License.&lt;br/&gt;
+#&lt;br/&gt;
+&lt;br/&gt;
+org.slf4j.simpleLogger.defaultLogLevel=info&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Isn&apos;t this the default already?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16387715" author="githubbot" created="Tue, 6 Mar 2018 13:03:38 +0000"  >&lt;p&gt;volteanu commented on a change in pull request #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172507986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172507986&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/test/resources/simplelogger.properties&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,20 @@&lt;br/&gt;
+#&lt;br/&gt;
+#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+#  distributed with this work for additional information&lt;br/&gt;
+#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+#  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+#  software distributed under the License is distributed on an&lt;br/&gt;
+#  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+#  KIND, either express or implied.  See the License for the&lt;br/&gt;
+#  specific language governing permissions and limitations&lt;br/&gt;
+#  under the License.&lt;br/&gt;
+#&lt;br/&gt;
+&lt;br/&gt;
+org.slf4j.simpleLogger.defaultLogLevel=info&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Yes, but it&apos;s useful to easily change when you want to debug tests. Should I delete it?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16389313" author="githubbot" created="Wed, 7 Mar 2018 09:34:11 +0000"  >&lt;p&gt;rombert commented on a change in pull request #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7169&quot; title=&quot;FullTextIndexingTest sometimes fails with a timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7169&quot;&gt;SLING-7169&lt;/a&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172784132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-clients/pull/7#discussion_r172784132&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/test/resources/simplelogger.properties&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,20 @@&lt;br/&gt;
+#&lt;br/&gt;
+#  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+#  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+#  distributed with this work for additional information&lt;br/&gt;
+#  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+#  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+#  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+#  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+#  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+#  software distributed under the License is distributed on an&lt;br/&gt;
+#  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+#  KIND, either express or implied.  See the License for the&lt;br/&gt;
+#  specific language governing permissions and limitations&lt;br/&gt;
+#  under the License.&lt;br/&gt;
+#&lt;br/&gt;
+&lt;br/&gt;
+org.slf4j.simpleLogger.defaultLogLevel=info&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I would prefer not adding the file as we tend to get classpath clashes. You can always use a CLI argument for it: `-Dorg.slf4j.simpleLogger.defaultLogLevel=debug`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16389358" author="volteanu" created="Wed, 7 Mar 2018 10:17:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, could you please review the indexing logic? &lt;/p&gt;</comment>
                            <comment id="16409369" author="tmueller" created="Thu, 22 Mar 2018 11:01:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; sorry for the delay. Could you remove this line please? This (&quot;all&quot;) is not part of the index documentation, and it shouldn&apos;t be needed even if it works:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&apos;includePropertyTypes&apos;: &apos;all&apos;,\n&quot; +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16411633" author="volteanu" created="Fri, 23 Mar 2018 16:10:01 +0000"  >&lt;p&gt;&amp;gt; Could you remove this line please? This (&quot;all&quot;) is not part of the index documentation, and it shouldn&apos;t be needed even if it works.&lt;br/&gt;
Done. &lt;/p&gt;

&lt;p&gt;I think the patch is ready for merge, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; could you please handle it?&lt;/p&gt;</comment>
                            <comment id="16418727" author="rombert" created="Thu, 29 Mar 2018 10:39:18 +0000"  >&lt;p&gt;Merged &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; - thanks for the reminder &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Would you also have the time to update &lt;tt&gt;FullIndexingTest&lt;/tt&gt; to use the new API so we can consider this fixed?&lt;/p&gt;</comment>
                            <comment id="16509617" author="rombert" created="Tue, 12 Jun 2018 13:16:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; - ping?&lt;/p&gt;</comment>
                            <comment id="16509624" author="volteanu" created="Tue, 12 Jun 2018 13:30:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, thanks for reminding me. I didn&apos;t have the time to look to &lt;tt&gt;FullIndexingTest&lt;/tt&gt;, but I&apos;ll put it on my list. I&apos;m just afraid the test is not using &lt;tt&gt;sling.testing.clients&lt;/tt&gt; so it might need a bigger refactoring. Will take a look asap.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13140005">SLING-7509</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13140205">SLING-7511</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13256757">SLING-8710</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12889967" name="SLING-7169-logs.tar.gz" size="231562" author="rombert" created="Mon, 2 Oct 2017 14:27:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3krr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7165] CAConfig Impl: Potential data loss when saving multiple nested configuration lists</title>
                <link>https://issues.apache.org/jira/browse/SLING-7165</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;as reported in &lt;a href=&quot;https://wcm-io.atlassian.net/browse/WCON-39:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wcm-io.atlassian.net/browse/WCON-39:&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The following porblem has been discovered by one of our teammates. Consider the following issue.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Config A has a list of objects let&apos;s call B, where B is an array  of objects, whereeach object in B is a label and list of  objects let&apos;s call it C.&lt;/li&gt;
	&lt;li&gt;Create for each  item in B, a list of items  then save.&lt;/li&gt;
	&lt;li&gt;Try to update the label in any item in B, as a result each sublist  under each object in B, will be deleted as a result.&lt;br/&gt;
*&lt;br/&gt;
*The problem is i found it in code, you delete all items in the first level, and as a result in the second level. 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; persistConfigurationCollection(ResourceResolver resourceResolver, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; configResourceCollectionParentPath, ConfigurationCollectionPersistData data) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.config.enabled()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            Resource configResourceParent = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getOrCreateResource(resourceResolver, configResourceCollectionParentPath, data.getProperties());
&lt;span class=&quot;code-comment&quot;&gt;// you delete below all list of items. and subnodes of it
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.deleteChildren(configResourceParent);
            Iterator var5 = data.getItems().iterator();

            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(var5.hasNext()) {
                ConfigurationPersistData item = (ConfigurationPersistData)var5.next();
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = configResourceParent.getPath() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + item.getCollectionItemName();
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getOrCreateResource(resourceResolver, path, item.getProperties());
            }

            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.commit(resourceResolver, configResourceCollectionParentPath);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13106074">SLING-7165</key>
            <summary>CAConfig Impl: Potential data loss when saving multiple nested configuration lists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Sep 2017 15:40:28 +0000</created>
                <updated>Mon, 9 Oct 2017 08:16:00 +0000</updated>
                            <resolved>Fri, 29 Sep 2017 17:01:51 +0000</resolved>
                                    <version>Context-Aware Configuration Impl 1.4.4</version>
                                    <fixVersion>Context-Aware Configuration Impl 1.4.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16186086" author="sseifert@pro-vision.de" created="Fri, 29 Sep 2017 17:01:51 +0000"  >&lt;p&gt;Completed: At revision: 1810138  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kpwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7157] metatype.properties file must not be in OSGI-INF/metatype</title>
                <link>https://issues.apache.org/jira/browse/SLING-7157</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the spec the metatype.properties file must not be inside the OSGI-INF/metatype directory. This is against the spec, so we should move it to OSGI-INF/l10n&lt;br/&gt;
 We probably should also upgrade the maven-scr-plugin for this 1.25.0 or rather switch to OSGi annotations.&lt;/p&gt;

&lt;p&gt;I found the following files:&lt;br/&gt;
 ./bundles/auth/core/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/auth/form/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/commons/log/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/commons/threads/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/extensions/discovery/impl/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/extensions/discovery/oak/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/extensions/settings/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/jcr/classloader/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/jcr/davex/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/jcr/registration/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/jcr/webconsole/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./bundles/jcr/webdav/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/auth/org.apache.sling.auth.xing.login/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/auth/org.apache.sling.auth.xing.oauth/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/extensions/datasource/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/extensions/mongodb/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/extensions/slf4j-mdc/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/extensions/startup-filter/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./contrib/extensions/urlrewriter/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./installer/providers/jcr/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./samples/path-based-rtp/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./samples/workspacepicker/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./testing/junit/core/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;br/&gt;
 ./testing/junit/healthcheck/src/main/resources/OSGI-INF/metatype/metatype.properties&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Module&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Status&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Auth Core&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Auth Form&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Commons Log&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Commons Threads&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Discovery Impl&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Discovery Oak&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Settings&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JCR ClassLoader&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JCR DavEx&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JCR Registration&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JCR WebConsole&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JCR WebDav&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Auth XING Login&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Auth XING Oauth&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Datasource&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8282&quot; title=&quot;DataSource: metatype.properties must not be in OSGI-INF/metatype&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8282&quot;&gt;&lt;del&gt;SLING-8282&lt;/del&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MongoDB Resource Provider&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SLF4J MDC Filter&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ins&gt;Startup Filter&lt;/ins&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;obsolete&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;URL Rewriter&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Installer JCR Provider&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Samples Path-based RTP&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;ins&gt;Samples Workspacepicker&lt;/ins&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;obsolete&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Testing JUnit Core&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Testing JUnit Healthcheck&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13105409">SLING-7157</key>
            <summary>metatype.properties file must not be in OSGI-INF/metatype</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Sep 2017 12:15:58 +0000</created>
                <updated>Mon, 7 Jun 2021 13:44:27 +0000</updated>
                            <resolved>Thu, 23 Apr 2020 10:03:14 +0000</resolved>
                                    <version>JCR Web Console 1.0.2</version>
                    <version>JCR Registration 1.0.2</version>
                    <version>JCR ClassLoader 3.2.2</version>
                    <version>Form Based Authentication 1.0.8</version>
                    <version>Settings 1.3.8</version>
                    <version>Commons Threads 3.2.6</version>
                    <version>Auth Core 1.4.0</version>
                    <version>SLF4J MDC Filter 1.0.0</version>
                    <version>Authentication XING OAuth 0.0.2</version>
                    <version>Authentication XING Login 0.0.2</version>
                    <version>URL Rewriter 0.0.2</version>
                    <version>DataSource Provider 1.0.4</version>
                    <version>NoSQL MongoDB Resource Provider 1.1.0</version>
                    <version>Commons Log 5.0.2</version>
                    <version>Discovery Impl 1.2.12</version>
                    <version>Discovery Oak 1.2.18</version>
                    <version>JCR Davex 1.3.8</version>
                    <version>JCR Webdav 2.3.8</version>
                    <version>JCR Installer 3.1.26</version>
                                    <fixVersion>JCR Web Console 1.1.0</fixVersion>
                    <fixVersion>Settings 1.3.10</fixVersion>
                    <fixVersion>Auth Core 1.4.4</fixVersion>
                    <fixVersion>Mongo Resource Provider 1.0.0</fixVersion>
                    <fixVersion>Authentication XING OAuth 0.0.4</fixVersion>
                    <fixVersion>Authentication XING Login 0.0.4</fixVersion>
                    <fixVersion>URL Rewriter 0.0.4</fixVersion>
                    <fixVersion>Commons Log 5.1.0</fixVersion>
                    <fixVersion>Commons Threads 3.2.10</fixVersion>
                    <fixVersion>SLF4J MDC Filter 1.0.2</fixVersion>
                    <fixVersion>JCR Webdav 2.3.10</fixVersion>
                    <fixVersion>JCR Installer 3.2.0</fixVersion>
                    <fixVersion>Discovery Impl 1.2.14</fixVersion>
                    <fixVersion>JCR Davex 1.3.12</fixVersion>
                    <fixVersion>JCR ClassLoader 3.2.6</fixVersion>
                    <fixVersion>Discovery Oak 1.2.34</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                                                            <comments>
                            <comment id="16182472" author="cziegeler" created="Wed, 27 Sep 2017 12:24:33 +0000"  >&lt;p&gt;Fixed Commons Threads in rev 1809836&lt;/p&gt;</comment>
                            <comment id="16182494" author="cziegeler" created="Wed, 27 Sep 2017 12:39:34 +0000"  >&lt;p&gt;Fixed Commons Log in rev 1809842&lt;/p&gt;</comment>
                            <comment id="16182799" author="kwin" created="Wed, 27 Sep 2017 16:07:20 +0000"  >&lt;p&gt;Wouldn&apos;t it be better to rely on the default localization, which is {{OSGI-INF/&lt;br/&gt;
l10n/&amp;lt;id&amp;gt;}} and at the same time migrate to OSGi6 Metatype annotations instead of manually fiddling around with the metatype.xmls?&lt;/p&gt;</comment>
                            <comment id="16182819" author="cziegeler" created="Wed, 27 Sep 2017 16:16:31 +0000"  >&lt;p&gt;Sure, that&apos;s possible as well. It depends on who ever does the patch against the projects to fix the issue&lt;/p&gt;</comment>
                            <comment id="16264205" author="chetanm" created="Thu, 23 Nov 2017 11:25:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I wish to release JCR Registration 1.0.4 and see this issue referred for that. What changes do I need to make? I see metatype.properties but not metatype.xml so not sure where to refer the new location.&lt;/p&gt;

&lt;p&gt;Also this module uses old annotations but I am again not sure on how to switch to new version of annotation as there is no replacement for References, non anotation type config. So not sure if its worth effort.&lt;/p&gt;

&lt;p&gt;Can you have a look at the module and suggest how to move forward for release &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-registration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-registration&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16264383" author="cziegeler" created="Thu, 23 Nov 2017 14:18:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; We definitely should fix the metatype bug before a release. I think the best option is to move to the new annotations, it seems you were looking at an old official Component annotation. The one from R6 (version 1.3) has a references attribute. I think the other option is to use the latest maven scr plugin which generates correct metatype info, however that one doesn&apos;t work on windows.&lt;/p&gt;</comment>
                            <comment id="16265154" author="chetanm" created="Fri, 24 Nov 2017 10:51:25 +0000"  >&lt;p&gt;Fixed JCR Registration with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7264&quot; title=&quot;Switch to OSGi annotation &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7264&quot;&gt;&lt;del&gt;SLING-7264&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16476813" author="klcodanr" created="Wed, 16 May 2018 04:35:10 +0000"  >&lt;p&gt;Fixed Form Based Authentication with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7671&quot; title=&quot;Switch Form Based Authentication to OSGi annotation &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7671&quot;&gt;&lt;del&gt;SLING-7671&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16864679" author="cziegeler" created="Sat, 15 Jun 2019 13:15:12 +0000"  >&lt;p&gt;Fixed auth core in rev 67546c9&lt;/p&gt;</comment>
                            <comment id="17041653" author="kwin" created="Fri, 21 Feb 2020 08:05:39 +0000"  >&lt;p&gt;Fixed Installer JCR Provider in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-provider-jcr/commit/51780a1d5b0dbda0e053562ea5b21edbf25b4a5f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-provider-jcr/commit/51780a1d5b0dbda0e053562ea5b21edbf25b4a5f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13104830">FELIX-5700</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13120566">SLING-7264</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13224253">SLING-8331</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="13216639">SLING-8282</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kluf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7156] SlingTldLocationsCache makes invalid assumptions about bundle entry URL&apos;s</title>
                <link>https://issues.apache.org/jira/browse/SLING-7156</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SlingTldLocationsCache tracks bundles and scans them for entries using bundle.findEntries(). That is fine, however, it assumes that the returned URLs will have a path that can be found again using bundle.getEntry(url.getPath()). That is not guarantied to work and in this case, unnecessary because it already has the url at this point to begin with. &lt;/p&gt;

&lt;p&gt;The fix is simple, just use the URL it already has instead of getting the path and using it to get the same url again using bundle.getEntry(). &lt;/p&gt;</description>
                <environment></environment>
        <key id="13105350">SLING-7156</key>
            <summary>SlingTldLocationsCache makes invalid assumptions about bundle entry URL&apos;s</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Sep 2017 09:20:41 +0000</created>
                <updated>Mon, 4 Dec 2017 12:04:16 +0000</updated>
                            <resolved>Wed, 27 Sep 2017 09:22:27 +0000</resolved>
                                    <version>Scripting JSP 2.3.2</version>
                                    <fixVersion>Scripting JSP 2.3.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16182231" author="karlpauls" created="Wed, 27 Sep 2017 09:22:27 +0000"  >&lt;p&gt;Done in r1809819.&lt;/p&gt;</comment>
                            <comment id="16276678" author="ianeboston" created="Mon, 4 Dec 2017 12:04:16 +0000"  >&lt;p&gt;Released in Scripting JSP 2.3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3klhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7153] NPE in TopologyWebConsolePlugin</title>
                <link>https://issues.apache.org/jira/browse/SLING-7153</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The below NullPointerException has been witnessed. As the TopologyWebConsolePlugin is for display purpose only, there is no impact on functionality as a result of this (hence this is a minor issue)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18.09.2017 21:20:55.536 *ERROR* [Discovery-AsyncEventSender] org.apache.sling.discovery.oak.TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry: Exception: java.lang.NullPointerException
java.lang.NullPointerException: null
	at org.apache.sling.discovery.oak.TopologyWebConsolePlugin.getResourceResolver(TopologyWebConsolePlugin.java:233)
	at org.apache.sling.discovery.oak.TopologyWebConsolePlugin.updateDiscoveryLiteHistory(TopologyWebConsolePlugin.java:770)
	at org.apache.sling.discovery.oak.TopologyWebConsolePlugin.handleTopologyEvent(TopologyWebConsolePlugin.java:722)
	at org.apache.sling.discovery.commons.providers.base.AsyncTopologyEvent.trigger(AsyncTopologyEvent.java:53)
	at org.apache.sling.discovery.commons.providers.base.AsyncEventSender.run(AsyncEventSender.java:118)
	at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13105021">SLING-7153</key>
            <summary>NPE in TopologyWebConsolePlugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Sep 2017 08:29:18 +0000</created>
                <updated>Wed, 18 Oct 2017 08:31:55 +0000</updated>
                            <resolved>Tue, 10 Oct 2017 11:31:50 +0000</resolved>
                                    <version>Discovery Oak 1.2.14</version>
                                    <fixVersion>Discovery Oak 1.2.22</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16198429" author="egli" created="Tue, 10 Oct 2017 09:43:52 +0000"  >&lt;p&gt;minimalistic fix: not log error in this case but only a log.info - done &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1811654&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16198535" author="egli" created="Tue, 10 Oct 2017 11:31:31 +0000"  >&lt;p&gt;reverted previous fix and instead ignoring the TopologyEvent when the TopologyWebConsolePlugin is not activate - done &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1811654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kjgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7152] Unclosed ResourceResolver in org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2</title>
                <link>https://issues.apache.org/jira/browse/SLING-7152</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SlingWebConsoleSecurityProvider it is handling the authentication but it is not registering a servlet request listener to close the session at the end of the request. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;15.09.2017 18:07:59.044 *INFO* [Apache Sling Resource Resolver Finalizer Thread] org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl Unclosed ResourceResolver was created here:
java.lang.Exception: Opening Stacktrace
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl$ResolverReference.&amp;lt;init&amp;gt;(CommonResourceResolverFactoryImpl.java:521)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.register(CommonResourceResolverFactoryImpl.java:218)
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:101)
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:94)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolverInternal(CommonResourceResolverFactoryImpl.java:263)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolver(CommonResourceResolverFactoryImpl.java:173)
at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryImpl.getResourceResolver(ResourceResolverFactoryImpl.java:105)
at org.apache.sling.auth.core.impl.SlingAuthenticator.getResolver(SlingAuthenticator.java:791)
at org.apache.sling.auth.core.impl.SlingAuthenticator.doHandleSecurity(SlingAuthenticator.java:506)
at org.apache.sling.auth.core.impl.SlingAuthenticator.handleSecurity(SlingAuthenticator.java:460)
at org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2.authenticate(SlingWebConsoleSecurityProvider2.java:69)
at org.apache.felix.webconsole.internal.servlet.OsgiManagerHttpContext.handleSecurity(OsgiManagerHttpContext.java:103)
at org.apache.felix.http.base.internal.service.ServletContextImpl.handleSecurity(ServletContextImpl.java:421)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:57)
at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:587)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
at org.eclipse.jetty.server.Server.handle(Server.java:499)
at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)
at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;We should add this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13105006">SLING-7152</key>
            <summary>Unclosed ResourceResolver in org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Sep 2017 07:14:14 +0000</created>
                <updated>Mon, 27 Aug 2018 07:42:17 +0000</updated>
                            <resolved>Wed, 4 Oct 2017 08:50:36 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16188115" author="asanso" created="Mon, 2 Oct 2017 14:26:57 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/AbstractWebConsoleSecurityProvider.java
===================================================================
--- src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/AbstractWebConsoleSecurityProvider.java	(revision 1810355)
+++ src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/AbstractWebConsoleSecurityProvider.java	(working copy)
@@ -23,8 +23,12 @@
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Dictionary;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.HashSet;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Set;
-
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletRequest;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletRequestEvent;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletRequestListener;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.felix.webconsole.WebConsoleSecurityProvider;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.api.resource.ResourceResolver;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.auth.core.AuthenticationSupport;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.osgi.service.cm.ConfigurationException;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.osgi.service.cm.ManagedService;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.slf4j.Logger;
@@ -35,7 +39,7 @@
  * It handles the configuration of the service.
  */
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AbstractWebConsoleSecurityProvider
-    &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; WebConsoleSecurityProvider, ManagedService {
+    &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; WebConsoleSecurityProvider, ManagedService, ServletRequestListener {
 
     &lt;span class=&quot;code-comment&quot;&gt;// name of the property providing list of authorized users
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; PROP_USERS = &lt;span class=&quot;code-quote&quot;&gt;&quot;users&quot;&lt;/span&gt;;
@@ -86,4 +90,19 @@
         }
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; groups;
     }
+
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void requestDestroyed(ServletRequestEvent sre) {
+        ServletRequest request = sre.getServletRequest();
+        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resolverAttr = request.getAttribute(AuthenticationSupport.REQUEST_ATTRIBUTE_RESOLVER);
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resolverAttr &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ResourceResolver) {
+            ((ResourceResolver) resolverAttr).close();
+            request.removeAttribute(AuthenticationSupport.REQUEST_ATTRIBUTE_RESOLVER);
+        }
+    }
+
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void requestInitialized(ServletRequestEvent sre) {
+        &lt;span class=&quot;code-comment&quot;&gt;//nothing to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
&lt;/span&gt;+    }
 }
Index: src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/ServicesListener.java
===================================================================
--- src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/ServicesListener.java	(revision 1810355)
+++ src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/ServicesListener.java	(working copy)
@@ -22,7 +22,7 @@
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Dictionary;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Hashtable;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.atomic.AtomicBoolean;
-
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletRequestListener;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.felix.webconsole.WebConsoleSecurityProvider;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.launchpad.api.StartupListener;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.launchpad.api.StartupMode;
@@ -171,7 +171,7 @@
         props.put(Constants.SERVICE_DESCRIPTION, &lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Web Console Security Provider 2&quot;&lt;/span&gt;);
         props.put(Constants.SERVICE_VENDOR, &lt;span class=&quot;code-quote&quot;&gt;&quot;The Apache Software Foundation&quot;&lt;/span&gt;);
         &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.provider2Reg = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bundleContext.registerService(
-            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {ManagedService.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), WebConsoleSecurityProvider.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()},
+            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {ManagedService.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), WebConsoleSecurityProvider.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), ServletRequestListener.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()},
                           &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingWebConsoleSecurityProvider2(authSupport, authenticator), props);
         &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.registrationState = State.PROVIDER2;
     }
@@ -182,7 +182,7 @@
         props.put(Constants.SERVICE_DESCRIPTION, &lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Web Console Security Provider&quot;&lt;/span&gt;);
         props.put(Constants.SERVICE_VENDOR, &lt;span class=&quot;code-quote&quot;&gt;&quot;The Apache Software Foundation&quot;&lt;/span&gt;);
         &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.providerReg = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bundleContext.registerService(
-            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {ManagedService.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), WebConsoleSecurityProvider.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()}, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingWebConsoleSecurityProvider(repository), props);
+            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {ManagedService.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), WebConsoleSecurityProvider.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), ServletRequestListener.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()}, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingWebConsoleSecurityProvider(repository), props);
         &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.registrationState = State.PROVIDER;
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;attaching path. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="16188225" author="cziegeler" created="Mon, 2 Oct 2017 14:51:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; Does it solve the problem?&lt;br/&gt;
I&apos;m a little bit unsure about the listener registration. Its not associated with any http context, therefore - if at all - it gets picked up by the deprecated felix http whiteboard. So we should see a deprecation warning. If not, it doesn&apos;t get picked up at all.&lt;/p&gt;</comment>
                            <comment id="16189410" author="asanso" created="Tue, 3 Oct 2017 08:43:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; of course you are right :S&lt;/p&gt;

&lt;p&gt;how about this other (simpler) approach?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/SlingWebConsoleSecurityProvider2.java
===================================================================
--- src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/SlingWebConsoleSecurityProvider2.java	(revision 1810355)
+++ src/main/java/org/apache/sling/extensions/webconsolesecurityprovider/internal/SlingWebConsoleSecurityProvider2.java	(working copy)
@@ -97,6 +97,12 @@
     @Override
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void logout(HttpServletRequest request, HttpServletResponse response) {
         &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.authenticator.logout(request, response);
+        &lt;span class=&quot;code-comment&quot;&gt;//SLING-7152
&lt;/span&gt;+        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resolverAttr = request.getAttribute(AuthenticationSupport.REQUEST_ATTRIBUTE_RESOLVER);
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resolverAttr &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ResourceResolver) {
+            ((ResourceResolver) resolverAttr).close();
+            request.removeAttribute(AuthenticationSupport.REQUEST_ATTRIBUTE_RESOLVER);
+        }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16190945" author="cziegeler" created="Wed, 4 Oct 2017 07:59:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; logout is only called if the user hits the &quot;logout&quot; button in the web console, but not on every request.&lt;br/&gt;
I think the easiest way is to register the request listener with the following two properties:&lt;br/&gt;
osgi.http.whiteboard.context.select=(osgi.http.whiteboard.context.name=*)&lt;br/&gt;
osgi.http.whiteboard.listener=true&lt;/p&gt;

&lt;p&gt;With this the listener will run for every request and do the cleanup. We should probably move this listener to the auth bundle as it will do the close for every context&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13181062">SLING-7857</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13000290">SLING-6011</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13181062">SLING-7857</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kjdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7151] Resources with relative paths aren&apos;t being resolved correctly for overlays</title>
                <link>https://issues.apache.org/jira/browse/SLING-7151</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Our parsys overlay at /apps/foundation/components/parsys isn&apos;t working in AEM 6.3 due to an issue with the way sling is resolving relative paths for resources.&lt;/p&gt;

&lt;p&gt;The error occurs in parsys.jsp at line 120 when the &apos;new&apos; resource is embedded using the cq:include tag. The path being used to resolve the &apos;new&apos; resource is foundation/components/parsys/new. Based off the default configuration in the Apache Sling Resource Resolver Factory OSGI config, the expected behavior is for sling to check for the resource under /apps, and if it&apos;s not there then search under /libs. The problem seems to be that sling is ignoring the default configuration and not doing subsequent searches for relative paths when it doesn&apos;t find the resource under /apps.&lt;/p&gt;

&lt;p&gt;As discussed in this &lt;a href=&quot;https://forums.adobe.com/thread/2332745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;post&lt;/a&gt;, the workaround to fix the particular incident with the parsys is to copy the &apos;new&apos; node from /libs/foundation/components/parsys to our overlay under /apps. However, this doesn&apos;t solve the overarching issue of sling not resolving the relative path correctly which could impact other parts of the site where we&apos;re including resources on pages using relative paths.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the code for parsys.jsp as well as screenshots of our overlay under /apps and the original component under /libs.&lt;/p&gt;</description>
                <environment>AEM 6.3</environment>
        <key id="13104803">SLING-7151</key>
            <summary>Resources with relative paths aren&apos;t being resolved correctly for overlays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mahicks11">Marcus Hicks</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Sep 2017 14:30:25 +0000</created>
                <updated>Tue, 26 Sep 2017 19:26:23 +0000</updated>
                            <resolved>Tue, 26 Sep 2017 19:26:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16179167" author="rombert" created="Mon, 25 Sep 2017 15:27:12 +0000"  >&lt;p&gt;I&apos;ve deleted the parsys.jsp file as I believe it does not belong here based on the license header:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;This software is the confidential and proprietary information of
  Day Management AG, (&quot;Confidential Information&quot;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you please attach a reproducible case that works on top of Sling?&lt;/p&gt;</comment>
                            <comment id="16181293" author="mahicks11" created="Tue, 26 Sep 2017 18:37:44 +0000"  >&lt;p&gt;Since the issue exists with AEM&apos;s foundation code it&apos;ll be hard to provide a reproducible case without including proprietary code. I&apos;ve created a support ticket with Adobe for this matter. This ticket can be closed.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="16181384" author="rombert" created="Tue, 26 Sep 2017 19:26:23 +0000"  >&lt;p&gt;I&apos;m going to resolve this as incomplete then. If you do manage to get a reproducible test case outside of AEM feel free to reopen this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12888883" name="apps_parsys_overlay.PNG" size="10681" author="mahicks11" created="Mon, 25 Sep 2017 14:28:36 +0000"/>
                            <attachment id="12888882" name="libs_parsys_overlay.PNG" size="7269" author="mahicks11" created="Mon, 25 Sep 2017 14:28:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ki4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7144] JcrSystemUserValidator should identify disabled users as invalid</title>
                <link>https://issues.apache.org/jira/browse/SLING-7144</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;JcrSystemUserValidator&lt;/tt&gt; verifies that a given service mapping points to an existing, valid system user. However, it doesn&apos;t take &lt;tt&gt;User.isDisabled()&lt;/tt&gt; into account.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13104305">SLING-7144</key>
            <summary>JcrSystemUserValidator should identify disabled users as invalid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Sep 2017 14:42:00 +0000</created>
                <updated>Fri, 13 Oct 2017 11:57:42 +0000</updated>
                            <resolved>Fri, 13 Oct 2017 11:57:42 +0000</resolved>
                                    <version>JCR Resource 3.0.4</version>
                                    <fixVersion>JCR Resource 3.0.6</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16176518" author="anchela" created="Fri, 22 Sep 2017 14:46:36 +0000"  >&lt;p&gt;Proposed patch for &lt;tt&gt;JcrSystemUserValidator&lt;/tt&gt;.&lt;br/&gt;
I wanted to write tests for the change and additionally extend the somewhat poor test coverage with &lt;tt&gt;JcrSystemUserValidatorTest&lt;/tt&gt;... unfortunately that test is based on &lt;tt&gt;RepositoryTestBase&lt;/tt&gt;, which afaik cannot run against an Oak repository and thus cannot be used for the tests I wanted to contribute. &lt;tt&gt;JcrSystemUserValidatorTest.patch&lt;/tt&gt; illustrates how the tests should look like IMHO but they currently fail due to the dependency to the Jackrabbit 2.x... maybe it would be time to adjust &lt;tt&gt;RepositoryBaseTest&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="16176523" author="anchela" created="Fri, 22 Sep 2017 14:47:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, since you have been working on reflecting &lt;tt&gt;User.disable&lt;/tt&gt; in the repo-init code base, you may also want to take care of this bug report? Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="16202099" author="anchela" created="Thu, 12 Oct 2017 15:21:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, ping &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; If the Sling community is not fixing this bug I will create my own &lt;tt&gt;Validator&lt;/tt&gt; in AEM... just let me know.&lt;/p&gt;</comment>
                            <comment id="16203434" author="karlpauls" created="Fri, 13 Oct 2017 11:54:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, I looked at your patch and I think it makes a lot of sense - thanks a lot! I applied it in r1812116. &lt;/p&gt;

&lt;p&gt;However, I don&apos;t have the time to look into adjusting RepositoryBaseTest away from Jackrabbit in order to make your test work (and probably are the wrong person due to lack of knowledge to begin with). But I definitely agree that it is a needed test - hence, I create &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7199&quot; title=&quot;Improve the JcrSystemUserValidatorTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7199&quot;&gt;SLING-7199&lt;/a&gt;. Hopefully, somebody with more knowledge than I can pick it up later. &lt;/p&gt;

&lt;p&gt;Do you need a release of the jcr.resource bundle? &lt;/p&gt;</comment>
                            <comment id="16203439" author="karlpauls" created="Fri, 13 Oct 2017 11:57:42 +0000"  >&lt;p&gt;I think we can resolve this issue.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, please reopen this issue if I messed it up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13109246">SLING-7199</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12888513" name="JcrSystemUserValidatorTest.patch" size="4197" author="angela" created="Fri, 22 Sep 2017 14:46:34 +0000"/>
                            <attachment id="12888514" name="SLING-7144.patch" size="3087" author="angela" created="Fri, 22 Sep 2017 14:42:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kf2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7143] Support complete set of symbols for paths</title>
                <link>https://issues.apache.org/jira/browse/SLING-7143</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6774&quot; title=&quot;Allowed character set in repo init is too restrictive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6774&quot;&gt;&lt;del&gt;SLING-6774&lt;/del&gt;&lt;/a&gt; and suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, we should support a complete set of symbols for paths.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oli&quot; class=&quot;user-hover&quot; rel=&quot;oli&quot;&gt;oli&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103839">SLING-7143</key>
            <summary>Support complete set of symbols for paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Sep 2017 07:44:17 +0000</created>
                <updated>Mon, 16 Mar 2020 10:11:49 +0000</updated>
                                            <version>Repoinit Parser 1.2.0</version>
                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16174449" author="bdelacretaz" created="Thu, 21 Sep 2017 08:45:52 +0000"  >&lt;p&gt;Having written the parser grammar, I have a vague feeling that doing this might introduce some parser ambiguities, so please make sure any changes are covered by solid tests. I might be wrong, but it&apos;s good to have solid tests anyway &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16948258" author="bdelacretaz" created="Thu, 10 Oct 2019 06:47:03 +0000"  >&lt;p&gt;At this point I&apos;m not sure how to specify unicode &quot;character classes&quot; in the grammar, i.e. how to replace regular expression ranges like &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;a&amp;quot;-&amp;quot;z&amp;quot;&amp;#93;&lt;/span&gt; | &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;A&amp;quot;-&amp;quot;Z&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt; with variants that include the appropriate Unicode characters. Will need to dig deeper unless someone knows the answer.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/10934082/are-shorthand-character-classes-such-as-d-not-supported-in-javacc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/10934082/are-shorthand-character-classes-such-as-d-not-supported-in-javacc&lt;/a&gt; has info on how to define our own such character classes in the grammar, that might be helpful.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13062331">SLING-6774</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kc73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7142] Allow to pull a set of packages per request</title>
                <link>https://issues.apache.org/jira/browse/SLING-7142</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, the sync/reverse agent pull one package per request. &lt;br/&gt;
This protocol is really simple and it is already possible to decrease the polling interval (via the trigger) to increase the sync throughput. &lt;br/&gt;
However, establishing a request has a cost which is applied to every packages.&lt;/p&gt;

&lt;p&gt;In order to improve the throughput when processing the queue, we could avoid establishing most of the request, by allowing to pull more than one package per request.&lt;br/&gt;
In order to allow for some flow control, we could let the receiving side define how many packages could be fetched (similarly to how TCP works).&lt;/p&gt;

&lt;p&gt;Allowing to pull more than more package per request adds more complexity to the code, so we may first build a PoC to demonstrate if the improved throughput is worth the added complexity.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103590">SLING-7142</key>
            <summary>Allow to pull a set of packages per request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Sep 2017 12:43:39 +0000</created>
                <updated>Mon, 2 Oct 2017 10:26:43 +0000</updated>
                                            <version>Content Distribution Core 0.2.8</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16187840" author="teofili" created="Mon, 2 Oct 2017 10:26:43 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, it sounds like a possibly nice improvement, but I agree on the code complexity. Maybe we should look at streaming packages in a single requests or directly create &quot;multi packages&quot; (bigger payload). &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kanj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7140] Support redirects to URLs provided by the underlying datastore.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7140</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Incorporate changes to allow &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; to work in Sling, &lt;br/&gt;
Patch available at &lt;a href=&quot;https://github.com/apache/sling/compare/trunk...ieb:OAK-6575-3-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...ieb:OAK-6575-3-2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Cant me applied until &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; is released in a version suitable for use in Sling.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103283">SLING-7140</key>
            <summary>Support redirects to URLs provided by the underlying datastore.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>Sling-10-ReleaseNotes</label>
                    </labels>
                <created>Tue, 19 Sep 2017 16:18:21 +0000</created>
                <updated>Mon, 17 Jan 2022 09:46:54 +0000</updated>
                            <resolved>Mon, 23 Oct 2017 10:57:08 +0000</resolved>
                                    <version>Servlets Get 2.1.26</version>
                    <version>JCR Resource 3.0.4</version>
                                    <fixVersion>Servlets Get 2.1.28</fixVersion>
                    <fixVersion>JCR Resource 3.0.6</fixVersion>
                    <fixVersion>API 2.16.4</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16185668" author="ianeboston" created="Fri, 29 Sep 2017 10:28:17 +0000"  >&lt;p&gt;Update from testing, also reported in Oak &lt;/p&gt;

&lt;p&gt;Tested against Sling Trunk using a patch backported to Oak 1.6. The patches are&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/jackrabbit-oak/compare/1.6...ieb:OAK-6575-1.6-3?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/compare/1.6...ieb:OAK-6575-1.6-3?expand=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and in Sling &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/compare/trunk...ieb:OAK-6575-3-2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...ieb:OAK-6575-3-2?expand=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There were 2 fixes to the Oak patch.&lt;br/&gt;
Its not viable to put a 4096 bit PKCS8 encoded private key into a OSGi property. The Sling provisioning model truncates it and its hard to manage, so this has been changed to a file. The file can be relative, but must be resolvable from the working directory of the JVM.&lt;br/&gt;
In addition a configurable minimum size limit has been added so that small files, can be streamed via the JVM if desired.&lt;br/&gt;
Also added is a log line to allow audit of all external urls. This might want to be at debug level, but for the moment it is at info level.&lt;/p&gt;

&lt;p&gt;This changes need to be forward ported to Oak Trunk, although Sling doesn&apos;t currently use Oak 1.8-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="16185709" author="githubbot" created="Fri, 29 Sep 2017 11:25:49 +0000"  >&lt;p&gt;GitHub user ieb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/252&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7140&quot; title=&quot;Support redirects to URLs provided by the underlying datastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7140&quot;&gt;&lt;del&gt;SLING-7140&lt;/del&gt;&lt;/a&gt; Support redirects to URLs provided by the underlying datastore.&lt;/p&gt;

&lt;p&gt;    This pull request contains API and pom changes which is why I am not committing it directly myself.&lt;br/&gt;
    It should be squashed into a Single commit.&lt;br/&gt;
    It depends on &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/70&lt;/a&gt; being merged and OAK 1.6.5 (or 6) being released. It will break a build if Oak 1.6.5-SNAPSHOT does not contain that pull request.&lt;/p&gt;

&lt;p&gt;    It enables Sling to redirect requests for binaries held in Oak in a S3 DataStore to be served by an appropriately configured CloudFront instance.&lt;/p&gt;

&lt;p&gt;    For more info and documentation see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7140&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7140&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-6575&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ieb/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ieb/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt;-3-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/252.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/252.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #252&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1127fb77567f1ca48dc243e4700ed0c0c9dc2808&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-07T08:57:49Z&lt;/p&gt;

&lt;p&gt;    Proposed implementation in Sling for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; patch 3&lt;/p&gt;

&lt;p&gt;commit a491430a8b30ec84ef66985f3af81a758eab6022&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-13T23:26:49Z&lt;/p&gt;

&lt;p&gt;    Using ExternalizableInputStream&lt;/p&gt;

&lt;p&gt;commit 66623c7398743aeb141c36f817a850e90d05edf4&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T11:10:30Z&lt;/p&gt;

&lt;p&gt;    Changed suggested by Carsten on the issue, also added Private URI to the interface&lt;/p&gt;

&lt;p&gt;commit c4d504ef0efc6c9d0bb85060b4b7e793880fe0d9&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T12:52:03Z&lt;/p&gt;

&lt;p&gt;    Fixed URIConverter&lt;/p&gt;

&lt;p&gt;commit e11ec2de49b9ba76d762b342439aeeb6f50617c1&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T15:03:58Z&lt;/p&gt;

&lt;p&gt;    Using HelperData instead of Adaptable&lt;/p&gt;

&lt;p&gt;commit 7e58c32daa0ce4e1d16ce57b7f5cfa32bd9d876d&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T15:11:11Z&lt;/p&gt;

&lt;p&gt;    Fixed missing annotations&lt;/p&gt;

&lt;p&gt;commit e2ded1ccb771a73681d011554deda9a34df398f0&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-26T09:34:51Z&lt;/p&gt;

&lt;p&gt;    Fixed build issues&lt;/p&gt;

&lt;p&gt;commit 9395dcd3b7b8f01de82d608037890ec6aac0c51d&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-26T10:54:02Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;trunk&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt;-3-2&lt;/p&gt;

&lt;p&gt;commit 7a35cc189031e492f85363b3b1c8b5c3f19ce544&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-29T10:10:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; Fixed startup issues&lt;/p&gt;

&lt;p&gt;commit bdce6975a77645e7e88879407c3b2e77fe2c1265&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-29T10:18:57Z&lt;/p&gt;

&lt;p&gt;    Fixing imports, need to fix my IDE.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16185711" author="ianeboston" created="Fri, 29 Sep 2017 11:27:47 +0000"  >&lt;p&gt;Pull request:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/pull/252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/252&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This depends on&lt;br/&gt;
Oak 1.6 Branch &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/70&lt;/a&gt;&lt;br/&gt;
there is also &lt;br/&gt;
Oak Trunk &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/69&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Documentation to follow in a Gist&lt;/p&gt;</comment>
                            <comment id="16185731" author="ianeboston" created="Fri, 29 Sep 2017 11:49:17 +0000"  >&lt;p&gt;Configuration information &lt;a href=&quot;https://gist.github.com/ieb/f9e044e4033b8f810238fe9a27eeaa78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/ieb/f9e044e4033b8f810238fe9a27eeaa78&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16208825" author="githubbot" created="Wed, 18 Oct 2017 05:16:11 +0000"  >&lt;p&gt;Github user ieb closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/252&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16209238" author="githubbot" created="Wed, 18 Oct 2017 12:28:36 +0000"  >&lt;p&gt;GitHub user ieb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/262&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7140&quot; title=&quot;Support redirects to URLs provided by the underlying datastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7140&quot;&gt;&lt;del&gt;SLING-7140&lt;/del&gt;&lt;/a&gt;  Support redirects to URLs provided by the underlying datastore.&lt;/p&gt;

&lt;p&gt;    This pull request does not require any changes in Oak.&lt;br/&gt;
    It introduces 2 interfaces to Sling API to allow a ResourceProvider to implement URIProvider that will allow Sing to redirect to a direct URL on get operations. If no URIProviders are implemented, no redirects are issued. The URIProvider implementation would normally be implemented inside the ResourceProvider eg in the case of a S3DataStore for Oak, in the bundle where that code is implemented. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ieb/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ieb/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt;-3-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/262.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/262.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #262&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1127fb77567f1ca48dc243e4700ed0c0c9dc2808&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-07T08:57:49Z&lt;/p&gt;

&lt;p&gt;    Proposed implementation in Sling for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; patch 3&lt;/p&gt;

&lt;p&gt;commit a491430a8b30ec84ef66985f3af81a758eab6022&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-13T23:26:49Z&lt;/p&gt;

&lt;p&gt;    Using ExternalizableInputStream&lt;/p&gt;

&lt;p&gt;commit 66623c7398743aeb141c36f817a850e90d05edf4&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T11:10:30Z&lt;/p&gt;

&lt;p&gt;    Changed suggested by Carsten on the issue, also added Private URI to the interface&lt;/p&gt;

&lt;p&gt;commit c4d504ef0efc6c9d0bb85060b4b7e793880fe0d9&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T12:52:03Z&lt;/p&gt;

&lt;p&gt;    Fixed URIConverter&lt;/p&gt;

&lt;p&gt;commit e11ec2de49b9ba76d762b342439aeeb6f50617c1&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T15:03:58Z&lt;/p&gt;

&lt;p&gt;    Using HelperData instead of Adaptable&lt;/p&gt;

&lt;p&gt;commit 7e58c32daa0ce4e1d16ce57b7f5cfa32bd9d876d&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-18T15:11:11Z&lt;/p&gt;

&lt;p&gt;    Fixed missing annotations&lt;/p&gt;

&lt;p&gt;commit e2ded1ccb771a73681d011554deda9a34df398f0&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-26T09:34:51Z&lt;/p&gt;

&lt;p&gt;    Fixed build issues&lt;/p&gt;

&lt;p&gt;commit 9395dcd3b7b8f01de82d608037890ec6aac0c51d&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-26T10:54:02Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;trunk&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt;-3-2&lt;/p&gt;

&lt;p&gt;commit 7a35cc189031e492f85363b3b1c8b5c3f19ce544&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-29T10:10:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6575&quot; title=&quot;Provide a secure external URL to a DataStore binary.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6575&quot;&gt;&lt;del&gt;OAK-6575&lt;/del&gt;&lt;/a&gt; Fixed startup issues&lt;/p&gt;

&lt;p&gt;commit bdce6975a77645e7e88879407c3b2e77fe2c1265&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-09-29T10:18:57Z&lt;/p&gt;

&lt;p&gt;    Fixing imports, need to fix my IDE.&lt;/p&gt;

&lt;p&gt;commit 8762073fa7efec62a2fa25937b13acc804805e46&lt;br/&gt;
Author: Ian Boston &amp;lt;ieb@tfd.co.uk&amp;gt;&lt;br/&gt;
Date:   2017-10-18T12:22:11Z&lt;/p&gt;

&lt;p&gt;    Refactored to eliminate Oak dependencies&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16209242" author="ianeboston" created="Wed, 18 Oct 2017 12:29:36 +0000"  >&lt;p&gt;New Pull request created that has no dependencies on any changes in Oak.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/pull/262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/262&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This might need an RTC as adds to the Sling API&lt;/p&gt;</comment>
                            <comment id="16210903" author="ianeboston" created="Thu, 19 Oct 2017 11:48:02 +0000"  >&lt;p&gt;Applied in 2 commits due to the SVN to Git migration.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/ec3844be2612f48cb3e599792bc05c36c36cc031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/ec3844be2612f48cb3e599792bc05c36c36cc031&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
r1812621&lt;/p&gt;</comment>
                            <comment id="16210904" author="githubbot" created="Thu, 19 Oct 2017 11:48:47 +0000"  >&lt;p&gt;Github user ieb closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/262&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16213865" author="cziegeler" created="Sat, 21 Oct 2017 11:58:07 +0000"  >&lt;p&gt;Sorry, but I have to reopen this as this increases the minor version number of the api package, breaking all existing resource resolver implementations - although the change is not touching the resource resolver package.&lt;br/&gt;
Therefore I suggest to move this new functionality into a separate package, the resource package is already overloaded anyway.&lt;/p&gt;</comment>
                            <comment id="16213959" author="ianeboston" created="Sat, 21 Oct 2017 15:18:40 +0000"  >&lt;p&gt;Did you see this commit ?&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/ec3844be2612f48cb3e599792bc05c36c36cc031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/ec3844be2612f48cb3e599792bc05c36c36cc031&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It updates the ResourceResolver so that it doesnt break. The patch passed a full build of Sling before it was applied, although due to the SVN-Git migration, it had to be done in multiple commits. I see the Jira only has 1 commit listed so I guess it hasnt been integrated with Git yet.&lt;/p&gt;

&lt;p&gt;The reason that it was not in the main commit was that the SVN-&amp;gt;Git migration only moved that bundle and none of the others.&lt;/p&gt;

&lt;p&gt;I have no problem if the packages are moved to somewhere else in the Sling API bundle.&lt;/p&gt;

&lt;p&gt;I did open a RTC on sling-dev, but no one replied to it after 24h.&lt;/p&gt;
</comment>
                            <comment id="16213961" author="ianeboston" created="Sat, 21 Oct 2017 15:20:59 +0000"  >&lt;p&gt;FYI: here are all the commits related to this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/search?q=org%3Aapache+SLING-7140&amp;amp;type=Commits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/search?q=org%3Aapache+SLING-7140&amp;amp;type=Commits&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16213977" author="cziegeler" created="Sat, 21 Oct 2017 15:46:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; Yes, I saw that commit. Users of this new feature should only need the updated API and the updated resource provider implementation (JCR in this case). An update of the resource resolver implementation is not necessary as that one is really doing nothing for this feature&lt;/p&gt;</comment>
                            <comment id="16214260" author="ianeboston" created="Sun, 22 Oct 2017 10:15:14 +0000"  >&lt;p&gt;Agreed. The version change in the ResourceResolver didn&apos;t feel right at the time. Strange that none of the IT tests I ran picked up the other issues. Probably because PaxExam doesn&apos;t test the current trunk unless to change it also.&lt;/p&gt;

&lt;p&gt;I put the interfaces in the resource api because I didnt want to create a new package, but if its Ok to create a new package, what should it be called ?&lt;/p&gt;

&lt;p&gt;A new package will be better also  since I can already think of some use cases where URIProvder.Scope would need to be extended to allow CRUD.&lt;/p&gt;


&lt;p&gt;I think it should be under resource, since it&apos;s always directly related to a resource and could be used by any resource provider, not just JCR or the current Oak implementation of JCR. &lt;/p&gt;


&lt;p&gt;org.apache.sling.api.resource.convert &lt;br/&gt;
org.apache.sling.api.resource.providers&lt;br/&gt;
org.apache.sling.api.resource.external&lt;br/&gt;
org.apache.sling.api.resource.ext&lt;br/&gt;
org.apache.sling.api.resource.extension&lt;/p&gt;

&lt;p&gt;Whatever the package name is, tt would need to have the Interfaces in this commit &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/a228b98f3a58409507b98e0d5b2d8e52b755d94f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-api/commit/a228b98f3a58409507b98e0d5b2d8e52b755d94f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16214381" author="cziegeler" created="Sun, 22 Oct 2017 17:17:21 +0000"  >&lt;p&gt;external sounds good to me (ext is ambigious, providers, extension or convert too general)&lt;/p&gt;</comment>
                            <comment id="16214961" author="ianeboston" created="Mon, 23 Oct 2017 10:57:09 +0000"  >&lt;p&gt;Sling API Change made as discussed.&lt;br/&gt;
Change to ResourceResolver bundle reverted.&lt;br/&gt;
Other bundles adjusted.&lt;/p&gt;

&lt;p&gt;I did not change the sling started sling.txt provisioning model since it seems that no one is adding SNAPSHOT dependencies into that bundle. &lt;/p&gt;

&lt;p&gt;When API 2.16.4, JCR Resource 3.0.6, Sevlets Get 2.1.28 is released these will need to be updated in a single operation since both Servlet Get and JCR Resource depend on API 2.16.4 (importing org.apache.sling.apa.resource.external version 1.0.0)&lt;/p&gt;</comment>
                            <comment id="17475666" author="kwin" created="Thu, 13 Jan 2022 19:14:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; Would you add some documentation to &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/resources.html?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/resources.html?&lt;/a&gt; I added some sentences to &lt;a href=&quot;https://sling.apache.org/documentation/bundles/rendering-content-default-get-servlets.html#streamrendererservlet&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/rendering-content-default-get-servlets.html#streamrendererservlet&lt;/a&gt; already. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13128218">SLING-7350</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13096993">OAK-6575</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13422967">SLING-11067</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13422696">SLING-11061</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k8rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7139] ScriptEngineManagerFactory does not register ScriptEngineFactory references</title>
                <link>https://issues.apache.org/jira/browse/SLING-7139</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It seems that the &lt;tt&gt;bind&lt;/tt&gt; methods are not called any more, the simple fix that I found was&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java b/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java
index fe60415c17..79fef581eb 100644
--- a/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java
+++ b/bundles/scripting/core/src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java
@@ -60,7 +60,9 @@ import org.slf4j.LoggerFactory;
         name = &quot;ScriptEngineFactory&quot;,
         service = ScriptEngineFactory.class,
         policy = ReferencePolicy.DYNAMIC,
-        cardinality = ReferenceCardinality.MULTIPLE
+        cardinality = ReferenceCardinality.MULTIPLE,
+        bind = &quot;bindScriptEngineFactory&quot;,
+        unbind = &quot;unbindScriptEngineFactory&quot;
     )
 )
 public class ScriptEngineManagerFactory implements BundleListener {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13103206">SLING-7139</key>
            <summary>ScriptEngineManagerFactory does not register ScriptEngineFactory references</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 10:02:24 +0000</created>
                <updated>Fri, 29 Sep 2017 07:10:15 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 11:41:21 +0000</resolved>
                                                    <fixVersion>Scripting Core 2.0.48</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16171442" author="rombert" created="Tue, 19 Sep 2017 10:03:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I am not certain why this is happening yet. Do you see a better fix than specifying the method names?&lt;/p&gt;</comment>
                            <comment id="16171460" author="jsedding" created="Tue, 19 Sep 2017 10:11:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; You could move the &lt;tt&gt;&amp;#64;Reference&lt;/tt&gt; annotation to the bind method.&lt;/p&gt;</comment>
                            <comment id="16171473" author="rombert" created="Tue, 19 Sep 2017 10:20:44 +0000"  >&lt;p&gt;I&apos;ll try that, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; . I was curious about the original usage as well - it looked ok to me, not sure why it no longer works after switching to the OSGi R6 annotations.&lt;/p&gt;</comment>
                            <comment id="16171480" author="cziegeler" created="Tue, 19 Sep 2017 10:24:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; If references are part of the @Component annotation then this implies lookup strategy, so neither field nor method injection is considered. So you either move it as suggested by Julian or add bind/unbind. I suggest moving&lt;/p&gt;</comment>
                            <comment id="16171566" author="rombert" created="Tue, 19 Sep 2017 11:41:21 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808864&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808864&lt;/a&gt;, thanks both for commenting.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k8an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7138] Some web console plugins in the &apos;Sling&apos; category don&apos;t appear</title>
                <link>https://issues.apache.org/jira/browse/SLING-7138</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Apparently the inconsistent casing in the category name causes some plugins to not be shown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103182">SLING-7138</key>
            <summary>Some web console plugins in the &apos;Sling&apos; category don&apos;t appear</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 08:09:53 +0000</created>
                <updated>Fri, 29 Sep 2017 07:10:50 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 08:16:24 +0000</resolved>
                                                    <fixVersion>Event 4.2.8</fixVersion>
                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16171283" author="rombert" created="Tue, 19 Sep 2017 08:16:24 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808841&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k85b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7137] Scripting web console plugins no longer listed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7137</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13103181">SLING-7137</key>
            <summary>Scripting web console plugins no longer listed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 08:07:00 +0000</created>
                <updated>Fri, 29 Sep 2017 07:10:15 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 08:15:58 +0000</resolved>
                                                    <fixVersion>Scripting Core 2.0.48</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16171275" author="rombert" created="Tue, 19 Sep 2017 08:15:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808839&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808839&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k853:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7136] Scripting variables web console plugin lists &apos;all&apos; option for each scripting engine</title>
                <link>https://issues.apache.org/jira/browse/SLING-7136</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &apos;all&apos; option should only be present once.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103164">SLING-7136</key>
            <summary>Scripting variables web console plugin lists &apos;all&apos; option for each scripting engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 07:37:41 +0000</created>
                <updated>Fri, 29 Sep 2017 07:10:13 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 10:03:29 +0000</resolved>
                                                    <fixVersion>Scripting Core 2.0.48</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16171284" author="rombert" created="Tue, 19 Sep 2017 08:16:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808840&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808840&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16171445" author="rombert" created="Tue, 19 Sep 2017 10:03:29 +0000"  >&lt;p&gt;Re-resolving. I thought I had introduced a bug, but that was actually &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7139&quot; title=&quot;ScriptEngineManagerFactory does not register ScriptEngineFactory references&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7139&quot;&gt;&lt;del&gt;SLING-7139&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k81j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7135] Sling Model object can&apos;t be instantiated on Java 9 </title>
                <link>https://issues.apache.org/jira/browse/SLING-7135</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;HtlTest.testScriptWithModelUseBean fails with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.sling.scripting.sightly.SightlyException: Identifier org.apache.sling.launchpad.testservices.models.DummyModel cannot be correctly instantiated by the Use API
	at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:78)
	at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:69)
	at org.apache.sling.scripting.sightly.apps.sling.test.htl.model.model_html.render(model_html.java:39)
	at org.apache.sling.scripting.sightly.java.compiler.RenderUnit.render(RenderUnit.java:48)
	at org.apache.sling.scripting.sightly.impl.engine.SightlyCompiledScript.eval(SightlyCompiledScript.java:61)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:386)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.NoPropertyFilter.doFilter(NoPropertyFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.SlingFilter.doFilter(SlingFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
	at org.apache.sling.junit.impl.servlet.TestLogServlet$TestNameLoggingFilter.doFilter(TestLogServlet.java:257)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:848)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:584)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:224)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
	at org.eclipse.jetty.server.Server.handle(Server.java:534)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:108)
	at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)
	at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.NoClassDefFoundError: javax/annotation/PostConstruct
	at org.apache.sling.models.impl.ModelAdapterFactory.invokePostConstruct(ModelAdapterFactory.java:832)
	at org.apache.sling.models.impl.ModelAdapterFactory.createObject(ModelAdapterFactory.java:652)
	at org.apache.sling.models.impl.ModelAdapterFactory.internalCreateModel(ModelAdapterFactory.java:371)
	at org.apache.sling.models.impl.ModelAdapterFactory.createModel(ModelAdapterFactory.java:238)
	at org.apache.sling.scripting.sightly.models.impl.SlingModelsUseProvider.provide(SlingModelsUseProvider.java:126)
	at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:73)
	... 65 more
Caused by: java.lang.ClassNotFoundException: javax.annotation.PostConstruct
	at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:466)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:563)
	at org.apache.sling.launchpad.base.shared.LauncherClassLoader.loadClass(LauncherClassLoader.java:160)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
	at org.apache.felix.framework.ExtensionManager$ExtensionManagerWiring.getClassByDelegation(ExtensionManager.java:1009)
	at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1631)
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1561)
	at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:80)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13103078">SLING-7135</key>
            <summary>Sling Model object can&apos;t be instantiated on Java 9 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Sep 2017 21:03:36 +0000</created>
                <updated>Thu, 23 Aug 2018 21:50:40 +0000</updated>
                            <resolved>Thu, 23 Aug 2018 21:50:40 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16171398" author="kwin" created="Tue, 19 Sep 2017 09:26:32 +0000"  >&lt;p&gt;I guess this is another case, where we referenced an EE class which was previously shipped with SE as well (&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/javax/annotation/PostConstruct.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/javax/annotation/PostConstruct.html&lt;/a&gt;). Although this is included in Java 9: &lt;a href=&quot;http://download.java.net/java/jdk9/docs/api/javax/annotation/package-summary.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.java.net/java/jdk9/docs/api/javax/annotation/package-summary.html&lt;/a&gt; (in the module java.xml.ws.annotation which is marked as deprecated) it is not active by default. The question now is how to come up with a solution which is both compatible with Java 7 and Java 9 as those annotations are not only used from the Models Impl bundle but also from arbitrary bundles which implement a Sling Model.&lt;/p&gt;</comment>
                            <comment id="16171454" author="jsedding" created="Tue, 19 Sep 2017 10:07:38 +0000"  >&lt;p&gt;This is probably not a practical suggestion due to the effort required.&lt;/p&gt;

&lt;p&gt;Build time tooling could read the bytecode and generate a descriptor (to be designed) for each class. The runtime would then analyse the descriptors to call the right methods.&lt;/p&gt;

&lt;p&gt;Technically, I suppose this could even be done at runtime.&lt;/p&gt;</comment>
                            <comment id="16171468" author="rombert" created="Tue, 19 Sep 2017 10:16:52 +0000"  >&lt;p&gt;I think the solution to this this is more of a question for the Felix project, not sure if there is something we can (or should ) do here.&lt;/p&gt;

&lt;p&gt;I&apos;m trying to first enumerate all the problems we find so we can get the &quot;big picture&quot; and then see how to best tackle them. It&apos;s clear though that we need a way to &quot;reach out&quot; to other JDK modules.&lt;/p&gt;</comment>
                            <comment id="16197734" author="karlpauls" created="Mon, 9 Oct 2017 21:34:18 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7186&quot; title=&quot;Update to Felix Framework 5.6.10 and limit system bundle exports to available packages on java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7186&quot;&gt;&lt;del&gt;SLING-7186&lt;/del&gt;&lt;/a&gt; to try and address the missing classes issue.&lt;/p&gt;</comment>
                            <comment id="16285139" author="kwin" created="Sun, 10 Dec 2017 08:28:14 +0000"  >&lt;p&gt;The list of Maven dependencies which can act as replacement for missing packages in Java 9 is listed here: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16566583" author="kwin" created="Thu, 2 Aug 2018 10:18:53 +0000"  >&lt;p&gt;Picking up this old issue: What about adding the bundle &lt;a href=&quot;http://search.maven.org/#artifactdetails%7Cjavax.annotation%7Cjavax.annotation-api%7C1.3%7Cjar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/#artifactdetails%7Cjavax.annotation%7Cjavax.annotation-api%7C1.3%7Cjar&lt;/a&gt; to Slingstart to fix this issue in Java 9? The only issue to solve then is how to not end up with split-packages in Java &amp;lt; 9.&lt;/p&gt;</comment>
                            <comment id="16590849" author="karlpauls" created="Thu, 23 Aug 2018 21:50:33 +0000"  >&lt;p&gt;Fixed with&#160; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7235&quot; title=&quot;Remove requirement for --add-modules java.se.ee&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7235&quot;&gt;&lt;del&gt;SLING-7235&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13117422">SLING-7235</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13103045">SLING-7133</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13108098">SLING-7186</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k7in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7134] Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8</title>
                <link>https://issues.apache.org/jira/browse/SLING-7134</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When starting up the Sling launchpad with Java 9 and accessing &lt;a href=&quot;http://localhost:8080/bin/browser.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/bin/browser.html&lt;/a&gt; I get an empty page and the following stack trace in the error log&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18.09.2017 23:50:44.656 *ERROR* [127.0.0.1 [1505767840754] GET /bin/browser.html HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcesso
rImpl service: Uncaught SlingException
jdk.nashorn.internal.runtime.ECMAException: ReferenceError: &quot;window&quot; is not defined
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ECMAErrors.error(ECMAErrors.java:57)
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ECMAErrors.referenceError(ECMAErrors.java:319)
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ECMAErrors.referenceError(ECMAErrors.java:291)
        at jdk.scripting.nashorn/jdk.nashorn.internal.objects.Global.__noSuchProperty__(Global.java:1615)
        at jdk.scripting.nashorn.scripts/jdk.nashorn.internal.scripts.Script$Recompilation$1$\^eval\_.:program(&amp;lt;eval&amp;gt;:5)
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:652)
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:513)
        at jdk.scripting.nashorn/jdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:517)
        at jdk.scripting.nashorn/jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:420)
        at jdk.scripting.nashorn/jdk.nashorn.api.scripting.NashornScriptEngine.access$300(NashornScriptEngine.java:72)
        at jdk.scripting.nashorn/jdk.nashorn.api.scripting.NashornScriptEngine$3.eval(NashornScriptEngine.java:513)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:386)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
        at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
        at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:211)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:104)
        at org.apache.sling.scripting.jsp.taglib.IncludeTagHandler.dispatch(IncludeTagHandler.java:54)
        at org.apache.sling.scripting.jsp.taglib.AbstractDispatcherTagHandler.doEndTag(AbstractDispatcherTagHandler.java:129)
        at org.apache.jsp.libs.composum.nodes.console.components.codeeditor.editdialog.editdialog_jsp._jspx_meth_sling_005finclude_005f0(edi
tdialog_jsp.java:128)
        at org.apache.jsp.libs.composum.nodes.console.components.codeeditor.editdialog.editdialog_jsp._jspService(editdialog_jsp.java:99)
        at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
        at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
        at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:211)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:104)
        at org.apache.sling.scripting.jsp.taglib.IncludeTagHandler.dispatch(IncludeTagHandler.java:54)
        at org.apache.sling.scripting.jsp.taglib.AbstractDispatcherTagHandler.doEndTag(AbstractDispatcherTagHandler.java:129)
        at org.apache.jsp.libs.composum.nodes.console.browser.dialogs_jsp._jspx_meth_sling_005finclude_005f0(dialogs_jsp.java:391)
        at org.apache.jsp.libs.composum.nodes.console.browser.dialogs_jsp._jspService(dialogs_jsp.java:131)
        at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
        at org.apache.sling.scripting.jsp.taglib.CallTag.doEndTag(CallTag.java:124)
        at org.apache.jsp.libs.composum.nodes.console.browser.browser_jsp._jspx_meth_sling_005fcall_005f1(browser_jsp.java:326)
        at org.apache.jsp.libs.composum.nodes.console.browser.browser_jsp._jspService(browser_jsp.java:133)
        at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
        at org.apache.sling.scripting.jsp.taglib.CallTag.doEndTag(CallTag.java:124)
        at org.apache.jsp.libs.composum.nodes.console.browser.browser_jsp._jspx_meth_sling_005fcall_005f1(browser_jsp.java:326)
        at org.apache.jsp.libs.composum.nodes.console.browser.browser_jsp._jspService(browser_jsp.java:133)
        at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)
        at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
        at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
        at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
        at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:211)
        at org.apache.sling.engine.impl.request.SlingRequestDispatcher.forward(SlingRequestDispatcher.java:146)
        at com.composum.sling.core.servlet.AbstractConsoleServlet.doGet(AbstractConsoleServlet.java:66)
        at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:270)
        at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:346)
        at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:378)
        at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
        at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
        at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
        at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
        at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
        at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
        at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
        at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
        at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
        at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
        at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
        at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
        at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
        at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
        at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
        at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
        at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
        at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
        at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:848)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:584)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:224)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
        at org.eclipse.jetty.server.Server.handle(Server.java:534)
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:108)
        at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)
        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)
        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)
        at java.base/java.lang.Thread.run(Thread.java:844)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13103074">SLING-7134</key>
            <summary>Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Sep 2017 20:52:36 +0000</created>
                <updated>Tue, 20 Mar 2018 13:16:14 +0000</updated>
                            <resolved>Tue, 5 Dec 2017 16:43:51 +0000</resolved>
                                                    <fixVersion>Servlets Resolver 2.4.20</fixVersion>
                    <fixVersion>Scripting Core 2.0.52</fixVersion>
                                    <component>Scripting</component>
                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16170698" author="rombert" created="Mon, 18 Sep 2017 20:53:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; - before sending this over to Composum - does this ring any bells to you? I seem to recall that we don&apos;t support nashorn, only rhino, but I could be wrong.&lt;/p&gt;</comment>
                            <comment id="16171084" author="cziegeler" created="Tue, 19 Sep 2017 03:59:53 +0000"  >&lt;p&gt;Not sure, isn&apos;t Nashorn already part of Java 8?&lt;/p&gt;</comment>
                            <comment id="16171175" author="radu.cotescu" created="Tue, 19 Sep 2017 06:24:41 +0000"  >&lt;p&gt;I have the impression that on Java 9 the Nashorn engine appears as a script engine available in the Sling platform and then the resource resolution mechanism tries to execute &lt;tt&gt;/libs/composum/nodes/console/components/codeeditor/codeeditor.js&lt;/tt&gt; instead of &lt;tt&gt;/libs/composum/nodes/console/components/codeeditor/codeeditor.jsp&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16171212" author="rombert" created="Tue, 19 Sep 2017 07:13:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; - that&apos;s correct, see &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887841/12887841_scripting-engines-java-9.png&quot; title=&quot;scripting-engines-java-9.png attached to SLING-7134&quot;&gt;scripting-engines-java-9.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. I take it that&apos;s not expected? Should we try and stop it from registering? &lt;/p&gt;</comment>
                            <comment id="16171216" author="radu.cotescu" created="Tue, 19 Sep 2017 07:18:44 +0000"  >&lt;p&gt;I guess so - I&apos;m actually curious why the Rhino implementation didn&apos;t register.&lt;/p&gt;</comment>
                            <comment id="16171222" author="rombert" created="Tue, 19 Sep 2017 07:26:00 +0000"  >&lt;p&gt;Here&apos;s what I have in the logs, not sure if it helps&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; $ egrep -i &apos;(rhino|nashorn)&apos; sling/logs/error.log
19.09.2017 10:10:53.678 *INFO* [FelixStartLevel] org.apache.sling.scripting.javascript Service [org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory,533, [javax.script.ScriptEngineFactory]] ServiceEvent UNREGISTERING
19.09.2017 10:10:53.679 *INFO* [FelixStartLevel] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:10:53.796 *INFO* [FelixStartLevel] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:10:54.026 *INFO* [FelixStartLevel] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:10:54.182 *INFO* [FelixStartLevel] org.apache.servicemix.bundles.rhino BundleEvent STOPPING
19.09.2017 10:10:54.182 *INFO* [FelixStartLevel] org.apache.servicemix.bundles.rhino BundleEvent STOPPED
19.09.2017 10:10:59.891 *INFO* [FelixStartLevel] org.apache.servicemix.bundles.rhino BundleEvent RESOLVED
19.09.2017 10:10:59.891 *INFO* [FelixStartLevel] org.apache.servicemix.bundles.rhino BundleEvent STARTING
19.09.2017 10:10:59.891 *INFO* [FelixStartLevel] org.apache.servicemix.bundles.rhino BundleEvent STARTED
19.09.2017 10:11:00.672 *INFO* [FelixStartLevel] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:11:00.982 *INFO* [FelixStartLevel] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:11:02.244 *INFO* [Apache Sling Repository Startup Thread] org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory Activated with optimization level 9
19.09.2017 10:11:02.245 *INFO* [Apache Sling Repository Startup Thread] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].
19.09.2017 10:11:02.366 *INFO* [Apache Sling Repository Startup Thread] org.apache.sling.scripting.javascript Service [org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngineFactory,531, [javax.script.ScriptEngineFactory]] ServiceEvent REGISTERED
19.09.2017 10:11:02.399 *INFO* [Apache Sling Repository Startup Thread] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory ScriptEngine Oracle Nashorn/9 is now handling [js], [application/javascript, application/ecmascript, text/javascript, text/ecmascript], [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript].&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16171348" author="cziegeler" created="Tue, 19 Sep 2017 08:56:03 +0000"  >&lt;p&gt;Instead of fiddling around with registering (or not registering) a particular script engine, I guess we should rather make sure that there is no ambiguity for the script. Otherwise we depend on fragile registering, or ordering/ranking of registrations.&lt;/p&gt;</comment>
                            <comment id="16174583" author="rombert" created="Thu, 21 Sep 2017 11:14:21 +0000"  >&lt;p&gt;The trace is the following:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;a component with sling:resourceType &lt;tt&gt;composum/nodes/console/components/codeeditor/editdialog&lt;/tt&gt; is displayed&lt;/li&gt;
	&lt;li&gt;this resolves to &lt;a href=&quot;https://github.com/ist-dresden/composum/blob/develop/sling/core/console/src/main/resources/root/libs/composum/nodes/console/components/codeeditor/editdialog/editdialog.jsp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;/libs/composum/nodes/console/components/codeeditor/editdialog/editdialog.jsp&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;the following line is executed &lt;tt&gt;&amp;lt;sling:include resourceType=&quot;composum/nodes/console/components/codeeditor&quot;/&amp;gt;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;at &lt;a href=&quot;https://github.com/ist-dresden/composum/tree/develop/sling/core/console/src/main/resources/root/libs/composum/nodes/console/components/codeeditor&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;/libs/composum/nodes/console/components/codeeditor&lt;/a&gt; we have two scripts
	&lt;ol&gt;
		&lt;li&gt;codeeditor.js&lt;/li&gt;
		&lt;li&gt;codeeditor.jsp&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;On Java 9, since Nashorn is registered codeeditor.js gets invoked instead of codeeditor.jsp. So Radu&apos;s intuition is correct.&lt;/p&gt;

&lt;p&gt;What would be the correct resolution for this? Any thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16174607" author="radu.cotescu" created="Thu, 21 Sep 2017 11:33:43 +0000"  >&lt;p&gt;Well, it&apos;s a two-fold fix:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Nashorn should not be allowed to register itself automatically for the &lt;tt&gt;js&lt;/tt&gt; extension; it&apos;s not a Script Engine provided by Sling anyways and Rhino was always bound to &lt;tt&gt;esp&lt;/tt&gt;;&lt;/li&gt;
	&lt;li&gt;client-side code should not sit next to server-side code, if the client-side code could confuse Sling&apos;s script resolution mechanism.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16174654" author="rombert" created="Thu, 21 Sep 2017 12:25:26 +0000"  >&lt;p&gt;I filed &lt;a href=&quot;https://github.com/ist-dresden/composum/issues/114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#114: Composum does not work with Java 9&lt;/a&gt; in composum&apos;s issue tracker.&lt;/p&gt;

&lt;p&gt;I did a bit more digging and I&apos;m not sure what exactly has changed, following Carsten&apos;s question about Nashorn being available since Java 8.&lt;/p&gt;

&lt;p&gt;With the following program:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Java &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.version&quot;&lt;/span&gt;));
        
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ( ScriptEngineFactory factory : &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ScriptEngineManager().getEngineFactories() ) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%s/%s is available &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; extensions %s, mime types %s, names %s%n&quot;&lt;/span&gt;, factory.getEngineName(), factory.getEngineVersion(), factory.getExtensions(), factory.getMimeTypes(), factory.getNames());
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get very similar results with Java 8 and Java 9:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Test for Java 1.8.0_144
Oracle Nashorn/1.8.0_144 is available for extensions [js], mime types [application/javascript, application/ecmascript, text/javascript, text/ecmascript], names [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Test for Java 9
Oracle Nashorn/9 is available for extensions [js], mime types [application/javascript, application/ecmascript, text/javascript, text/ecmascript], names [nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Besides the different version, extensions, mime types and names are all the same.&lt;/p&gt;

&lt;p&gt;I would venture to say this is a classloading issue, based on the following code&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; loader = getClass().getClassLoader();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SlingScriptEngineManager tmp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingScriptEngineManager(loader);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On Java 8, the code does not return the Nashorn scripting engine, while while Java 9 it does. I think this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/MANTRUN-200&quot; title=&quot;Scriptdef tasks fail to load when running on Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MANTRUN-200&quot;&gt;&lt;del&gt;MANTRUN-200&lt;/del&gt;&lt;/a&gt;, which is also an issue linked to class loaders and scripting engines.&lt;/p&gt;</comment>
                            <comment id="16174671" author="rombert" created="Thu, 21 Sep 2017 12:40:21 +0000"  >&lt;p&gt;Class loader hierarchy is different with Java 9, the parent is the platform class loader, not the extension class loader. Contrast the following:&lt;/p&gt;

&lt;p&gt;Java 8:&lt;/p&gt;

&lt;p&gt;org.apache.sling.scripting.core &lt;span class=&quot;error&quot;&gt;&amp;#91;140&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.launchpad.base.shared.LauncherClassLoader@2c7b84de&lt;br/&gt;
sun.misc.Launcher$AppClassLoader@3d4eac69&lt;br/&gt;
sun.misc.Launcher$ExtClassLoader@25d86721&lt;/p&gt;

&lt;p&gt;Java 9&lt;/p&gt;

&lt;p&gt;org.apache.sling.scripting.core &lt;span class=&quot;error&quot;&gt;&amp;#91;140&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.launchpad.base.shared.LauncherClassLoader@6cc4c815&lt;br/&gt;
jdk.internal.loader.ClassLoaders$AppClassLoader@1b9e1916&lt;br/&gt;
jdk.internal.loader.ClassLoaders$PlatformClassLoader@12f40c25&lt;/p&gt;</comment>
                            <comment id="16180390" author="rombert" created="Tue, 26 Sep 2017 07:32:24 +0000"  >&lt;p&gt;I think we have the following options:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Block Nashorn from registering by default on Java 9. This fixes the issue and ensures strict backwards compatibility. However, there may be scenarios where users actually want this scripting engine and we prevent them from doing that.&lt;/li&gt;
	&lt;li&gt;Fix the applications. The cleanest solution, but we do break backwards compatibility and force applications to be rewritten&lt;/li&gt;
	&lt;li&gt;Differentiate between implicitly registered scripting engines ( i.e. Nashorn for Java 9 ) and explicitly registered scripting engines ( deployed via Bundles ) and in case two script engines can be chosen prefer explicitly registered ones. This one involves a bit work work, but also preserves the backwards compatibility scenario&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I would go with #3, admittedly without knowing too much about the scripting.core internals. Thoughts?&lt;/p&gt;</comment>
                            <comment id="16180407" author="cziegeler" created="Tue, 26 Sep 2017 07:47:52 +0000"  >&lt;p&gt;I think regardless whether we do #1 or #3, #2 should be done &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So far we only know about one application.&lt;br/&gt;
That said, I guess we should definitely use some kind of ranking of script engines to have a stable ordering, so this goes into the direction of #3. So we could give explicitely registered ones a higher ranking by default. &lt;/p&gt;</comment>
                            <comment id="16180409" author="radu.cotescu" created="Tue, 26 Sep 2017 07:48:54 +0000"  >&lt;p&gt;#3 sounds the best. Keep in mind that our own &lt;tt&gt;org.apache.sling.scripting.javascript&lt;/tt&gt; bundle relies on Rhino to be able to provide the Sling API object wrappers. When I was analysing Nashorn as a potential replacement for Rhino (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4801&quot; title=&quot;Add support for Nashorn in the JavaScript Scripting Engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4801&quot;&gt;&lt;del&gt;SLING-4801&lt;/del&gt;&lt;/a&gt;) I was not able to easily provide the same JavaScript API for consumers.&lt;/p&gt;</comment>
                            <comment id="16187822" author="cziegeler" created="Mon, 2 Oct 2017 09:51:14 +0000"  >&lt;p&gt;I briefly looked into the scripts resolver, right now the selection of a script is based on the order the script resources are read. So if the jsp script is read before the js script, it&apos;s a different order than otherwise. So this is right now independent of how script engines are registered.&lt;br/&gt;
Unfortunately, the scripts resolver has no real direct dependency on scripting which makes all of this a little bit hard.&lt;br/&gt;
WeightedResource (which does the ordering) could easily be changed to have the order based on the extension of the script (alphabetical). This would at least give us a stable order if all engines are available. But then there would be no way to change the ordering of script engines - except for registering a particular engine with a different extension and use that for the scripts which would be a very heavy of doing things.&lt;br/&gt;
I fear we need to lookup all javax.script.ScriptEngineFactory in the servlets resolver and order them simply by service ranking. We can then change WeightedResource to sort based on service ranking (heighest first). In case of a service ranking tie we don&apos;t use service id but script extension alphabetically.&lt;br/&gt;
The implementation of scripting core can then register script engine factories from the jdk with a service ranking lower than 0, e.g. -1&lt;br/&gt;
I think this gives us:&lt;br/&gt;
a) a stable ordering&lt;br/&gt;
b) implicit registered factories have the lowest ranking&lt;br/&gt;
c) ranking of explicit registered factories can be controlled by service ranking&lt;/p&gt;</comment>
                            <comment id="16190518" author="karlpauls" created="Tue, 3 Oct 2017 23:09:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I had the feeling before that the current way to lookup engine is problematic when it comes to bundle refreshes (I just never could reproduce the problems) and it had similar problems to the ones seen here with java9 in java8 when trying to run with pojosr. I think using services makes a lot of sense - however, how about we use bundle id as a tiebreaker instead of script extension names (that way, one could influence the selection using installation order as a last resort)? &lt;/p&gt;</comment>
                            <comment id="16267031" author="radu.cotescu" created="Mon, 27 Nov 2017 16:44:10 +0000"  >&lt;p&gt;There are currently multiple issues:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;script engine factories are not actually managed by the &lt;tt&gt;org.apache.sling.scripting.core.impl.helper.SlingScriptEngineManager&lt;/tt&gt;, but rather by the platform &lt;tt&gt;javax.script.ScriptEngineManager&lt;/tt&gt; which &lt;tt&gt;org.apache.sling.scripting.core.impl.helper.SlingScriptEngineManager&lt;/tt&gt; extends; because of this, there&apos;s no service ranking concept associated to the script engine factories; if Sling should completely control this, I think we need to change the code in the &lt;tt&gt;org.apache.sling.scripting.core.impl.helper.SlingScriptEngineManager&lt;/tt&gt; to fully manage script engine factories registrations&lt;/li&gt;
	&lt;li&gt;as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; already mentioned, the &lt;tt&gt;org.apache.sling.servlets.resolver.internal.SlingServletResolver&lt;/tt&gt; decides which script to execute based on the resource iteration order; instead, it should get a sorted list of the script engine factories from the &lt;tt&gt;org.apache.sling.scripting.core.impl.helper.SlingScriptEngineManager&lt;/tt&gt; and use this when picking the script that should be executed for a request, by checking the extensions for which a script engine factory is registered&lt;/li&gt;
&lt;/ol&gt;

</comment>
                            <comment id="16275912" author="githubbot" created="Sun, 3 Dec 2017 12:35:04 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;reimplemented the former o.a.s.scripting.core.impl.ScriptEngineManagerFactory,&lt;br/&gt;
   o.a.s.scripting.core.impl.helper.SlingScriptEngineManager and&lt;br/&gt;
   o.a.s.scripting.core.impl.helper.ProxyScriptEngineManager into one service:&lt;br/&gt;
   o.a.s.scripting.core.impl.jsr223.SlingScriptEngineManager&lt;/li&gt;
	&lt;li&gt;the new SlingScriptEngineManager manages ScriptEngineFactories registrations&lt;br/&gt;
   from the platform&apos;s ScriptEngineManager, bundles that expose a ScriptEngineFactory&lt;br/&gt;
   through the SPI mechanism and ScriptEngineFactories registered as OSGi services&lt;/li&gt;
	&lt;li&gt;introduced the concept of a SortableScriptEngineFactory, that allows ordering the&lt;br/&gt;
   factories based on bundle IDs and service rankings; if two factories have the same service&lt;br/&gt;
   ranking, then the factory with the higher bundle ID will win&lt;/li&gt;
	&lt;li&gt;corrected bug in the ScriptCacheImpl to cache scripts from all ScriptEngineFactories that&lt;br/&gt;
   register a Compilable ScriptEngine, not just for the ScriptEngineFactories registered as&lt;br/&gt;
   OSGi services&lt;/li&gt;
	&lt;li&gt;extended tests&lt;/li&gt;
	&lt;li&gt;updated PAX exam tests to run on Java 9&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16275913" author="githubbot" created="Sun, 3 Dec 2017 12:35:41 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;the SlingServletResolver now uses the ScriptEngineManager to help in&lt;br/&gt;
   picking the most appropriate script to render a resource, based on the available&lt;br/&gt;
   scripts extensions and the order of the ScriptEngineFactories from the list returned by&lt;br/&gt;
   ScriptEngineManager#getEngineFactories&lt;/li&gt;
	&lt;li&gt;the AbstractResourceCollector will use the ordered list of the ScriptEngineFactories extensions&lt;br/&gt;
   for sorting the candidate WeightedResources&lt;/li&gt;
	&lt;li&gt;added tests for the new resource collection mechanism&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16275915" author="radu.cotescu" created="Sun, 3 Dec 2017 12:38:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, could you guys have a look at the linked PRs? Everything seems to be working correctly now. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16276019" author="githubbot" created="Sun, 3 Dec 2017 18:12:46 +0000"  >&lt;p&gt;kwin commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154532013&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154532013&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+    private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private ComponentContext componentContext;&lt;br/&gt;
+&lt;br/&gt;
+    @Reference(policy = ReferencePolicy.DYNAMIC,&lt;br/&gt;
+               policyOption = ReferencePolicyOption.GREEDY,&lt;br/&gt;
+               cardinality = ReferenceCardinality.OPTIONAL)&lt;br/&gt;
+    private volatile EventAdmin eventAdmin;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByName(String shortName) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByName(shortName);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByExtension(String extension) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            return internalManager.getEngineByExtension(extension);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByMimeType(String mimeType) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByMimeType(mimeType);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public List&amp;lt;ScriptEngineFactory&amp;gt; getEngineFactories() {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            ArrayList&amp;lt;ScriptEngineFactory&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(factories.size());
+            list.addAll(factories);
+            return Collections.unmodifiableList(list);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineName(String name, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineName(name, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineMimeType(String type, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {
+            internalManager.registerEngineMimeType(type, factory);
+        } finally {+            readWriteLock.writeLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineExtension(String extension, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineExtension(extension, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void bundleChanged(BundleEvent event) {&lt;br/&gt;
+        if (event.getType() == BundleEvent.STARTED&lt;br/&gt;
+                &amp;amp;&amp;amp; event.getBundle().getEntry(ENGINE_FACTORY_SERVICE) != null) {&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                this.engineSpiBundles.add(event.getBundle());
+            }
&lt;p&gt;+            updateFactories();&lt;br/&gt;
+        } else if (event.getType() == BundleEvent.STOPPED) {&lt;br/&gt;
+            boolean refresh;&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                refresh = this.engineSpiBundles.remove(event.getBundle());
+            }
&lt;p&gt;+            if (refresh) &lt;/p&gt;
{
+                updateFactories();
+            }
&lt;p&gt;+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public Map&amp;lt;String, Object&amp;gt; getProperties(ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return factoriesProperties.get(factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Activate&lt;br/&gt;
+    private void activate(ComponentContext componentContext) &lt;/p&gt;
{
+        this.componentContext = componentContext;
+        updateFactories();
+    }
&lt;p&gt;+&lt;br/&gt;
+    private void bindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference,&lt;br/&gt;
+                                           final ScriptEngineFactory factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) &lt;/p&gt;
{
+            serviceReferences.add(serviceReference);
+        }
&lt;p&gt;+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_ADDED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void unbindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference, final ScriptEngineFactory&lt;br/&gt;
+            factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) {&lt;br/&gt;
+            serviceReferences.remove(serviceReference);&lt;br/&gt;
+            if (componentContext != null) &lt;/p&gt;
{
+                componentContext.getBundleContext().ungetService(serviceReference);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_REMOVED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void updateFactories() {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {&lt;br/&gt;
+            factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+            internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+            long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
+            // first add the platform factories&lt;br/&gt;
+            for (ScriptEngineFactory factory : internalManager.getEngineFactories()) &lt;/p&gt;
{
+                SortableScriptEngineFactory ssef = new SortableScriptEngineFactory(factory, fakeBundleIdCounter++, 0);
+                factories.add(ssef);
+            }
&lt;p&gt;+            // then factories from SPI Bundles&lt;br/&gt;
+            for (Bundle bundle : engineSpiBundles) {&lt;br/&gt;
+                URL url = bundle.getEntry(ENGINE_FACTORY_SERVICE);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Can&apos;t you rely on &lt;a href=&quot;https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276022" author="githubbot" created="Sun, 3 Dec 2017 18:16:52 +0000"  >&lt;p&gt;raducotescu commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154532142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154532142&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+    private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private ComponentContext componentContext;&lt;br/&gt;
+&lt;br/&gt;
+    @Reference(policy = ReferencePolicy.DYNAMIC,&lt;br/&gt;
+               policyOption = ReferencePolicyOption.GREEDY,&lt;br/&gt;
+               cardinality = ReferenceCardinality.OPTIONAL)&lt;br/&gt;
+    private volatile EventAdmin eventAdmin;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByName(String shortName) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByName(shortName);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByExtension(String extension) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            return internalManager.getEngineByExtension(extension);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByMimeType(String mimeType) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByMimeType(mimeType);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public List&amp;lt;ScriptEngineFactory&amp;gt; getEngineFactories() {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            ArrayList&amp;lt;ScriptEngineFactory&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(factories.size());
+            list.addAll(factories);
+            return Collections.unmodifiableList(list);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineName(String name, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineName(name, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineMimeType(String type, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {
+            internalManager.registerEngineMimeType(type, factory);
+        } finally {+            readWriteLock.writeLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineExtension(String extension, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineExtension(extension, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void bundleChanged(BundleEvent event) {&lt;br/&gt;
+        if (event.getType() == BundleEvent.STARTED&lt;br/&gt;
+                &amp;amp;&amp;amp; event.getBundle().getEntry(ENGINE_FACTORY_SERVICE) != null) {&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                this.engineSpiBundles.add(event.getBundle());
+            }
&lt;p&gt;+            updateFactories();&lt;br/&gt;
+        } else if (event.getType() == BundleEvent.STOPPED) {&lt;br/&gt;
+            boolean refresh;&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                refresh = this.engineSpiBundles.remove(event.getBundle());
+            }
&lt;p&gt;+            if (refresh) &lt;/p&gt;
{
+                updateFactories();
+            }
&lt;p&gt;+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public Map&amp;lt;String, Object&amp;gt; getProperties(ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return factoriesProperties.get(factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Activate&lt;br/&gt;
+    private void activate(ComponentContext componentContext) &lt;/p&gt;
{
+        this.componentContext = componentContext;
+        updateFactories();
+    }
&lt;p&gt;+&lt;br/&gt;
+    private void bindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference,&lt;br/&gt;
+                                           final ScriptEngineFactory factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) &lt;/p&gt;
{
+            serviceReferences.add(serviceReference);
+        }
&lt;p&gt;+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_ADDED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void unbindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference, final ScriptEngineFactory&lt;br/&gt;
+            factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) {&lt;br/&gt;
+            serviceReferences.remove(serviceReference);&lt;br/&gt;
+            if (componentContext != null) &lt;/p&gt;
{
+                componentContext.getBundleContext().ungetService(serviceReference);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_REMOVED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void updateFactories() {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {&lt;br/&gt;
+            factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+            internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+            long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
+            // first add the platform factories&lt;br/&gt;
+            for (ScriptEngineFactory factory : internalManager.getEngineFactories()) &lt;/p&gt;
{
+                SortableScriptEngineFactory ssef = new SortableScriptEngineFactory(factory, fakeBundleIdCounter++, 0);
+                factories.add(ssef);
+            }
&lt;p&gt;+            // then factories from SPI Bundles&lt;br/&gt;
+            for (Bundle bundle : engineSpiBundles) {&lt;br/&gt;
+                URL url = bundle.getEntry(ENGINE_FACTORY_SERVICE);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   We probably could - feel free to push a commit changing the code. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;   I didn&apos;t want to change more code than needed - this method is copied from the old `ScriptEngineManagerFactory` (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1/files#diff-592cfbf344b2569e240757d7fb09e125L119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1/files#diff-592cfbf344b2569e240757d7fb09e125L119&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276362" author="githubbot" created="Mon, 4 Dec 2017 06:45:08 +0000"  >&lt;p&gt;cziegeler commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1#issuecomment-348873773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1#issuecomment-348873773&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Lgtm, thanks Radu&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276735" author="githubbot" created="Mon, 4 Dec 2017 12:56:11 +0000"  >&lt;p&gt;rombert commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1#issuecomment-348954582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1#issuecomment-348954582&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Not really familiar with the codebase, but LGTM. Thanks for looking into this.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276779" author="githubbot" created="Mon, 4 Dec 2017 13:32:29 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154648012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154648012&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+    private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private ComponentContext componentContext;&lt;br/&gt;
+&lt;br/&gt;
+    @Reference(policy = ReferencePolicy.DYNAMIC,&lt;br/&gt;
+               policyOption = ReferencePolicyOption.GREEDY,&lt;br/&gt;
+               cardinality = ReferenceCardinality.OPTIONAL)&lt;br/&gt;
+    private volatile EventAdmin eventAdmin;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByName(String shortName) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByName(shortName);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByExtension(String extension) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            return internalManager.getEngineByExtension(extension);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByMimeType(String mimeType) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByMimeType(mimeType);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public List&amp;lt;ScriptEngineFactory&amp;gt; getEngineFactories() {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            ArrayList&amp;lt;ScriptEngineFactory&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(factories.size());
+            list.addAll(factories);
+            return Collections.unmodifiableList(list);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineName(String name, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineName(name, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineMimeType(String type, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {
+            internalManager.registerEngineMimeType(type, factory);
+        } finally {+            readWriteLock.writeLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineExtension(String extension, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineExtension(extension, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void bundleChanged(BundleEvent event) {&lt;br/&gt;
+        if (event.getType() == BundleEvent.STARTED&lt;br/&gt;
+                &amp;amp;&amp;amp; event.getBundle().getEntry(ENGINE_FACTORY_SERVICE) != null) {&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                this.engineSpiBundles.add(event.getBundle());
+            }
&lt;p&gt;+            updateFactories();&lt;br/&gt;
+        } else if (event.getType() == BundleEvent.STOPPED) {&lt;br/&gt;
+            boolean refresh;&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                refresh = this.engineSpiBundles.remove(event.getBundle());
+            }
&lt;p&gt;+            if (refresh) &lt;/p&gt;
{
+                updateFactories();
+            }
&lt;p&gt;+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public Map&amp;lt;String, Object&amp;gt; getProperties(ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return factoriesProperties.get(factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Activate&lt;br/&gt;
+    private void activate(ComponentContext componentContext) &lt;/p&gt;
{
+        this.componentContext = componentContext;
+        updateFactories();
+    }
&lt;p&gt;+&lt;br/&gt;
+    private void bindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference,&lt;br/&gt;
+                                           final ScriptEngineFactory factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) &lt;/p&gt;
{
+            serviceReferences.add(serviceReference);
+        }
&lt;p&gt;+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_ADDED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void unbindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference, final ScriptEngineFactory&lt;br/&gt;
+            factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) {&lt;br/&gt;
+            serviceReferences.remove(serviceReference);&lt;br/&gt;
+            if (componentContext != null) &lt;/p&gt;
{
+                componentContext.getBundleContext().ungetService(serviceReference);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_REMOVED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void updateFactories() {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {&lt;br/&gt;
+            factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+            internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+            long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
+            // first add the platform factories&lt;br/&gt;
+            for (ScriptEngineFactory factory : internalManager.getEngineFactories()) &lt;/p&gt;
{
+                SortableScriptEngineFactory ssef = new SortableScriptEngineFactory(factory, fakeBundleIdCounter++, 0);
+                factories.add(ssef);
+            }
&lt;p&gt;+            // then factories from SPI Bundles&lt;br/&gt;
+            for (Bundle bundle : engineSpiBundles) {&lt;br/&gt;
+                URL url = bundle.getEntry(ENGINE_FACTORY_SERVICE);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   That would be problematic as the serviceloader would see too much and too little at the same time - i think. At this point, we really only want the engines in that bundle.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276781" author="githubbot" created="Mon, 4 Dec 2017 13:34:33 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154648472&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154648472&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   That is the point i&apos;m not sure about. I think this would make it so that nashorn isn&apos;t available on java8 but is on java9. Possible we don&apos;t care or I&apos;m wrong - just wanted to double check: did you see nashorn on java8 and/or java9 and if so, do we care or no?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276803" author="karlpauls" created="Mon, 4 Dec 2017 13:52:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, without actually trying it out but just looking over the changes it lgtm - however, I&apos;m not sure about the lookup of scriptengines wrt. java8 v.s. java9 (I added a comment about that on github). &lt;/p&gt;</comment>
                            <comment id="16276897" author="githubbot" created="Mon, 4 Dec 2017 14:58:51 +0000"  >&lt;p&gt;raducotescu commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154671227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154671227&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Nashorn is not there on Java 8, but it is present on Java 9.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16276907" author="githubbot" created="Mon, 4 Dec 2017 15:04:09 +0000"  >&lt;p&gt;raducotescu commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154671227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154671227&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Nashorn is not there on Java 8, but it is present on Java 9. Even if I change the constructor to remove the current passed classloader, using the default `Thread.currentThread().getContextClassLoader()` doesn&apos;t change things.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277521" author="githubbot" created="Mon, 4 Dec 2017 21:19:45 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @raducotescu, it is there: the following makes it work:&lt;/p&gt;

&lt;p&gt;   diff --git a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   index 8c52960..aba954b 100644&lt;br/&gt;
   &amp;#8212; a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   +++ b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   @@ -84,7 +84,18 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
        private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
        private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
   +    private final ScriptEngineManager internalManager;&lt;br/&gt;
   +    
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {   +        ClassLoader loader = Thread.currentThread().getContextClassLoader();   +        try {
   +            Thread.currentThread().setContextClassLoader(null);
   +            internalManager = new ScriptEngineManager(ClassLoader.getSystemClassLoader());
   +        }   +        finally {
   +            Thread.currentThread().setContextClassLoader(loader);
   +        }   +    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;   +&lt;br/&gt;
        private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
        private ComponentContext componentContext;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @@ -224,7 +235,6 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
            readWriteLock.writeLock().lock();&lt;br/&gt;
            try {&lt;br/&gt;
                factories = new TreeSet&amp;lt;&amp;gt;();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
                long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
                // first add the platform factories&lt;br/&gt;
                for (ScriptEngineFactory factory : internalManager.getEngineFactories()) {&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277523" author="githubbot" created="Mon, 4 Dec 2017 21:20:29 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @raducotescu, it is there: the following makes it work:&lt;/p&gt;

&lt;p&gt;   `diff --git a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   index 8c52960..aba954b 100644&lt;br/&gt;
   &amp;#8212; a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   +++ b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   @@ -84,7 +84,18 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
        private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
        private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
   +    private final ScriptEngineManager internalManager;&lt;br/&gt;
   +    
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {   +        ClassLoader loader = Thread.currentThread().getContextClassLoader();   +        try {
   +            Thread.currentThread().setContextClassLoader(null);
   +            internalManager = new ScriptEngineManager(ClassLoader.getSystemClassLoader());
   +        }   +        finally {
   +            Thread.currentThread().setContextClassLoader(loader);
   +        }   +    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;   +&lt;br/&gt;
        private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
        private ComponentContext componentContext;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @@ -224,7 +235,6 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
            readWriteLock.writeLock().lock();&lt;br/&gt;
            try {&lt;br/&gt;
                factories = new TreeSet&amp;lt;&amp;gt;();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
                long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
                // first add the platform factories&lt;br/&gt;
                for (ScriptEngineFactory factory : internalManager.getEngineFactories()) {&lt;br/&gt;
   `&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277528" author="githubbot" created="Mon, 4 Dec 2017 21:21:27 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154778051&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @raducotescu, it is there: the following makes it work:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   diff --git a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   index 8c52960..aba954b 100644&lt;br/&gt;
   &amp;#8212; a/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   +++ b/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
   @@ -84,7 +84,18 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
        private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
        private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
   +    private final ScriptEngineManager internalManager;&lt;br/&gt;
   +    
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {   +        ClassLoader loader = Thread.currentThread().getContextClassLoader();   +        try {
   +            Thread.currentThread().setContextClassLoader(null);
   +            internalManager = new ScriptEngineManager(ClassLoader.getSystemClassLoader());
   +        }   +        finally {
   +            Thread.currentThread().setContextClassLoader(loader);
   +        }   +    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;   +&lt;br/&gt;
        private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
        private ComponentContext componentContext;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   @@ -224,7 +235,6 @@ public class SlingScriptEngineManager extends ScriptEngineManager implements Bun&lt;br/&gt;
            readWriteLock.writeLock().lock();&lt;br/&gt;
            try {&lt;br/&gt;
                factories = new TreeSet&amp;lt;&amp;gt;();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
                long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
                // first add the platform factories&lt;br/&gt;
                for (ScriptEngineFactory factory : internalManager.getEngineFactories()) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277636" author="githubbot" created="Mon, 4 Dec 2017 22:17:57 +0000"  >&lt;p&gt;karlpauls commented on a change in pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154792623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#discussion_r154792623&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,320 @@&lt;br/&gt;
+/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br/&gt;
+ ~ Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ ~ or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ ~ distributed with this work for additional information&lt;br/&gt;
+ ~ regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ ~ to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ ~ &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ ~ with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ ~&lt;br/&gt;
+ ~ Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ ~ software distributed under the License is distributed on an&lt;br/&gt;
+ ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ ~ KIND, either express or implied.  See the License for the&lt;br/&gt;
+ ~ specific language governing permissions and limitations&lt;br/&gt;
+ ~ under the License.&lt;br/&gt;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/&lt;br/&gt;
+package org.apache.sling.scripting.core.impl.jsr223;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.BufferedReader;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.io.InputStream;&lt;br/&gt;
+import java.io.InputStreamReader;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.nio.charset.StandardCharsets;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.HashMap;&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.SortedSet;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
+import java.util.concurrent.locks.ReentrantReadWriteLock;&lt;br/&gt;
+&lt;br/&gt;
+import javax.script.ScriptEngine;&lt;br/&gt;
+import javax.script.ScriptEngineFactory;&lt;br/&gt;
+import javax.script.ScriptEngineManager;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.api.scripting.SlingScriptConstants;&lt;br/&gt;
+import org.apache.sling.commons.osgi.PropertiesUtil;&lt;br/&gt;
+import org.osgi.framework.Bundle;&lt;br/&gt;
+import org.osgi.framework.BundleEvent;&lt;br/&gt;
+import org.osgi.framework.BundleListener;&lt;br/&gt;
+import org.osgi.framework.Constants;&lt;br/&gt;
+import org.osgi.framework.ServiceReference;&lt;br/&gt;
+import org.osgi.service.component.ComponentContext;&lt;br/&gt;
+import org.osgi.service.component.annotations.Activate;&lt;br/&gt;
+import org.osgi.service.component.annotations.Component;&lt;br/&gt;
+import org.osgi.service.component.annotations.Reference;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferenceCardinality;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicy;&lt;br/&gt;
+import org.osgi.service.component.annotations.ReferencePolicyOption;&lt;br/&gt;
+import org.osgi.service.event.Event;&lt;br/&gt;
+import org.osgi.service.event.EventAdmin;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+@Component(&lt;br/&gt;
+        service = &lt;/p&gt;
{ScriptEngineManager.class, SlingScriptEngineManager.class}
&lt;p&gt;,&lt;br/&gt;
+        reference = @Reference(&lt;br/&gt;
+                name = &quot;ScriptEngineFactory&quot;,&lt;br/&gt;
+                bind = &quot;bindScriptEngineFactory&quot;,&lt;br/&gt;
+                unbind = &quot;unbindScriptEngineFactory&quot;,&lt;br/&gt;
+                service = ScriptEngineFactory.class,&lt;br/&gt;
+                cardinality = ReferenceCardinality.MULTIPLE,&lt;br/&gt;
+                policy = ReferencePolicy.DYNAMIC&lt;br/&gt;
+        )&lt;br/&gt;
+)&lt;br/&gt;
+public class SlingScriptEngineManager extends ScriptEngineManager implements BundleListener {&lt;br/&gt;
+&lt;br/&gt;
+    public static final String EVENT_TOPIC_SCRIPT_MANAGER_UPDATED =&lt;br/&gt;
+            &quot;org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager/UPDATED&quot;;&lt;br/&gt;
+    public static final String ENGINE_FACTORY_SERVICE = &quot;META-INF/services/&quot; + ScriptEngineFactory.class.getName();&lt;br/&gt;
+&lt;br/&gt;
+    private static final Logger LOG = LoggerFactory.getLogger(SlingScriptEngineManager.class);&lt;br/&gt;
+&lt;br/&gt;
+    private final Set&amp;lt;Bundle&amp;gt; engineSpiBundles = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final ReentrantReadWriteLock readWriteLock = new ReentrantReadWriteLock();&lt;br/&gt;
+    private final Map&amp;lt;ScriptEngineFactory, Map&amp;lt;String, Object&amp;gt;&amp;gt; factoriesProperties = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Set&amp;lt;ServiceReference&amp;lt;ScriptEngineFactory&amp;gt;&amp;gt; serviceReferences = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+&lt;br/&gt;
+    private ScriptEngineManager internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+    private SortedSet&amp;lt;SortableScriptEngineFactory&amp;gt; factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    private ComponentContext componentContext;&lt;br/&gt;
+&lt;br/&gt;
+    @Reference(policy = ReferencePolicy.DYNAMIC,&lt;br/&gt;
+               policyOption = ReferencePolicyOption.GREEDY,&lt;br/&gt;
+               cardinality = ReferenceCardinality.OPTIONAL)&lt;br/&gt;
+    private volatile EventAdmin eventAdmin;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByName(String shortName) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByName(shortName);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByExtension(String extension) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            return internalManager.getEngineByExtension(extension);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public ScriptEngine getEngineByMimeType(String mimeType) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return internalManager.getEngineByMimeType(mimeType);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public List&amp;lt;ScriptEngineFactory&amp;gt; getEngineFactories() {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try {
+            ArrayList&amp;lt;ScriptEngineFactory&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(factories.size());
+            list.addAll(factories);
+            return Collections.unmodifiableList(list);
+        } finally {+            readWriteLock.readLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineName(String name, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineName(name, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineMimeType(String type, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {
+            internalManager.registerEngineMimeType(type, factory);
+        } finally {+            readWriteLock.writeLock().unlock();+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void registerEngineExtension(String extension, ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            internalManager.registerEngineExtension(extension, factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.writeLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void bundleChanged(BundleEvent event) {&lt;br/&gt;
+        if (event.getType() == BundleEvent.STARTED&lt;br/&gt;
+                &amp;amp;&amp;amp; event.getBundle().getEntry(ENGINE_FACTORY_SERVICE) != null) {&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                this.engineSpiBundles.add(event.getBundle());
+            }
&lt;p&gt;+            updateFactories();&lt;br/&gt;
+        } else if (event.getType() == BundleEvent.STOPPED) {&lt;br/&gt;
+            boolean refresh;&lt;br/&gt;
+            synchronized (this.engineSpiBundles) &lt;/p&gt;
{
+                refresh = this.engineSpiBundles.remove(event.getBundle());
+            }
&lt;p&gt;+            if (refresh) &lt;/p&gt;
{
+                updateFactories();
+            }
&lt;p&gt;+        }&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public Map&amp;lt;String, Object&amp;gt; getProperties(ScriptEngineFactory factory) {&lt;br/&gt;
+        readWriteLock.readLock().lock();&lt;br/&gt;
+        try &lt;/p&gt;
{
+            return factoriesProperties.get(factory);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            readWriteLock.readLock().unlock();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Activate&lt;br/&gt;
+    private void activate(ComponentContext componentContext) &lt;/p&gt;
{
+        this.componentContext = componentContext;
+        updateFactories();
+    }
&lt;p&gt;+&lt;br/&gt;
+    private void bindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference,&lt;br/&gt;
+                                           final ScriptEngineFactory factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) &lt;/p&gt;
{
+            serviceReferences.add(serviceReference);
+        }
&lt;p&gt;+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_ADDED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void unbindScriptEngineFactory(final ServiceReference&amp;lt;ScriptEngineFactory&amp;gt; serviceReference, final ScriptEngineFactory&lt;br/&gt;
+            factory) {&lt;br/&gt;
+        synchronized (this.serviceReferences) {&lt;br/&gt;
+            serviceReferences.remove(serviceReference);&lt;br/&gt;
+            if (componentContext != null) &lt;/p&gt;
{
+                componentContext.getBundleContext().ungetService(serviceReference);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+        updateFactories();&lt;br/&gt;
+        postEvent(SlingScriptConstants.TOPIC_SCRIPT_ENGINE_FACTORY_REMOVED, factory);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private void updateFactories() {&lt;br/&gt;
+        readWriteLock.writeLock().lock();&lt;br/&gt;
+        try {&lt;br/&gt;
+            factories = new TreeSet&amp;lt;&amp;gt;();&lt;br/&gt;
+            internalManager = new ScriptEngineManager(SlingScriptEngineManager.class.getClassLoader());&lt;br/&gt;
+            long fakeBundleIdCounter = Long.MIN_VALUE;&lt;br/&gt;
+            // first add the platform factories&lt;br/&gt;
+            for (ScriptEngineFactory factory : internalManager.getEngineFactories()) &lt;/p&gt;
{
+                SortableScriptEngineFactory ssef = new SortableScriptEngineFactory(factory, fakeBundleIdCounter++, 0);
+                factories.add(ssef);
+            }
&lt;p&gt;+            // then factories from SPI Bundles&lt;br/&gt;
+            for (Bundle bundle : engineSpiBundles) {&lt;br/&gt;
+                URL url = bundle.getEntry(ENGINE_FACTORY_SERVICE);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Well, I guess it will work llike this:&lt;/p&gt;

&lt;p&gt;   ```&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// then factories from SPI Bundles&lt;/li&gt;
	&lt;li&gt;for (Bundle bundle : engineSpiBundles) {&lt;/li&gt;
	&lt;li&gt;URL url = bundle.getEntry(ENGINE_FACTORY_SERVICE);&lt;/li&gt;
	&lt;li&gt;InputStream ins = null;&lt;/li&gt;
	&lt;li&gt;try {&lt;/li&gt;
	&lt;li&gt;ins = url.openStream();&lt;/li&gt;
	&lt;li&gt;BufferedReader reader = new BufferedReader(new InputStreamReader(ins, StandardCharsets.UTF_8));&lt;/li&gt;
	&lt;li&gt;String line;&lt;/li&gt;
	&lt;li&gt;while ((line = reader.readLine()) != null) {&lt;/li&gt;
	&lt;li&gt;if (!line.startsWith(&quot;#&quot;) &amp;amp;&amp;amp; line.trim().length() &amp;gt; 0) {&lt;/li&gt;
	&lt;li&gt;try 
{
   -                                Class&amp;lt;ScriptEngineFactory&amp;gt; clazz = (Class&amp;lt;ScriptEngineFactory&amp;gt;) bundle.loadClass(line);
   -                                SortableScriptEngineFactory ssef = new SortableScriptEngineFactory(clazz.getDeclaredConstructor()
   -                                        .newInstance(), fakeBundleIdCounter++, 0);
   -                                factories.add(ssef);
   -                            }
&lt;p&gt; catch (Throwable t) &lt;/p&gt;
{
   -                                LOG.error(&quot;Cannot register ScriptEngineFactory &quot; + line, t);
   -                            }&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;} catch (IOException ioe) 
{
   -                    LOG.error(&quot;Unable to process bundle &quot; + bundle.getSymbolicName(), ioe);
   -                }
&lt;p&gt; finally {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (ins != null) {&lt;/li&gt;
	&lt;li&gt;try 
{
   -                            ins.close();
   -                        }
&lt;p&gt; catch (IOException ioe) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.error(&quot;Unable to release stream resource.&quot;, ioe);&lt;br/&gt;
   +            ClassLoader loader = Thread.currentThread().getContextClassLoader();&lt;br/&gt;
   +            try {&lt;br/&gt;
   +                Thread.currentThread().setContextClassLoader(null);&lt;br/&gt;
   +                // then factories from SPI Bundles&lt;br/&gt;
   +                for (Bundle bundle : engineSpiBundles) {&lt;br/&gt;
   +                    try 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {   +                        ScriptEngineManager manager = new ScriptEngineManager(bundle.adapt(BundleWiring.class).getClassLoader());   +                        for (ScriptEngineFactory factory }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; catch (Exception ex) &lt;/p&gt;
{
   +                        LOG.error(&quot;Unable to process bundle &quot; + bundle.getSymbolicName(), ex);
                        }
&lt;p&gt;                    }&lt;br/&gt;
                }&lt;br/&gt;
   +            finally &lt;/p&gt;
{
   +                Thread.currentThread().setContextClassLoader(loader);
   +            }
&lt;p&gt;   ```&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277646" author="githubbot" created="Mon, 4 Dec 2017 22:24:13 +0000"  >&lt;p&gt;karlpauls commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#issuecomment-349126870&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#issuecomment-349126870&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I just pushed an update with my proposals mentioned in the above comments namely,&lt;/p&gt;

&lt;p&gt;   1) use the systemclassloader with a null TCCL to get nashorn on java8; and&lt;br/&gt;
   2) an implementation for the suggestion of @kwin  to use the serviceloader to lookup engines from bundles instead of doing in manually &lt;/p&gt;

&lt;p&gt;   The push contains updated junit tests as well and it seem to work for me with both, java8 and java9.&lt;/p&gt;

&lt;p&gt;   @raducotescu, both, 1) and 2) are only suggestions. Feel free to ignore my push and apply only your original patch.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16277647" author="githubbot" created="Mon, 4 Dec 2017 22:24:46 +0000"  >&lt;p&gt;karlpauls commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#issuecomment-349126870&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1#issuecomment-349126870&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I just pushed an update with my proposals mentioned in the above comments namely,&lt;/p&gt;

&lt;p&gt;   1) use the systemclassloader with a null TCCL to get nashorn on java8; and&lt;br/&gt;
   2) an implementation for the suggestion of @kwin  to use the serviceloader to lookup engines from bundles instead of doing it manually.&lt;/p&gt;

&lt;p&gt;   The push contains updated junit tests as well and it seem to work for me with both, java8 and java9.&lt;/p&gt;

&lt;p&gt;   @raducotescu, both, 1) and 2) are only suggestions. Feel free to ignore my push and apply only your original patch.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16278476" author="githubbot" created="Tue, 5 Dec 2017 12:39:19 +0000"  >&lt;p&gt;karlpauls closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16278477" author="karlpauls" created="Tue, 5 Dec 2017 12:41:26 +0000"  >&lt;p&gt;I merged &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;&apos;s branch together with some refactorings. With this, we should not only have java9 fixed but also have nashorn available on java8.&lt;/p&gt;</comment>
                            <comment id="16278486" author="githubbot" created="Tue, 5 Dec 2017 12:49:14 +0000"  >&lt;p&gt;karlpauls closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16278830" author="githubbot" created="Tue, 5 Dec 2017 16:40:28 +0000"  >&lt;p&gt;raducotescu opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;re-added the ordinal comparison in WeightedResource&lt;/li&gt;
	&lt;li&gt;changed comparator from `org.apache.sling.servlets.resolver.internal.helper.AbstractResourceCollector#getServlets`&lt;br/&gt;
   to first check the extensions for sorting (if existing), then the actual sorting order of the `WeightedResources` if the extensions are the same&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16278833" author="githubbot" created="Tue, 5 Dec 2017 16:41:29 +0000"  >&lt;p&gt;karlpauls closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - Script execution order is not deterministic on Java 9&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16278835" author="karlpauls" created="Tue, 5 Dec 2017 16:43:51 +0000"  >&lt;p&gt;Needed to fix one more thing in the servlets.resolver in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16279190" author="karlpauls" created="Tue, 5 Dec 2017 21:13:04 +0000"  >&lt;p&gt;And another thing. Basically, we where missing the case where a script ending wasn&apos;t having a matching script engine. Fixed in: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/commit/0e4550fed207e34cf4bf55f23a764ebc5ecee6d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/commit/0e4550fed207e34cf4bf55f23a764ebc5ecee6d1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16406304" author="bdelacretaz" created="Tue, 20 Mar 2018 13:16:14 +0000"  >&lt;p&gt;Note that IIUC the changes of this ticket caused the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7545&quot; title=&quot;Groovy Scripting Engine not loading in Apache Sling 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7545&quot;&gt;&lt;del&gt;SLING-7545&lt;/del&gt;&lt;/a&gt; issue, as the script engine manager was not listening to bundle events anymore.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Hopefully fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7545&quot; title=&quot;Groovy Scripting Engine not loading in Apache Sling 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7545&quot;&gt;&lt;del&gt;SLING-7545&lt;/del&gt;&lt;/a&gt; doesn&apos;t cause trouble here - all tests pass after that fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13079447">SLING-6952</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13124292">SLING-7305</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13145947">SLING-7545</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13118362">SLING-7241</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12887841" name="scripting-engines-java-9.png" size="69311" author="rombert" created="Tue, 19 Sep 2017 07:13:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k7hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7130] ResourceChangeListener does not work correctly when using ADDED on a glob path</title>
                <link>https://issues.apache.org/jira/browse/SLING-7130</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When adding a resource change listener to a glob pattern, where only the &quot;ADDED&quot; change type is used, it does not catch the added resource events&lt;/p&gt;

&lt;p&gt;I have added a test project to illustrate the bug:&lt;/p&gt;

&lt;p&gt;TestAResourceChangeListener: Uses the glob pattern glob:/**/test-a on ADDED, and will not log the resource added event&lt;/p&gt;

&lt;p&gt;TestBResourceChangeListener: Uses the glob pattern glob:/**/test-b on ADDED and CHANGED, and will log both the resource added and change events&lt;/p&gt;

&lt;p&gt;I have noticed that there is a workaround, and that is by adding a * at the end of the glob path, as follows: &quot;glob:/**/test-a&amp;#42;&quot;. After this it does correctly catch the ADDED event.&lt;/p&gt;

&lt;p&gt;I tried debugging the code, but I&apos;m fairly sure that the bug lies in the Oak Observation implementation, so I&apos;m not sure if I should log the bug here or at Oak, or maybe both?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13102826">SLING-7130</key>
            <summary>ResourceChangeListener does not work correctly when using ADDED on a glob path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Sep 2017 13:56:50 +0000</created>
                <updated>Sun, 17 Sep 2017 13:58:17 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="12887547" name="test-project-sling-observation.zip" size="24775" author="royteeuwen" created="Sun, 17 Sep 2017 13:51:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k5zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7123] ObjectModel does not correctly analyse all super types when solving methods</title>
                <link>https://issues.apache.org/jira/browse/SLING-7123</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.scripting.sightly.compiler.util.ObjectModel#resolveProperty&lt;/tt&gt; method might not always correctly solve methods on target objects due to the fact that not all super types are queried if one of them throws a &lt;tt&gt;NoSuchMethodException&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13101934">SLING-7123</key>
            <summary>ObjectModel does not correctly analyse all super types when solving methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Sep 2017 11:56:15 +0000</created>
                <updated>Wed, 20 Sep 2017 12:48:03 +0000</updated>
                            <resolved>Wed, 13 Sep 2017 12:23:34 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.40</version>
                    <version>Scripting HTL Compiler 1.0.12</version>
                    <version>Scripting HTL Java Compiler 1.0.12</version>
                                    <fixVersion>Scripting HTL Engine 1.0.42</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.14</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.14</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16164567" author="radu.cotescu" created="Wed, 13 Sep 2017 12:23:34 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808232&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k0jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7120] Checkpoints not stored in file when using In-file queue</title>
                <link>https://issues.apache.org/jira/browse/SLING-7120</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since the change for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6892&quot; title=&quot;Remove commons.json from Content Distribution Core&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6892&quot;&gt;&lt;del&gt;SLING-6892&lt;/del&gt;&lt;/a&gt;, checkpoints are not stored in the checkpoint file.&lt;br/&gt;
This is due to a casting issue in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;jsonWriter.write(entry.getKey(), (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) value);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13101210">SLING-7120</key>
            <summary>Checkpoints not stored in file when using In-file queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Sep 2017 09:45:55 +0000</created>
                <updated>Mon, 11 Sep 2017 16:05:30 +0000</updated>
                            <resolved>Mon, 11 Sep 2017 16:05:30 +0000</resolved>
                                    <version>Content Distribution Core 0.2.8</version>
                                    <fixVersion>Content Distribution Core 0.2.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16161485" author="marett" created="Mon, 11 Sep 2017 16:05:21 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;r1808044&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13075540">SLING-6892</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jw4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7116] [http.testing.clients] o.a.s.testing.clients.osgi.ComponentsInfo.findBy() does not honor the value parameter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7116</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;o.a.s.testing.clients.osgi.ComponentsInfo.findBy() and thus all the public methods do not honor the value parameter and just return the first value found.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100725">SLING-7116</key>
            <summary>[http.testing.clients] o.a.s.testing.clients.osgi.ComponentsInfo.findBy() does not honor the value parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Sep 2017 09:06:58 +0000</created>
                <updated>Mon, 4 Dec 2017 17:20:09 +0000</updated>
                            <resolved>Fri, 8 Sep 2017 09:08:12 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.1.4</version>
                                    <fixVersion>Apache Sling Testing Clients 1.1.12</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16158359" author="andrei.dulvac" created="Fri, 8 Sep 2017 09:08:12 +0000"  >&lt;p&gt;Fixed in rev 1807694.&lt;/p&gt;</comment>
                            <comment id="16173028" author="rombert" created="Wed, 20 Sep 2017 11:12:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt; - can you please set a fix version for proper tracking?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jt3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7115] JsonUtil.unbox generates a NPE with null values in object</title>
                <link>https://issues.apache.org/jira/browse/SLING-7115</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;org.apache.sling.pipes.internal.JsonUtil.unbox fails in case of a null value in objects with a NPE&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
    at java.util.HashMap.merge(HashMap.java:1224)&lt;br/&gt;
    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)&lt;br/&gt;
    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)&lt;br/&gt;
    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet.lambda$entryConsumer$0(Collections.java:1575)&lt;br/&gt;
    at java.util.Iterator.forEachRemaining(Iterator.java:116)&lt;br/&gt;
    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntrySetSpliterator.forEachRemaining(Collections.java:1600)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)&lt;br/&gt;
    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100686">SLING-7115</key>
            <summary>JsonUtil.unbox generates a NPE with null values in object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Sep 2017 06:06:03 +0000</created>
                <updated>Mon, 25 Sep 2017 09:45:50 +0000</updated>
                            <resolved>Fri, 8 Sep 2017 19:30:20 +0000</resolved>
                                    <version>Pipes 1.0.4</version>
                                    <fixVersion>Pipes 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16159164" author="npeltier" created="Fri, 8 Sep 2017 19:30:21 +0000"  >&lt;p&gt;fixed in r1807808&lt;br/&gt;
cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; &lt;br/&gt;
didn&apos;t break unit tests nor the real life usage i had with it (fixed it on the contrary). &lt;br/&gt;
Feel free to enhance it, am not sure to understand what your problem is with that (hence me not touching to the other projects)&lt;/p&gt;</comment>
                            <comment id="16178785" author="npeltier" created="Mon, 25 Sep 2017 09:45:50 +0000"  >&lt;p&gt;releasing 1.1.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13100685">SLING-7114</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jsv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7114] JsonUtil.unbox generates a NPE with null values in object</title>
                <link>https://issues.apache.org/jira/browse/SLING-7114</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;org.apache.sling.distribution.it.JsonUtil.unbox fails in case of a null value in objects with a NPE&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
    at java.util.HashMap.merge(HashMap.java:1224)&lt;br/&gt;
    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)&lt;br/&gt;
    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)&lt;br/&gt;
    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet.lambda$entryConsumer$0(Collections.java:1575)&lt;br/&gt;
    at java.util.Iterator.forEachRemaining(Iterator.java:116)&lt;br/&gt;
    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntrySetSpliterator.forEachRemaining(Collections.java:1600)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)&lt;br/&gt;
    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100685">SLING-7114</key>
            <summary>JsonUtil.unbox generates a NPE with null values in object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Sep 2017 06:04:04 +0000</created>
                <updated>Fri, 8 Sep 2017 06:06:04 +0000</updated>
                                            <version>Content Distribution Core 0.2.8</version>
                                                    <component>Content Distribution Integration Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13100684">SLING-7113</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13100686">SLING-7115</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jsuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7113] JsonUtil.unbox generates a NPE with null values in object</title>
                <link>https://issues.apache.org/jira/browse/SLING-7113</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;org.apache.sling.launchpad.webapp.integrationtest.util.JsonUtil.unbox fails in case of a null value in objects with a NPE&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
    at java.util.HashMap.merge(HashMap.java:1224)&lt;br/&gt;
    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)&lt;br/&gt;
    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)&lt;br/&gt;
    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet.lambda$entryConsumer$0(Collections.java:1575)&lt;br/&gt;
    at java.util.Iterator.forEachRemaining(Iterator.java:116)&lt;br/&gt;
    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
    at java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntrySetSpliterator.forEachRemaining(Collections.java:1600)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)&lt;br/&gt;
    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)&lt;br/&gt;
    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100684">SLING-7113</key>
            <summary>JsonUtil.unbox generates a NPE with null values in object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Sep 2017 06:02:46 +0000</created>
                <updated>Fri, 8 Sep 2017 06:04:05 +0000</updated>
                                            <version>Launchpad Integration Tests 1.0.2</version>
                                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13100685">SLING-7114</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jsun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7112] ResourceBundle cannot be retrieved for private-use country codes</title>
                <link>https://issues.apache.org/jira/browse/SLING-7112</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In HTL the @&#8203;i18n tag fails when jcr:language not in ISO list. &lt;br/&gt;
es_PY falls back to es, but es_XL falls back to default en. &lt;/p&gt;

&lt;p&gt;I think this is related to the check for valid countries in JcrResourceBundleProvider::toLocale().&lt;br/&gt;
If you feel you must check for valid country code, please also allow case where country code starts with X which is allowed by the &lt;span class=&quot;error&quot;&gt;&amp;#91;IANA spec&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
%%&lt;br/&gt;
Type: region&lt;br/&gt;
Subtag: XA..XZ&lt;br/&gt;
Description: Private use&lt;br/&gt;
Added: 2005-10-16 &lt;br/&gt;
```&lt;/p&gt;</description>
                <environment>Mac OS, AEM</environment>
        <key id="13100274">SLING-7112</key>
            <summary>ResourceBundle cannot be retrieved for private-use country codes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="h.putman@ieee.org">Harold Putman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Sep 2017 19:31:20 +0000</created>
                <updated>Fri, 1 Dec 2017 14:44:16 +0000</updated>
                            <resolved>Thu, 14 Sep 2017 15:05:51 +0000</resolved>
                                    <version>i18n 2.5.8</version>
                                    <fixVersion>i18n 2.5.10</fixVersion>
                                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16156240" author="githubbot" created="Thu, 7 Sep 2017 00:26:52 +0000"  >&lt;p&gt;GitHub user HaroldPutman opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/251&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Add support for Private Use Country codes&lt;/p&gt;

&lt;p&gt;    Resolves &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7112&quot; title=&quot;ResourceBundle cannot be retrieved for private-use country codes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7112&quot;&gt;&lt;del&gt;SLING-7112&lt;/del&gt;&lt;/a&gt; by allowing the private use country codes as defined in &lt;span class=&quot;error&quot;&gt;&amp;#91;IANA Language Subtag Registry&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&lt;/a&gt;) AA, QM-QZ, XA-XZ, ZZ&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/HaroldPutman/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/HaroldPutman/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7112&quot; title=&quot;ResourceBundle cannot be retrieved for private-use country codes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7112&quot;&gt;&lt;del&gt;SLING-7112&lt;/del&gt;&lt;/a&gt;-allow-private-use-country&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/251.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/251.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #251&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9f24596e4efbaeb01fee3b852e338783eaa28255&lt;br/&gt;
Author: Harold Putman &amp;lt;harold.putman@lexmark.com&amp;gt;&lt;br/&gt;
Date:   2017-09-07T00:15:36Z&lt;/p&gt;

&lt;p&gt;    Add support for Private Use Country codes&lt;/p&gt;

&lt;p&gt;    Resolves &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7112&quot; title=&quot;ResourceBundle cannot be retrieved for private-use country codes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7112&quot;&gt;&lt;del&gt;SLING-7112&lt;/del&gt;&lt;/a&gt; by allowing the private use country codes as defined in &lt;span class=&quot;error&quot;&gt;&amp;#91;IANA Language Subtag Registry&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&lt;/a&gt;) AA, QM-QZ, XA-XZ, ZZ&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16166423" author="kwin" created="Thu, 14 Sep 2017 15:05:51 +0000"  >&lt;p&gt;Applied slightly modified patch from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=h.putman%40ieee.org&quot; class=&quot;user-hover&quot; rel=&quot;h.putman@ieee.org&quot;&gt;h.putman@ieee.org&lt;/a&gt;. Thanks a lot for the contribution.&lt;/p&gt;</comment>
                            <comment id="16166425" author="githubbot" created="Thu, 14 Sep 2017 15:07:28 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/251&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jqbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7111] Compiler creates class files even if compilation fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-7111</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When compilation fails the class files are created nevertheless. From that point on no recompilation is done as the timestamp of that class file - which does not work - is never than the source.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100150">SLING-7111</key>
            <summary>Compiler creates class files even if compilation fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Sep 2017 13:47:40 +0000</created>
                <updated>Tue, 15 Feb 2022 09:45:25 +0000</updated>
                            <resolved>Wed, 6 Sep 2017 13:48:27 +0000</resolved>
                                    <version>Commons Compiler 2.3.0</version>
                                    <fixVersion>Commons Compiler 2.3.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16155358" author="cziegeler" created="Wed, 6 Sep 2017 13:48:28 +0000"  >&lt;p&gt;Fixed in rev 1807483&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13428529">SLING-11144</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jpk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7109] Bundle not marked as used if a resource is loaded from a bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-7109</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Updated description: if a resource is loaded from a bundle it is currently not marked as being used, therefore the classloader is not recreated if that bundle changes&lt;/p&gt;</description>
                <environment></environment>
        <key id="13100059">SLING-7109</key>
            <summary>Bundle not marked as used if a resource is loaded from a bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Sep 2017 07:28:26 +0000</created>
                <updated>Wed, 6 Sep 2017 14:01:36 +0000</updated>
                            <resolved>Wed, 6 Sep 2017 14:01:36 +0000</resolved>
                                    <version>Commons ClassLoader 1.4.0</version>
                                    <fixVersion>Commons ClassLoader 1.4.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16155009" author="cziegeler" created="Wed, 6 Sep 2017 08:40:15 +0000"  >&lt;p&gt;I&apos;ve updated the implementation to also refresh the classloader if a bundle is used and updated. Added a test case to verify the behaviour&lt;/p&gt;</comment>
                            <comment id="16155085" author="cziegeler" created="Wed, 6 Sep 2017 09:38:44 +0000"  >&lt;p&gt;Actually my whole assumption seems to be wrong as an update sends an unresolved event and (if packages are refreshed) a resolved event. Both are already covered by our code. Need some further testing whether this code change fixes the problem nevertheless&lt;/p&gt;</comment>
                            <comment id="16155388" author="cziegeler" created="Wed, 6 Sep 2017 14:01:36 +0000"  >&lt;p&gt;Cleaned up with 1807491&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jozz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7108] FullTextIndexingTest times out on Java 9</title>
                <link>https://issues.apache.org/jira/browse/SLING-7108</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 3, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 45.657 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest
testUploadedPdfIsIndexed[0 - lorem-ipsum.pdf](org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest)  Time elapsed: 15.232 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: RetryLoop failed, condition is false after 15 seconds: A document containing &apos;Excepteur&apos; is found under /tmp/test-FullTextIndexingTest
	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.sling.testing.tools.retry.RetryLoop.&amp;lt;init&amp;gt;(RetryLoop.java:65)
	at org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest.testUploadedPdfIsIndexed(FullTextIndexingTest.java:97)

testUploadedPdfIsIndexed[1 - another.pdf](org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest)  Time elapsed: 15.212 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: RetryLoop failed, condition is false after 15 seconds: A document containing &apos;some text that we will search for&apos; is found under /var/test-FullTextIndexingTest
	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.sling.testing.tools.retry.RetryLoop.&amp;lt;init&amp;gt;(RetryLoop.java:65)
	at org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest.testUploadedPdfIsIndexed(FullTextIndexingTest.java:97)

testUploadedPdfIsIndexed[2 - french.pdf](org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest)  Time elapsed: 15.211 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: RetryLoop failed, condition is false after 15 seconds: A document containing &apos;un autre PDF pour le test fulltext&apos; is found under /libs/test-FullTextIndexingTest
	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.sling.testing.tools.retry.RetryLoop.&amp;lt;init&amp;gt;(RetryLoop.java:65)
	at org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest.testUploadedPdfIsIndexed(FullTextIndexingTest.java:97)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099754">SLING-7108</key>
            <summary>FullTextIndexingTest times out on Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Sep 2017 08:02:16 +0000</created>
                <updated>Thu, 14 Dec 2017 09:05:14 +0000</updated>
                            <resolved>Thu, 14 Dec 2017 09:05:14 +0000</resolved>
                                                    <fixVersion>Starter 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16166027" author="rombert" created="Thu, 14 Sep 2017 09:57:53 +0000"  >&lt;p&gt;This is probably caused by Tika requiring JAXB classes and the Async index update not being triggered.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14.09.2017 12:52:18.076 *ERROR* [sling-default-1-Registered Service.498] org.apache.sling.commons.scheduler.impl.QuartzScheduler Exception during job execution of job &apos;org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate@482cf5c8&apos; with name &apos;Registered Service.498&apos; and config SINGLE : javax/xml/bind/JAXBException
java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException
        at org.apache.tika.config.TikaConfig.&amp;lt;init&amp;gt;(TikaConfig.java:161)
        at org.apache.tika.config.TikaConfig.&amp;lt;init&amp;gt;(TikaConfig.java:151)
        at org.apache.tika.config.TikaConfig.&amp;lt;init&amp;gt;(TikaConfig.java:144)
        at org.apache.tika.config.TikaConfig.&amp;lt;init&amp;gt;(TikaConfig.java:140)
        at org.apache.jackrabbit.oak.plugins.index.lucene.binary.BinaryTextExtractor.createDefaultParser(BinaryTextExtractor.java:237)
        at org.apache.jackrabbit.oak.plugins.index.lucene.binary.BinaryTextExtractor.&amp;lt;clinit&amp;gt;(BinaryTextExtractor.java:58)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext.getTextExtractor(LuceneIndexEditorContext.java:226)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext.newDocumentMaker(LuceneIndexEditorContext.java:211)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.makeDocument(LuceneIndexEditor.java:268)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.addOrUpdate(LuceneIndexEditor.java:244)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.leave(LuceneIndexEditor.java:140)
        at org.apache.jackrabbit.oak.spi.commit.CompositeEditor.leave(CompositeEditor.java:74)
        at org.apache.jackrabbit.oak.spi.commit.ProgressNotificationEditor.leave(ProgressNotificationEditor.java:76)
        at org.apache.jackrabbit.oak.spi.commit.VisibleEditor.leave(VisibleEditor.java:63)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeAdded(EditorDiff.java:130)
        at org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState.compareAgainstEmptyState(EmptyNodeState.java:161)
        at org.apache.jackrabbit.oak.segment.SegmentNodeState.compareAgainstBaseState(SegmentNodeState.java:461)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:52)
        at org.apache.jackrabbit.oak.plugins.index.IndexUpdate.enter(IndexUpdate.java:169)
        at org.apache.jackrabbit.oak.spi.commit.VisibleEditor.enter(VisibleEditor.java:57)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:49)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.updateIndex(AsyncIndexUpdate.java:695)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.runWhenPermitted(AsyncIndexUpdate.java:543)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.run(AsyncIndexUpdate.java:402)
        at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:245)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
        at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException
        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:466)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:563)
        at org.apache.sling.launchpad.base.shared.LauncherClassLoader.loadClass(LauncherClassLoader.java:160)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        at org.apache.felix.framework.ExtensionManager$ExtensionManagerWiring.getClassByDelegation(ExtensionManager.java:1009)
        at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1631)
        at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1561)
        at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:80)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        ... 29 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There&apos;s also a seemingly related issue logged:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14.09.2017 12:52:23.033 *ERROR* [sling-default-2-Registered Service.498] org.apache.sling.commons.scheduler.impl.QuartzScheduler Exception d
uring job execution of job &apos;org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate@482cf5c8&apos; with name &apos;Registered Service.498&apos; and config
 SINGLE : Could not initialize class org.apache.jackrabbit.oak.plugins.index.lucene.binary.BinaryTextExtractor
java.lang.NoClassDefFoundError: Could not initialize class org.apache.jackrabbit.oak.plugins.index.lucene.binary.BinaryTextExtractor
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext.getTextExtractor(LuceneIndexEditorContext.java:226)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext.newDocumentMaker(LuceneIndexEditorContext.java:211)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.makeDocument(LuceneIndexEditor.java:268)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.addOrUpdate(LuceneIndexEditor.java:244)
        at org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditor.leave(LuceneIndexEditor.java:140)
        at org.apache.jackrabbit.oak.spi.commit.CompositeEditor.leave(CompositeEditor.java:74)
        at org.apache.jackrabbit.oak.spi.commit.ProgressNotificationEditor.leave(ProgressNotificationEditor.java:76)
        at org.apache.jackrabbit.oak.spi.commit.VisibleEditor.leave(VisibleEditor.java:63)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeAdded(EditorDiff.java:130)
        at org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState.compareAgainstEmptyState(EmptyNodeState.java:161)
        at org.apache.jackrabbit.oak.segment.SegmentNodeState.compareAgainstBaseState(SegmentNodeState.java:461)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeAdded(EditorDiff.java:125)
        at org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState.compareAgainstEmptyState(EmptyNodeState.java:161)
        at org.apache.jackrabbit.oak.segment.SegmentNodeState.compareAgainstBaseState(SegmentNodeState.java:461)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:52)
        at org.apache.jackrabbit.oak.plugins.index.IndexUpdate.enter(IndexUpdate.java:169)
        at org.apache.jackrabbit.oak.spi.commit.VisibleEditor.enter(VisibleEditor.java:57)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:49)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.updateIndex(AsyncIndexUpdate.java:695)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.runWhenPermitted(AsyncIndexUpdate.java:543)
        at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.run(AsyncIndexUpdate.java:402)
        at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:245)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
        at java.base/java.lang.Thread.run(Thread.java:844)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16166356" author="rombert" created="Thu, 14 Sep 2017 14:14:59 +0000"  >&lt;p&gt;Also posted on user@tika.apache.org - &lt;a href=&quot;https://lists.apache.org/thread.html/72342314e709417bcb777fd3511b700dee443a3a658b730e52f99e38@%3Cuser.tika.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/72342314e709417bcb777fd3511b700dee443a3a658b730e52f99e38@%3Cuser.tika.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16175979" author="rombert" created="Fri, 22 Sep 2017 06:22:11 +0000"  >&lt;p&gt;The Tika issue is fixed and according to &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-2466?focusedCommentId=16175449&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16175449&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TIKA-2466?focusedCommentId=16175449&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16175449&lt;/a&gt; &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We&apos;ll probably roll 1.17 shortly after the next version of PDFBox is available...next few weeks.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16285141" author="kwin" created="Sun, 10 Dec 2017 08:31:08 +0000"  >&lt;p&gt;Release vote of Tika 1.17 has been started: &lt;a href=&quot;https://lists.apache.org/thread.html/ec1d5d4ee949803ce6b7c66b2cbe772d4dc536249cd316ed3ab5b1cd@%3Cdev.tika.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/ec1d5d4ee949803ce6b7c66b2cbe772d4dc536249cd316ed3ab5b1cd@%3Cdev.tika.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16285143" author="kwin" created="Sun, 10 Dec 2017 08:43:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Is there already an according issue at Oak? To my surprise I haven&apos;t found anything related below &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6727&quot; title=&quot;Oak should compile &amp;amp; test on Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6727&quot;&gt;&lt;del&gt;OAK-6727&lt;/del&gt;&lt;/a&gt;. IIUC the Tika upgrade needs to happen in Oak.&lt;/p&gt;</comment>
                            <comment id="16290563" author="rombert" created="Thu, 14 Dec 2017 08:54:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - sorry, missed this. The Tika dependency does not come from Oak, we explicitly declare it in the provisioning model. Since they don&apos;t package it, there is nothing to change there.&lt;/p&gt;</comment>
                            <comment id="16290580" author="rombert" created="Thu, 14 Dec 2017 09:05:14 +0000"  >&lt;p&gt;Fixed by upgrading to Tika 1.17&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13117422">SLING-7235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13102352">TIKA-2466</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jn4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7107] Some JSP tests fail under Java 9 - The method getProperty(String) is undefined for the type AdapterType</title>
                <link>https://issues.apache.org/jira/browse/SLING-7107</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Might have the same cause as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7105&quot; title=&quot;Some JSP tests fail under Java 9 -  parameterized types are only available if source level is 1.5 or greater&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7105&quot;&gt;&lt;del&gt;SLING-7105&lt;/del&gt;&lt;/a&gt;, but listing it here for the sake of being complete.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.sling.launchpad.webapp.integrationtest.JspScriptingTest
Tests run: 7, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 13.451 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.JspScriptingTest
testRtJsp(org.apache.sling.launchpad.webapp.integrationtest.JspScriptingTest)  Time elapsed: 5.349 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected status 200 for http://localhost:41000/JspScriptingTest/1504554193227/rt/this_is_a_test_node_.html (content=&amp;lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;500 Unable to compile class for JSP: 

An error occurred at line: 27 in the jsp file: /apps/nt/unstructured/html.jsp
The method getProperty(String) is undefined for the type AdapterType
24: 
25: &amp;amp;lt;h1&amp;amp;gt;JSP rendering result&amp;amp;lt;/h1&amp;amp;gt;
26: &amp;amp;lt;p&amp;amp;gt;
27: 	text value using resource.adaptTo:&amp;amp;lt;%= resource.adaptTo(javax.jcr.Node.class).getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;
28: &amp;amp;lt;/p&amp;amp;gt;
29: &amp;amp;lt;p&amp;amp;gt;
30: 	text value using currentNode:&amp;amp;lt;%= currentNode.getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;
&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;h1&amp;gt;Unable to compile class for JSP: 

An error occurred at line: 27 in the jsp file: /apps/nt/unstructured/html.jsp
The method getProperty(String) is undefined for the type AdapterType
24: 
25: &amp;amp;lt;h1&amp;amp;gt;JSP rendering result&amp;amp;lt;/h1&amp;amp;gt;
26: &amp;amp;lt;p&amp;amp;gt;
27: 	text value using resource.adaptTo:&amp;amp;lt;%= resource.adaptTo(javax.jcr.Node.class).getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;
28: &amp;amp;lt;/p&amp;amp;gt;
29: &amp;amp;lt;p&amp;amp;gt;
30: 	text value using currentNode:&amp;amp;lt;%= currentNode.getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;
 (500)&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;The requested URL /JspScriptingTest/1504554193227/rt/this_is_a_test_node_.html resulted in an error in /apps/nt/unstructured/html.jsp.&amp;lt;/p&amp;gt;
&amp;lt;h3&amp;gt;Exception:&amp;lt;/h3&amp;gt;
&amp;lt;pre&amp;gt;
org.apache.sling.scripting.jsp.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 27 in the jsp file: /apps/nt/unstructured/html.jsp
The method getProperty(String) is undefined for the type AdapterType
24: 
25: &amp;amp;lt;h1&amp;amp;gt;JSP rendering result&amp;amp;lt;/h1&amp;amp;gt;
26: &amp;amp;lt;p&amp;amp;gt;
27: 	text value using resource.adaptTo:&amp;amp;lt;%= resource.adaptTo(javax.jcr.Node.class).getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;
28: &amp;amp;lt;/p&amp;amp;gt;
29: &amp;amp;lt;p&amp;amp;gt;
30: 	text value using currentNode:&amp;amp;lt;%= currentNode.getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;

	at org.apache.sling.scripting.jsp.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
	at org.apache.sling.scripting.jsp.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:136)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:304)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:282)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:269)
	at org.apache.sling.scripting.jsp.jasper.JspCompilationContext.compile(JspCompilationContext.java:501)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.prepareServlet(JspServletWrapper.java:427)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:486)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.NoPropertyFilter.doFilter(NoPropertyFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.SlingFilter.doFilter(SlingFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
	at org.apache.sling.junit.impl.servlet.TestLogServlet$TestNameLoggingFilter.doFilter(TestLogServlet.java:257)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:848)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:584)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:224)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
	at org.eclipse.jetty.server.Server.handle(Server.java:534)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:108)
	at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)
	at java.base/java.lang.Thread.run(Thread.java:844)
&amp;lt;/pre&amp;gt;
&amp;lt;h3&amp;gt;Request Progress:&amp;lt;/h3&amp;gt;
&amp;lt;pre&amp;gt;
      0 TIMER_START{Request Processing}
      6 COMMENT timer_end format is {&amp;amp;lt;elapsed microseconds&amp;amp;gt;,&amp;amp;lt;timer name&amp;amp;gt;} &amp;amp;lt;optional message&amp;amp;gt;
     36 LOG Method=GET, PathInfo=null
     47 TIMER_START{handleSecurity}
   4632 TIMER_END{4582,handleSecurity} authenticator org.apache.sling.auth.core.impl.SlingAuthenticator@4d8e3503 returns true
   7312 TIMER_START{ResourceResolution}
   7481 TIMER_END{166,ResourceResolution} URI=/JspScriptingTest/1504554193227/rt/this_is_a_test_node_.html resolves to Resource=JcrNodeResource, type=nt:unstructured, superType=null, path=/JspScriptingTest/1504554193227/rt/this_is_a_test_node_
   7498 LOG Resource Path Info: SlingRequestPathInfo: path=&amp;amp;apos;/JspScriptingTest/1504554193227/rt/this_is_a_test_node_&amp;amp;apos;, selectorString=&amp;amp;apos;null&amp;amp;apos;, extension=&amp;amp;apos;html&amp;amp;apos;, suffix=&amp;amp;apos;null&amp;amp;apos;
   7499 TIMER_START{ServletResolution}
   7504 TIMER_START{resolveServlet(/JspScriptingTest/1504554193227/rt/this_is_a_test_node_)}
   9638 TIMER_END{2131,resolveServlet(/JspScriptingTest/1504554193227/rt/this_is_a_test_node_)} Using servlet /apps/nt/unstructured/html.jsp
   9653 TIMER_END{2152,ServletResolution} URI=/JspScriptingTest/1504554193227/rt/this_is_a_test_node_.html handled by Servlet=/apps/nt/unstructured/html.jsp
   9659 LOG Applying Requestfilters
   9667 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
   9672 LOG Calling filter: org.apache.sling.launchpad.testservices.filters.SlingFilter
   9697 LOG Calling filter: org.apache.sling.launchpad.testservices.filters.NoPropertyFilter
   9713 LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter
   9719 LOG Applying Componentfilters
   9728 TIMER_START{/apps/nt/unstructured/html.jsp#0}
 101404 LOG SCRIPT ERROR: org.apache.sling.scripting.jsp.jasper.JasperException: Unable to compile class for JSP: //An error occurred at line: 27 in the jsp file: /apps/nt/unstructured/html.jsp/The method getProperty(String) is undefined for the type AdapterType/24: /25: &amp;amp;lt;h1&amp;amp;gt;JSP rendering result&amp;amp;lt;/h1&amp;amp;gt;/26: &amp;amp;lt;p&amp;amp;gt;/27: 	text value using resource.adaptTo:&amp;amp;lt;%= resource.adaptTo(javax.jcr.Node.class).getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;/28: &amp;amp;lt;/p&amp;amp;gt;/29: &amp;amp;lt;p&amp;amp;gt;/30: 	text value using currentNode:&amp;amp;lt;%= currentNode.getProperty(&amp;amp;quot;text&amp;amp;quot;).getValue().getString() %&amp;amp;gt;/
 101425 TIMER_END{91693,/apps/nt/unstructured/html.jsp#0}
 101489 LOG Filter timing: filter=org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter, inner=92, total=92, outer=0
 101498 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.SlingFilterWithPattern, inner=92, total=92, outer=0
 101505 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.NoPropertyFilter, inner=92, total=92, outer=0
 101512 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.SlingFilter, inner=92, total=92, outer=0
 101850 LOG Applying Error filters
 101864 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
 101931 TIMER_START{handleError:throwable=org.apache.sling.scripting.jsp.jasper.JasperException}
 103675 TIMER_END{1740,handleError:throwable=org.apache.sling.scripting.jsp.jasper.JasperException} Using handler org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet
 106750 TIMER_END{106746,Request Processing} Dumping SlingRequestProgressTracker Entries
&amp;lt;/pre&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;address&amp;gt;ApacheSling/2.6 (jetty/9.3.20.v20170531, Java HotSpot(TM) 64-Bit Server VM 9, Linux 3.19.0-25-generic amd64)&amp;lt;/address&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
) expected:&amp;lt;200&amp;gt; but was:&amp;lt;500&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.TestCase.assertEquals(TestCase.java:401)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:457)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:432)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:424)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:419)
	at org.apache.sling.launchpad.webapp.integrationtest.JspScriptingTest.checkContent(JspScriptingTest.java:183)
	at org.apache.sling.launchpad.webapp.integrationtest.JspScriptingTest.testRtJsp(JspScriptingTest.java:88)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099751">SLING-7107</key>
            <summary>Some JSP tests fail under Java 9 - The method getProperty(String) is undefined for the type AdapterType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Sep 2017 08:00:25 +0000</created>
                <updated>Thu, 2 Apr 2020 11:35:35 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 19:55:46 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13099674">SLING-7105</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13295726">SLING-9327</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jn3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7106] JaxbMarshallingTest fails with Java 9</title>
                <link>https://issues.apache.org/jira/browse/SLING-7106</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.jaxb.JaxbMarshallingTest
testJaxbEntityIsMarshalled(org.apache.sling.launchpad.webapp.integrationtest.jaxb.JaxbMarshallingTest)  Time elapsed: 0.005 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected status 200 for http://localhost:41000/bin/jaxb.xml (content=&amp;lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;404 Resource at &amp;amp;apos;/bin/jaxb.xml&amp;amp;apos; not found: No resource found&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;h1&amp;gt;Resource at &amp;amp;apos;/bin/jaxb.xml&amp;amp;apos; not found: No resource found (404)&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;The requested URL /bin/jaxb.xml resulted in an error in org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet.&amp;lt;/p&amp;gt;
&amp;lt;h3&amp;gt;Request Progress:&amp;lt;/h3&amp;gt;
&amp;lt;pre&amp;gt;
      0 TIMER_START{Request Processing}
      1 COMMENT timer_end format is {&amp;amp;lt;elapsed microseconds&amp;amp;gt;,&amp;amp;lt;timer name&amp;amp;gt;} &amp;amp;lt;optional message&amp;amp;gt;
      4 LOG Method=GET, PathInfo=null
      5 TIMER_START{handleSecurity}
   1423 TIMER_END{1416,handleSecurity} authenticator org.apache.sling.auth.core.impl.SlingAuthenticator@4d8e3503 returns true
   2207 TIMER_START{ResourceResolution}
   2405 TIMER_END{197,ResourceResolution} URI=/bin/jaxb.xml resolves to Resource=NonExistingResource, path=/bin/jaxb.xml
   2411 LOG Resource Path Info: SlingRequestPathInfo: path=&amp;amp;apos;/bin/jaxb.xml&amp;amp;apos;, selectorString=&amp;amp;apos;null&amp;amp;apos;, extension=&amp;amp;apos;xml&amp;amp;apos;, suffix=&amp;amp;apos;null&amp;amp;apos;
   2411 TIMER_START{ServletResolution}
   2413 TIMER_START{resolveServlet(/bin/jaxb.xml)}
   2708 TIMER_END{294,resolveServlet(/bin/jaxb.xml)} Using servlet org.apache.sling.servlets.get.DefaultGetServlet
   2711 TIMER_END{299,ServletResolution} URI=/bin/jaxb.xml handled by Servlet=org.apache.sling.servlets.get.DefaultGetServlet
   2713 LOG Applying Requestfilters
   2715 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
   2717 LOG Calling filter: org.apache.sling.launchpad.testservices.filters.SlingFilter
   2723 LOG Calling filter: org.apache.sling.launchpad.testservices.filters.NoPropertyFilter
   2727 LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter
   2730 LOG Applying Componentfilters
   2733 TIMER_START{org.apache.sling.servlets.get.DefaultGetServlet#0}
   2782 TIMER_END{47,org.apache.sling.servlets.get.DefaultGetServlet#0}
   2814 LOG Filter timing: filter=org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter, inner=0, total=0, outer=0
   2816 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.SlingFilterWithPattern, inner=0, total=0, outer=0
   2817 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.NoPropertyFilter, inner=0, total=0, outer=0
   2819 LOG Filter timing: filter=org.apache.sling.launchpad.testservices.filters.SlingFilter, inner=0, total=0, outer=0
   2892 LOG Applying Error filters
   2894 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
   2900 TIMER_START{handleError:status=404}
   3084 TIMER_END{182,handleError:status=404} Using handler org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet
   3195 TIMER_END{3194,Request Processing} Dumping SlingRequestProgressTracker Entries
&amp;lt;/pre&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;address&amp;gt;ApacheSling/2.6 (jetty/9.3.20.v20170531, Java HotSpot(TM) 64-Bit Server VM 9, Linux 3.19.0-25-generic amd64)&amp;lt;/address&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
) expected:&amp;lt;200&amp;gt; but was:&amp;lt;404&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.TestCase.assertEquals(TestCase.java:401)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:457)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:432)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:424)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:419)
	at org.apache.sling.launchpad.webapp.integrationtest.jaxb.JaxbMarshallingTest.testJaxbEntityIsMarshalled(JaxbMarshallingTest.java:34)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099750">SLING-7106</key>
            <summary>JaxbMarshallingTest fails with Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Sep 2017 07:58:21 +0000</created>
                <updated>Tue, 23 Oct 2018 09:24:00 +0000</updated>
                            <resolved>Thu, 23 Aug 2018 21:39:00 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 11</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16166025" author="rombert" created="Thu, 14 Sep 2017 09:54:57 +0000"  >&lt;p&gt;This is caused by the JAXB functionality being moved to the &lt;tt&gt;java.se.ee&lt;/tt&gt; module in Java 9:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14.09.2017 12:52:15.117 *ERROR* [Apache Sling Repository Startup Thread] org.apache.sling.launchpad.test-services [org.apache.sling.launchpa
d.testservices.servlets.JaxbServlet(50)] Error during instantiation of the implementation object (java.lang.NoClassDefFoundError: javax/xml/
bind/JAXBException)
java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException
        at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3110)
        at java.base/java.lang.Class.getConstructor0(Class.java:3315)
        at java.base/java.lang.Class.newInstance(Class.java:530)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:237)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:109)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:823)
        at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
        at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
        at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
        at org.apache.felix.framework.Felix.getService(Felix.java:3736)
        at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
        at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72)
        at org.apache.felix.scr.impl.inject.BindMethod.getServiceObject(BindMethod.java:651)
        at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2201)
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.prebind(DependencyManager.java:403)
        at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1520)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:1006)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:859)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:823)
        at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
        at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
        at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
        at org.apache.felix.framework.Felix.getService(Felix.java:3736)
        at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
        at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72)
        at org.apache.felix.scr.impl.inject.BindMethod.getServiceObject(BindMethod.java:651)
        at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2201)
        at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1714)
        at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1699)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:372)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleDynamicCustomizer.addedService(DependencyManager.java:777)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleDynamicCustomizer.addedService(DependencyManager.java:743)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
        at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
        at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
        at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4594)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3586)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:887)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:874)
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:132)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:941)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:741)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:1012)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:968)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
        at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
        at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
        at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4594)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3586)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:521)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.registerFactory(ResourceResolverFactoryActivator.java:486)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:549)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:73)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerAdded(ResourceResolverFactoryActivator.java:383)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.register(ResourceProviderTracker.java:200)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$200(ResourceProviderTracker.java:59)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:128)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
        at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
        at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)
        at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)
        at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
        at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
        at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4594)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3586)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:887)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:874)
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:132)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:941)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:741)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:1012)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:968)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
        at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
        at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
        at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4594)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3586)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.registerService(AbstractSlingRepositoryManager.java:203)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:492)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:85)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:455)
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException
        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:466)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:563)
        at org.apache.sling.launchpad.base.shared.LauncherClassLoader.loadClass(LauncherClassLoader.java:160)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        at org.apache.felix.framework.ExtensionManager$ExtensionManagerWiring.getClassByDelegation(ExtensionManager.java:1009)
        at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1631)
        at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1561)
        at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:80)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        ... 108 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16285142" author="kwin" created="Sun, 10 Dec 2017 08:34:53 +0000"  >&lt;p&gt;The list of Maven dependencies which can act as replacement for missing packages in Java 9 is listed here: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16214230&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16214230&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16590841" author="karlpauls" created="Thu, 23 Aug 2018 21:39:00 +0000"  >&lt;p&gt;I added the required jaxb api and impl as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7235&quot; title=&quot;Remove requirement for --add-modules java.se.ee&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7235&quot;&gt;&lt;del&gt;SLING-7235&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13117422">SLING-7235</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13108098">SLING-7186</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jn3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7105] Some JSP tests fail under Java 9 -  parameterized types are only available if source level is 1.5 or greater</title>
                <link>https://issues.apache.org/jira/browse/SLING-7105</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;An error occurred at line: 792 in the generated java file
Syntax error, parameterized types are only available if source level is 1.5 or greater
	at org.apache.sling.scripting.jsp.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
	at org.apache.sling.scripting.jsp.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:136)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:304)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:282)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:269)
	at org.apache.sling.scripting.jsp.jasper.JspCompilationContext.compile(JspCompilationContext.java:501)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.prepareServlet(JspServletWrapper.java:427)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:486)
	at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:342)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:97)
	at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:603)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
	at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.NoPropertyFilter.doFilter(NoPropertyFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.SlingFilter.doFilter(SlingFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
	at org.apache.sling.junit.impl.servlet.TestLogServlet$TestNameLoggingFilter.doFilter(TestLogServlet.java:257)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:138)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at org.apache.felix.http.bridge.internal.BridgeActivator$1.service(BridgeActivator.java:83)
	at org.apache.felix.http.proxy.ProxyServlet.service(ProxyServlet.java:123)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at org.apache.sling.launchpad.base.webapp.SlingServletDelegate.service(SlingServletDelegate.java:286)
	at org.apache.sling.launchpad.webapp.SlingServlet.service(SlingServlet.java:175)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:837)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
	at org.eclipse.jetty.server.Server.handle(Server.java:523)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)
	at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)
	at java.base/java.lang.Thread.run(Thread.java:844)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099674">SLING-7105</key>
            <summary>Some JSP tests fail under Java 9 -  parameterized types are only available if source level is 1.5 or greater</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2017 19:51:34 +0000</created>
                <updated>Mon, 8 Jan 2018 15:48:03 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 19:52:33 +0000</resolved>
                                                    <fixVersion>Commons Compiler 2.3.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16153257" author="cziegeler" created="Tue, 5 Sep 2017 08:26:34 +0000"  >&lt;p&gt;I assume this needs to be fixed in commons compiler. The java version (9 or 1.9?) is passed to commons compiler and the Eclipse compiler might not know this version and then defaults to 1.5 (just a guess)&lt;/p&gt;</comment>
                            <comment id="16163548" author="rombert" created="Tue, 12 Sep 2017 19:52:01 +0000"  >&lt;p&gt;Actually the problem was a bit less exciting. ECJ expects the version string &quot;1.9&quot; instead of &quot;9&quot;. This holds for the current git version as well, see &lt;a href=&quot;http://git.eclipse.org/c/gerrit/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/impl/CompilerOptions.java#n779&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CompilerOptions.versionToJdkLevel&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16163549" author="rombert" created="Tue, 12 Sep 2017 19:52:33 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808147&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13129281">SLING-7365</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13099751">SLING-7107</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jmmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7103] Authentication-related test failures on Java 9</title>
                <link>https://issues.apache.org/jira/browse/SLING-7103</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A number of ITs fail, namely:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 8, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.086 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.userManager.CreateUserTest
testAnonymousSelfRegistrationDisabled(org.apache.sling.launchpad.webapp.integrationtest.userManager.CreateUserTest)  Time elapsed: 0.006 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: expected:&amp;lt;500&amp;gt; but was:&amp;lt;401&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.Assert.assertEquals(Assert.java:241)
	at junit.framework.TestCase.assertEquals(TestCase.java:409)
	at org.apache.sling.commons.testing.integration.HttpTestBase.assertPostStatus(HttpTestBase.java:410)
	at org.apache.sling.launchpad.webapp.integrationtest.userManager.CreateUserTest.testAnonymousSelfRegistrationDisabled(CreateUserTest.java:211)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest
testForcedLogin(org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest)  Time elapsed: 0.004 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected status 200 for http://localhost:41000/system/sling/info.sessionInfo.json (content=) expected:&amp;lt;200&amp;gt; but was:&amp;lt;401&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.TestCase.assertEquals(TestCase.java:401)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:457)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:432)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:424)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:419)
	at org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest.testForcedLogin(AuthRequestLoginTest.java:40)

Running org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLogoutTest
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.014 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLogoutTest
testRedirectToResourceAfterLogout(org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLogoutTest)  Time elapsed: 0.014 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Expected redirect expected:&amp;lt;302&amp;gt; but was:&amp;lt;401&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLogoutTest.testRedirectToResourceAfterLogout(RedirectOnLogoutTest.java:70)

Running org.apache.sling.launchpad.webapp.integrationtest.login.AnonymousAccessTest
Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.028 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.login.AnonymousAccessTest
testAnonymousContent(org.apache.sling.launchpad.webapp.integrationtest.login.AnonymousAccessTest)  Time elapsed: 0.012 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected status 200 for http://localhost:41000/AnonymousAccessTest/1504552511132/test_text_1504552511.txt (content=) expected:&amp;lt;200&amp;gt; but was:&amp;lt;401&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.TestCase.assertEquals(TestCase.java:401)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:457)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:432)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:424)
	at org.apache.sling.commons.testing.integration.HttpTestBase.getContent(HttpTestBase.java:419)
	at org.apache.sling.launchpad.webapp.integrationtest.login.AnonymousAccessTest.assertContent(AnonymousAccessTest.java:47)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099672">SLING-7103</key>
            <summary>Authentication-related test failures on Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2017 19:23:27 +0000</created>
                <updated>Fri, 15 Sep 2017 12:04:06 +0000</updated>
                            <resolved>Fri, 15 Sep 2017 12:04:06 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 10</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16167778" author="rombert" created="Fri, 15 Sep 2017 12:04:06 +0000"  >&lt;p&gt;Failures no longer seen on any of the IT jobs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jmm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7102] DavEx integration tests fail on Java 9 - javax.jcr.RepositoryFactory is not an ImageIO SPI class</title>
                <link>https://issues.apache.org/jira/browse/SLING-7102</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This seems to be a stricter constraint in Java 9 when using the &lt;tt&gt;javax.imageio.spi.ServiceRegistry&lt;/tt&gt; class:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.DavExIntegrationTest
testDescriptor(org.apache.sling.launchpad.webapp.integrationtest.DavExIntegrationTest)  Time elapsed: 0 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalArgumentException: javax.jcr.RepositoryFactory is not an ImageIO SPI class
	at java.desktop/javax.imageio.spi.ServiceRegistry.checkClassAllowed(ServiceRegistry.java:745)
	at java.desktop/javax.imageio.spi.ServiceRegistry.lookupProviders(ServiceRegistry.java:230)
	at org.apache.jackrabbit.commons.JcrUtils.getRepository(JcrUtils.java:189)
	at org.apache.jackrabbit.commons.JcrUtils.getRepository(JcrUtils.java:263)
	at org.apache.sling.launchpad.webapp.integrationtest.DavExIntegrationTest.setUp(DavExIntegrationTest.java:47)

testReadNode(org.apache.sling.launchpad.webapp.integrationtest.DavExIntegrationTest)  Time elapsed: 0 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalArgumentException: javax.jcr.RepositoryFactory is not an ImageIO SPI class
	at java.desktop/javax.imageio.spi.ServiceRegistry.checkClassAllowed(ServiceRegistry.java:745)
	at java.desktop/javax.imageio.spi.ServiceRegistry.lookupProviders(ServiceRegistry.java:230)
	at org.apache.jackrabbit.commons.JcrUtils.getRepository(JcrUtils.java:189)
	at org.apache.jackrabbit.commons.JcrUtils.getRepository(JcrUtils.java:263)
	at org.apache.sling.launchpad.webapp.integrationtest.DavExIntegrationTest.setUp(DavExIntegrationTest.java:47)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099671">SLING-7102</key>
            <summary>DavEx integration tests fail on Java 9 - javax.jcr.RepositoryFactory is not an ImageIO SPI class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2017 19:20:34 +0000</created>
                <updated>Thu, 14 Sep 2017 19:37:58 +0000</updated>
                            <resolved>Thu, 14 Sep 2017 19:37:58 +0000</resolved>
                                                    <fixVersion>Starter 10</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16153244" author="rombert" created="Tue, 5 Sep 2017 08:04:31 +0000"  >&lt;p&gt;Looks like this needs to be fixed in Jackrabbit. Here&apos;s a similar fix from another project - &lt;a href=&quot;https://github.com/levigo/jbig2-imageio/pull/18/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/levigo/jbig2-imageio/pull/18/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16153290" author="rombert" created="Tue, 5 Sep 2017 08:53:18 +0000"  >&lt;p&gt;Including the latest Jackrabbit 2.14.3-SNAPSHOT in the launchpad and running the ITs again fixes the test. We just need to include the next Jackrabbit release when it&apos;s out.&lt;/p&gt;</comment>
                            <comment id="16166870" author="rombert" created="Thu, 14 Sep 2017 19:37:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1808385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808385&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13099759">JCR-4179</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jmlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7101] Teleporter tests fail on Java 9 - java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7101</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When running the Sling ITs on Java 9 I get a number of failures, including a number of teleporter tests. They all fail in a manner similar to.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.217 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.repository.SystemUsersTest
provisioningModelUser(org.apache.sling.launchpad.webapp.integrationtest.repository.SystemUsersTest)  Time elapsed: 0.151 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.setConnectionCredentials(TeleporterHttpClient.java:92)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.getHttpGetStatus(TeleporterHttpClient.java:220)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.waitForStatus(TeleporterHttpClient.java:104)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.installBundle(TeleporterHttpClient.java:123)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter.installTestBundle(ClientSideTeleporter.java:258)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter.access$100(ClientSideTeleporter.java:56)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter$3.evaluate(ClientSideTeleporter.java:300)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.setConnectionCredentials(TeleporterHttpClient.java:92)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.getHttpGetStatus(TeleporterHttpClient.java:220)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.waitForStatus(TeleporterHttpClient.java:104)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.installBundle(TeleporterHttpClient.java:123)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter.installTestBundle(ClientSideTeleporter.java:258)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter.access$100(ClientSideTeleporter.java:56)
	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter$3.evaluate(ClientSideTeleporter.java:300)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13099670">SLING-7101</key>
            <summary>Teleporter tests fail on Java 9 - java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2017 19:17:03 +0000</created>
                <updated>Fri, 29 Sep 2017 07:13:28 +0000</updated>
                            <resolved>Tue, 5 Sep 2017 12:06:07 +0000</resolved>
                                                    <fixVersion>JUnit Tests Teleporter 1.0.16</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16152876" author="rombert" created="Mon, 4 Sep 2017 19:17:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - any ideas about this failure?&lt;/p&gt;</comment>
                            <comment id="16153253" author="bdelacretaz" created="Tue, 5 Sep 2017 08:16:34 +0000"  >&lt;p&gt;I&apos;m not sure why the DatatypeConverter is needed but it looks like you need to activate the java.xml.bind module, as per &lt;a href=&quot;https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you try running those tests again with &lt;tt&gt;--add-modules java.xml.bind&lt;/tt&gt; ? I haven&apos;t installed Java 9 myself yet.&lt;/p&gt;</comment>
                            <comment id="16153309" author="rombert" created="Tue, 5 Sep 2017 09:03:36 +0000"  >&lt;p&gt;The tests indeed pass locally with a patch like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/launchpad/testing/pom.xml b/launchpad/testing/pom.xml
index d89224a3d5..647abbb796 100644
--- a/launchpad/testing/pom.xml
+++ b/launchpad/testing/pom.xml
@@ -136,6 +136,7 @@
                     &amp;lt;excludes&amp;gt;
                         &amp;lt;exclude&amp;gt;${failsafe.exclude}&amp;lt;/exclude&amp;gt;
                     &amp;lt;/excludes&amp;gt;
+                    &amp;lt;argLine&amp;gt;--add-modules java.xml.bind&amp;lt;/argLine&amp;gt;
                     &amp;lt;systemPropertyVariables&amp;gt;
                         &amp;lt;launchpad.http.server.url&amp;gt;http://${test.host}:${http.port}/&amp;lt;/launchpad.http.server.url&amp;gt;
                         &amp;lt;launchpad.webdav.server.url&amp;gt;http://${test.host}:${http.port}/${webdav.workspace.path}&amp;lt;/launchpad.webdav.server.url&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can be moved to a java 9 profile so that unblocks the ITs. I&apos;d still like to see exactly why this is triggered and maybe avoid it - I think IDE tests will still be broken if we only fix it in the pom.&lt;/p&gt;</comment>
                            <comment id="16153398" author="rombert" created="Tue, 5 Sep 2017 09:50:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - the single usage is in &lt;tt&gt;TeleporterHttpClient#setConnectionCredentials&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; basicAuth = &lt;span class=&quot;code-quote&quot;&gt;&quot;Basic &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(DatatypeConverter.printBase64Binary(credentials.getBytes()));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are two fixes that I see:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;take a dependency on commons-codec and keep a baseline of Java 7&lt;/li&gt;
	&lt;li&gt;use &lt;tt&gt;java.util.Base64&lt;/tt&gt; but require Java 8&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16153411" author="bdelacretaz" created="Tue, 5 Sep 2017 10:01:00 +0000"  >&lt;p&gt;I was just looking at that - I&apos;m adding tests so we can change that encoder to a different one, currently it&apos;s not covered by automated tests.&lt;/p&gt;

&lt;p&gt;I think requiring Java 8 is ok, the current version is available if someone really needs Java 7.&lt;/p&gt;</comment>
                            <comment id="16153414" author="rombert" created="Tue, 5 Sep 2017 10:02:49 +0000"  >&lt;p&gt;Sounds good to me, thanks.&lt;/p&gt;</comment>
                            <comment id="16153452" author="bdelacretaz" created="Tue, 5 Sep 2017 10:40:49 +0000"  >&lt;p&gt;I have switched to Base64.Encoder in &lt;a href=&quot;http://svn.apache.org/r1807336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1807336&lt;/a&gt; , can you cross-check? Not tested on Java 9 so far.&lt;/p&gt;</comment>
                            <comment id="16153539" author="rombert" created="Tue, 5 Sep 2017 12:06:07 +0000"  >&lt;p&gt;Indeed, the issue is fixed.&lt;/p&gt;

&lt;p&gt;  Tests run: 561, Failures: 13, Errors: 4, Skipped: 1&lt;/p&gt;

&lt;p&gt;Thanks for the quick turnaround!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jmlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7097] The SlingRuntimeObjectModel should adapt a target object to ValueMap as a last resort</title>
                <link>https://issues.apache.org/jira/browse/SLING-7097</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.scripting.sightly.impl.engine.runtime.SlingRuntimeObjectModel&lt;/tt&gt; should adapt a target object to &lt;tt&gt;ValueMap&lt;/tt&gt; as a last resort in &lt;tt&gt;org.apache.sling.scripting.sightly.impl.engine.runtime.SlingRuntimeObjectModel#getProperty&lt;/tt&gt;. Otherwise a &lt;tt&gt;ValueMap&lt;/tt&gt; property obtained through adaptation could hide the result returned by a publicly accessible field or method with the same name / base name as a property provided by the map.&lt;/p&gt;

&lt;p&gt;This regression was introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7085&quot; title=&quot;Reduce code duplication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7085&quot;&gt;&lt;del&gt;SLING-7085&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13099191">SLING-7097</key>
            <summary>The SlingRuntimeObjectModel should adapt a target object to ValueMap as a last resort</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Fri, 1 Sep 2017 10:13:00 +0000</created>
                <updated>Mon, 4 Sep 2017 14:26:20 +0000</updated>
                            <resolved>Fri, 1 Sep 2017 11:11:29 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.38</version>
                                    <fixVersion>Scripting HTL Engine 1.0.40</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16150364" author="radu.cotescu" created="Fri, 1 Sep 2017 11:11:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806931&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13097314">SLING-7085</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jjnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7096] Stack Overflow Exception in AdapterImplementations.getModelClassForResource</title>
                <link>https://issues.apache.org/jira/browse/SLING-7096</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Initially, I assumed it was fixed in the most recent version of Sling Models, as I wasn&apos;t able to reproduce it in AEM 6.3, however it does seem to happen for ServletResources.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/PerficientDigital/AEM-DataLayer/issues/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/PerficientDigital/AEM-DataLayer/issues/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problem occurs when you call the AdapterImplementations.getModelClassForResource method on a Resource has a ResourceType which resolves to the same resource. This causes an infinite regression and eventually a stack overflow exception.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098870">SLING-7096</key>
            <summary>Stack Overflow Exception in AdapterImplementations.getModelClassForResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Aug 2017 13:05:39 +0000</created>
                <updated>Thu, 18 Oct 2018 03:02:22 +0000</updated>
                            <resolved>Thu, 18 Oct 2018 03:02:15 +0000</resolved>
                                    <version>Models Impl 1.4.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16654564" author="klcodanr" created="Thu, 18 Oct 2018 03:02:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/commit/1f81d46ddcebab42fe25368c15311ed0622ff3e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/commit/1f81d46ddcebab42fe25368c15311ed0622ff3e2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ji6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7094] The script factories in the JS Use Provider are not always installed in the correct order</title>
                <link>https://issues.apache.org/jira/browse/SLING-7094</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JavaScript factories configured in &lt;tt&gt;org.apache.sling.scripting.sightly.js.impl.jsapi.SlyBindingsValuesProvider&lt;/tt&gt; are not always instantiated in the order in which they were configured.&lt;/p&gt;

&lt;p&gt;Since this could lead to instantiation errors, the &lt;tt&gt;org.apache.sling.scripting.sightly.js.impl.jsapi.SlyBindingsValuesProvider&lt;/tt&gt; should store the factories in a &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098809">SLING-7094</key>
            <summary>The script factories in the JS Use Provider are not always installed in the correct order</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Aug 2017 08:37:09 +0000</created>
                <updated>Mon, 4 Sep 2017 14:26:05 +0000</updated>
                            <resolved>Thu, 31 Aug 2017 08:56:11 +0000</resolved>
                                                    <fixVersion>Scripting HTL JS Use Provider 1.0.24</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16148673" author="radu.cotescu" created="Thu, 31 Aug 2017 08:56:11 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806769&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jhtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7093] The JavaScript Use Provider should define an explicit dependency to the o.a.s.scripting.javascript bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-7093</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Starting with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6668&quot; title=&quot;Remove embedded Rhino from bundle&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6668&quot;&gt;&lt;del&gt;SLING-6668&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6780&quot; title=&quot;org.apache.sling.scripting.sightly.js.provider does not declare a version range for the org.mozilla.javascript import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6780&quot;&gt;&lt;del&gt;SLING-6780&lt;/del&gt;&lt;/a&gt;, the JS Use Provider bundle needs to define an explicit dependency to the &lt;tt&gt;org.apache.sling.scripting.javascript&lt;/tt&gt; bundle, since it requires the presence of a compatible JavaScript &lt;tt&gt;ScriptEngine&lt;/tt&gt; in the platform.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098788">SLING-7093</key>
            <summary>The JavaScript Use Provider should define an explicit dependency to the o.a.s.scripting.javascript bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Aug 2017 07:39:53 +0000</created>
                <updated>Mon, 4 Sep 2017 14:25:45 +0000</updated>
                            <resolved>Thu, 31 Aug 2017 08:54:59 +0000</resolved>
                                    <version>Scripting JavaScript 3.0.0</version>
                    <version>Scripting HTL JS Use Provider 1.0.22</version>
                                    <fixVersion>Scripting JavaScript 3.0.2</fixVersion>
                    <fixVersion>Scripting HTL JS Use Provider 1.0.24</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16148670" author="radu.cotescu" created="Thu, 31 Aug 2017 08:54:59 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806768&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806768&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jhon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7091] Label and value are interchanged for queue type</title>
                <link>https://issues.apache.org/jira/browse/SLING-7091</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The label and value of the metatype for the queue type are exchanged. The same is true for the priority of the queue and the main queue&lt;/p&gt;</description>
                <environment></environment>
        <key id="13098531">SLING-7091</key>
            <summary>Label and value are interchanged for queue type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Aug 2017 10:42:30 +0000</created>
                <updated>Fri, 29 Sep 2017 07:10:49 +0000</updated>
                            <resolved>Wed, 30 Aug 2017 11:57:11 +0000</resolved>
                                    <version>Event 4.2.6</version>
                                    <fixVersion>Event 4.2.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16147118" author="cziegeler" created="Wed, 30 Aug 2017 11:57:11 +0000"  >&lt;p&gt;Corrected in rev 1806689&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jg3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7090] RRD4J metrics reporter does not close file on deactivate</title>
                <link>https://issues.apache.org/jira/browse/SLING-7090</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The RRD4J metrics reporter does not close the underlying database file on deactivate. Running the tests on windows will show the following failure:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: Unable to invoke method &apos;activate&apos; for class org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter

	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:320)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeLifecycleMethod(OsgiServiceUtil.java:213)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:84)
	at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:171)
	at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:182)
	at org.apache.sling.commons.metrics.rrd4j.impl.ReporterTest.reconfigure(ReporterTest.java:91)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.nio.file.FileSystemException: target\metrics\metrics.rrd -&amp;gt; target\metrics\metrics.rrd.0: The process cannot access the file because it is being used by another process.

	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
	at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:387)
	at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:287)
	at java.nio.file.Files.move(Files.java:1395)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.rename(RRD4JReporter.java:387)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.renameDB(RRD4JReporter.java:369)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.createDB(RRD4JReporter.java:350)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.&amp;lt;init&amp;gt;(RRD4JReporter.java:195)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter$Builder.build(RRD4JReporter.java:161)
	at org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter.activate(CodahaleMetricsReporter.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:311)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was also reported on the sling mailing list: &lt;a href=&quot;https://lists.apache.org/thread.html/7cda3b819f4138e31e9c084511e53ca3eebffbeb56cc689396d438cd@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/7cda3b819f4138e31e9c084511e53ca3eebffbeb56cc689396d438cd@%3Cdev.sling.apache.org%3E&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13098244">SLING-7090</key>
            <summary>RRD4J metrics reporter does not close file on deactivate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Aug 2017 11:56:05 +0000</created>
                <updated>Wed, 20 Sep 2017 11:13:41 +0000</updated>
                            <resolved>Tue, 29 Aug 2017 12:47:53 +0000</resolved>
                                                    <fixVersion>Commons Metrics RRD4J 1.0.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16145176" author="mreutegg" created="Tue, 29 Aug 2017 12:00:10 +0000"  >&lt;p&gt;Proposed fix in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12884239/12884239_SLING-7090.patch&quot; title=&quot;SLING-7090.patch attached to SLING-7090&quot;&gt;SLING-7090.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="16145222" author="rombert" created="Tue, 29 Aug 2017 12:47:53 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1806584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806584&lt;/a&gt;, thanks for the fix!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13095317">SLING-7055</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12884239" name="SLING-7090.patch" size="643" author="mreutegg" created="Tue, 29 Aug 2017 11:59:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jecf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7085] Reduce code duplication</title>
                <link>https://issues.apache.org/jira/browse/SLING-7085</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The modularisation of the HTL modules implemented in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5787&quot; title=&quot;Modularise the Sightly script engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5787&quot;&gt;&lt;del&gt;SLING-5787&lt;/del&gt;&lt;/a&gt; introduced some code duplication:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/compiler/CompileTimeObjectModel.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/compiler/CompileTimeObjectModel.java&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/java-compiler/src/main/java/org/apache/sling/scripting/sightly/render/AbstractRuntimeObjectModel.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/java-compiler/src/main/java/org/apache/sling/scripting/sightly/render/AbstractRuntimeObjectModel.java&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/runtime/SlingRuntimeObjectModel.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/runtime/SlingRuntimeObjectModel.java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To reduce code duplication &lt;tt&gt;CompileTimeObjectModel&lt;/tt&gt; should be exported as &lt;tt&gt;ObjectModel&lt;/tt&gt; and extend its methods with the specifics of each module needing the functionality.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13097314">SLING-7085</key>
            <summary>Reduce code duplication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Aug 2017 13:46:55 +0000</created>
                <updated>Thu, 18 Jan 2018 16:51:04 +0000</updated>
                            <resolved>Fri, 25 Aug 2017 12:50:49 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.20</version>
                    <version>Scripting HTL Compiler 1.0.0</version>
                    <version>Scripting HTL Java Compiler 1.0.0</version>
                                    <fixVersion>Scripting HTL Engine 1.0.38</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.12</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.12</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16141570" author="radu.cotescu" created="Fri, 25 Aug 2017 12:50:50 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806167&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="13096956">SLING-7075</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13131950">SLING-7404</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13099191">SLING-7097</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j8nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7084] Coverage report is not generated correctly for HTL modules</title>
                <link>https://issues.apache.org/jira/browse/SLING-7084</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7083&quot; title=&quot;The StopMojo should block until the process is finished&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7083&quot;&gt;&lt;del&gt;SLING-7083&lt;/del&gt;&lt;/a&gt; the code coverage report built by the Apache Sling Scripting HTL Integration Tests module is not generated correctly, being either incomplete or inexistent (if the jacoco agent hasn&apos;t managed to write anything into the &lt;tt&gt;jacoco-it.exec&lt;/tt&gt; file before the &lt;tt&gt;verify&lt;/tt&gt; phase is started.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13097290">SLING-7084</key>
            <summary>Coverage report is not generated correctly for HTL modules</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Aug 2017 11:52:00 +0000</created>
                <updated>Fri, 25 Aug 2017 06:21:29 +0000</updated>
                            <resolved>Thu, 24 Aug 2017 13:10:37 +0000</resolved>
                                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16140012" author="radu.cotescu" created="Thu, 24 Aug 2017 13:10:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806038&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                            <outwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13097285">SLING-7083</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j8iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7083] The StopMojo should block until the process is finished</title>
                <link>https://issues.apache.org/jira/browse/SLING-7083</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the &lt;tt&gt;StopMojo&lt;/tt&gt; blocks with a timeout only if the instance provides a control port and the stop command is sent to this socket.&lt;/p&gt;

&lt;p&gt;However, if the mojo has to terminate the instance process by itself then it just sends the terminate command without waiting for the process to actually finish. Without blocking, the &lt;tt&gt;verify&lt;/tt&gt; Maven lifecycle phase will start, although processing of tasks started in the &lt;tt&gt;post-integration-test&lt;/tt&gt; phase might not have finished.&lt;/p&gt;

&lt;p&gt;One of the potential side-effects of this bug is the inability to properly collect code coverage results with the &lt;tt&gt;jacoco-maven-plugin&lt;/tt&gt;, because the plugin will start reading the &lt;tt&gt;*.exec&lt;/tt&gt; file before its agent (usually attached to a Sling instance started by the &lt;tt&gt;StartMojo&lt;/tt&gt;) had a chance to flush the coverage contents.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13097285">SLING-7083</key>
            <summary>The StopMojo should block until the process is finished</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Aug 2017 10:48:54 +0000</created>
                <updated>Fri, 29 Sep 2017 07:12:29 +0000</updated>
                            <resolved>Thu, 24 Aug 2017 11:01:38 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.1.0</version>
                                    <fixVersion>Slingstart Maven Plugin 1.7.10</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16139888" author="radu.cotescu" created="Thu, 24 Aug 2017 11:01:38 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1806025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806025&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, could you please review the fix?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                                                <inwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13097290">SLING-7084</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j8hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7075] Inherited public fields cannot be accessed directly in HTL</title>
                <link>https://issues.apache.org/jira/browse/SLING-7075</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Inherited public fields for a Java use-class cannot be accessed directly in HTL, due to how object properties resolution is implemented in &lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/java-compiler/src/main/java/org/apache/sling/scripting/sightly/render/AbstractRuntimeObjectModel.java#L293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/java-compiler/src/main/java/org/apache/sling/scripting/sightly/render/AbstractRuntimeObjectModel.java#L293&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When solving &lt;tt&gt;Fields&lt;/tt&gt; the &lt;tt&gt;Field#getField&lt;/tt&gt; method should be used instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096956">SLING-7075</key>
            <summary>Inherited public fields cannot be accessed directly in HTL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Aug 2017 08:35:16 +0000</created>
                <updated>Fri, 1 Sep 2017 13:17:32 +0000</updated>
                            <resolved>Fri, 25 Aug 2017 12:54:26 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                    <version>Scripting HTL Engine 1.0.20</version>
                                    <fixVersion>Scripting HTL Engine 1.0.38</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.12</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.12</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13097314">SLING-7085</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j6h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7074] RRD4J improve configuration handling</title>
                <link>https://issues.apache.org/jira/browse/SLING-7074</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Opened the config manager and deleted all entries&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter)] org.apache.sling.commons.metrics-rrd4j [org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter(3134)] The activate method has thrown an exception (java.lang.NullPointerException)
java.lang.NullPointerException: null
    at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter$Builder.withDatasources(RRD4JReporter.java:91)
    at org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter.activate(CodahaleMetricsReporter.java:143)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fyi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096794">SLING-7074</key>
            <summary>RRD4J improve configuration handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 15:41:10 +0000</created>
                <updated>Wed, 20 Sep 2017 11:13:41 +0000</updated>
                            <resolved>Thu, 24 Aug 2017 14:52:50 +0000</resolved>
                                                    <fixVersion>Commons Metrics RRD4J 1.0.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16136963" author="alex.parvulescu" created="Tue, 22 Aug 2017 15:44:10 +0000"  >&lt;p&gt;In general I think the &lt;tt&gt;withDatasources&lt;/tt&gt; should handle error case more gracefully. even the illegal values should be logged and ignored, now they are still kept in the config screen even though the RRD4JReporter class is in a weird state following the failed init (not sure what that is actually).&lt;/p&gt;</comment>
                            <comment id="16136988" author="alex.parvulescu" created="Tue, 22 Aug 2017 16:01:07 +0000"  >&lt;p&gt;I think I&apos;ve corrupted the rrd db by setting the &lt;tt&gt;step&lt;/tt&gt; to &lt;tt&gt;-1&lt;/tt&gt;. the UI does not show it, but the logs do, I cannot change the value anymore and not even a restart brings it back:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;22.08.2017 17:57:20.614 *INFO* [FelixStartLevel] org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter Starting RRD4J Metrics reporter
22.08.2017 17:57:20.659 *ERROR* [FelixStartLevel] org.apache.sling.commons.metrics-rrd4j [org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter(3095)] The activate method has thrown an exception (java.lang.IllegalArgumentException: Invalid RRD step specified: -1)
java.lang.IllegalArgumentException: Invalid RRD step specified: -1
	at org.rrd4j.core.RrdDef.&amp;lt;init&amp;gt;(RrdDef.java:83)
	at org.rrd4j.core.RrdDef.&amp;lt;init&amp;gt;(RrdDef.java:97)
	at org.rrd4j.core.RrdDef.&amp;lt;init&amp;gt;(RrdDef.java:114)
	at org.rrd4j.core.RrdDb.getRrdDef(RrdDb.java:833)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.createDB(RRD4JReporter.java:310)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter.&amp;lt;init&amp;gt;(RRD4JReporter.java:158)
	at org.apache.sling.commons.metrics.rrd4j.impl.RRD4JReporter$Builder.build(RRD4JReporter.java:127)
	at org.apache.sling.commons.metrics.rrd4j.impl.CodahaleMetricsReporter.activate(CodahaleMetricsReporter.java:146)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16138618" author="alex.parvulescu" created="Wed, 23 Aug 2017 16:41:13 +0000"  >&lt;p&gt;this seems a bit more complicated than I though. I opened a few pull requests on the rrd4j project hoping things will be nicer looking, but I&apos;m not sure what the eta could be &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. I&apos;ll probably submit PRs also but wanted to see what the maintainers think first.&lt;/p&gt;

&lt;p&gt;The lack of parameter verification on the config manager is tough to work with. Basically there should be no rrd store started if&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;step is &amp;lt;=0 (I can use the default value here)&lt;/li&gt;
	&lt;li&gt;no datasources defined (err is &quot;No RRD datasource specified. At least one is needed.&quot;)&lt;/li&gt;
	&lt;li&gt;no archives defined (err is &quot;No RRD archive specified. At least one is needed.&quot;)&lt;br/&gt;
and all of these are IllegalArgumentExceptions coming from rrd with no way to pass them to the config manager except log some sort of warning in the logs which might not be enough.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think I&apos;d go with stopping and not starting any rrd store if there&apos;s any illegal params. the simplest way I see is have the builder return null in this case.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; thoughts?&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/rrd4j/rrd4j/issues/104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rrd4j/rrd4j/issues/104&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/rrd4j/rrd4j/issues/105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rrd4j/rrd4j/issues/105&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16139682" author="mreutegg" created="Thu, 24 Aug 2017 07:11:54 +0000"  >&lt;p&gt;I agree, it would be nice if there was some validation possible with the config manager. My preference is fallback to default values whenever possible and server side validation before values are passed to RRD4J. I would probably still start the reporter even if some values are malformed. E.g. when there is a syntax error in a datasource or archive definition. We could just ignore that entry and log an error or warning. A check on the datasources is already implemented. Something similar could be done with the archive definitions.&lt;/p&gt;</comment>
                            <comment id="16139774" author="alex.parvulescu" created="Thu, 24 Aug 2017 08:52:35 +0000"  >&lt;p&gt;attaching proposed patch.&lt;br/&gt;
tried to fallback to defaults whenever possible. could not find a way to expose the archives, so this specific info is borderline useless (at least it shows the count). did not cover the path param at all in tests, but I&apos;m willing to update the patch if this is needed.&lt;/p&gt;

&lt;p&gt;Bonus, I added a debug log for value updates. This was there for a single value type but went away, I found it useful so I added it for all cases. If it&apos;s not interesting, I can remove it and update a new version of the patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; how does this look to you?&lt;/p&gt;</comment>
                            <comment id="16139972" author="mreutegg" created="Thu, 24 Aug 2017 12:24:40 +0000"  >&lt;p&gt;Looks very good to me.&lt;/p&gt;

&lt;p&gt;Regarding the path. IIUC the activate would throw an exception if I remove the path configuration entry. What do you think about a fallback to the default path in that case?&lt;/p&gt;

&lt;p&gt;Btw, the title for this issue should probably be changed as well. This isn&apos;t just about data sources after all.&lt;/p&gt;</comment>
                            <comment id="16140014" author="alex.parvulescu" created="Thu, 24 Aug 2017 13:15:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;IIUC the activate would throw an exception if I remove the path configuration entry. What do you think about a fallback to the default path in that case?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;good point. I was covered for null, but not for empty strings. I&apos;ve updated the patch to cover this as well: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12883535/12883535_SLING-7074-v2.patch&quot; title=&quot;SLING-7074-v2.patch attached to SLING-7074&quot;&gt;SLING-7074-v2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; would you mind taking a look at the patch and applying some of that committer magic if it looks good? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16140116" author="rombert" created="Thu, 24 Aug 2017 14:52:50 +0000"  >&lt;p&gt;Absolutely &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I was waiting for you and Marcel to settle over the patch.&lt;/p&gt;

&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1806051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806051&lt;/a&gt;, thanks for the contribution&lt;/p&gt;</comment>
                            <comment id="16141414" author="alex.parvulescu" created="Fri, 25 Aug 2017 09:23:57 +0000"  >&lt;p&gt;Thanks Robert!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13095317">SLING-7055</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12883535" name="SLING-7074-v2.patch" size="21639" author="stillalex" created="Thu, 24 Aug 2017 13:14:21 +0000"/>
                            <attachment id="12883508" name="SLING-7074.patch" size="20637" author="stillalex" created="Thu, 24 Aug 2017 08:49:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j5hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7072] Build failure with Java 9 - unable to create javax script engine for javascript</title>
                <link>https://issues.apache.org/jira/browse/SLING-7072</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.8:run (set-bundle-required-execution-environment) on project org.apache.sling.engine: An Ant BuildException has occured: Unable to create javax script engine for javascript
[ERROR] around Ant part ...&amp;lt;script language=&quot;javascript&quot;&amp;gt;var System = java.lang.System;... @ 4:33 in /home/robert/Documents/sources/apache/sling/bundles/engine/target/antrun/build-main.xml
[ERROR] -&amp;gt; [Help 1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13096673">SLING-7072</key>
            <summary>Build failure with Java 9 - unable to create javax script engine for javascript</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 08:41:36 +0000</created>
                <updated>Mon, 18 Sep 2017 10:25:09 +0000</updated>
                            <resolved>Fri, 1 Sep 2017 09:48:18 +0000</resolved>
                                                    <fixVersion>Parent 32</fixVersion>
                    <fixVersion>Java Version Maven Plugin 1.0.0</fixVersion>
                                    <component>General</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16136525" author="rombert" created="Tue, 22 Aug 2017 08:54:18 +0000"  >&lt;p&gt;Another possibility is to skip the antrun execution altogether and write a small custom mojo to set the properties. I think we use the antrun plugin in other areas too, and a fix should be coming for &lt;a href=&quot;https://issues.apache.org/jira/browse/MANTRUN-200&quot; title=&quot;Scriptdef tasks fail to load when running on Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MANTRUN-200&quot;&gt;&lt;del&gt;MANTRUN-200&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16136558" author="bdelacretaz" created="Tue, 22 Aug 2017 09:23:21 +0000"  >&lt;p&gt;We indeed use the antrun plugin in other places, for various things like copying files, creating test bundles etc. so getting rid of it is not convenient.&lt;/p&gt;

&lt;p&gt;List of poms which refer to maven-antrun-plugin:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bundles/commons/log/pom.xml
./bundles/commons/log-webconsole/pom.xml
./contrib/extensions/datasource/pom.xml
./contrib/extensions/distribution/it/pom.xml
./contrib/extensions/slf4j-mdc/pom.xml
./installer/core/pom.xml
./installer/it/pom.xml
./launchpad/base/pom.xml
./parent/pom.xml
./tooling/maven/archetypes/servlet/pom.xml
./tooling/maven/archetypes/taglib/pom.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16139890" author="rombert" created="Thu, 24 Aug 2017 11:06:48 +0000"  >&lt;p&gt;A fix will require using Maven 3.5.1 or newer, so once that is out we need to ask infra to install it, upgrade our jobs and only then add testing jobs for Java 9.&lt;/p&gt;</comment>
                            <comment id="16149695" author="rombert" created="Thu, 31 Aug 2017 22:08:34 +0000"  >&lt;p&gt;Since this seems to carry on - &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-6275&quot; title=&quot;ServiceLoaderFactory can&amp;#39;t find implementations via ClassRealm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-6275&quot;&gt;MNG-6275&lt;/a&gt; is not yet fixed I have implemented a basic Maven plugin which does the same job and the antrun snippet and will discuss this proposal on dev@sling&lt;/p&gt;</comment>
                            <comment id="16150298" author="rombert" created="Fri, 1 Sep 2017 09:48:18 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1806875&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806875&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1806913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806913&lt;/a&gt;  - added the javaversion-maven-plugin&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1806917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1806917&lt;/a&gt; - used the new plugin in the parent pom&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16150299" author="rombert" created="Fri, 1 Sep 2017 09:48:59 +0000"  >&lt;p&gt;No longer blocked by the MNG/MANTRUN issues due to alternative implementation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13102757">SLING-7129</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13102920">SLING-7131</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j4qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7070] Build failure with Java 9 in maven-enforcer-plugin</title>
                <link>https://issues.apache.org/jira/browse/SLING-7070</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When building a module project with Java 9 the following error appears:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:1.4.1:enforce (enforce-java) on project org.apache.sling.engine: Execution enforce-java of goal org.apache.maven.plugins:maven-enforcer-plugin:1.4.1:enforce failed: An API incompatibility was encountered while executing org.apache.maven.plugins:maven-enforcer-plugin:1.4.1:enforce: java.lang.ExceptionInInitializerError: null
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin&amp;gt;org.apache.maven.plugins:maven-enforcer-plugin:1.4.1
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/home/robert/.m2/repository/org/apache/maven/plugins/maven-enforcer-plugin/1.4.1/maven-enforcer-plugin-1.4.1.jar
[ERROR] urls[1] = file:/home/robert/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar
[ERROR] urls[2] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.11/plexus-interpolation-1.11.jar
[ERROR] urls[3] = file:/home/robert/.m2/repository/org/slf4j/slf4j-jdk14/1.5.6/slf4j-jdk14-1.5.6.jar
[ERROR] urls[4] = file:/home/robert/.m2/repository/org/slf4j/jcl-over-slf4j/1.5.6/jcl-over-slf4j-1.5.6.jar
[ERROR] urls[5] = file:/home/robert/.m2/repository/org/apache/maven/reporting/maven-reporting-api/2.2.1/maven-reporting-api-2.2.1.jar
[ERROR] urls[6] = file:/home/robert/.m2/repository/org/apache/maven/doxia/doxia-sink-api/1.1/doxia-sink-api-1.1.jar
[ERROR] urls[7] = file:/home/robert/.m2/repository/org/apache/maven/doxia/doxia-logging-api/1.1/doxia-logging-api-1.1.jar
[ERROR] urls[8] = file:/home/robert/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar
[ERROR] urls[9] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-interactivity-api/1.0-alpha-4/plexus-interactivity-api-1.0-alpha-4.jar
[ERROR] urls[10] = file:/home/robert/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar
[ERROR] urls[11] = file:/home/robert/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar
[ERROR] urls[12] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.jar
[ERROR] urls[13] = file:/home/robert/.m2/repository/commons-lang/commons-lang/2.3/commons-lang-2.3.jar
[ERROR] urls[14] = file:/home/robert/.m2/repository/org/apache/maven/enforcer/enforcer-api/1.4.1/enforcer-api-1.4.1.jar
[ERROR] urls[15] = file:/home/robert/.m2/repository/org/apache/maven/enforcer/enforcer-rules/1.4.1/enforcer-rules-1.4.1.jar
[ERROR] urls[16] = file:/home/robert/.m2/repository/org/apache/maven/shared/maven-common-artifact-filters/1.4/maven-common-artifact-filters-1.4.jar
[ERROR] urls[17] = file:/home/robert/.m2/repository/org/beanshell/bsh/2.0b4/bsh-2.0b4.jar
[ERROR] urls[18] = file:/home/robert/.m2/repository/org/apache/maven/shared/maven-dependency-tree/2.2/maven-dependency-tree-2.2.jar
[ERROR] urls[19] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar
[ERROR] urls[20] = file:/home/robert/.m2/repository/org/eclipse/aether/aether-util/0.9.0.M2/aether-util-0.9.0.M2.jar
[ERROR] urls[21] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-i18n/1.0-beta-6/plexus-i18n-1.0-beta-6.jar
[ERROR] urls[22] = file:/home/robert/.m2/repository/org/apache/maven/plugin-testing/maven-plugin-testing-harness/1.3/maven-plugin-testing-harness-1.3.jar
[ERROR] urls[23] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-archiver/2.2/plexus-archiver-2.2.jar
[ERROR] urls[24] = file:/home/robert/.m2/repository/org/codehaus/plexus/plexus-io/2.0.4/plexus-io-2.0.4.jar
[ERROR] urls[25] = file:/home/robert/.m2/repository/junit/junit/4.11/junit-4.11.jar
[ERROR] urls[26] = file:/home/robert/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[project&amp;gt;org.apache.sling:org.apache.sling.engine:2.6.9-SNAPSHOT, parent: ClassRealm[maven.api, parent: null]]]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13096669">SLING-7070</key>
            <summary>Build failure with Java 9 in maven-enforcer-plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 08:16:48 +0000</created>
                <updated>Mon, 4 Sep 2017 19:06:14 +0000</updated>
                            <resolved>Tue, 22 Aug 2017 08:40:15 +0000</resolved>
                                                    <fixVersion>Parent 32</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16136512" author="rombert" created="Tue, 22 Aug 2017 08:40:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1805732&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805732&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13094436">SLING-7046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j4pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7067] TagFileTest fails with launchpad.testing-war only</title>
                <link>https://issues.apache.org/jira/browse/SLING-7067</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testTagFileDeployedInBundle(org.apache.sling.launchpad.webapp.jsp.TagFileTest)  Time elapsed: 0.031 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NoSuchMethodError: org.osgi.framework.Version.compareTo(Lorg/osgi/framework/Version;)I
	at org.apache.sling.commons.testing.integration.HttpTestBase.isBundleVersionAtLeast(HttpTestBase.java:601)
	at org.apache.sling.launchpad.webapp.jsp.TagFileTest.testTagFileDeployedInBundle(TagFileTest.java:42)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that applying the same fix as for launchpad.testing does not work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096408">SLING-7067</key>
            <summary>TagFileTest fails with launchpad.testing-war only</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Aug 2017 11:59:24 +0000</created>
                <updated>Mon, 21 Aug 2017 12:26:27 +0000</updated>
                            <resolved>Mon, 21 Aug 2017 12:26:18 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16135099" author="rombert" created="Mon, 21 Aug 2017 12:26:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1805625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805625&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j353:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7062] Commons metrics inventory closes zip</title>
                <link>https://issues.apache.org/jira/browse/SLING-7062</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The inventory printer implementation of &lt;tt&gt;MetricWebConsolePlugin&lt;/tt&gt; closes the passed &lt;tt&gt;PrintWriter&lt;/tt&gt; though &lt;tt&gt;ConsoleReporter.close()&lt;/tt&gt;. This aborts the configuration status zip generation process and subsequent inventory printer output is missing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096051">SLING-7062</key>
            <summary>Commons metrics inventory closes zip</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Aug 2017 15:38:43 +0000</created>
                <updated>Tue, 5 Dec 2017 04:38:31 +0000</updated>
                            <resolved>Mon, 21 Aug 2017 05:12:02 +0000</resolved>
                                    <version>Commons Metrics 1.0.0</version>
                                    <fixVersion>commons metrics 1.2.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16133140" author="mreutegg" created="Fri, 18 Aug 2017 15:39:47 +0000"  >&lt;p&gt;Attached proposed fix.&lt;/p&gt;</comment>
                            <comment id="16134710" author="chetanm" created="Mon, 21 Aug 2017 05:11:50 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; for the patch. Did a slightly different change as we still need to flush the writer created within JSONReporter.&lt;/p&gt;

&lt;p&gt;Did a fix with 1805597 along with some testcase to ensure that writer does not get closed&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Should we modify the inventory implementation such that it ensures that underlying stream does not get closed by any of the printers&lt;/p&gt;</comment>
                            <comment id="16134721" author="cziegeler" created="Mon, 21 Aug 2017 05:28:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; Yes, I think it makes sense to make the inventory impl more robust (although the javadoc clearly states that the stream must not be closed)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12882597" name="SLING-7062.patch" size="1502" author="mreutegg" created="Fri, 18 Aug 2017 15:39:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j0zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7059] No wait time between two distribution attempts with File backed queue</title>
                <link>https://issues.apache.org/jira/browse/SLING-7059</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;An agent configured with a File based queue provider will retry failing distribution without waiting between two tries. Adding a reasonable waiting time (5 or 10 sec) would avoid polluting the logs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13095332">SLING-7059</key>
            <summary>No wait time between two distribution attempts with File backed queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 12:53:31 +0000</created>
                <updated>Thu, 17 Aug 2017 12:53:31 +0000</updated>
                                            <version>Content Distribution Core 0.2.8</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iwkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7058] the stop command line option does not seem to work</title>
                <link>https://issues.apache.org/jira/browse/SLING-7058</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;as per &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/the-sling-launchpad.html#command-line-options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/the-sling-launchpad.html#command-line-options&lt;/a&gt; a user should be able to stop a running sling instance by calling&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -jar sling-9.jar stop
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sling is supposed to write a file at startup with the chosen control port and the secret key at &lt;br/&gt;
`${sling.home}/conf/controlport`&lt;/p&gt;

&lt;p&gt;I do not see that file created nor does the above command work to stop a running sling instance. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13095330">SLING-7058</key>
            <summary>the stop command line option does not seem to work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="reusr1">Ruben Reusser</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 12:43:15 +0000</created>
                <updated>Thu, 31 Aug 2017 12:36:48 +0000</updated>
                            <resolved>Mon, 28 Aug 2017 11:37:17 +0000</resolved>
                                                    <fixVersion>Launchpad Base 2.6.24</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16130354" author="reusr1" created="Thu, 17 Aug 2017 13:02:13 +0000"  >&lt;p&gt;it seems this issue is due to the logic in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/launchpad/base/src/main/java/org/apache/sling/launchpad/app/Main.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/launchpad/base/src/main/java/org/apache/sling/launchpad/app/Main.java&lt;/a&gt; as it only initializes the ControlListener if the command start is passed to sling. This may of course be intentional&lt;/p&gt;</comment>
                            <comment id="16143675" author="karlpauls" created="Mon, 28 Aug 2017 11:37:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reusr1&quot; class=&quot;user-hover&quot; rel=&quot;reusr1&quot;&gt;reusr1&lt;/a&gt;, I think it is as you point out namely, you have to use start in order to be able to use stop. While this is somewhat implicit in the documentation I do think it is clear enough to close this issue as &quot;Not a bug&quot; - hence, I&apos;ll resolve it as such. &lt;/p&gt;

&lt;p&gt;Please reopen if you disagree or if stop isn&apos;t working after using the start to begin with.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iwjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7056] Servlets are not removed from pending servlets list</title>
                <link>https://issues.apache.org/jira/browse/SLING-7056</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The unbindServlet method does not correctly remove an entry from pendingServlets - while pendingServlets contains PendingServlet objects it tries to remove a Service Reference&lt;/p&gt;</description>
                <environment></environment>
        <key id="13095327">SLING-7056</key>
            <summary>Servlets are not removed from pending servlets list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 12:30:51 +0000</created>
                <updated>Mon, 28 Aug 2017 05:20:24 +0000</updated>
                            <resolved>Thu, 17 Aug 2017 14:40:58 +0000</resolved>
                                    <version>Servlets Resolver 2.4.12</version>
                                    <fixVersion>Servlets Resolver 2.4.14</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16130327" author="cziegeler" created="Thu, 17 Aug 2017 12:32:49 +0000"  >&lt;p&gt;Fixed in rev 1805279&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iwjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7054] Slingstart artifacts with parametrized version not removed from the effective slingstart model</title>
                <link>https://issues.apache.org/jira/browse/SLING-7054</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Adding a following entry to the provisioning model:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[artifacts]
  com.acme/my-model/1.0.0/slingstart
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in including the my-model to the current one. The slingfeature file will be downloaded and merged. However, if we replace the version with a variable:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[artifacts]
  com.acme/my-model/${my.model.version}/slingstart
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the slingstart will also download and include the my-model.jar file, not useful here.&lt;/p&gt;

&lt;p&gt;It&apos;s a result of the lines &lt;a href=&quot;https://github.com/apache/sling/blob/7e8a3a110a29b743d49ef799a7c7dec50a90bd96/tooling/maven/slingstart-maven-plugin/src/main/java/org/apache/sling/maven/slingstart/ModelPreprocessor.java#L345-L357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;345-356&lt;/a&gt; in the &lt;tt&gt;ModelPreprocessor&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; org.apache.sling.provisioning.model.Artifact r : removeList) {
                        group.remove(r);
                        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Feature localModelFeature = rawModel.getFeature(feature.getName());
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( localModelFeature != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
                            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; RunMode localRunMode = localModelFeature.getRunMode(runMode.getNames());
                            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( localRunMode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
                                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ArtifactGroup localAG = localRunMode.getArtifactGroup(group.getStartLevel());
                                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( localAG != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
                                    localAG.remove(r);
                                }
                            }
                        }
                    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the artifact is parametrized, it won&apos;t be removed from the localAG.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13095295">SLING-7054</key>
            <summary>Slingstart artifacts with parametrized version not removed from the effective slingstart model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tomek.rekawek">Tomek R&#281;kawek</assignee>
                                    <reporter username="tomek.rekawek">Tomek R&#281;kawek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 10:10:15 +0000</created>
                <updated>Tue, 22 Aug 2017 07:23:26 +0000</updated>
                            <resolved>Fri, 18 Aug 2017 09:03:49 +0000</resolved>
                                                    <fixVersion>Sling Provisioning Model 1.8.4</fixVersion>
                    <fixVersion>Slingstart Maven Plugin 1.7.8</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16130373" author="tomek.rekawek" created="Thu, 17 Aug 2017 13:18:24 +0000"  >&lt;p&gt;//cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16131831" author="tomek.rekawek" created="Fri, 18 Aug 2017 07:09:10 +0000"  >&lt;p&gt;Attached the patch proposal. It exposes the ModelResolveUtility#resolve() method in the provisioning-model. Alternatively, we can process the rawModel in the upstream methods, so it won&apos;t contain unresolved variables.&lt;/p&gt;

&lt;p&gt;We can split the patch to two parts, so it won&apos;t modify a few Sling modules at once.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, WDYT?&lt;/p&gt;</comment>
                            <comment id="16131923" author="tomek.rekawek" created="Fri, 18 Aug 2017 08:49:42 +0000"  >&lt;p&gt;Fixed for trunk in &lt;a href=&quot;https://svn.apache.org/r1805383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805383&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1805389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805389&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12882524" name="SLING-7054.patch" size="8029" author="tomek.rekawek" created="Fri, 18 Aug 2017 07:06:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iwc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7053] deadlock in QuartzScheduler</title>
                <link>https://issues.apache.org/jira/browse/SLING-7053</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following deadlock has been witnessed (in 2.6.3-SNAPSHOT, so the line numbers are a little bit skewed, also note that the thread names have been generalized and thread 1&apos;s stack has been shortened):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Found one Java-level deadlock:
=============================
&quot;thread 1&quot;:
  waiting to lock monitor 0x00007feae58d5118 (object 0x00000007f4502a28, a org.apache.sling.commons.scheduler.impl.SchedulerProxy),
  which is held by &quot;thread 2&quot;
&quot;thread 2&quot;:
  waiting to lock monitor 0x00007feae58d4c48 (object 0x00000007f46d6320, a org.apache.sling.commons.scheduler.impl.SchedulerProxy),
  which is held by &quot;thread 1&quot;
Java stack information for the threads listed above:
===================================================
&quot;thread 1&quot;:
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.unschedule(QuartzScheduler.java:584)
	- waiting to lock &amp;lt;0x00000007f4502a28&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:630)
	- locked &amp;lt;0x00000007f46d6320&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:561)
	at org.apache.sling.commons.scheduler.impl.SchedulerServiceFactory.schedule(SchedulerServiceFactory.java:63)
        [...]
&quot;thread 2&quot;:
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.unschedule(QuartzScheduler.java:584)
	- waiting to lock &amp;lt;0x00000007f46d6320&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:630)
	- locked &amp;lt;0x00000007f4502a28&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:561)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.scheduleJob(WhiteboardHandler.java:271)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.trySchedulePeriod(WhiteboardHandler.java:229)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.register(WhiteboardHandler.java:189)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.registerRunnable(WhiteboardHandler.java:146)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.BindMethod.invoke(BindMethod.java:655)
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1722)
	at org.apache.felix.scr.impl.manager.DependencyManager.open(DependencyManager.java:1556)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:261)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:109)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:749)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enableInternal(AbstractComponentManager.java:675)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:430)
	at org.apache.felix.scr.impl.manager.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:657)
	- locked &amp;lt;0x00000007f4e02ee8&amp;gt; (a java.lang.Object)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:341)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:390)
	at org.apache.felix.scr.impl.Activator.access$200(Activator.java:54)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:265)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4542)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2173)
	at org.apache.felix.framework.Felix.updateBundle(Felix.java:2485)
	at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:1018)
	at org.apache.felix.webconsole.internal.core.UpdateHelper.doRun(UpdateHelper.java:60)
	at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.doRun(BaseUpdateInstallHelper.java:93)
	at org.apache.felix.webconsole.internal.core.UpdateHelper.doRun(UpdateHelper.java:70)
	at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.run(BaseUpdateInstallHelper.java:123)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13095294">SLING-7053</key>
            <summary>deadlock in QuartzScheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 10:09:37 +0000</created>
                <updated>Thu, 26 Sep 2019 12:38:33 +0000</updated>
                            <resolved>Thu, 17 Aug 2017 10:29:48 +0000</resolved>
                                    <version>Commons Scheduler 2.6.2</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16130210" author="cziegeler" created="Thu, 17 Aug 2017 10:23:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Isn&apos;t this a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7004&quot; title=&quot;Deadlock at startup in Commons Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7004&quot;&gt;&lt;del&gt;SLING-7004&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16130218" author="egli" created="Thu, 17 Aug 2017 10:29:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, good point, it is (I had this deadlock still sitting around for a while and at that time &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7004&quot; title=&quot;Deadlock at startup in Commons Scheduler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7004&quot;&gt;&lt;del&gt;SLING-7004&lt;/del&gt;&lt;/a&gt; wasn&apos;t around yet). &lt;/p&gt;

&lt;p&gt;Closing this one as duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13086163">SLING-7004</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iwbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7050] Parser fails with trailing comments</title>
                <link>https://issues.apache.org/jira/browse/SLING-7050</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the input has a comment as the last line (no CR at the end), the parser fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094937">SLING-7050</key>
            <summary>Parser fails with trailing comments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Aug 2017 05:58:50 +0000</created>
                <updated>Sun, 24 Sep 2017 18:48:08 +0000</updated>
                            <resolved>Wed, 16 Aug 2017 06:00:13 +0000</resolved>
                                    <version>Repoinit Parser 1.1.0</version>
                                    <fixVersion>Repoinit Parser 1.2.0</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16128374" author="cziegeler" created="Wed, 16 Aug 2017 06:00:13 +0000"  >&lt;p&gt;Fixed in rev 1805139; added test cases&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iu53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7049] MissingExporterException thrown when the desired ModelExporter is not the first in the list</title>
                <link>https://issues.apache.org/jira/browse/SLING-7049</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Only the first ModelExporter is actually checked if it can satisfy an export request. If it does not match by name or type, an exception is immediately thrown rather than checking other ModelExporters&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094569">SLING-7049</key>
            <summary>MissingExporterException thrown when the desired ModelExporter is not the first in the list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Aug 2017 19:23:32 +0000</created>
                <updated>Mon, 28 Aug 2017 13:10:56 +0000</updated>
                            <resolved>Mon, 14 Aug 2017 21:06:04 +0000</resolved>
                                                    <fixVersion>Models Impl 1.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16126395" author="justinedelson" created="Mon, 14 Aug 2017 21:06:04 +0000"  >&lt;p&gt;fixed in r1805037 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3irw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7046] Run the Sling ITs with Java 9</title>
                <link>https://issues.apache.org/jira/browse/SLING-7046</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Java 9 RC1 is out, with a &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/jdk9-dev/2017-May/005864.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;release date of 21st of September&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;With all the basics put into place, we should enable ITs running with Java 9, to ensure we have at least some support on launch day.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094436">SLING-7046</key>
            <summary>Run the Sling ITs with Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Aug 2017 11:28:21 +0000</created>
                <updated>Wed, 6 Dec 2017 12:15:23 +0000</updated>
                            <resolved>Wed, 6 Dec 2017 10:22:28 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16245589" author="rombert" created="Thu, 9 Nov 2017 13:00:29 +0000"  >&lt;p&gt;New Java 9 Jenkins jobs are now at&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-9&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-war-9/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-war-9/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16246723" author="githubbot" created="Thu, 9 Nov 2017 22:58:21 +0000"  >&lt;p&gt;karlpauls opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7046&quot; title=&quot;Run the Sling ITs with Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7046&quot;&gt;&lt;del&gt;SLING-7046&lt;/del&gt;&lt;/a&gt;: Add --add-modules java.se.ee to the testing when running &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-testing/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-testing/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;on java9&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16246735" author="karlpauls" created="Thu, 9 Nov 2017 23:03:10 +0000"  >&lt;p&gt;Above PR makes it so that we add java.se.ee to the testing when on java9 as it is required atm. I guess we have to eventually decide whether that is good enough for now (in which case we can merge the PR - I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7235&quot; title=&quot;Remove requirement for --add-modules java.se.ee&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7235&quot;&gt;&lt;del&gt;SLING-7235&lt;/del&gt;&lt;/a&gt; so that we don&apos;t forget to get back to it) or whether we want to remove that dependency completely (in which case we don&apos;t need this PR). &lt;/p&gt;

&lt;p&gt;At any rate, together with my PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-base/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-base/pull/1&lt;/a&gt; for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7186&quot; title=&quot;Update to Felix Framework 5.6.10 and limit system bundle exports to available packages on java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7186&quot;&gt;&lt;del&gt;SLING-7186&lt;/del&gt;&lt;/a&gt; it makes the IT pass on java9.&lt;/p&gt;</comment>
                            <comment id="16279953" author="githubbot" created="Wed, 6 Dec 2017 10:09:13 +0000"  >&lt;p&gt;rombert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7046&quot; title=&quot;Run the Sling ITs with Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7046&quot;&gt;&lt;del&gt;SLING-7046&lt;/del&gt;&lt;/a&gt;: Add --add-modules java.se.ee to the testing when running &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-testing/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-testing/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16279974" author="rombert" created="Wed, 6 Dec 2017 10:22:28 +0000"  >&lt;p&gt;Tests are running on Java 9 with &lt;tt&gt;-add-modules java.se.ee&lt;/tt&gt; for Java 9, for now. Further enhancements tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7235&quot; title=&quot;Remove requirement for --add-modules java.se.ee&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7235&quot;&gt;&lt;del&gt;SLING-7235&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16280095" author="rombert" created="Wed, 6 Dec 2017 12:15:23 +0000"  >&lt;p&gt;Disabled the war testing job for Java 9 since there is no easy way to configure a forked Jetty with an existing WAR file.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13079447">SLING-6952</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13099671">SLING-7102</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13099672">SLING-7103</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13099751">SLING-7107</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13096669">SLING-7070</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13096673">SLING-7072</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13099670">SLING-7101</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13099674">SLING-7105</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13099673">SLING-7104</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ir2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7044] Scripted tag files are not found</title>
                <link>https://issues.apache.org/jira/browse/SLING-7044</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a taglib in a bundle references a tag implemented as a script (located in /META-INF/tags) this script is not found as it is not searched within the bundle containing the tld - it&apos;s rather used as a resource on the classpath.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094340">SLING-7044</key>
            <summary>Scripted tag files are not found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Aug 2017 14:52:54 +0000</created>
                <updated>Mon, 22 Jan 2018 15:54:44 +0000</updated>
                            <resolved>Sun, 13 Aug 2017 14:56:20 +0000</resolved>
                                    <version>Scripting JSP 2.3.0</version>
                                    <fixVersion>Scripting JSP 2.3.2</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16124958" author="cziegeler" created="Sun, 13 Aug 2017 14:56:20 +0000"  >&lt;p&gt;Fixed in rev 1804923&lt;/p&gt;</comment>
                            <comment id="16125348" author="rombert" created="Mon, 14 Aug 2017 07:55:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I tried creating a simple IT for this ( see attached project ) but failed. Could you briefly take a look at the setup and see whether I did something wrong? Accessing &lt;a href=&quot;http://localhost:8080/content/tagtest/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/tagtest/index.html&lt;/a&gt; results in an 500.&lt;/p&gt;</comment>
                            <comment id="16125357" author="cziegeler" created="Mon, 14 Aug 2017 08:15:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Looks basically good to me, what exception do you get?&lt;/p&gt;</comment>
                            <comment id="16125361" author="rombert" created="Mon, 14 Aug 2017 08:17:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
java.io.FileNotFoundException: Cannot find /META-INF/tags/slingtest/test.tag
	at org.apache.sling.scripting.jsp.SlingIOProvider.getInputStream(SlingIOProvider.java:104)
	at org.apache.sling.scripting.jsp.jasper.JspCompilationContext.getInputStream(JspCompilationContext.java:158)
	at org.apache.sling.scripting.jsp.jasper.compiler.JspUtil.getInputStream(JspUtil.java:856)
	at org.apache.sling.scripting.jsp.jasper.xmlparser.XMLEncodingDetector.getEncoding(XMLEncodingDetector.java:108)
	at org.apache.sling.scripting.jsp.jasper.compiler.ParserController.determineSyntaxAndEncoding(ParserController.java:308)
	at org.apache.sling.scripting.jsp.jasper.compiler.ParserController.doParse(ParserController.java:172)
	at org.apache.sling.scripting.jsp.jasper.compiler.ParserController.parse(ParserController.java:103)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.generateJava(Compiler.java:164)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:302)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:282)
	at org.apache.sling.scripting.jsp.jasper.compiler.Compiler.compile(Compiler.java:269)
	at org.apache.sling.scripting.jsp.jasper.JspCompilationContext.compile(JspCompilationContext.java:498)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16125365" author="cziegeler" created="Mon, 14 Aug 2017 08:26:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; That&apos;s interesting. In my tests ParserController.determineSyntaxAndEncoding always passed and it failed some lines below (in doParse), but with my patch in place it should even work. I&apos;ll have a brief look&lt;/p&gt;</comment>
                            <comment id="16125424" author="cziegeler" created="Mon, 14 Aug 2017 09:00:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Interestingly your code example does take a complete different code path than the examples I used before (although I can&apos;t figure out a difference). In any case, I committed an update in rev 1804958 which makes your example pass as well.&lt;/p&gt;</comment>
                            <comment id="16125426" author="rombert" created="Mon, 14 Aug 2017 09:01:37 +0000"  >&lt;p&gt;Great, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; . I&apos;ll rework this into an IT then.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13094479">SLING-7048</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12881695" name="org.apache.sling.its.scripting.jsp.tar.gz" size="1350" author="rombert" created="Mon, 14 Aug 2017 07:54:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iqhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7043] Exporting  com.codahale.metrics.MetricRegistry is breaking the abstraction</title>
                <link>https://issues.apache.org/jira/browse/SLING-7043</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;commons metrics provides a nice abstraction over  com.codahale.metrics - however it is exporting  com.codahale.metrics.MetricRegistry which seems to be the only way to get at registered metrics objects. Which in turn is completely breaking the purpose of this bundle.&lt;/p&gt;

&lt;p&gt;So we should&lt;br/&gt;
a) drop exporting that service and avoid leaking internal implementation details&lt;br/&gt;
b) create our own version of the registry service&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094078">SLING-7043</key>
            <summary>Exporting  com.codahale.metrics.MetricRegistry is breaking the abstraction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Aug 2017 11:22:40 +0000</created>
                <updated>Thu, 28 Sep 2023 13:51:17 +0000</updated>
                            <resolved>Thu, 28 Sep 2023 13:51:17 +0000</resolved>
                                    <version>Commons Metrics 1.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16123220" author="chetanm" created="Fri, 11 Aug 2017 11:31:28 +0000"  >&lt;p&gt;Export of MetricRegistry is required for other reporters to work (which are codehale specific) like those from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. Normal Sling code in general should not require the access to reported values and should mostly be doing report&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/ieb/statsd-reporter-osgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ieb/statsd-reporter-osgi&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16123346" author="cziegeler" created="Fri, 11 Aug 2017 13:37:11 +0000"  >&lt;p&gt;Why do we have sling commons metrics at all?&lt;/p&gt;</comment>
                            <comment id="16125238" author="chetanm" created="Mon, 14 Aug 2017 04:54:38 +0000"  >&lt;p&gt;As mentioned in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; the Metrics support has 2 users&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Code which want to collect metric data for some activity- They are primarily concerned with just reporting about stuff happening&lt;/li&gt;
	&lt;li&gt;Code which want to process collected metrics data like Metric Reporter&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In any setup there would be lot more #1 compared to #2. Purpose of Sling Metrics api was to provide a stable interface for #1 so that &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;any incompatible change in dropwizard metric does not effect the majority of users (i.e. #1)&lt;/li&gt;
	&lt;li&gt;If metrics collection lead to some overhead we can disable it completely. Its not possible with Dropwizard metric&lt;/li&gt;
	&lt;li&gt;Possibility to support some custom extension like timeseries support in future&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The MetricReports are closely tied to metric api so its fine to directly use it and need not introduce any abstraction there.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://sling.apache.org/documentation/bundles/metrics.html#requirement-of-wrapper-interfaces&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/metrics.html#requirement-of-wrapper-interfaces&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16125257" author="cziegeler" created="Mon, 14 Aug 2017 05:21:32 +0000"  >&lt;p&gt;I think the idea of a stable interface is now totally flawed, as soon as code is using the MetricRegistry - which is public/documented api of the Sling Metrics API - it has the same problem as if it would be using Dropwizard metric directly.  And I just noticed that we even support the adapter pattern which means the Sling Metrics API is directly tied to the Dropwizard API and not independent or more stable at all.&lt;br/&gt;
For most of the provided metric types it seems we&apos;re only providing wrappers, Gauge does not seem to be implemented at all.&lt;br/&gt;
So in general I think this feels all a little bit strange and is not really what is pretending to be.&lt;br/&gt;
I&apos;m strongly in favour of contributing whatever extensing we have back to Dropwizard so we can drop this library completely - maybe we have to keep the OSGi service implementation (not interface) and the web console support - but we should not have additional API&lt;/p&gt;</comment>
                            <comment id="16125258" author="chetanm" created="Mon, 14 Aug 2017 05:26:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;Gauge does not seem to be implemented at all.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Guage support was added with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5966&quot; title=&quot;Add Gauge support to metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5966&quot;&gt;&lt;del&gt;SLING-5966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16125266" author="cziegeler" created="Mon, 14 Aug 2017 05:46:45 +0000"  >&lt;p&gt;Let&apos;s look at a client of the metrics library: commons scheduler - it&apos;s now depending on two APIs (Slings metrics and Dropwizard). It can be easily rewritten to be just depending on Dropwizard, so why are we mixing APIs there?&lt;/p&gt;</comment>
                            <comment id="16125268" author="chetanm" created="Mon, 14 Aug 2017 05:52:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;it&apos;s now depending on two APIs (Slings metrics and Dropwizard).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okie. So far in none of other places the code had to depend on MetricRegistry. If the code want to use that then yes it need not go over abstraction provided by Common Metrics. &lt;/p&gt;

&lt;p&gt;We discussed all this when metrics abstraction was introduced (see DL threads referred in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4080&quot; title=&quot;API to capture/measure application-level metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4080&quot;&gt;&lt;del&gt;SLING-4080&lt;/del&gt;&lt;/a&gt;). If you think most code need to use MetricRegistry also then its fine to drop Commons Metrics&lt;/p&gt;</comment>
                            <comment id="16125291" author="cziegeler" created="Mon, 14 Aug 2017 06:18:41 +0000"  >&lt;p&gt;Let me ask this differently: when or why should code use Sling&apos;s commons metrics? I see no point in doing so, even the strange API of MetricsServiceFactory is more awkward than using MetricRegistry directly. If it would be a complete abstraction I can see a reason for doing so - but as it&apos;s not like that at all, I&apos;m wondering what our guidance to users is?&lt;br/&gt;
I see the point of completely disabling metrics - if this is a real problem at all - and in that case I think a contribution to Dropwizard will solve that&lt;/p&gt;</comment>
                            <comment id="16125296" author="chetanm" created="Mon, 14 Aug 2017 06:29:18 +0000"  >&lt;p&gt;Again trying to highlight what was discussed earlier also. Dropwizard api went through some non compatible changes between 3.0 and 3.1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; which was considered as one of the basis to have our own abstraction to shield against such changes given Metrics usage was to be done in core parts of the Sling and avoiding dependency on a third party api was a good thing to do (at least I understood it that way).&lt;/p&gt;

&lt;p&gt;Hence all this abstraction and recommended for code to use Sling Metrics if they are all concerned with reporting Metrics data. If they need more Metrics api then they are free to bind directly to Metrics api and lookup MetricRegistry from the service registry. &lt;/p&gt;

&lt;p&gt;So it serves both purpose given that code make the call to decide which api to use.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I see the point of completely disabling metrics - if this is a real problem at all - and in that case I think a contribution to Dropwizard will solve that&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;At least I considered that because we intend to use it in some core part and would always prefer a kill switch if it causes issues.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://markmail.org/thread/47fd5psel2wv2y42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/thread/47fd5psel2wv2y42&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16125302" author="cziegeler" created="Mon, 14 Aug 2017 06:46:49 +0000"  >&lt;p&gt;I understand the &quot;intend&quot; of our own abstraction - but again it is totally flawed as we expose a way to get to the underlying implementation as an API contract. This gives a false sense of safety.&lt;br/&gt;
Either we have a full abstraction making it safe to use - or we don&apos;t need the abstraction. But this is now something in the middle saying &quot;yeah we have this abstraction, but you can directly use the dropwizard api as well&quot; - and not even that for some use cases you have to use the dropwizard api as commons scheduler shows&lt;/p&gt;</comment>
                            <comment id="16125306" author="chetanm" created="Mon, 14 Aug 2017 06:51:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;but again it is totally flawed as we expose a way to get to the underlying implementation as an API contract. This gives a false sense of safety.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well I disagree here. It depends on the client code what it wants to use. If the client only binds to Commons Metrics api then it gets the required support of the abstraction (and possibly some extra features like JMX Domain name, future support for metadata etc). If the code needs more features (which in general does not happen, at least based on usage we have in Oak side which follows similar pattern) then it binds to Metrics api.&lt;/p&gt;

&lt;p&gt;For me the usage is similar to Resource and its adaptation support for JCR Node. Most code can work with Resource api but some code may need lower level JCR features provided by Node api&lt;/p&gt;</comment>
                            <comment id="16125312" author="cziegeler" created="Mon, 14 Aug 2017 07:06:33 +0000"  >&lt;p&gt;The Resource API provides an abstraction over multiple implementations unifying client code - so that&apos;s a different situation. If you&apos;re client code adapts to a JCR object, you know that it might not work with each and every resource provider. In contrast, if your client code adapts to a dropwizard class, this can be assumed to always work. And this makes the adapter pattern in the metrics case questionable as well - there are not multiple implementations and you might be able to do different adaptions. Each object provides exactly one adaption and we explicitely state that. It&apos;s like saying every Resource adapts to Node (or Property).&lt;/p&gt;</comment>
                            <comment id="16125315" author="chetanm" created="Mon, 14 Aug 2017 07:11:06 +0000"  >&lt;p&gt;Technically there is NOOP Metrics support also. So we have 2 implementations. &lt;/p&gt;</comment>
                            <comment id="16125420" author="bdelacretaz" created="Mon, 14 Aug 2017 08:59:18 +0000"  >&lt;p&gt;I think this discussion should move to our dev list - you guys don&apos;t seem to have consensus and it looks like changes would have impact on backwards compatibility.&lt;/p&gt;</comment>
                            <comment id="16125544" author="cziegeler" created="Mon, 14 Aug 2017 11:07:28 +0000"  >&lt;p&gt;I think we have two options:&lt;br/&gt;
a) we add missing functionality to Sling&apos;s api like a registry and clients like the scheduler can use Sling&apos;s API only for their use cases. In addition, we should also deprecate/remove access to the underlying implementation, namely removing the adapter pattern and getting com.codahale.metrics.MetricRegistry as a service. With this we would fulfill the original goal of an independent API without any strange leakage of the underlying implementation API.&lt;br/&gt;
or&lt;br/&gt;
b) we acknowledge that dropwizard will always be the base for our implementation and see the Sling bundle as an OSGi service based extension to it (things like registering a Gauge through the whiteboard etc.). In this case we should probably deprecate/drop all the wrapping stuff from the API (I haven&apos;t looked in detail, but I guess we can drop all API). This allows for using the dropwizard API in an OSGi service based fashion and we would still have some of our exptensions like JMX support.&lt;br/&gt;
Both approaches are valid and imho provide a viable solution; but right now we have 50% of a) and 50% of b) - and that&apos;s where I&apos;m having a problem with.&lt;/p&gt;</comment>
                            <comment id="16128281" author="chetanm" created="Wed, 16 Aug 2017 04:17:04 +0000"  >&lt;p&gt;I still do not think that current status is having a problem (but that can be just me!). As said earlier. Client code can bind to &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Sling Commons Metrics API - Get some added benefits and stable package version. Majority of code needs would be fullfilled by this api. It also allows us to disable metrics collection anytime without affecting the application functionality just like logging&lt;/li&gt;
	&lt;li&gt;Dropwizzard Metrics API - Get access MetricRegistry and access to actual metrics value&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Note that Dropwizzard binds package export to release version and some of the exported interfaces are Consumer type. So if code in Sling uses that we need to update such bundles when upgrading Metrics bundle (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7047&quot; title=&quot;Update Dropwizard Metrics bundles to 3.2 to eliminate sun.misc dependency.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7047&quot;&gt;&lt;del&gt;SLING-7047&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Even if we go for option #A above we would still need to export the MetricRegistry as services as quite a bit of existing reporters provided by Metrics itself work with that service. It does not make sense to wrap all such reporters. So access to MetricRegistry by reporter should be fine&lt;/p&gt;</comment>
                            <comment id="16128441" author="cziegeler" created="Wed, 16 Aug 2017 07:29:36 +0000"  >&lt;p&gt;The problem is obvious with the current commons scheduler implementation &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
The &quot;stable package version&quot; is only true for as long as the client code is not using some dropwizard API directly. As soon as it does so, you&apos;re back to square one. And we encourage people to do so (by the adapter pattern) and even worse require it (through the MetricRegistry).&lt;br/&gt;
In addition, if the dropwizard API changes in an incompatible way, it might even get worse - as the client code might use a different version (say 3.3) as the commons metrics implementation (e.g. 3.2). Then the whole thing breaks nevertheless.&lt;br/&gt;
In the long run I don&apos;t think that we should move forward with #A - I would rather like to see us to go with #B - and if problems with dropwizard arise, solve them where they were introduced; but not try to workaround and create confusing API usage.&lt;/p&gt;</comment>
                            <comment id="16265185" author="chetanm" created="Fri, 24 Nov 2017 11:24:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Would it be fine to move this to next release and unblock current one? I would like to cut a release for few issues fixed so far but would not have bandwidth for addressing this issue in near future (post discussing the approaches!)&lt;/p&gt;</comment>
                            <comment id="16265249" author="cziegeler" created="Fri, 24 Nov 2017 12:50:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; Sure, although I have the feeling that we will move this forever &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iovz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7042] Launchpad does not start with Java 9 RC1</title>
                <link>https://issues.apache.org/jira/browse/SLING-7042</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I tried to start Sling 10-SNAPSHOT with the latest Java 9 RC:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ /opt/jdk-9/bin/java -version
java version &quot;9&quot;
Java(TM) SE Runtime Environment (build 9+181)
Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It fails to start with the following error ( full console log attached )&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR: Error parsing system bundle export statement: org.osgi.dto; version=1.0.0, org.osgi.framework; version=1.8.0, org.osgi.framework.dto; version=1.8.0, org.osgi.framework.hooks.bundle; version=1.1.0, org.osgi.framework.hooks.resolver; version=1.0.0, org.osgi.framework.hooks.service; version=1.1.0, org.osgi.framework.hooks.weaving; version=1.1.0, org.osgi.framework.launch; version=1.2.0, org.osgi.framework.namespace; version=1.1.0, org.osgi.framework.startlevel; version=1.0.0, org.osgi.framework.startlevel.dto; version=1.0.0, org.osgi.framework.wiring; version=1.2.0, org.osgi.framework.wiring.dto; version=1.2.0, org.osgi.resource; version=1.0.0, org.osgi.resource.dto; version=1.0.0, org.osgi.service.packageadmin; version=1.2.0, org.osgi.service.resolver; version=1.0.0, org.osgi.service.startlevel; version=1.1.0, org.osgi.service.url; version=1.0.0, org.osgi.util.tracker; version=1.5.1, org.apache.sling.launchpad.api;version=1.2.0,  
org.osgi.framework.BundleException: Exported package names cannot be zero length.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve tried the Felix 5.6.6 distribution and it worked fine with the same Java 9 build, so the error is likely in Sling somewhere.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13093711">SLING-7042</key>
            <summary>Launchpad does not start with Java 9 RC1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Aug 2017 08:52:39 +0000</created>
                <updated>Thu, 10 Aug 2017 14:06:26 +0000</updated>
                            <resolved>Thu, 10 Aug 2017 13:01:16 +0000</resolved>
                                    <version>Launchpad Base 2.6.20</version>
                                    <fixVersion>Launchpad Base 2.6.22</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16121280" author="rombert" created="Thu, 10 Aug 2017 08:53:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; - any ideas about this?&lt;/p&gt;</comment>
                            <comment id="16121289" author="karlpauls" created="Thu, 10 Aug 2017 08:57:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, yes, I did think about it when I did the Felix 5.6.6 integration - we don&apos;t yet provide the properties for java9. The way this works is that the sling launchpad base overrides the felix properties and in this case, it doesn&apos;t have the right ones for java9. &lt;/p&gt;

&lt;p&gt;I can add them and then we can see if that makes it work for you.&lt;/p&gt;</comment>
                            <comment id="16121313" author="rombert" created="Thu, 10 Aug 2017 09:19:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; - that would work for me, thank you. Asking with zero knowledge about it - could we get away without overriding the felix properties? &lt;/p&gt;</comment>
                            <comment id="16121454" author="karlpauls" created="Thu, 10 Aug 2017 10:52:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, yes I think so. Basically, sling is overriding the felix provided packages and I believe there is a way to override the sling override. In a nutshell, you&apos;d have to set org.osgi.framework.system.packages to the correct java9 packages. &lt;/p&gt;

&lt;p&gt;Towards that end, I just commited the packages for java9 inclusion in r1804659. Subsequently, I updated the builder to use the latest base snapshot in r1804660. Could you try it out on java9 and see if that works for you?&lt;/p&gt;</comment>
                            <comment id="16121457" author="rombert" created="Thu, 10 Aug 2017 10:58:32 +0000"  >&lt;p&gt;Hm, same problem.&lt;/p&gt;

&lt;p&gt;I did a &lt;tt&gt;mvn clean install&lt;/tt&gt; in launchpad/base, &lt;tt&gt;mvn clean package&lt;/tt&gt; in launchpad/builder and then ran the launchpad with &lt;tt&gt;/opt/jdk-9/bin/java -jar target/org.apache.sling.launchpad-10-SNAPSHOT.jar&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16121557" author="karlpauls" created="Thu, 10 Aug 2017 12:46:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, yup, my bad. Please try again with a new build of base and builder after r1804668.&lt;/p&gt;</comment>
                            <comment id="16121571" author="rombert" created="Thu, 10 Aug 2017 12:58:52 +0000"  >&lt;p&gt;Works like a charm, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;edit&lt;/em&gt;: typo&lt;/p&gt;</comment>
                            <comment id="16121575" author="karlpauls" created="Thu, 10 Aug 2017 13:01:16 +0000"  >&lt;p&gt;Fixed in r1804668.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12881168" name="sling-java9.log" size="28379" author="rombert" created="Thu, 10 Aug 2017 08:52:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3imt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7041] Use JSON parsing in Sling.evalString</title>
                <link>https://issues.apache.org/jira/browse/SLING-7041</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sling.evalString was presumably written before JSON parsing was standardised in browser. We should instead use JSON.parse&lt;/p&gt;</description>
                <environment></environment>
        <key id="13093516">SLING-7041</key>
            <summary>Use JSON parsing in Sling.evalString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Aug 2017 15:30:32 +0000</created>
                <updated>Wed, 20 Sep 2017 11:15:58 +0000</updated>
                            <resolved>Wed, 9 Aug 2017 15:33:43 +0000</resolved>
                                                    <fixVersion>Servlets Post 2.3.22</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16120085" author="rombert" created="Wed, 9 Aug 2017 15:33:44 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1804546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1804546&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3illz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7037] Scheduler does not retain provided name</title>
                <link>https://issues.apache.org/jira/browse/SLING-7037</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The scheduler does not retain the provided name for the job as introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5387&quot; title=&quot;Provide support for running singleton jobs on non leader cluster nodes also&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5387&quot;&gt;&lt;del&gt;SLING-5387&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The value returned by the JobDataMap is a generated name that include the service id.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13093184">SLING-7037</key>
            <summary>Scheduler does not retain provided name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Aug 2017 14:31:57 +0000</created>
                <updated>Thu, 31 Aug 2017 09:45:25 +0000</updated>
                            <resolved>Mon, 21 Aug 2017 14:47:56 +0000</resolved>
                                    <version>Commons Scheduler 2.6.0</version>
                                    <fixVersion>Commons Scheduler 2.7.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16118393" author="mreutegg" created="Tue, 8 Aug 2017 14:36:41 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12880838/12880838_SLING-7037-test.patch&quot; title=&quot;SLING-7037-test.patch attached to SLING-7037&quot;&gt;SLING-7037-test.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; containing a test which shows the described behaviour.&lt;/p&gt;</comment>
                            <comment id="16118478" author="cziegeler" created="Tue, 8 Aug 2017 15:35:32 +0000"  >&lt;p&gt;Thanks for reporting and your tests &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve committed a potential solution in rev 1804434 together with your test case and some test cases.&lt;br/&gt;
The idea is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for whiteboard registered jobs: if a name is part of the properties, this name is used as is for the provided name; the name itself is still made unique using the service id.&lt;/li&gt;
	&lt;li&gt;for whiteboard registered jobs: if no name is part of the properties, provided name is null and name will get a generated one (including the service id).&lt;/li&gt;
	&lt;li&gt;for jobs registered using the api: if a name is provided, this is used as is for the provided name&lt;/li&gt;
	&lt;li&gt;for jobs registered using the api: if no name is provided, a name is generated and provided name is null&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16119511" author="mreutegg" created="Wed, 9 Aug 2017 07:09:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;for whiteboard registered jobs: if a name is part of the properties, this name is used as is for the provided name; the name itself is still made unique using the service id.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why is it made unique with the service id? I understand the service id may not always be the same across cluster nodes, which can result in a situation where a registered job with &apos;runOn:single&apos; on multiple cluster nodes does not run at all. If I provide a name, shouldn&apos;t the scheduler use it as is? &lt;/p&gt;</comment>
                            <comment id="16119821" author="cziegeler" created="Wed, 9 Aug 2017 12:38:19 +0000"  >&lt;p&gt;That&apos;s a good question - and I was asking myself the same question. I left it there because it has always been like this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But thinking about it, I guess this is a mistake  - and the name should really be used as is.&lt;/p&gt;</comment>
                            <comment id="16119826" author="cziegeler" created="Wed, 9 Aug 2017 12:41:03 +0000"  >&lt;p&gt;Changed in rev 1804510&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12922925">SLING-5387</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13098828">OAK-6605</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12880838" name="SLING-7037-test.patch" size="2588" author="mreutegg" created="Tue, 8 Aug 2017 14:35:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ijkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7035] [http.testing.clients] OsgiConsoleClient#editConfigurationWithWait does not wait for bundle to be restarted</title>
                <link>https://issues.apache.org/jira/browse/SLING-7035</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/testing/http/clients/src/main/java/org/apache/sling/testing/clients/osgi/OsgiConsoleClient.java#L342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/testing/http/clients/src/main/java/org/apache/sling/testing/clients/osgi/OsgiConsoleClient.java#L342&lt;/a&gt;  doesn&apos;t wait for the affected bundle to be restarted. &lt;/p&gt;

&lt;p&gt;We need a mechanism to wait for the bundle that&apos;s restarted after the config change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092917">SLING-7035</key>
            <summary>[http.testing.clients] OsgiConsoleClient#editConfigurationWithWait does not wait for bundle to be restarted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Aug 2017 16:10:29 +0000</created>
                <updated>Mon, 15 Jan 2024 09:05:30 +0000</updated>
                            <resolved>Mon, 15 Jan 2024 09:05:30 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.1.4</version>
                                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ihxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7034] JcrValueMap does not handle expanded form of property names</title>
                <link>https://issues.apache.org/jira/browse/SLING-7034</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Calling &lt;tt&gt;JcrValueMap.get(...)&lt;/tt&gt; with a property name in expanded form, such as&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{https://ns.example.org/foo/}bar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails with &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.IllegalArgumentException: javax.jcr.RepositoryException: Invalid name or path: _x007b_https://ns.example.org/foo/_x007d_bar
        at org.apache.sling.jcr.resource.internal.JcrValueMap.read(JcrValueMap.java:292)
        at org.apache.sling.jcr.resource.internal.JcrValueMap.get(JcrValueMap.java:101)
        at org.apache.sling.jcr.resource.internal.JcrValueMap.get(JcrValueMap.java:123)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13092849">SLING-7034</key>
            <summary>JcrValueMap does not handle expanded form of property names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Aug 2017 10:57:25 +0000</created>
                <updated>Mon, 7 Aug 2017 10:57:25 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ihi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7030] ReferrerFilter broken as legacy SCR Annotations are not processed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7030</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The org.apache.sling.security-1.1.4 bundle is broken, since it uses the latest sling parent which no longer processes old SCR annotations. I will provide a patch to the sling team with converted annotations.&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092428">SLING-7030</key>
            <summary>ReferrerFilter broken as legacy SCR Annotations are not processed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="dominique.jaeggi">Dominique J&#228;ggi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Aug 2017 09:51:57 +0000</created>
                <updated>Mon, 7 Aug 2017 12:52:43 +0000</updated>
                            <resolved>Fri, 4 Aug 2017 11:29:58 +0000</resolved>
                                    <version>Security 1.1.4</version>
                                    <fixVersion>Security 1.1.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16114250" author="dominique.jaeggi" created="Fri, 4 Aug 2017 11:10:26 +0000"  >&lt;p&gt;attaching patch with migration of annotations to new format&lt;/p&gt;</comment>
                            <comment id="16114257" author="kwin" created="Fri, 4 Aug 2017 11:16:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dominique.jaeggi&quot; class=&quot;user-hover&quot; rel=&quot;dominique.jaeggi&quot;&gt;dominique.jaeggi&lt;/a&gt; Please also remove the dependency towards &lt;tt&gt;org.apache.felix.scr.annotations&lt;/tt&gt; to make sure no other components are using legacy annotations.&lt;/p&gt;</comment>
                            <comment id="16114259" author="dominique.jaeggi" created="Fri, 4 Aug 2017 11:19:03 +0000"  >&lt;p&gt;Updated patch and removed old SCR dependency&lt;/p&gt;</comment>
                            <comment id="16114267" author="cziegeler" created="Fri, 4 Aug 2017 11:29:58 +0000"  >&lt;p&gt;Thanks for the patch ,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dominique.jaeggi&quot; class=&quot;user-hover&quot; rel=&quot;dominique.jaeggi&quot;&gt;dominique.jaeggi&lt;/a&gt;&lt;br/&gt;
I&apos;ve applied a slightly modified version in rev 1804102 which removes the dependency on commons.lang and also removes embedding the unused commons.osgi classes.&lt;br/&gt;
Please cross check&lt;/p&gt;</comment>
                            <comment id="16114282" author="dominique.jaeggi" created="Fri, 4 Aug 2017 12:01:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, looks perfect, thanks for processing and cleanup&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13060010">SLING-6746</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12880384" name="SLING_7030___ReferrerFilter_broken_as_legacy_SCR_Annotations_are_not_processed1.patch" size="17305" author="dominique.jaeggi" created="Fri, 4 Aug 2017 11:18:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iez3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7028] Commons Metrics Web Console outputs all Histograms as durations</title>
                <link>https://issues.apache.org/jira/browse/SLING-7028</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For the purpose of the Web Console plugin, Histograms from the MetricsRegistry are assumed to be durations and are output as if the values are in milliseconds. This is not a safe assumption and in fact would generally not be the case since durations would be better tracked through the Timer type (which uses a Histogram internally) not by direct use of the Histogram type.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092217">SLING-7028</key>
            <summary>Commons Metrics Web Console outputs all Histograms as durations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Aug 2017 15:17:43 +0000</created>
                <updated>Tue, 5 Dec 2017 04:38:30 +0000</updated>
                            <resolved>Mon, 7 Aug 2017 13:32:02 +0000</resolved>
                                    <version>Commons Metrics 1.2.2</version>
                                    <fixVersion>commons metrics 1.2.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16112913" author="justinedelson" created="Thu, 3 Aug 2017 15:18:47 +0000"  >&lt;p&gt;proposed change&lt;/p&gt;</comment>
                            <comment id="16116590" author="justinedelson" created="Mon, 7 Aug 2017 13:32:02 +0000"  >&lt;p&gt;implemented in r1804333 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12880250" name="SLING-7028.diff" size="2881" author="justinedelson" created="Thu, 3 Aug 2017 15:18:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3idof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7027] Progress ETA seems to be calculated incorrectly and not to be updated on update.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7027</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It looks to me like the eta is not correctly calculated in JobImpl.setProgress and not set correctly in JobImp.update. &lt;/p&gt;

&lt;p&gt;I would like to apply the attached patch to fix it. Does that look correct to others?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092206">SLING-7027</key>
            <summary>Progress ETA seems to be calculated incorrectly and not to be updated on update.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Aug 2017 14:27:35 +0000</created>
                <updated>Tue, 15 Aug 2017 22:25:22 +0000</updated>
                            <resolved>Fri, 4 Aug 2017 12:54:23 +0000</resolved>
                                    <version>Event 4.2.4</version>
                                    <fixVersion>Event 4.2.6</fixVersion>
                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16114104" author="cziegeler" created="Fri, 4 Aug 2017 08:22:35 +0000"  >&lt;p&gt;Good catch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;&lt;br/&gt;
I think the calculation should rather be (if I&apos;m not confusing things):&lt;br/&gt;
final long eta = System.currentTimeMillis() + (elapsed / current) * (steps - current);&lt;br/&gt;
elapsed is the time taken for the steps so far (current number of steps)&lt;br/&gt;
elapsed/current is the average for a single step&lt;br/&gt;
(steps-current) is the number of remaining steps&lt;/p&gt;</comment>
                            <comment id="16114326" author="karlpauls" created="Fri, 4 Aug 2017 12:51:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, you are absolutely right - I was thinking about the eta (in which case it would be correct) which I think would maybe be more correct but harder to maintain - hence, we should stick with the elapsed and use your calculation. I&apos;ll go ahead and do that.&lt;/p&gt;</comment>
                            <comment id="16114328" author="karlpauls" created="Fri, 4 Aug 2017 12:54:23 +0000"  >&lt;p&gt;Fixed in r1804116.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12880240" name="eta.patch" size="1291" author="karlpauls" created="Thu, 3 Aug 2017 14:27:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3idlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7025] htl-maven-plugin: Correctly state default values for include parameter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7025</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Right now the default values for the &lt;tt&gt;includes&lt;/tt&gt; are set programmatically within &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/tooling/maven/htl-maven-plugin/src/main/java/org/apache/sling/maven/htl/ValidateMojo.java#L217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/tooling/maven/htl-maven-plugin/src/main/java/org/apache/sling/maven/htl/ValidateMojo.java#L217&lt;/a&gt;. That leads to the fact that the default value does not appear in the generated Maven site: &lt;a href=&quot;http://sling.apache.org/components/htl-maven-plugin/validate-mojo.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/components/htl-maven-plugin/validate-mojo.html&lt;/a&gt;.&lt;br/&gt;
Please rather give the default via the annotation (&lt;a href=&quot;https://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/index.html#Supported_Annotations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/index.html#Supported_Annotations&lt;/a&gt;). You can even give multiple values as comma separated string (&lt;a href=&quot;http://blog.sonatype.com/2011/03/configuring-plugin-goals-in-maven-3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.sonatype.com/2011/03/configuring-plugin-goals-in-maven-3/&lt;/a&gt;). Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-5440&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MNG-5440&lt;/a&gt; you should increase the minimum supported maven version to 3.3.9.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091496">SLING-7025</key>
            <summary>htl-maven-plugin: Correctly state default values for include parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Aug 2017 09:40:37 +0000</created>
                <updated>Mon, 7 Aug 2017 09:39:32 +0000</updated>
                            <resolved>Tue, 1 Aug 2017 14:08:54 +0000</resolved>
                                    <version>HTL Maven Plugin 1.0.6</version>
                                    <fixVersion>HTL Maven Plugin 1.0.8</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16108704" author="radu.cotescu" created="Tue, 1 Aug 2017 10:47:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, do you want to handle this issue or should I assign it to me? I&apos;d like to sync it with some other HTL releases.&lt;/p&gt;</comment>
                            <comment id="16108713" author="kwin" created="Tue, 1 Aug 2017 10:54:19 +0000"  >&lt;p&gt;I will propose a patch later today.&lt;/p&gt;</comment>
                            <comment id="16108814" author="kwin" created="Tue, 1 Aug 2017 12:29:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Please check attached patch.&lt;/p&gt;</comment>
                            <comment id="16108962" author="radu.cotescu" created="Tue, 1 Aug 2017 14:08:54 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1803644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1803644&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16108968" author="kwin" created="Tue, 1 Aug 2017 14:13:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Thanks a lot for reacting that fast. Looks good.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12879820" name="SLING-7025-v01.patch" size="7366" author="kwin" created="Tue, 1 Aug 2017 12:29:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i993:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7024] Sightly doesn&apos;t allow to emit style or on event attributes for data-sly-attribute</title>
                <link>https://issues.apache.org/jira/browse/SLING-7024</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For the following Sightly script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;a data-sly-attribute.style=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;background-color: #00ff00&apos;&lt;/span&gt; @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;style-token&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&amp;lt;/a&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The generated a element will not contain a style attribute.&lt;br/&gt;
Instead the following error is emitted in the log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;31.07.2017 09:26:12.448 *WARN* [172.19.0.1 [1501493172400] GET /&amp;lt;some URL&amp;gt; HTTP/1.1] org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine Script &amp;lt;some script path&amp;gt; 11:32: ${&lt;span class=&quot;code-quote&quot;&gt;&apos;background-color: #00ff00&apos;&lt;/span&gt; @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;style-token&apos;&lt;/span&gt;}: Refusing to generate attribute &lt;span class=&quot;code-quote&quot;&gt;&apos;style&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; security reasons.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is unexpected as neither the HTL spec (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#223-attribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#223-attribute&lt;/a&gt;) nor the adobe documentation at &lt;a href=&quot;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#attribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#attribute&lt;/a&gt; mentions that. Please either document that or rather lift that limitation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091141">SLING-7024</key>
            <summary>Sightly doesn&apos;t allow to emit style or on event attributes for data-sly-attribute</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Jul 2017 09:35:26 +0000</created>
                <updated>Mon, 7 Aug 2017 09:40:20 +0000</updated>
                            <resolved>Tue, 1 Aug 2017 10:16:00 +0000</resolved>
                                    <version>Scripting HTL Compiler 1.0.8</version>
                                    <fixVersion>Scripting HTL Compiler 1.0.10</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16107057" author="kwin" created="Mon, 31 Jul 2017 09:52:31 +0000"  >&lt;p&gt;The according code is contained in &lt;a href=&quot;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/plugin/AttributePlugin.java#L65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/plugin/AttributePlugin.java#L65&lt;/a&gt;.&lt;br/&gt;
If you want to keep this functionality (i.e. not allow to emit a style attribute via data-sly-attribute), please also state the explicit workaround in the warning (i.e. use expression language only)&lt;/p&gt;</comment>
                            <comment id="16107060" author="kwin" created="Mon, 31 Jul 2017 09:54:50 +0000"  >&lt;p&gt;Also the same limitation doesn&apos;t apply if multiple attributes are set at the same time, i.e. for the case when &lt;tt&gt;attributeName&lt;/tt&gt; is &lt;tt&gt;null&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/plugin/AttributePlugin.java#L71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/plugin/AttributePlugin.java#L71&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16107456" author="radu.cotescu" created="Mon, 31 Jul 2017 15:45:06 +0000"  >&lt;p&gt;There are a few issues here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;there&apos;s no &lt;tt&gt;style-token&lt;/tt&gt; display context; you&apos;re probably referring to &lt;tt&gt;styleToken&lt;/tt&gt;, but even so your string is not a token according to the CSS specification - &lt;a href=&quot;https://www.w3.org/TR/css-syntax-3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/css-syntax-3/&lt;/a&gt;;&lt;/li&gt;
	&lt;li&gt;if you need to output sensible attributes based on use objects you could do it directly with an expression, though it is also not recommended to do so; it&apos;s more elegant for example to use HTL to decide which classes to apply to an element, rather than to provide dynamic styling; with expressions you&apos;d have to use the &lt;tt&gt;unsafe&lt;/tt&gt; context, which is a last resort;&lt;/li&gt;
	&lt;li&gt;the same limitation applies to multiple attributes - see the attached screenshot&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I would argue that this is at most a specification omission.&lt;/p&gt;</comment>
                            <comment id="16107462" author="kwin" created="Mon, 31 Jul 2017 15:50:22 +0000"  >&lt;p&gt;Thanks for your comments.&lt;/p&gt;

&lt;p&gt;1. You are right, sorry for the mistake, the example should rather use context `attribute` here!&lt;br/&gt;
2. Yes, I observed that as well, but this is not obvious from the warning, I would therefore rather directly have the workaround mentioned in the WARN. Your workaround to use classes instead of direct styles is not always feasible (e.g. in a CMS where the number of allowed background colors is the full RGB value set (&lt;a href=&quot;https://www.w3.org/TR/css3-color/#rgb-color&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/css3-color/#rgb-color&lt;/a&gt;). IMHO the same overwrite possibility should be provided inside &lt;tt&gt;data-sly-attribute&lt;/tt&gt; as with a simple expression. So giving an explicit context should be enough here to explicitly state that you really want to set that sensitive value.&lt;br/&gt;
3. Sorry again, did not see that at first glance in the source code.&lt;/p&gt;

&lt;p&gt;Still I would really appreciate both a clarification in the specs, a way to overwrite the suppression with an explicit context, as well as a clearer warning in the log.&lt;/p&gt;</comment>
                            <comment id="16108680" author="radu.cotescu" created="Tue, 1 Aug 2017 10:15:21 +0000"  >&lt;p&gt;See updated spec - &lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#223-attribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#223-attribute&lt;/a&gt; and improved logging message from &lt;a href=&quot;https://svn.apache.org/r1803633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1803633&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16108796" author="kwin" created="Tue, 1 Aug 2017 12:15:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Thanks a lot for the fix and the update to the spec. LGTM.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12994515">SLING-5944</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13073402">SLING-6866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12879655" name="Screenshot 2017-07-31 17.41.51.png" size="354095" author="radu" created="Mon, 31 Jul 2017 15:45:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i72f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7021] incorrect content coding check in TopologyRequestValidator</title>
                <link>https://issues.apache.org/jira/browse/SLING-7021</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Nitpicking...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        final String contentEncoding = request.getHeader(&quot;Content-Encoding&quot;);
        if (contentEncoding!=null &amp;amp;&amp;amp; contentEncoding.contains(&quot;gzip&quot;)) {
            // then treat the request body as gzip:
            final GZIPInputStream gzipIn = new GZIPInputStream(request.getInputStream());
            final String gunzippedEncodedJson = IOUtils.toString(gzipIn);
            gzipIn.close();
            return gunzippedEncodedJson;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;contains&quot; is wrong here, it would match the following field values:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;nogzip
gzip, gzip
deflate, gzip
gzip2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... none of which should match. The simplest fix would be to trim the value and check for &lt;tt&gt;equals(&quot;gzip&quot;)&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13089908">SLING-7021</key>
            <summary>incorrect content coding check in TopologyRequestValidator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jul 2017 15:13:28 +0000</created>
                <updated>Tue, 25 Jul 2017 15:13:28 +0000</updated>
                                                                            <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hzhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7020] DefaultDistributionComponentProvider is causing an NPE when agents are listed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7020</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When listing the agents with &apos; /libs/sling/distribution/services.1.json&apos; then the DefaultDistributionComponentProvider.getComponents() throws an NPE on line 84. The reason is that the method getComponentMap() for type TRIGGER is returning NULL and there is no check for a NPE. This will fix that NPE:&lt;/p&gt;

&lt;p&gt;    public List&amp;lt;DistributionComponent&amp;lt;?&amp;gt;&amp;gt; getComponents(DistributionComponentKind kind) {&lt;br/&gt;
        Map&amp;lt;String, DistributionComponent&amp;lt;?&amp;gt;&amp;gt; componentMap = getComponentMap(kind.asClass());&lt;/p&gt;

&lt;p&gt;        List&amp;lt;DistributionComponent&amp;lt;?&amp;gt;&amp;gt; componentList = new ArrayList&amp;lt;DistributionComponent&amp;lt;?&amp;gt;&amp;gt;();&lt;br/&gt;
        if(componentMap != null) &lt;/p&gt;
{
            componentList.addAll(componentMap.values());
        }

&lt;p&gt;        return componentList;&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment>Latest Sling, JDK 1.8</environment>
        <key id="13089676">SLING-7020</key>
            <summary>DefaultDistributionComponentProvider is causing an NPE when agents are listed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jul 2017 19:56:31 +0000</created>
                <updated>Tue, 1 Oct 2019 14:03:04 +0000</updated>
                            <resolved>Tue, 25 Jul 2017 13:30:50 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.2.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16100033" author="marett" created="Tue, 25 Jul 2017 13:28:37 +0000"  >&lt;p&gt;This could be reproduced, by adding a configuration for a service resource provider factory (PID &lt;tt&gt;org.apache.sling.distribution.resources.impl.DistributionServiceResourceProviderFactory&lt;/tt&gt;) of kind &lt;tt&gt;trigger&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16100042" author="marett" created="Tue, 25 Jul 2017 13:30:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; for reporting this, fixed in &lt;tt&gt;r1802937&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hy2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7019] MapEntries class causes IllegalStateException: Resource resolver is already closed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7019</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Following warnings are logged on updating the resource resolver implementation:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;21.07.2017 14:31:01.244 *WARN* [sling-oak-observation-416] org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor Error while dispatching observation events for //*[11111b]@org.apache.sling.jcr.resource.internal.JcrResourceListener
java.lang.IllegalStateException: Resource resolver is already closed.
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.checkClosed(ResourceResolverImpl.java:186)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.getResource(ResourceResolverImpl.java:624)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.updateResource(MapEntries.java:292)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.onChange(MapEntries.java:733)
	at org.apache.sling.resourceresolver.impl.observation.BasicObservationReporter.reportChanges(BasicObservationReporter.java:211)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.onEvent(JcrResourceListener.java:155)
	at org.apache.jackrabbit.commons.observation.ListenerTracker$1.onEvent(ListenerTracker.java:190)
	at org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor.contentChanged(ChangeProcessor.java:507)
	at org.apache.jackrabbit.oak.plugins.observation.FilteringDispatcher.contentChanged(FilteringDispatcher.java:53)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:134)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:128)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;23.07.2017 17:13:37.475 *WARN* [sling-oak-observation-23] org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider Unable to refresh session.
javax.jcr.RepositoryException: This session has been closed.
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.checkAlive(SessionImpl.java:141)
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.refresh(SessionImpl.java:431)
	at com.adobe.granite.repository.impl.CRX3SessionImpl.refresh(CRX3SessionImpl.java:213)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.refresh(JcrResourceProvider.java:516)
	at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.refresh(AuthenticatedResourceProvider.java:89)
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.refresh(ResourceResolverControl.java:154)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.refresh(ResourceResolverImpl.java:1256)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.refreshResolverIfNecessary(MapEntries.java:640)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.updateResource(MapEntries.java:291)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.onChange(MapEntries.java:733)
	at org.apache.sling.resourceresolver.impl.observation.BasicObservationReporter.reportChanges(BasicObservationReporter.java:211)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.onEvent(JcrResourceListener.java:155)
	at org.apache.jackrabbit.commons.observation.ListenerTracker$1.onEvent(ListenerTracker.java:190)
	at org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor.contentChanged(ChangeProcessor.java:507)
	at org.apache.jackrabbit.oak.plugins.observation.FilteringDispatcher.contentChanged(FilteringDispatcher.java:53)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:134)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:128)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13089485">SLING-7019</key>
            <summary>MapEntries class causes IllegalStateException: Resource resolver is already closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="mohiaror">Mohit Arora</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jul 2017 11:48:08 +0000</created>
                <updated>Thu, 27 Jul 2017 08:21:18 +0000</updated>
                            <resolved>Mon, 24 Jul 2017 15:16:08 +0000</resolved>
                                    <version>Resource Resolver 1.5.28</version>
                                    <fixVersion>Resource Resolver 1.5.30</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16098242" author="cziegeler" created="Mon, 24 Jul 2017 11:55:57 +0000"  >&lt;p&gt;This looks like a race condition. I think the MapEntries class could be improved by:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Checking directly if dispose() is already called on onEvent() - this used to be in there by checking whether the resolver is null but seems to be lost due to refactoring&lt;/li&gt;
	&lt;li&gt;Move setting the resolver to null to the beginning of dispose()&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16098560" author="karlpauls" created="Mon, 24 Jul 2017 15:16:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohiaror&quot; class=&quot;user-hover&quot; rel=&quot;mohiaror&quot;&gt;mohiaror&lt;/a&gt;, I looked into it a little bit and I think I got all cases of the race condition in r1802827. &lt;/p&gt;

&lt;p&gt;I&apos;ll resolve this issue (please reopen if you still see problems after r1802827). &lt;/p&gt;</comment>
                            <comment id="16098566" author="mohiaror" created="Mon, 24 Jul 2017 15:20:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; Thanks. Can you also initiate the official release of resourceresolver to be included in 6.3 CFP2?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hx9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7018] To many alias map entries getting removed from memory map when a resource is getting deleted</title>
                <link>https://issues.apache.org/jira/browse/SLING-7018</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to reproduce the issue:&lt;br/&gt;
1. Create a jcr:content resource with the property sling:alias set to &apos;foo&apos; (e.g. at /content/test/page1/jcr:content)&lt;br/&gt;
2. Create another jcr:content resource withe the property sling:alias to &apos;bar&apos; at the same parent resource (e.g. at /content/test/page2/jcr:content)&lt;br/&gt;
4. Make sure that the &apos;Optimize alias resolution&apos; feature of the JCR Resource Resolver Factory is enabled&lt;/p&gt;

&lt;p&gt;=&amp;gt; As expected a request to /content/test/foo and /content/test/bar is getting mapped to page1 and page2&lt;/p&gt;

&lt;p&gt;5. Create a child content resource at /content/test/page2/jcr:content/title with some example property&lt;br/&gt;
6. Delete the child content resource from step 5.&lt;/p&gt;

&lt;p&gt;Expected:&lt;br/&gt;
 /content/test/foo and /content/test/bar are still mapped to  /content/test/page1 and /content/test/page2&lt;/p&gt;

&lt;p&gt;Observed:&lt;br/&gt;
Only the map entry for /content/test/foo can still be mapped to page1, all other map entries of the same parent level at /content/test are removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13088670">SLING-7018</key>
            <summary>To many alias map entries getting removed from memory map when a resource is getting deleted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="bupauli">Burkhard Pauli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jul 2017 08:12:21 +0000</created>
                <updated>Thu, 27 Jul 2017 08:21:18 +0000</updated>
                            <resolved>Mon, 24 Jul 2017 14:30:47 +0000</resolved>
                                    <version>Resource Resolver 1.5.22</version>
                                    <fixVersion>Resource Resolver 1.5.30</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16094350" author="bupauli" created="Thu, 20 Jul 2017 08:25:50 +0000"  >&lt;p&gt;In org/apache/sling/resourceresolver/impl/mapping/MapEntries.java:334 all map entries are getting removed where the current path (of the removed) resource starts with. I think this needs to be changed in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (contentPath.startsWith(actualContentPath)) {
                    changed |= removeAlias(contentPath, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, resolverRefreshed);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16098491" author="karlpauls" created="Mon, 24 Jul 2017 14:30:47 +0000"  >&lt;p&gt;Yes, it looks like we are always removing all mapping for the parent when in reality we should only remove those mapping for which something changed. Furthermore, it seems like we are not matching subresources correctly either. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bupauli&quot; class=&quot;user-hover&quot; rel=&quot;bupauli&quot;&gt;bupauli&lt;/a&gt;, it turned out to be a little bit more complicated but I think I fixed it in master in r1802818. &lt;/p&gt;

&lt;p&gt;I&apos;m resolving this issue (please reopen if it doesn&apos;t work for you).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hs9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7016] caconfig: Override is not applied for a configuration name if no config resource exist</title>
                <link>https://issues.apache.org/jira/browse/SLING-7016</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;if for a given configuration name no config resource exist (not even on higher levels or on one of the fallback paths), then configured override values are not applied.&lt;br/&gt;
overrides should always be applied regardless of existing configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087723">SLING-7016</key>
            <summary>caconfig: Override is not applied for a configuration name if no config resource exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>contextaware-config</label>
                    </labels>
                <created>Mon, 17 Jul 2017 20:17:44 +0000</created>
                <updated>Fri, 22 Sep 2017 20:43:14 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 19:33:15 +0000</resolved>
                                    <version>Context-Aware Configuration Impl 1.4.2</version>
                                    <fixVersion>Context-Aware Configuration Impl 1.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16172223" author="sseifert@pro-vision.de" created="Tue, 19 Sep 2017 19:33:15 +0000"  >&lt;p&gt;Completed: At revision: 1808934  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hmev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7014] Inheritance of configurations from parent content resource</title>
                <link>https://issues.apache.org/jira/browse/SLING-7014</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;configure /content/dam/folder/@cq:conf = /conf/something&lt;br/&gt;
Then use the sling context aware API to get the configuration for /content/dam/folder/asset.png and I essentially get /conf/global (an osgi-configured fallback) instead of /conf/something&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087478">SLING-7014</key>
            <summary>Inheritance of configurations from parent content resource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nitigupt">Nitin Gupta</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 05:41:40 +0000</created>
                <updated>Mon, 17 Jul 2017 20:12:31 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16090251" author="alexander.klimetschek" created="Mon, 17 Jul 2017 18:29:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Could you look into this? If this is the case, it&apos;s a critical bug in the resolution logic of the default SPI implementation.&lt;/p&gt;

&lt;p&gt;Note that &lt;tt&gt;cq:conf&lt;/tt&gt; is our custom name for the &lt;tt&gt;sling:configRef&lt;/tt&gt; property. As stated in the &lt;a href=&quot;http://sling.apache.org/documentation/bundles/context-aware-configuration/context-aware-configuration-default-implementation.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Go up in the content resource tree until a resource with sling:configRef is found. This is the &apos;inner-most&apos; context. Check if a configuration resource exists at the path the property points to.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16090471" author="sseifert@pro-vision.de" created="Mon, 17 Jul 2017 20:12:31 +0000"  >&lt;p&gt;can you define a logger for category &lt;tt&gt;org.apache.sling.caconfig&lt;/tt&gt;, set it to TRACE and put it&apos;s output into a separate file.&lt;br/&gt;
then reproduce the issue from this ticket and have a look a the log file.&lt;br/&gt;
if this does not help please attach the log file to this ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hkwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7011] fsresource: Detect FileVault &lt;any&gt;.xml JCR XML files</title>
                <link>https://issues.apache.org/jira/browse/SLING-7011</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the FileVaultResourceMapper currently does only detect JCR XML files names &lt;tt&gt;.content.xml&lt;/tt&gt;.&lt;br/&gt;
it is possible to have JCR XML Files with any name (xyz.xml) that contain JCR XML content as well. the file name is the node name in this case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087155">SLING-7011</key>
            <summary>fsresource: Detect FileVault &lt;any&gt;.xml JCR XML files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2017 10:36:02 +0000</created>
                <updated>Tue, 18 Jul 2017 13:42:09 +0000</updated>
                            <resolved>Fri, 14 Jul 2017 10:37:08 +0000</resolved>
                                    <version>File System Resource Provider 1.4.6</version>
                    <version>File System Resource Provider 2.1.6</version>
                                    <fixVersion>File System Resource Provider 1.4.8</fixVersion>
                    <fixVersion>File System Resource Provider 2.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16087160" author="sseifert@pro-vision.de" created="Fri, 14 Jul 2017 10:37:08 +0000"  >&lt;p&gt;Completed: At revision: 1801930  (1.x)&lt;br/&gt;
Completed: At revision: 1801932  (2.x)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hixb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7009] NPE in ResourceChangeListenerInfo when resource.change.types is not String or String array</title>
                <link>https://issues.apache.org/jira/browse/SLING-7009</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When registering a &lt;tt&gt;ResourceChangeListener&lt;/tt&gt; with &lt;tt&gt;ResourceChangeListener.CHANGES&lt;/tt&gt; and e.g. &lt;tt&gt;ChangeType.ADDED&lt;/tt&gt; (enum), ResourceChangeListenerInfo fails with NPE:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-07-13T23:55:46,811 | ERROR | RMI TCP Connection(3)-127.0.0.1 | Felix                            |  -  -  | Bundle org.apache.sling.resourceresolver [110] EventDispatcher: Error during dispatch. (java.lang.NullPointerException)
java.lang.NullPointerException: null
	at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerInfo.&amp;lt;init&amp;gt;(ResourceChangeListenerInfo.java:120) ~[?:?]
	at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard$1.addingService(ResourceChangeListenerWhiteboard.java:82) ~[?:?]
	at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard$1.addingService(ResourceChangeListenerWhiteboard.java:64) ~[?:?]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941) ~[?:?]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870) ~[?:?]
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256) ~[?:?]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229) ~[?:?]
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901) ~[?:?]
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990) ~[?:?]
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838) ~[?:?]
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545) ~[?:?]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4579) ~[?:?]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3571) ~[?:?]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348) ~[?:?]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:355) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should be more robust (try/catch including for-loop).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087117">SLING-7009</key>
            <summary>NPE in ResourceChangeListenerInfo when resource.change.types is not String or String array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2017 07:59:56 +0000</created>
                <updated>Thu, 30 Nov 2017 08:49:38 +0000</updated>
                            <resolved>Tue, 25 Jul 2017 08:04:27 +0000</resolved>
                                    <version>Resource Resolver 1.5.26</version>
                                    <fixVersion>Resource Resolver 1.5.32</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16089672" author="olli" created="Mon, 17 Jul 2017 11:27:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I guess &lt;em&gt;config is invalid&lt;/em&gt; when &lt;tt&gt;PropertiesUtil#toStringArray(...)&lt;/tt&gt; fails, right?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    /**
     * Array of change types - optional.
     * If this property is missing, added, removed and changed events for resources
     * and added and removed events for resource providers are reported.
     * If this property is invalid, the listener is ignored. The type of the property
     * must either be String, or a String array. Valid values are the constants from
     * {@link ResourceChange.ChangeType}.
     */
    String CHANGES = &quot;resource.change.types&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16089731" author="cziegeler" created="Mon, 17 Jul 2017 12:12:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Right, the javadoc explicitely states it must be string or string array&lt;/p&gt;</comment>
                            <comment id="16099679" author="olli" created="Tue, 25 Jul 2017 08:04:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1802897&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1802897&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hiov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7008] PathPipe is using a private sling query package</title>
                <link>https://issues.apache.org/jira/browse/SLING-7008</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;PathPipe is using sling query private&apos;s IteratorUtils, which passes tests but breaks OSGI&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086838">SLING-7008</key>
            <summary>PathPipe is using a private sling query package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Jul 2017 07:45:38 +0000</created>
                <updated>Wed, 20 Sep 2017 11:15:11 +0000</updated>
                            <resolved>Thu, 13 Jul 2017 19:00:14 +0000</resolved>
                                                    <fixVersion>Pipes 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16085385" author="npeltier" created="Thu, 13 Jul 2017 08:42:41 +0000"  >&lt;p&gt;ideally i&apos;ll try to add a failing IT so that such mistake can&apos;t be reproduced in the future&lt;/p&gt;</comment>
                            <comment id="16085517" author="olli" created="Thu, 13 Jul 2017 10:24:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, there is already a test for the &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/karaf/org.apache.sling.karaf-features/src/main/feature/feature.xml#L244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Pipes (Karaf) feature&lt;/a&gt; which tests that Pipes bundle resolves: &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/karaf/org.apache.sling.karaf-integration-tests/src/test/java/org/apache/sling/karaf/tests/bootstrap/SlingExtensionPipesIT.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SlingExtensionPipesIT&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16085624" author="npeltier" created="Thu, 13 Jul 2017 12:19:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, can&apos;t get it to fail (changed version to 1.0.2 or 1.0.3-SNAPSHOT), not sure what to do from here&lt;/p&gt;</comment>
                            <comment id="16085639" author="olli" created="Thu, 13 Jul 2017 12:33:15 +0000"  >&lt;p&gt;Did you remove Sling Query from Pipes feature (it was required by &lt;tt&gt;0.0.10&lt;/tt&gt;)?&lt;/p&gt;</comment>
                            <comment id="16085802" author="npeltier" created="Thu, 13 Jul 2017 14:50:33 +0000"  >&lt;p&gt;sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, forgot to rebuild features, so now changing feature tag to be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;feature name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sling-extension-pipes&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${project.version}&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;bundle&amp;gt;mvn:org.apache.sling/org.apache.sling.pipes/1.0.3-SNAPSHOT&amp;lt;/bundle&amp;gt;
    &amp;lt;!-- dependencies --&amp;gt;
    &amp;lt;feature version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${project.version}&quot;&lt;/span&gt;&amp;gt;sling&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${project.version}&quot;&lt;/span&gt;&amp;gt;jackrabbit-sling&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&lt;span class=&quot;code-quote&quot;&gt;&quot;${project.version}&quot;&lt;/span&gt;&amp;gt;sling-extension-query&amp;lt;/feature&amp;gt;
    &amp;lt;!-- TODO --&amp;gt;
    &amp;lt;bundle dependency=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;mvn:org.apache.sling/org.apache.sling.commons.johnzon/1.0.0&amp;lt;/bundle&amp;gt;
  &amp;lt;/feature&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;rebuild, but i get an error &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; (unrelated, i think, to the fact the bundle is not up)&lt;br/&gt;
am i missing anything ?&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: Cannot get the remote bundle context
	at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.getRemoteBundleContext(RemoteBundleContextClientImpl.java:261)
	at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.waitForState(RemoteBundleContextClientImpl.java:218)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.waitForState(KarafTestContainer.java:646)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.startKaraf(KarafTestContainer.java:253)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.start(KarafTestContainer.java:187)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.setUp(EagerSingleStagedReactor.java:86)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.beforeClass(EagerSingleStagedReactor.java:136)
	at org.ops4j.pax.exam.spi.reactors.ReactorManager.beforeClass(ReactorManager.java:457)
	at org.ops4j.pax.exam.junit.impl.ProbeRunner.run(ProbeRunner.java:97)
	at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:93)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Caused by: java.rmi.NotBoundException: a0477701-aeb2-40f1-beac-d02bacc2bb7d
	at sun.rmi.registry.RegistryImpl.lookup(RegistryImpl.java:209)
	at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
	at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:450)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
	at sun.rmi.transport.Transport$1.run(Transport.java:200)
	at sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
	at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:276)
	at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:253)
	at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:379)
	at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
	at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.getRemoteBundleContext(RemoteBundleContextClientImpl.java:248)
	at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.waitForState(RemoteBundleContextClientImpl.java:218)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.waitForState(KarafTestContainer.java:646)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.startKaraf(KarafTestContainer.java:253)
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.start(KarafTestContainer.java:187)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.setUp(EagerSingleStagedReactor.java:86)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.beforeClass(EagerSingleStagedReactor.java:136)
	at org.ops4j.pax.exam.spi.reactors.ReactorManager.beforeClass(ReactorManager.java:457)
	at org.ops4j.pax.exam.junit.impl.ProbeRunner.run(ProbeRunner.java:97)
	at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:93)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

org.apache.sling.karaf.tests.bootstrap.SlingExtensionPipesIT  Time elapsed: 182.652 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.RuntimeException: Container never came up
	at org.ops4j.pax.exam.karaf.container.internal.KarafTestContainer.stop(KarafTestContainer.java:616)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.tearDown(EagerSingleStagedReactor.java:118)
	at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.afterClass(EagerSingleStagedReactor.java:132)
	at org.ops4j.pax.exam.spi.reactors.ReactorManager.afterClass(ReactorManager.java:441)
	at org.ops4j.pax.exam.junit.impl.ProbeRunner.run(ProbeRunner.java:107)
	at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:93)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)


Results :

Tests in error:
  JUnit4Provider.invoke:128-&amp;gt;executeTestSet:153-&amp;gt;executeWithRerun:173-&amp;gt;execute:283 &#187; &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;
  SlingExtensionPipesIT.org.apache.sling.karaf.tests.bootstrap.SlingExtensionPipesIT &#187; &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16085836" author="olli" created="Thu, 13 Jul 2017 15:09:26 +0000"  >&lt;p&gt;Check &lt;tt&gt;karaf.log&lt;/tt&gt; for details:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.osgi.service.resolver.ResolutionException: Unable to resolve root: missing requirement [root] osgi.identity; osgi.identity=sling-extension-pipes; type=karaf.feature; version=&quot;[0.1.1.SNAPSHOT,0.1.1.SNAPSHOT]&quot;; filter:=&quot;(&amp;amp;(osgi.identity=sling-extension-pipes)(type=karaf.feature)(version&amp;gt;=0.1.1.SNAPSHOT)(version&amp;lt;=0.1.1.SNAPSHOT))&quot; [caused by: Unable to resolve sling-extension-pipes/0.1.1.SNAPSHOT: missing requirement [sling-extension-pipes/0.1.1.SNAPSHOT] osgi.identity; osgi.identity=org.apache.sling.pipes; type=osgi.bundle; version=&quot;[1.0.3.SNAPSHOT,1.0.3.SNAPSHOT]&quot;; resolution:=mandatory [caused by: Unable to resolve org.apache.sling.pipes/1.0.3.SNAPSHOT: missing requirement [org.apache.sling.pipes/1.0.3.SNAPSHOT] osgi.wiring.package; filter:=&quot;(&amp;amp;(osgi.wiring.package=org.apache.sling.event.jobs)(version&amp;gt;=2.0.0)(!(version&amp;gt;=3.0.0)))&quot;]]
	at org.apache.felix.resolver.ResolutionError.toException(ResolutionError.java:42) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.doResolve(ResolverImpl.java:389) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:375) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:347) ~[?:?]
	at org.apache.karaf.features.internal.region.SubsystemResolver.resolve(SubsystemResolver.java:218) ~[?:?]
	at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:285) ~[?:?]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1170) ~[?:?]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$0(FeaturesServiceImpl.java:1069) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
	at java.lang.Thread.run(Thread.java:748) [?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Latest Pipes now also depends on Sling Event (package &lt;tt&gt;org.apache.sling.event.jobs&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="16085849" author="olli" created="Thu, 13 Jul 2017 15:13:05 +0000"  >&lt;p&gt;With Sling Event added I get following error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.osgi.service.resolver.ResolutionException: Unable to resolve root: missing requirement [root] osgi.identity; osgi.identity=sling-extension-pipes; type=karaf.feature; version=&quot;[0.1.1.SNAPSHOT,0.1.1.SNAPSHOT]&quot;; filter:=&quot;(&amp;amp;(osgi.identity=sling-extension-pipes)(type=karaf.feature)(version&amp;gt;=0.1.1.SNAPSHOT)(version&amp;lt;=0.1.1.SNAPSHOT))&quot; [caused by: Unable to resolve sling-extension-pipes/0.1.1.SNAPSHOT: missing requirement [sling-extension-pipes/0.1.1.SNAPSHOT] osgi.identity; osgi.identity=org.apache.sling.pipes; type=osgi.bundle; version=&quot;[1.0.3.SNAPSHOT,1.0.3.SNAPSHOT]&quot;; resolution:=mandatory [caused by: Unable to resolve org.apache.sling.pipes/1.0.3.SNAPSHOT: missing requirement [org.apache.sling.pipes/1.0.3.SNAPSHOT] osgi.wiring.package; filter:=&quot;(osgi.wiring.package=org.apache.sling.query.util)&quot;]]
	at org.apache.felix.resolver.ResolutionError.toException(ResolutionError.java:42) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.doResolve(ResolverImpl.java:389) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:375) ~[?:?]
	at org.apache.felix.resolver.ResolverImpl.resolve(ResolverImpl.java:347) ~[?:?]
	at org.apache.karaf.features.internal.region.SubsystemResolver.resolve(SubsystemResolver.java:218) ~[?:?]
	at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:285) ~[?:?]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1170) ~[?:?]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$0(FeaturesServiceImpl.java:1069) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
	at java.lang.Thread.run(Thread.java:748) [?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Current feature:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;feature name=&quot;sling-extension-pipes&quot; version=&quot;${project.version}&quot;&amp;gt;
    &amp;lt;bundle&amp;gt;mvn:org.apache.sling/org.apache.sling.pipes/1.0.3-SNAPSHOT&amp;lt;/bundle&amp;gt;
    &amp;lt;!-- dependencies --&amp;gt;
    &amp;lt;feature version=&quot;${project.version}&quot;&amp;gt;sling&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${project.version}&quot;&amp;gt;jackrabbit-sling&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${project.version}&quot;&amp;gt;sling-extension-event&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${project.version}&quot;&amp;gt;sling-extension-query&amp;lt;/feature&amp;gt;
  &amp;lt;/feature&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16086215" author="npeltier" created="Thu, 13 Jul 2017 18:52:50 +0000"  >&lt;p&gt;awesome &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; thanks! will commit karaf change if one day i manage to release pipes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16086232" author="npeltier" created="Thu, 13 Jul 2017 19:00:14 +0000"  >&lt;p&gt;just fixed the issue, will update karaf IT afterwards&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hgzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7007] fsresource: Support URL-encoded file names</title>
                <link>https://issues.apache.org/jira/browse/SLING-7007</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the JCR content loader supports URL-encoding for resource names stored as files that contain special characters like &quot;:&quot;, see&lt;br/&gt;
&lt;a href=&quot;https://sling.apache.org/documentation/bundles/content-loading-jcr-contentloader.html#file-name-escaping&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/content-loading-jcr-contentloader.html#file-name-escaping&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this has to be supported by fsresource as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086634">SLING-7007</key>
            <summary>fsresource: Support URL-encoded file names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jul 2017 16:42:37 +0000</created>
                <updated>Tue, 18 Jul 2017 13:42:09 +0000</updated>
                            <resolved>Wed, 12 Jul 2017 16:46:50 +0000</resolved>
                                    <version>File System Resource Provider 1.4.6</version>
                    <version>File System Resource Provider 2.1.6</version>
                                    <fixVersion>File System Resource Provider 1.4.8</fixVersion>
                    <fixVersion>File System Resource Provider 2.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16084289" author="sseifert@pro-vision.de" created="Wed, 12 Jul 2017 16:46:50 +0000"  >&lt;p&gt;Completed: At revision: 1801751  (1.x)&lt;br/&gt;
Completed: At revision: 1801752  (2.x)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hfq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7006] When an error occurs, the Sling Post responses contain change log of paths which did not change</title>
                <link>https://issues.apache.org/jira/browse/SLING-7006</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When an error occurs during the handling of a POST request, the change log in the HTML and JSON response will be populated with paths which did not change. We should just omit the change log when an error occurs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086409">SLING-7006</key>
            <summary>When an error occurs, the Sling Post responses contain change log of paths which did not change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2017 22:50:18 +0000</created>
                <updated>Wed, 20 Sep 2017 11:15:59 +0000</updated>
                            <resolved>Tue, 11 Jul 2017 23:23:25 +0000</resolved>
                                    <version>Servlets Post 2.3.20</version>
                                    <fixVersion>Servlets Post 2.3.22</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16083165" author="justinedelson" created="Tue, 11 Jul 2017 23:23:25 +0000"  >&lt;p&gt;fixed in r1801663&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hec7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7005] Remove Java 7 from build configurations</title>
                <link>https://issues.apache.org/jira/browse/SLING-7005</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since the ASF Jenkins instance will stop supporting Maven jobs with Java 7, we will it from the build configurations.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://lists.apache.org/thread.html/894477abf58220adf27c95b74e0225acfa756e6ed195e40475d1f826@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/894477abf58220adf27c95b74e0225acfa756e6ed195e40475d1f826@%3Cdev.sling.apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086196">SLING-7005</key>
            <summary>Remove Java 7 from build configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2017 09:04:31 +0000</created>
                <updated>Tue, 11 Jul 2017 10:52:59 +0000</updated>
                            <resolved>Tue, 11 Jul 2017 10:52:59 +0000</resolved>
                                                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16082032" author="rombert" created="Tue, 11 Jul 2017 10:52:59 +0000"  >&lt;p&gt;All Java 7 jobs removed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hd1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7004] Deadlock at startup in Commons Scheduler</title>
                <link>https://issues.apache.org/jira/browse/SLING-7004</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Saw following deadlock in one of the startups with 2.6.2 release. Logs &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876566/12876566_threaddump.log&quot; title=&quot;threaddump.log attached to SLING-7004&quot;&gt;attached&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Found one Java-level deadlock:
=============================
&quot;Apache Sling Repository Startup Thread&quot;:
  waiting to lock monitor 0x00007f3eec6eb318 (object 0x00000000e3f944e0, a org.apache.sling.commons.scheduler.impl.SchedulerProxy),
  which is held by &quot;FelixStartLevel&quot;
&quot;FelixStartLevel&quot;:
  waiting to lock monitor 0x00007f3e610de918 (object 0x00000000e798fc58, a org.apache.sling.commons.scheduler.impl.SchedulerProxy),
  which is held by &quot;Apache Sling Repository Startup Thread&quot;

Java stack information for the threads listed above:
===================================================
&quot;Apache Sling Repository Startup Thread&quot;:
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.unschedule(QuartzScheduler.java:555)
	- waiting to lock &amp;lt;0x00000000e3f944e0&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:601)
	- locked &amp;lt;0x00000000e798fc58&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:532)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.scheduleJob(WhiteboardHandler.java:271)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.trySchedulePeriod(WhiteboardHandler.java:229)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.register(WhiteboardHandler.java:189)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.registerRunnable(WhiteboardHandler.java:146)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.BindMethod.invoke(BindMethod.java:655)
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1722)
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1699)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:372)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:320)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:291)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4579)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3571)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)
	at org.apache.jackrabbit.oak.osgi.OsgiWhiteboard.register(OsgiWhiteboard.java:80)
	at org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils.scheduleWithFixedDelay(WhiteboardUtils.java:71)
	at org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils.scheduleWithFixedDelay(WhiteboardUtils.java:52)
	at org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils.scheduleWithFixedDelay(WhiteboardUtils.java:46)
	at org.apache.jackrabbit.oak.stats.StatisticManager.&amp;lt;init&amp;gt;(StatisticManager.java:74)
	at org.apache.jackrabbit.oak.jcr.repository.RepositoryImpl.&amp;lt;init&amp;gt;(RepositoryImpl.java:151)
	at org.apache.jackrabbit.oak.jcr.Jcr.createRepository(Jcr.java:407)
	at com.adobe.granite.repository.impl.SlingRepositoryManager.createRepository(SlingRepositoryManager.java:417)
	at com.adobe.granite.repository.impl.SlingRepositoryManager.acquireRepository(SlingRepositoryManager.java:265)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:471)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:85)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:455)
&quot;FelixStartLevel&quot;:
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.unschedule(QuartzScheduler.java:555)
	- waiting to lock &amp;lt;0x00000000e798fc58&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.scheduleJob(QuartzScheduler.java:601)
	- locked &amp;lt;0x00000000e3f944e0&amp;gt; (a org.apache.sling.commons.scheduler.impl.SchedulerProxy)
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.schedule(QuartzScheduler.java:532)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.scheduleJob(WhiteboardHandler.java:271)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.trySchedulePeriod(WhiteboardHandler.java:229)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.register(WhiteboardHandler.java:189)
	at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.registerRunnable(WhiteboardHandler.java:146)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.BindMethod.invoke(BindMethod.java:655)
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1722)
	at org.apache.felix.scr.impl.manager.DependencyManager.open(DependencyManager.java:1556)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:261)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:109)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:749)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enableInternal(AbstractComponentManager.java:675)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:430)
	at org.apache.felix.scr.impl.manager.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:657)
	- locked &amp;lt;0x00000000e3dbc5d0&amp;gt; (a java.lang.Object)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:341)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:390)
	at org.apache.felix.scr.impl.Activator.access$200(Activator.java:54)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:265)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:915)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:834)
	at org.apache.felix.framework.EventDispatcher.fireBundleEvent(EventDispatcher.java:516)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4563)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2173)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1372)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.Thread.run(Thread.java:745)

Found 1 deadlock.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13086163">SLING-7004</key>
            <summary>Deadlock at startup in Commons Scheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2017 06:13:27 +0000</created>
                <updated>Fri, 25 Aug 2017 08:45:01 +0000</updated>
                            <resolved>Thu, 17 Aug 2017 12:12:45 +0000</resolved>
                                                    <fixVersion>Commons Scheduler 2.7.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16082065" author="cziegeler" created="Tue, 11 Jul 2017 11:12:02 +0000"  >&lt;p&gt;The schedule method locks the current proxy but then calls unschedule which iterates over all proxies and syncs on each of them. So if schedule is called concurrently with two different proxies this deadlock can occur.&lt;br/&gt;
I think the easiest solution is to use a single global lock for each operation, instead of smaller individual locks on the proxy level&lt;/p&gt;</comment>
                            <comment id="16130316" author="cziegeler" created="Thu, 17 Aug 2017 12:12:45 +0000"  >&lt;p&gt;Using single lock instead of more fine grained ones (rev 1805278)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13095294">SLING-7053</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12876566" name="threaddump.log" size="69976" author="chetanm" created="Tue, 11 Jul 2017 06:13:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hcu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7002] PipeBuilder with() API should manage Object, not Strings</title>
                <link>https://issues.apache.org/jira/browse/SLING-7002</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;with(String,String) API is not working with boolean properties we have in a few pipes, like Path, or Authorizable.&lt;br/&gt;
should be with(String, Object)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086014">SLING-7002</key>
            <summary>PipeBuilder with() API should manage Object, not Strings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jul 2017 17:25:37 +0000</created>
                <updated>Wed, 20 Sep 2017 11:15:09 +0000</updated>
                            <resolved>Mon, 10 Jul 2017 17:39:51 +0000</resolved>
                                                    <fixVersion>Pipes 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16080721" author="npeltier" created="Mon, 10 Jul 2017 17:39:51 +0000"  >&lt;p&gt;fixed with r1801506&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hbxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7000] HTL: URIManipulatorFilterExtension destroys opaque URIs</title>
                <link>https://issues.apache.org/jira/browse/SLING-7000</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the URI manipulator&apos;s extension option (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#125-uri-manipulation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#125-uri-manipulation&lt;/a&gt;) on a mailto link (or any other opaque URI) the value is completely messed up.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;mailto:some.mail@apache.org&apos;&lt;/span&gt; @ extension=&lt;span class=&quot;code-quote&quot;&gt;&apos;html&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;URIManipulationFilterExtension&lt;/tt&gt; returns &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mailto:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.html&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;through its &lt;tt&gt;call(...)&lt;/tt&gt; method with parameter &lt;tt&gt;arguments&lt;/tt&gt; being set to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[mailto:konrad@netcentric.biz, {extension=html}]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13085223">SLING-7000</key>
            <summary>HTL: URIManipulatorFilterExtension destroys opaque URIs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Jul 2017 12:39:48 +0000</created>
                <updated>Tue, 18 Sep 2018 10:26:49 +0000</updated>
                            <resolved>Mon, 31 Jul 2017 16:24:42 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                    <version>Scripting HTL Engine 1.0.34</version>
                                    <fixVersion>Scripting HTL Engine 1.0.36</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16076453" author="kwin" created="Thu, 6 Jul 2017 12:58:19 +0000"  >&lt;p&gt;Although this behaviour is not explicitly specified this is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5632&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5632&lt;/a&gt; and the expected behaviour would be that those links are not touched by the URI manipulator. Those URI&apos;s are called opaque in contrast to hierarchical URIs (compare with &lt;a href=&quot;https://www.ietf.org/rfc/rfc2396.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ietf.org/rfc/rfc2396.txt&lt;/a&gt; and &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/net/URI.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/net/URI.html&lt;/a&gt;). Only the latter should be manipulated through the individual URI manipulator options. The former should only support the &lt;tt&gt;scheme&lt;/tt&gt; and &lt;tt&gt;fragment&lt;/tt&gt; option.&lt;/p&gt;</comment>
                            <comment id="16076491" author="kwin" created="Thu, 6 Jul 2017 13:21:42 +0000"  >&lt;p&gt;I would strongly recommend to only rely on &lt;tt&gt;java.net.URI&lt;/tt&gt; internally both to parse the original URI (instead of the PathInfo class) and also to construct the new/modified URI, instead of manually creating the string. &lt;/p&gt;</comment>
                            <comment id="16076513" author="kwin" created="Thu, 6 Jul 2017 13:42:07 +0000"  >&lt;p&gt;Attached is a failing unit test showing the wrong behaviour.&lt;/p&gt;</comment>
                            <comment id="16088622" author="kwin" created="Sat, 15 Jul 2017 14:39:15 +0000"  >&lt;p&gt;The attached file fixes this issue and several other flaws (due to some internal refactoring to rely more on java.net.URI and to make decomposition of the URL closer to the Sling standard used elsewhere, e.g. start decomposition of the resource path from the rest of the request path info at the first dot).&lt;/p&gt;

&lt;p&gt;The following tests from the HTL TCK fail with this patch, but they are kind of unexpected and should IMHO be fixed in the TCK:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;add-schema-1 (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/output/exprlang/filters.html#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/output/exprlang/filters.html#L92&lt;/a&gt;) is taking a URI as input which neither start with a scheme nor with a slash (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L92&lt;/a&gt;) therefore it must be assumed to be a relative path only. In the TCK there is the wrong assumption that &lt;tt&gt;example.com&lt;/tt&gt; is being detected as host part which would not be according to RFC 2396. I would suggest to just remove this test.&lt;/li&gt;
	&lt;li&gt;add-selectors-1 and add-selectors-2 (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L145&lt;/a&gt;) incorrectly assumes that each selector value may only appear once in a request url. Sling does not have such a limitation (compare with &lt;a href=&quot;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/engine/src/main/java/org/apache/sling/engine/impl/request/SlingRequestPathInfo.java#L90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/4df9ab2d6592422889c71fa13afd453a10a5a626/bundles/engine/src/main/java/org/apache/sling/engine/impl/request/SlingRequestPathInfo.java#L90&lt;/a&gt;), therefore I would strongly recommend to also not strip duplicates here. This also makes sense, because the order of selectors must in most cases be kept!&lt;/li&gt;
	&lt;li&gt;no-path-info-1 (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L113&lt;/a&gt;) incorrectly assumes that the URI manipulation implicitly always inserts the path &quot;/&quot;. This would be unexpected, please rather expect a URI without a path, i.e. &lt;tt&gt;&lt;a href=&quot;http://example.com?q=sightly&amp;amp;array=1&amp;amp;array=2&amp;amp;array=3#fragment&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com?q=sightly&amp;amp;array=1&amp;amp;array=2&amp;amp;array=3#fragment&lt;/a&gt;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;no-path-info-2 (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L120&lt;/a&gt;) incorrectly assumes that the URI does not contain a path, although it contains the path &lt;tt&gt;/&lt;/tt&gt;. Therefore path prefix, suffix, selector, extension as well as query and fragment are modified and you end up with &lt;tt&gt;&lt;a href=&quot;http://example.com/one/three.a.b.c.html?q=sightly&amp;amp;array=1&amp;amp;array=2&amp;amp;array=3#fragment&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com/one/three.a.b.c.html?q=sightly&amp;amp;array=1&amp;amp;array=2&amp;amp;array=3#fragment&lt;/a&gt;&quot;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;no-path-info-3 and no-path-info-4 (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-tck/blob/master/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L127&lt;/a&gt;) do not modify the query, although it is requested. This is unexpected as &lt;tt&gt;?q=sightly&amp;amp;array=1&amp;amp;array=2&amp;amp;array=3#fragment&lt;/tt&gt; is a perfectly valid URI for both cases.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Could you please review this patch and let me know what you think?&lt;/p&gt;</comment>
                            <comment id="16098613" author="radu.cotescu" created="Mon, 24 Jul 2017 15:57:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I cannot apply patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877451/12877451_SLING-7000-v1.patch&quot; title=&quot;SLING-7000-v1.patch attached to SLING-7000&quot;&gt;SLING-7000-v1.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. Could you please resubmit a valid patch file?&lt;/p&gt;</comment>
                            <comment id="16098980" author="kwin" created="Mon, 24 Jul 2017 18:52:14 +0000"  >&lt;p&gt;It is a patch file with relative pathnames to the Sightly engine bundle. If you apply in the root directory of &lt;a href=&quot;https://github.com/apache/sling/tree/trunk/bundles/scripting/sightly/engine&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/tree/trunk/bundles/scripting/sightly/engine&lt;/a&gt; it should work.&lt;/p&gt;</comment>
                            <comment id="16099022" author="radu.cotescu" created="Mon, 24 Jul 2017 19:31:37 +0000"  >&lt;p&gt;I kind of know how to use the &lt;tt&gt;-p&lt;/tt&gt; option of &lt;tt&gt;patch&lt;/tt&gt;. The problem is that I think you provided a patch on top of a previous local commit - see &lt;tt&gt;src/test/java/org/apache/sling/scripting/sightly/impl/engine/extension/ModifiableRequestPathInfoTest.java&lt;/tt&gt; in the patch file.&lt;/p&gt;</comment>
                            <comment id="16099586" author="kwin" created="Tue, 25 Jul 2017 06:49:20 +0000"  >&lt;p&gt;This is due to some refactoring. I basically extracted PathInfo from an inner class to a new dedicated class ModifiableRequestPathInfo and similar for the test. It seems that SVN has problems with those refactorings. I therefore created a git style patch in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12878747/12878747_SLING-7000-v2.patch&quot; title=&quot;SLING-7000-v2.patch attached to SLING-7000&quot;&gt;SLING-7000-v2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which contains further information on what has been changed. Let me know if that works for you.&lt;/p&gt;</comment>
                            <comment id="16099775" author="radu.cotescu" created="Tue, 25 Jul 2017 09:36:26 +0000"  >&lt;p&gt;I still cannot apply your patch - with &lt;tt&gt;git apply&lt;/tt&gt; I get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: git apply: bad git-diff - inconsistent old filename on line 803
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which is again caused by &lt;tt&gt;src/test/java/org/apache/sling/scripting/sightly/impl/engine/extension/ModifiableRequestPathInfoTest.java&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;With &lt;tt&gt;patch -p0&lt;/tt&gt; in the &lt;tt&gt;bundles/scripting/sightly/engine&lt;/tt&gt; folder I get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;can&apos;t find file to patch at input line 805
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which refers to the same problematic move.&lt;/p&gt;

&lt;p&gt;Please try to create a patch on top of a clean checkout / clone from &lt;tt&gt;trunk&lt;/tt&gt; or send a GitHub PR.&lt;/p&gt;</comment>
                            <comment id="16100327" author="githubbot" created="Tue, 25 Jul 2017 16:40:01 +0000"  >&lt;p&gt;GitHub user Buuhuu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/247&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7000&quot; title=&quot;HTL: URIManipulatorFilterExtension destroys opaque URIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7000&quot;&gt;&lt;del&gt;SLING-7000&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Applied &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7000&quot; title=&quot;HTL: URIManipulatorFilterExtension destroys opaque URIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7000&quot;&gt;&lt;del&gt;SLING-7000&lt;/del&gt;&lt;/a&gt;-v2.patch attached to the issue. Unfortunately we lost the rename of PathInfoTest.java to ModifiableRequestPathInfoTest.java.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Buuhuu/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7000&quot; title=&quot;HTL: URIManipulatorFilterExtension destroys opaque URIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7000&quot;&gt;&lt;del&gt;SLING-7000&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/247.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/247.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #247&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 72516b5072c2b22e2c95adc094446eaaee835d02&lt;br/&gt;
Author: Dirk Rudolph &amp;lt;dirk.rudolph@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2017-07-25T16:38:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7000&quot; title=&quot;HTL: URIManipulatorFilterExtension destroys opaque URIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7000&quot;&gt;&lt;del&gt;SLING-7000&lt;/del&gt;&lt;/a&gt;: applied &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7000&quot; title=&quot;HTL: URIManipulatorFilterExtension destroys opaque URIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7000&quot;&gt;&lt;del&gt;SLING-7000&lt;/del&gt;&lt;/a&gt;-v2.patch&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16103207" author="kwin" created="Thu, 27 Jul 2017 13:33:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Sorry for the mess here. Can you work with the linked Github PR?&lt;/p&gt;</comment>
                            <comment id="16103252" author="radu.cotescu" created="Thu, 27 Jul 2017 14:13:40 +0000"  >&lt;p&gt;No worries, Konrad. Yes, I hope so. I&apos;ll have a look at this again tomorrow.&lt;/p&gt;</comment>
                            <comment id="16107532" author="radu.cotescu" created="Mon, 31 Jul 2017 16:24:42 +0000"  >&lt;p&gt;Applied slightly modified patch in &lt;a href=&quot;https://svn.apache.org/r1803550&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1803550&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16166592" author="githubbot" created="Thu, 14 Sep 2017 16:53:07 +0000"  >&lt;p&gt;Github user Buuhuu closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/247&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12954755">SLING-5632</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13146286">SLING-7548</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12775379">SLING-4423</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12875932" name="SLING-7000-v01-test.patch" size="848" author="kwin" created="Thu, 6 Jul 2017 13:41:51 +0000"/>
                            <attachment id="12877451" name="SLING-7000-v1.patch" size="57027" author="kwin" created="Sat, 15 Jul 2017 14:49:14 +0000"/>
                            <attachment id="12878747" name="SLING-7000-v2.patch" size="58177" author="kwin" created="Tue, 25 Jul 2017 06:49:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h72n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6997] Write Pipe constructions spits out an error when path depends on expressions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6997</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;in case a write pipe depends on an expression, it fails with following ERROR&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:406)
        at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:402)
        at jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:155)
        at org.apache.sling.pipes.PipeBindings.evaluate(PipeBindings.java:230)
        at org.apache.sling.pipes.PipeBindings.instantiateExpression(PipeBindings.java:243)
        at org.apache.sling.pipes.BasePipe.getPath(BasePipe.java:136)
        at org.apache.sling.pipes.internal.WritePipe.&amp;lt;init&amp;gt;(WritePipe.java:65)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;setting this up as minor, as it &quot;just&quot; spoils the logs, &lt;tt&gt;resourceExpression&lt;/tt&gt; being useless&lt;/p&gt;</description>
                <environment></environment>
        <key id="13084578">SLING-6997</key>
            <summary>Write Pipe constructions spits out an error when path depends on expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Jul 2017 14:58:04 +0000</created>
                <updated>Wed, 20 Sep 2017 11:15:05 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 15:23:17 +0000</resolved>
                                    <version>Pipes 0.0.10</version>
                                    <fixVersion>Pipes 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16073814" author="npeltier" created="Tue, 4 Jul 2017 15:23:17 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;https://github.com/apache/sling/commit/031d6b1defdd014216dd15d666d54c8de9c0fbf9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/031d6b1defdd014216dd15d666d54c8de9c0fbf9&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13061454">SLING-6771</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h33z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6996] Root Mappings for Resource Resolution don&apos;t work correctly when sling:match contains a regex in the host part</title>
                <link>https://issues.apache.org/jira/browse/SLING-6996</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Looking at &lt;a href=&quot;http://sling.apache.org/documentation/the-sling-engine/mappings-for-resource-resolution.html#root-level-mappings&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/the-sling-engine/mappings-for-resource-resolution.html#root-level-mappings&lt;/a&gt; it should be possible to match ports in the sling:match e.g.:&lt;/p&gt;

&lt;p&gt;sling:match = http/localhost.\d*&lt;/p&gt;

&lt;p&gt;should match regardless of the host port. However, that currently isn&apos;t the case as the resource resolver erroneously detects this as a host without port and appends the default port to the pattern.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13084541">SLING-6996</key>
            <summary>Root Mappings for Resource Resolution don&apos;t work correctly when sling:match contains a regex in the host part</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Jul 2017 12:50:47 +0000</created>
                <updated>Mon, 10 Jul 2017 10:32:39 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 15:35:56 +0000</resolved>
                                    <version>Resource Resolver 1.5.24</version>
                                    <fixVersion>Resource Resolver 1.5.26</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16073632" author="karlpauls" created="Tue, 4 Jul 2017 12:57:56 +0000"  >&lt;p&gt;In a nutshell, what happens is that we try to match two patterns for a given sling:match (namely,  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;http/([^/]+)(\\.[^\\d/]+)(/.*)?$&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;https/([^/]+)(\\.[^\\d/]+)(/.*)?$&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;). &lt;/p&gt;

&lt;p&gt;This is done to try to detect if we have a host without port (i.e., the pattern should match the default port of either http or https). &lt;/p&gt;

&lt;p&gt;If any of the two match we effectively try to massage the pattern by appending the default port via a replacement of: &lt;tt&gt;&quot;http/$1$2.80$3&quot;&lt;/tt&gt; or &lt;tt&gt;&quot;https/$1$2.443$3&quot;&lt;/tt&gt;, respectively.&lt;/p&gt;

&lt;p&gt;This is clearly not allowing for certain valid regex patterns (including the ones given as examples in our own documentation). &lt;/p&gt;

&lt;p&gt;At this point, we can either try to make the detection regexes smarter (which I&apos;m not sure is a good idea because it likely would make the expressions pretty complicated) or turn around double check if we didn&apos;t match a regex by accident after we found a match.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch for the latter in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12875630/12875630_SLING-6996.patch&quot; title=&quot;SLING-6996.patch attached to SLING-6996&quot;&gt;SLING-6996.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, what say you?&lt;/p&gt;</comment>
                            <comment id="16073685" author="cziegeler" created="Tue, 4 Jul 2017 13:50:52 +0000"  >&lt;p&gt;Lgtm, but I think we should add unit tests (verifying that it is broken before your patch and works after the patch)&lt;/p&gt;</comment>
                            <comment id="16073697" author="karlpauls" created="Tue, 4 Jul 2017 14:12:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, yup, I added some unit tests and made sure they fail before the fix.&lt;/p&gt;

&lt;p&gt;Done in r1800793.&lt;/p&gt;</comment>
                            <comment id="16073703" author="karlpauls" created="Tue, 4 Jul 2017 14:21:21 +0000"  >&lt;p&gt;Turns out I&apos;m not done yet. The pattern now works but it causes issues with the substitution because the port is now becomming a match group.&lt;/p&gt;</comment>
                            <comment id="16073831" author="karlpauls" created="Tue, 4 Jul 2017 15:35:56 +0000"  >&lt;p&gt;I take it back, works as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12875630" name="SLING-6996.patch" size="779" author="karlpauls" created="Tue, 4 Jul 2017 12:52:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h2vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6995] Sling 6 is not deploying in wildfly 10.1.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-6995</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;When we tried to deploy org.apache.sling.launchpad-6.war from Apache Download Mirrors  in Wildfly-10.1.0.Final  getting the following exception on server startup.&lt;/p&gt;

&lt;p&gt;017-04-18 16:25:16,173 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;io.undertow.servlet&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 58) ERROR: Error parsing system bundle export statement: org.osgi.framework; version=1.5, org.osgi.framework.hooks.service; version=1.0, org.osgi.framework.launch; version=1.0, org.osgi.service.packageadmin; version=1.2, org.osgi.service.startlevel; version=1.1, org.osgi.service.url; version=1.0, org.osgi.util.tracker;version=&quot;1.4&quot;, org.apache.sling.launchpad.api;version=1.0.0, ,javax.servlet;javax.servlet.http;javax.servlet.resources; version=3.1 (java.lang.IllegalArgumentException: No paths specified in header: ): java.lang.IllegalArgumentException: No paths specified in header:&lt;br/&gt;
at org.apache.felix.framework.util.manifestparser.ManifestParser.parseStandardHeaderClause(ManifestParser.java:1432)&lt;br/&gt;
at org.apache.felix.framework.util.manifestparser.ManifestParser.parseStandardHeader(ManifestParser.java:1400)&lt;br/&gt;
at org.apache.felix.framework.util.manifestparser.ManifestParser.&amp;lt;init&amp;gt;(ManifestParser.java:162)&lt;br/&gt;
at org.apache.felix.framework.ExtensionManager.&amp;lt;init&amp;gt;(ExtensionManager.java:193)&lt;br/&gt;
at org.apache.felix.framework.Felix.&amp;lt;init&amp;gt;(Felix.java:374)&lt;br/&gt;
at org.apache.sling.launchpad.base.impl.SlingFelix.&amp;lt;init&amp;gt;(SlingFelix.java:39)&lt;br/&gt;
at org.apache.sling.launchpad.base.impl.Sling.&amp;lt;init&amp;gt;(Sling.java:235)&lt;br/&gt;
at org.apache.sling.launchpad.base.webapp.SlingBridge.&amp;lt;init&amp;gt;(SlingBridge.java:41)&lt;br/&gt;
at org.apache.sling.launchpad.base.webapp.SlingServletDelegate.init(SlingServletDelegate.java:203)&lt;br/&gt;
at javax.servlet.GenericServlet.init(GenericServlet.java:244)&lt;br/&gt;
at org.apache.sling.launchpad.webapp.SlingServlet.startSling(SlingServlet.java:358)&lt;br/&gt;
at org.apache.sling.launchpad.webapp.SlingServlet.startSling(SlingServlet.java:300)&lt;br/&gt;
at org.apache.sling.launchpad.webapp.SlingServlet.init(SlingServlet.java:111)&lt;br/&gt;
at javax.servlet.GenericServlet.init(GenericServlet.java:244)&lt;br/&gt;
at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:117)&lt;br/&gt;
at org.wildfly.extension.undertow.security.RunAsLifecycleInterceptor.init(RunAsLifecycleInterceptor.java:78)&lt;br/&gt;
at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:103)&lt;br/&gt;
at io.undertow.servlet.core.ManagedServlet$DefaultInstanceStrategy.start(ManagedServlet.java:250)&lt;br/&gt;
at io.undertow.servlet.core.ManagedServlet.createServlet(ManagedServlet.java:133)&lt;br/&gt;
at io.undertow.servlet.core.DeploymentManagerImpl$2.call(DeploymentManagerImpl.java:546)&lt;br/&gt;
at io.undertow.servlet.core.DeploymentManagerImpl$2.call(DeploymentManagerImpl.java:517)&lt;br/&gt;
at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)&lt;br/&gt;
at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)&lt;br/&gt;
at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
at io.undertow.servlet.core.DeploymentManagerImpl.start(DeploymentManagerImpl.java:559)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:101)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)&lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
at org.jboss.threads.JBossThread.run(JBossThread.java:320)&lt;/p&gt;</description>
                <environment>Windows 10,Wildfly10.1.0-final,Java 8</environment>
        <key id="13084411">SLING-6995</key>
            <summary>Sling 6 is not deploying in wildfly 10.1.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shiva12020">Shivanand</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Jul 2017 05:48:30 +0000</created>
                <updated>Thu, 4 May 2023 15:41:04 +0000</updated>
                            <resolved>Thu, 4 May 2023 15:41:04 +0000</resolved>
                                                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16073245" author="cziegeler" created="Tue, 4 Jul 2017 07:37:42 +0000"  >&lt;p&gt;It seems there is an empty entry there - or a duplicate comma&lt;/p&gt;</comment>
                            <comment id="16074259" author="shiva12020" created="Wed, 5 Jul 2017 05:19:07 +0000"  >&lt;p&gt;When we verified sling.properties file there was no jre related properties.I have added below mentioned entries in sling.properties file&lt;br/&gt;
+jre-1.8=javax.accessibility,javax.activation,javax.activity,javax.annotation,javax.annotation.processing,javax.crypto,javax.crypto.interfaces,javax.crypto.spec,javax.imageio,javax.imageio.event,javax.imageio.metadata,javax.imageio.plugins.bmp,javax.imageio.plugins.jpeg,javax.imageio.spi,javax.imageio.stream,javax.jws,javax.jws.soap,javax.lang.model,javax.lang.model.element,javax.lang.model.type,javax.lang.model.util,javax.management,javax.management.loading,javax.management.modelmbean,javax.management.monitor,javax.management.openmbean,javax.management.relation,javax.management.remote,javax.management.remote.rmi,javax.management.timer,javax.naming,javax.naming.directory,javax.naming.event,javax.naming.ldap,javax.naming.spi,javax.net,javax.net.ssl,javax.print,javax.print.attribute,javax.print.attribute.standard,javax.print.event,javax.rmi,javax.rmi.CORBA,javax.rmi.ssl,javax.script,javax.security.auth,javax.security.auth.callback,javax.security.auth.kerberos,javax.security.auth.login,javax.security.auth.spi,javax.security.auth.x500,javax.security.cert,javax.security.sasl,javax.smartcardio,javax.sound.midi,javax.sound.midi.spi,javax.sound.sampled,javax.sound.sampled.spi,javax.sql,javax.sql.rowset,javax.sql.rowset.serial,javax.sql.rowset.spi,javax.swing,javax.swing.border,javax.swing.colorchooser,javax.swing.event,javax.swing.filechooser,javax.swing.plaf,javax.swing.plaf.basic,javax.swing.plaf.metal,javax.swing.plaf.multi,javax.swing.plaf.synth,javax.swing.table,javax.swing.text,javax.swing.text.html,javax.swing.text.html.parser,javax.swing.text.rtf,javax.swing.tree,javax.swing.undo,javax.tools,javax.transaction,javax.transaction.xa,javax.xml,javax.xml.bind,javax.xml.bind.annotation,javax.xml.bind.annotation.adapters,javax.xml.bind.attachment,javax.xml.bind.helpers,javax.xml.bind.util,javax.xml.crypto,javax.xml.crypto.dom,javax.xml.crypto.dsig,javax.xml.crypto.dsig.dom,javax.xml.crypto.dsig.keyinfo,javax.xml.crypto.dsig.spec,javax.xml.datatype,javax.xml.namespace,javax.xml.parsers,javax.xml.soap,javax.xml.stream,javax.xml.stream.events,javax.xml.stream.util,javax.xml.transform,javax.xml.transform.dom,javax.xml.transform.sax,javax.xml.transform.stax,javax.xml.transform.stream,javax.xml.validation,javax.xml.ws,javax.xml.ws.handler,javax.xml.ws.handler.soap,javax.xml.ws.http,javax.xml.ws.soap,javax.xml.ws.spi,javax.xml.xpath,org.ietf.jgss,org.omg.CORBA,org.omg.CORBA_2_3,org.omg.CORBA_2_3.portable,org.omg.CORBA.DynAnyPackage,org.omg.CORBA.ORBPackage,org.omg.CORBA.portable,org.omg.CORBA.TypeCodePackage,org.omg.CosNaming,org.omg.CosNaming.NamingContextExtPackage,org.omg.CosNaming.NamingContextPackage,org.omg.Dynamic,org.omg.DynamicAny,org.omg.DynamicAny.DynAnyFactoryPackage,org.omg.DynamicAny.DynAnyPackage,org.omg.IOP,org.omg.IOP.CodecFactoryPackage,org.omg.IOP.CodecPackage,org.omg.Messaging,org.omg.PortableInterceptor,org.omg.PortableInterceptor.ORBInitInfoPackage,org.omg.PortableServer,org.omg.PortableServer.CurrentPackage,org.omg.PortableServer.POAManagerPackage,org.omg.PortableServer.POAPackage,org.omg.PortableServer.portable,org.omg.PortableServer.ServantLocatorPackage,org.omg.SendingContext,org.omg.stub.java.rmi,org.omg.stub.javax.management.remote.rmi,org.w3c.dom,org.w3c.dom.bootstrap,org.w3c.dom.css,org.w3c.dom.events,org.w3c.dom.html,org.w3c.dom.ls,org.w3c.dom.ranges,org.w3c.dom.stylesheets,org.w3c.dom.traversal,org.w3c.dom.views,org.w3c.dom.xpath,org.xml.sax,org.xml.sax.ext,org.xml.sax.helpers&lt;/p&gt;

&lt;p&gt;After this we are getting the following exception on server startup.&lt;/p&gt;

&lt;p&gt;2017-07-05 10:21:43,918 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;io.undertow.servlet&amp;#93;&lt;/span&gt; (ServerService Thread Pool &amp;#8211; 63) sling: Failed to start Sling in sling/_sling: java.lang.NoClassDefFoundError: javax.servlet.http.HttpServlet&lt;br/&gt;
	at org.apache.sling.launchpad.base.webapp.SlingServletDelegate.init(SlingServletDelegate.java:206)&lt;br/&gt;
	at javax.servlet.GenericServlet.init(GenericServlet.java:244)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.SlingServlet.startSling(SlingServlet.java:358)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.SlingServlet.startSling(SlingServlet.java:300)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.SlingServlet.init(SlingServlet.java:111)&lt;br/&gt;
	at javax.servlet.GenericServlet.init(GenericServlet.java:244)&lt;br/&gt;
	at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:117)&lt;br/&gt;
	at org.wildfly.extension.undertow.security.RunAsLifecycleInterceptor.init(RunAsLifecycleInterceptor.java:78)&lt;br/&gt;
	at io.undertow.servlet.core.LifecyleInterceptorInvocation.proceed(LifecyleInterceptorInvocation.java:103)&lt;br/&gt;
	at io.undertow.servlet.core.ManagedServlet$DefaultInstanceStrategy.start(ManagedServlet.java:250)&lt;br/&gt;
	at io.undertow.servlet.core.ManagedServlet.createServlet(ManagedServlet.java:133)&lt;br/&gt;
	at io.undertow.servlet.core.DeploymentManagerImpl$2.call(DeploymentManagerImpl.java:546)&lt;br/&gt;
	at io.undertow.servlet.core.DeploymentManagerImpl$2.call(DeploymentManagerImpl.java:517)&lt;br/&gt;
	at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)&lt;br/&gt;
	at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)&lt;br/&gt;
	at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
	at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
	at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
	at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
	at io.undertow.servlet.api.LegacyThreadSetupActionWrapper$1.call(LegacyThreadSetupActionWrapper.java:44)&lt;br/&gt;
	at io.undertow.servlet.core.DeploymentManagerImpl.start(DeploymentManagerImpl.java:559)&lt;br/&gt;
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:101)&lt;br/&gt;
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:82)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)&lt;/p&gt;</comment>
                            <comment id="16080034" author="rombert" created="Mon, 10 Jul 2017 08:50:07 +0000"  >&lt;p&gt;Sling 6 is quite old. Can you try Sling 9?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h233:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6993] [discovery] switch to johnson fails (slow) tests</title>
                <link>https://issues.apache.org/jira/browse/SLING-6993</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The switch from &lt;tt&gt;commons.json&lt;/tt&gt; to &lt;tt&gt;commons.johnzon&lt;/tt&gt; (in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1789120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1789120&lt;/a&gt;) caused an unnoticed regression:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Results :

Tests in error: 
  OakClusterTest&amp;gt;AbstractClusterTest.testConnectorSwitching4139:388-&amp;gt;AbstractClusterTest.pingConnector:967-&amp;gt;AbstractClusterTest.createFromAnnouncement:1059 &#187; ClassCast
  OakClusterTest&amp;gt;AbstractClusterTest.testDuplicateInstance3726:557-&amp;gt;AbstractClusterTest.pingConnector:967-&amp;gt;AbstractClusterTest.createFromAnnouncement:1059 &#187; ClassCast

Tests run: 39, Failures: 0, Errors: 2, Skipped: 0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason this remained unnoticed was that these tests aren&apos;t run by default as they are marked as being &lt;tt&gt;@Slow&lt;/tt&gt; and will only run when instructed to do so via&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn clean verify -PincludeSlowTests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13084265">SLING-6993</key>
            <summary>[discovery] switch to johnson fails (slow) tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jul 2017 14:18:38 +0000</created>
                <updated>Tue, 4 Jul 2017 12:16:07 +0000</updated>
                            <resolved>Mon, 3 Jul 2017 14:47:47 +0000</resolved>
                                    <version>Discovery Base 1.1.6</version>
                    <version>Discovery Oak 1.2.18</version>
                                    <fixVersion>Discovery Oak 1.2.20</fixVersion>
                    <fixVersion>Discovery Base 2.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16072538" author="egli" created="Mon, 3 Jul 2017 14:41:07 +0000"  >&lt;p&gt;The actual bug is in discovery.base 1.1.8, where commons.json was replaced with commons.johnzon in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1789117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1789117&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16072550" author="egli" created="Mon, 3 Jul 2017 14:47:47 +0000"  >&lt;p&gt;fixed in 1800683&lt;/p&gt;</comment>
                            <comment id="16073559" author="egli" created="Tue, 4 Jul 2017 12:16:07 +0000"  >&lt;p&gt;and in 1800767&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13058296">SLING-6692</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h16n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6988] Async delivery should create an unordererd delivery queue</title>
                <link>https://issues.apache.org/jira/browse/SLING-6988</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;AsyncDeliveryDispatchingStrategy&lt;/tt&gt;&#160;does not create a parallel queue for delivery if it doesn&apos;t exist, therefore the deriving improvements in throughput are less impacting than expected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13083719">SLING-6988</key>
            <summary>Async delivery should create an unordererd delivery queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jun 2017 09:03:52 +0000</created>
                <updated>Fri, 30 Jun 2017 09:05:16 +0000</updated>
                            <resolved>Fri, 30 Jun 2017 09:05:16 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.2.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16069748" author="teofili" created="Fri, 30 Jun 2017 09:05:16 +0000"  >&lt;p&gt;fixed in r1800364.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gxtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6986] The ResourceResolver mock does not test the resource type hierarchy in isResourceType</title>
                <link>https://issues.apache.org/jira/browse/SLING-6986</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The mock resource resolver is only plainly checking the resource type on the resource, and not following the type hierarchy.&lt;/p&gt;

&lt;p&gt;So assuming we have a resource of the form:&lt;br/&gt;
myResource&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jcr:primaryType=&quot;unstructured&quot;&lt;/li&gt;
	&lt;li&gt;sling:resourceType=&quot;foo/bar&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;mockResourceResolver.isResourceType(myResource, &quot;foo/bar&quot;) =&amp;gt; true&lt;br/&gt;
mockResourceResolver.isResourceType(myResource, &quot;nt:unstructured&quot;) =&amp;gt; false&lt;/p&gt;

&lt;p&gt;Without implementing the whole type hierarchy, we could at least improve this by checking:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the &quot;sling:resourceType&quot;&lt;/li&gt;
	&lt;li&gt;the &quot;sling:resourceSuperType&quot;&lt;/li&gt;
	&lt;li&gt;the &quot;jcr:primaryType&quot;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13082984">SLING-6986</key>
            <summary>The ResourceResolver mock does not test the resource type hierarchy in isResourceType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="ramboz">Julien Ramboz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Jun 2017 23:54:07 +0000</created>
                <updated>Tue, 17 Oct 2017 12:53:06 +0000</updated>
                            <resolved>Wed, 28 Jun 2017 12:34:03 +0000</resolved>
                                    <version>Testing ResourceResolver Mock 1.1.18</version>
                                    <fixVersion>Testing ResourceResolver Mock 1.1.20</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16065724" author="githubbot" created="Wed, 28 Jun 2017 00:33:39 +0000"  >&lt;p&gt;GitHub user ramboz opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/245&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6986&quot; title=&quot;The ResourceResolver mock does not test the resource type hierarchy in isResourceType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6986&quot;&gt;&lt;del&gt;SLING-6986&lt;/del&gt;&lt;/a&gt; - The ResourceResolver mock does not test the resource type hierarchy in isResourceType&lt;/p&gt;

&lt;p&gt;    Create a simple improvement, where we check:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the `sling:resourceType` property on the resource&lt;/li&gt;
	&lt;li&gt;then fallback to the `sling:resourceSuperType` property&lt;/li&gt;
	&lt;li&gt;then fallback to the `jcr:primaryType` property&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Also adding a unit test for it.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ramboz/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ramboz/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6986&quot; title=&quot;The ResourceResolver mock does not test the resource type hierarchy in isResourceType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6986&quot;&gt;&lt;del&gt;SLING-6986&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/245.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/245.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #245&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit daaa3791647314645d6c535cd23eadb961a74387&lt;br/&gt;
Author: Julien Ramboz &amp;lt;ramboz@adobe.com&amp;gt;&lt;br/&gt;
Date:   2017-06-28T00:30:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6986&quot; title=&quot;The ResourceResolver mock does not test the resource type hierarchy in isResourceType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6986&quot;&gt;&lt;del&gt;SLING-6986&lt;/del&gt;&lt;/a&gt; - The ResourceResolver mock does not test the resource type hierarchy in isResourceType&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16066415" author="sseifert@pro-vision.de" created="Wed, 28 Jun 2017 12:34:03 +0000"  >&lt;p&gt;Completed: At revision: 1800153  &lt;/p&gt;

&lt;p&gt;thanks for reporting - i&apos;ve fixed the problem.&lt;br/&gt;
the path you proposed was not quite correct - it introduced logic that is not part of the real resource resolver implementation (checking properties like jcr:primaryType), and did not take into account that you may have inheritance chains with multiple resources using sling:resourceSuperType.&lt;/p&gt;

&lt;p&gt;the code i&apos;ve introduced is taken from the reals resource resolver implementation.&lt;/p&gt;</comment>
                            <comment id="16066421" author="githubbot" created="Wed, 28 Jun 2017 12:36:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/245&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16066586" author="ramboz" created="Wed, 28 Jun 2017 14:31:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Thanks for taking this over and improving it. I only meant to have a simple improvement, but great to see that you introduced the full implementation.&lt;br/&gt;
On a side note, according to the doc &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/resources.html#resource-types&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/resources.html#resource-types&lt;/a&gt;, the primary type should be part of the inheritance chain. The resource resolver implementation also validates this. So if I have a resource like:&lt;/p&gt;

&lt;p&gt;myResource&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jcr:primaryType=&quot;nt:unstructured&quot;&lt;/li&gt;
	&lt;li&gt;sling:resourceType=&quot;foo/bar&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then we should have:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MockResourceResolver.isResourceType(myResource, &quot;nt:unstructured&quot;) =&amp;gt; true&lt;/li&gt;
	&lt;li&gt;MockResourceResolver.isResourceType(myResource, &quot;foo/bar&quot;) =&amp;gt; true&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16067118" author="sseifert@pro-vision.de" created="Wed, 28 Jun 2017 19:44:27 +0000"  >&lt;p&gt;according to the link:&lt;/p&gt;

&lt;p&gt;resource type = The value of the sling:resourceType property &lt;b&gt;or&lt;/b&gt; the primary node type &lt;b&gt;if the property is not set&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;that means the jcr:primaryType is only a fallback if a resource has no resource type set, they can be never both be true.&lt;br/&gt;
this behavior should already work, because the MockResource.getResourceType of resourceresolver-mock method already does a fallback to jcr:primaryType if the resource type is not set.&lt;/p&gt;</comment>
                            <comment id="16067177" author="ramboz" created="Wed, 28 Jun 2017 20:36:49 +0000"  >&lt;p&gt;Alright. I assumed that, since &lt;tt&gt;jcr:primaryType&lt;/tt&gt; could be returned as a fallback for the &lt;tt&gt;sling:ResourceType&lt;/tt&gt;, it would also be part of the type hierarchy chain. Thanks for clearing that out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gtav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6983] i18n: &quot;source&quot; option not working</title>
                <link>https://issues.apache.org/jira/browse/SLING-6983</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>
&lt;p&gt;The &lt;a href=&quot;https://docs.adobe.com/docs/en/htl/docs/expression-language.html#Internationalization&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Adobe HTL Documentation&lt;/a&gt; states that you can specify the source for the translation:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The default source for the language is &apos;resource&apos;, meaning that the text gets translated to the same language as the content. This can be changed to &apos;user&apos;, meaning that the language is taken from the browser locale or from the locale of the logged-in user:&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;${&lt;span class=&quot;code-quote&quot;&gt;&apos;Page&apos;&lt;/span&gt; @ i18n, source=&lt;span class=&quot;code-quote&quot;&gt;&apos;user&apos;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But using the &lt;tt&gt;source&lt;/tt&gt; option seems to have no impact at all.&lt;br/&gt;
Looking at  &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/I18nRuntimeExtension.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;I18nRuntimeExtension.java&lt;/a&gt; there is no code addressing this feature (all other i18n options are addressed here)&lt;/p&gt;

</description>
                <environment></environment>
        <key id="13082452">SLING-6983</key>
            <summary>i18n: &quot;source&quot; option not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Roland Dahlem">Roland Dahlem</reporter>
                        <labels>
                            <label>htl</label>
                    </labels>
                <created>Mon, 26 Jun 2017 09:10:53 +0000</created>
                <updated>Mon, 26 Jun 2017 12:42:53 +0000</updated>
                            <resolved>Mon, 26 Jun 2017 12:42:53 +0000</resolved>
                                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16063011" author="kwin" created="Mon, 26 Jun 2017 12:25:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Roland+Dahlem&quot; class=&quot;user-hover&quot; rel=&quot;Roland Dahlem&quot;&gt;Roland Dahlem&lt;/a&gt; Can you please also tell with which version of the according HTL bundle you experience this behaviour?&lt;br/&gt;
Also the HTL spec (&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#123-i18n&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#123-i18n&lt;/a&gt;) only mandates the options &lt;tt&gt;locale&lt;/tt&gt; and &lt;tt&gt;hint&lt;/tt&gt;. I would assume that &lt;tt&gt;source&lt;/tt&gt; is rather an AEM-specific extension, i.e. not part of what is shipped with Sling.&lt;/p&gt;</comment>
                            <comment id="16063019" author="roland dahlem" created="Mon, 26 Jun 2017 12:31:17 +0000"  >&lt;p&gt;I experience it with the bundle org.apache.sling.scripting.sightly in version 1.0.2&lt;/p&gt;</comment>
                            <comment id="16063032" author="kwin" created="Mon, 26 Jun 2017 12:42:43 +0000"  >&lt;p&gt;Yes, just checked it. &lt;tt&gt;source&lt;/tt&gt; is evaluated by &lt;tt&gt;com.adobe.cq.sightly.internal.extensions.I18nExtension&lt;/tt&gt; and therefore not relevant for Sling.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gq13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6980] Missing internal_browser.gif icon on Eclipse Oxygen</title>
                <link>https://issues.apache.org/jira/browse/SLING-6980</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We contribute an open command which picks up the browser icon from the org.eclipse.ui.browser bundle&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;              &amp;lt;command
              	commandId=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.ide.eclipse.ui.actions.openHtmlInBrowserHandler&quot;&lt;/span&gt;
              	icon=&lt;span class=&quot;code-quote&quot;&gt;&quot;platform:/plugin/org.eclipse.ui.browser/icons/obj16/internal_browser.gif&quot;&lt;/span&gt;
              	label=&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;amp;Open .html (on server) in browser&quot;&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This no longer works in Oxygen, I get the following error reported:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception:java.io.FileNotFoundException: /icons/obj16/internal_browser.gif
	 at org.eclipse.osgi.storage.url.bundleentry.Handler.findBundleEntry(Handler.java:49)
	 at org.eclipse.osgi.storage.url.BundleResourceHandler.openConnection(BundleResourceHandler.java:169)
	 at java.net.URL.openConnection(URL.java:979)
	 at org.eclipse.core.internal.boot.PlatformURLConnection.connect(PlatformURLConnection.java:112)
	 at org.eclipse.core.internal.boot.PlatformURLConnection.getURLAsLocal(PlatformURLConnection.java:237)
	 at org.eclipse.core.internal.runtime.PlatformURLConverter.toFileURL(PlatformURLConverter.java:34)
	 at org.eclipse.core.runtime.FileLocator.toFileURL(FileLocator.java:207)
	 at org.eclipse.jface.resource.URLImageDescriptor.getFilePath(URLImageDescriptor.java:230)
	 at org.eclipse.jface.resource.URLImageDescriptor.access$2(URLImageDescriptor.java:218)
	 at org.eclipse.jface.resource.URLImageDescriptor$URLImageFileNameProvider.getImagePath(URLImageDescriptor.java:54)
	 at org.eclipse.swt.internal.DPIUtil.validateAndGetImagePathAtZoom(DPIUtil.java:408)
	 at org.eclipse.swt.graphics.Image.&amp;lt;init&amp;gt;(Image.java:771)
	 at org.eclipse.jface.resource.URLImageDescriptor.createImage(URLImageDescriptor.java:261)
	 at org.eclipse.jface.resource.ImageDescriptor.createResource(ImageDescriptor.java:180)
	 at org.eclipse.jface.resource.DeviceResourceManager.allocate(DeviceResourceManager.java:52)
	 at org.eclipse.jface.resource.AbstractResourceManager.create(AbstractResourceManager.java:85)
	 at org.eclipse.jface.resource.LocalResourceManager.allocate(LocalResourceManager.java:69)
	 at org.eclipse.jface.resource.AbstractResourceManager.create(AbstractResourceManager.java:85)
	 at org.eclipse.jface.resource.ResourceManager.createImage(ResourceManager.java:172)
	 at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.getImage(AbstractContributionItem.java:148)
	 at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.updateIcons(AbstractContributionItem.java:174)
	 at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.update(AbstractContributionItem.java:124)
	 at org.eclipse.e4.ui.workbench.renderers.swt.AbstractContributionItem.fill(AbstractContributionItem.java:261)
	 at org.eclipse.jface.action.MenuManager.doItemFill(MenuManager.java:728)
	 at org.eclipse.jface.action.MenuManager.update(MenuManager.java:810)
	 at org.eclipse.jface.action.MenuManager.update(MenuManager.java:669)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.scheduleManagerUpdate(MenuManagerRenderer.java:1212)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.processContents(MenuManagerRenderer.java:649)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.subscribeTopicChildAdded(MenuManagerRenderer.java:324)
	 at sun.reflect.GeneratedMethodAccessor20.invoke(null:-1)
	 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	 at java.lang.reflect.Method.invoke(Method.java:498)
	 at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55)
	 at org.eclipse.e4.ui.internal.di.UIEventObjectSupplier$UIEventHandler$1.run(UIEventObjectSupplier.java:64)
	 at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:233)
	 at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:144)
	 at org.eclipse.swt.widgets.Display.syncExec(Display.java:5439)
	 at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:212)
	 at org.eclipse.e4.ui.internal.di.UIEventObjectSupplier$UIEventHandler.handleEvent(UIEventObjectSupplier.java:61)
	 at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:201)
	 at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	 at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	 at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	 at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	 at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	 at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	 at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	 at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:52)
	 at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:60)
	 at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	 at org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:249)
	 at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:356)
	 at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:343)
	 at org.eclipse.e4.ui.workbench.renderers.swt.ContributionRecord.mergeIntoModel(ContributionRecord.java:250)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.processAddition(MenuManagerRenderer.java:546)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.generateContributions(MenuManagerRenderer.java:525)
	 at org.eclipse.e4.ui.workbench.renderers.swt.MenuManagerRenderer.processContributions(MenuManagerRenderer.java:493)
	 at org.eclipse.ui.internal.PopupMenuExtender.addMenuContributions(PopupMenuExtender.java:410)
	 at org.eclipse.ui.internal.PopupMenuExtender.menuAboutToShow(PopupMenuExtender.java:382)
	 at org.eclipse.jface.action.MenuManager.fireAboutToShow(MenuManager.java:339)
	 at org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:470)
	 at org.eclipse.jface.action.MenuManager.access$1(MenuManager.java:465)
	 at org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:497)
	 at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:256)
	 at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:86)
	 at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5252)
	 at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1348)
	 at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1374)
	 at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1353)
	 at org.eclipse.swt.widgets.Menu._setVisible(Menu.java:198)
	 at org.eclipse.swt.widgets.Display.runPopups(Display.java:4564)
	 at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4097)
	 at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1155)
	 at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	 at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1044)
	 at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:153)
	 at org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:680)
	 at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	 at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:594)
	 at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148)
	 at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:151)
	 at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388)
	 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243)
	 at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-2)
	 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	 at java.lang.reflect.Method.invoke(Method.java:498)
	 at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:653)
	 at org.eclipse.equinox.launcher.Main.basicRun(Main.java:590)
	 at org.eclipse.equinox.launcher.Main.run(Main.java:1499)
	 at org.eclipse.equinox.launcher.Main.main(Main.java:1472)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13081803">SLING-6980</key>
            <summary>Missing internal_browser.gif icon on Eclipse Oxygen</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jun 2017 14:28:37 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:38 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 14:44:18 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16059483" author="rombert" created="Thu, 22 Jun 2017 14:44:19 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1799588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1799588&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gm0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6978] [HApi] NPE if type is fetched from cache before the end of initialization</title>
                <link>https://issues.apache.org/jira/browse/SLING-6978</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;An NPE can occur when accessing the type properties from a type before it was fully initialized.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.sling.hapi.sightly.HApiUse Failed to activate Use &lt;span class=&quot;code-keyword&quot;&gt;class
&lt;/span&gt;java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at java.util.HashMap.putMapEntries(HashMap.java:500)
        at java.util.HashMap.putAll(HashMap.java:784)
        at org.apache.sling.hapi.impl.HApiTypeImpl.getAllProperties(HApiTypeImpl.java:141)
        at org.apache.sling.hapi.impl.MicrodataAttributeHelperImpl.itemtypeMap(MicrodataAttributeHelperImpl.java:63)
        at org.apache.sling.hapi.sightly.HApiUse.activate(HApiUse.java:81)
        at org.apache.sling.hapi.sightly.HApiUse.init(HApiUse.java:68)
        at org.apache.sling.scripting.sightly.impl.engine.extension.use.JavaUseProvider.provide(JavaUseProvider.java:122)
        at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:72)
        at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:75)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The type is inserted in the cache too soon: &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/contrib/extensions/hapi/core/src/main/java/org/apache/sling/hapi/impl/HApiUtilImpl.java#L224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/contrib/extensions/hapi/core/src/main/java/org/apache/sling/hapi/impl/HApiUtilImpl.java#L224&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081759">SLING-6978</key>
            <summary>[HApi] NPE if type is fetched from cache before the end of initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jun 2017 11:36:09 +0000</created>
                <updated>Thu, 29 Jun 2017 12:58:19 +0000</updated>
                            <resolved>Thu, 29 Jun 2017 12:51:55 +0000</resolved>
                                    <version>HApi 1.0.0</version>
                                    <fixVersion>HApi 1.1.0</fixVersion>
                                    <component>HApi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16068290" author="andrei.dulvac" created="Thu, 29 Jun 2017 12:51:55 +0000"  >&lt;p&gt;Fixed in 1800275&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3glqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6976] ContentLoader.binaryFile() and ContentLoader.binaryResource() should try to derive mimetype from classpath resource rather than from target resource name</title>
                <link>https://issues.apache.org/jira/browse/SLING-6976</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the &lt;tt&gt;ContentLoader.binaryFile&lt;/tt&gt; tries to derive the mime type from the target resource name which should contain the binary (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/loader/ContentLoader.java#L226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/loader/ContentLoader.java#L226&lt;/a&gt;). This is often useless, as the resource name almost never contains an extension from which a mimetype could be derived (very often a generic name like &quot;file&quot; is used). Instead the first argument (namely &lt;tt&gt;classpathResource&lt;/tt&gt; should be taken as basis to derive the mime type from).&lt;br/&gt;
Currently in practically all cases the mime type will be set to the default value (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/loader/ContentLoader.java#L466&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/loader/ContentLoader.java#L466&lt;/a&gt;) which is &lt;tt&gt;application/octet-stream&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081409">SLING-6976</key>
            <summary>ContentLoader.binaryFile() and ContentLoader.binaryResource() should try to derive mimetype from classpath resource rather than from target resource name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jun 2017 12:39:39 +0000</created>
                <updated>Tue, 17 Oct 2017 12:54:27 +0000</updated>
                            <resolved>Wed, 21 Jun 2017 20:08:35 +0000</resolved>
                                    <version>Testing Sling Mock 2.2.12</version>
                                    <fixVersion>Testing Sling Mock 1.9.10</fixVersion>
                    <fixVersion>Testing Sling Mock 2.2.14</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16057409" author="kwin" created="Wed, 21 Jun 2017 12:45:15 +0000"  >&lt;p&gt;At the same time I would rather deprecate the methods &lt;tt&gt;binaryFile&lt;/tt&gt; and &lt;tt&gt;binaryResource&lt;/tt&gt; taking an InputStream and the path only as parameter and instead recommend to use the overloaded methods taking the mimeType as additional parameter.&lt;/p&gt;</comment>
                            <comment id="16057416" author="sseifert@pro-vision.de" created="Wed, 21 Jun 2017 12:49:48 +0000"  >&lt;p&gt;the mime type is tried to derive from the path, not a property name.&lt;br/&gt;
this is useful if the binary ist stored with it&apos;s real name in the repository as nt:file, which is not uncommon. if its only an nt:resource it might be rather useless.&lt;br/&gt;
but the caller has the choice because the methods providing a mime type also exist as alternative.&lt;br/&gt;
as not necessarily all unit tests really need a correct mime type but rather any mime type it&apos;s may be totally okay setting the fallback mimetype if no explicit is given.&lt;/p&gt;</comment>
                            <comment id="16057417" author="kwin" created="Wed, 21 Jun 2017 12:50:10 +0000"  >&lt;p&gt;Attached is a proposed patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Can you have a look?&lt;/p&gt;</comment>
                            <comment id="16057422" author="sseifert@pro-vision.de" created="Wed, 21 Jun 2017 12:54:26 +0000"  >&lt;p&gt;for the patch: what about making detectMimeTypeFromName accept multiple paths as varargs, and passing in both classpath resource path and target path. if for any of them a mime type can be detected it is chosen, then falling back to the default.&lt;br/&gt;
i think there is no need to deprecated the methods without mimetype.&lt;/p&gt;</comment>
                            <comment id="16057426" author="kwin" created="Wed, 21 Jun 2017 12:58:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Thanks for your comments, I fixed my description above accordingly to really reflect that path refers to a resource name and not a property name. &lt;br/&gt;
About your comments for the patch. Trying to derive the mimetype from classpath resource and target path seems right to me, I will update the patch accordingly. I would still recommend to preferably explicitly set the mimetype and would argue that for most of the cases the mime type cannot be detected from the target path, but I might be wrong here. I revert the deprecation then.&lt;/p&gt;</comment>
                            <comment id="16057436" author="kwin" created="Wed, 21 Jun 2017 13:04:23 +0000"  >&lt;p&gt;Attached is a 2nd version of the patch, which should address all the raised concerns. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; If you are fine with that, please apply.&lt;/p&gt;</comment>
                            <comment id="16058112" author="sseifert@pro-vision.de" created="Wed, 21 Jun 2017 20:08:35 +0000"  >&lt;p&gt;thanks - i&apos;ve applied it to 2.x and 1.x&lt;/p&gt;

&lt;p&gt;Completed: At revision: 1799508  (2.x)&lt;br/&gt;
Completed: At revision: 1799509  (1.x)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12873865" name="SLING-6976-v01.patch" size="3017" author="kwin" created="Wed, 21 Jun 2017 12:49:53 +0000"/>
                            <attachment id="12873869" name="SLING-6976-v02.patch" size="5212" author="kwin" created="Wed, 21 Jun 2017 13:03:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gjlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6975] The JMX Beans for queues always has empty values. </title>
                <link>https://issues.apache.org/jira/browse/SLING-6975</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JMX Beans for queues always has empty values. In a nutshell, the event impl creates a new QueueBeanImpl for each Queue and that in turn, will only report statistics if the Queue is instanceof Statistics (which AFAIK never is the case). It should at a minimum get the statistics object from the queue.getStatistics() method if the queue isn&apos;t an instanceof.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081384">SLING-6975</key>
            <summary>The JMX Beans for queues always has empty values. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jun 2017 11:07:04 +0000</created>
                <updated>Wed, 20 Sep 2017 11:17:14 +0000</updated>
                            <resolved>Wed, 21 Jun 2017 11:19:53 +0000</resolved>
                                    <version>Event 4.2.2</version>
                                    <fixVersion>Event 4.2.4</fixVersion>
                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16057338" author="karlpauls" created="Wed, 21 Jun 2017 11:19:53 +0000"  >&lt;p&gt;I fixed it in r1799427.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gjg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6966] Sling Models Jackson Exporter always uses default Resource serialization for a model class which extends AbstractResource or implements the Resource interface</title>
                <link>https://issues.apache.org/jira/browse/SLING-6966</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If there is a model class which looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Model(adaptable = SlingHttpServletRequest.class, resourceType = &lt;span class=&quot;code-quote&quot;&gt;&quot;something&quot;&lt;/span&gt;)
@Exporter(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;jackson&quot;&lt;/span&gt;, extensions = &lt;span class=&quot;code-quote&quot;&gt;&quot;json&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractResource {

....

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then attempts to export this resource will always use the default Resource serialization and not use the &quot;bean&quot; serialization technique used by Jackson. This is because Jackson will first find the ResourceSerializer based on the Resource interface before constructing a BeanSerializer. The serializer lookup logic should be customized to skip any class with the &lt;tt&gt;@Model&lt;/tt&gt; annotation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080856">SLING-6966</key>
            <summary>Sling Models Jackson Exporter always uses default Resource serialization for a model class which extends AbstractResource or implements the Resource interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2017 15:14:02 +0000</created>
                <updated>Mon, 28 Aug 2017 13:10:55 +0000</updated>
                            <resolved>Mon, 19 Jun 2017 15:28:38 +0000</resolved>
                                    <version>Models Jackson Exporter 1.0.6</version>
                                    <fixVersion>Models Jackson Exporter 1.0.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16054208" author="justinedelson" created="Mon, 19 Jun 2017 15:28:38 +0000"  >&lt;p&gt;fixed in r1799221, with unit test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gg6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6965] Sling Models Jackson Exporter Fails with default resource serialization for a resource with a child</title>
                <link>https://issues.apache.org/jira/browse/SLING-6965</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a model class has a serialized Resource field/getter and that Resource has children, the serialization will fail with a stack trace like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: com.fasterxml.jackson.core.JsonGenerationException: Can not start an object, expecting field name (context: &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
    at com.fasterxml.jackson.core.JsonGenerator._reportError(JsonGenerator.java:1897)
    at com.fasterxml.jackson.core.json.JsonGeneratorImpl._reportCantWriteValueExpectName(JsonGeneratorImpl.java:244)
    at com.fasterxml.jackson.core.json.WriterBasedJsonGenerator._verifyValueWrite(WriterBasedJsonGenerator.java:815)
    at com.fasterxml.jackson.core.json.WriterBasedJsonGenerator.writeStartObject(WriterBasedJsonGenerator.java:268)
    at org.apache.sling.models.jacksonexporter.impl.ResourceSerializer.create(ResourceSerializer.java:52)
    at org.apache.sling.models.jacksonexporter.impl.ResourceSerializer.create(ResourceSerializer.java:100)
    at org.apache.sling.models.jacksonexporter.impl.ResourceSerializer.serialize(ResourceSerializer.java:46)
    at org.apache.sling.models.jacksonexporter.impl.ResourceSerializer.serialize(ResourceSerializer.java:35)
    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:292)
    at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:2493)
    at org.apache.sling.models.jacksonexporter.impl.JacksonExporter.export(JacksonExporter.java:117)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because the object is started twice.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080848">SLING-6965</key>
            <summary>Sling Models Jackson Exporter Fails with default resource serialization for a resource with a child</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2017 14:43:32 +0000</created>
                <updated>Mon, 28 Aug 2017 13:10:55 +0000</updated>
                            <resolved>Mon, 19 Jun 2017 14:46:01 +0000</resolved>
                                    <version>Models Jackson Exporter 1.0.6</version>
                                    <fixVersion>Models Jackson Exporter 1.0.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16054125" author="justinedelson" created="Mon, 19 Jun 2017 14:46:01 +0000"  >&lt;p&gt;fixed in r1799218 with updated IT&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gg53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6964] SlingEmailClient does not allow accessing email headers</title>
                <link>https://issues.apache.org/jira/browse/SLING-6964</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to a major oversight, only the email bodies are available, not the email headers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080094">SLING-6964</key>
            <summary>SlingEmailClient does not allow accessing email headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jun 2017 13:58:17 +0000</created>
                <updated>Tue, 20 Jun 2017 09:18:18 +0000</updated>
                            <resolved>Thu, 15 Jun 2017 16:12:57 +0000</resolved>
                                                    <fixVersion>Apache Sling Testing Clients 1.1.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16050693" author="rombert" created="Thu, 15 Jun 2017 16:12:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1798852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1798852&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gbhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6961] FsResource: Ignore security:acl and security:principals nodes</title>
                <link>https://issues.apache.org/jira/browse/SLING-6961</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;JCR content loader supports special JSON definitions for ACLs and principals via &lt;tt&gt;security:acl&lt;/tt&gt; and &lt;tt&gt;security:principals&lt;/tt&gt; in JSON files.&lt;/p&gt;

&lt;p&gt;those objects should be ignored by fsresource or the parsing of the whole JSON file will fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13079824">SLING-6961</key>
            <summary>FsResource: Ignore security:acl and security:principals nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jun 2017 17:20:38 +0000</created>
                <updated>Mon, 26 Jun 2017 17:11:39 +0000</updated>
                            <resolved>Wed, 14 Jun 2017 17:23:49 +0000</resolved>
                                    <version>File System Resource Provider 1.4.4</version>
                    <version>File System Resource Provider 2.1.4</version>
                                    <fixVersion>File System Resource Provider 1.4.6</fixVersion>
                    <fixVersion>File System Resource Provider 2.1.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16049404" author="sseifert@pro-vision.de" created="Wed, 14 Jun 2017 17:23:49 +0000"  >&lt;p&gt;Completed: At revision: 1798724  (2.x)&lt;br/&gt;
Completed: At revision: 1798725  (1.x)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13079823">SLING-6960</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g9u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6959] XssProtection changes html semantic caused by formatting</title>
                <link>https://issues.apache.org/jira/browse/SLING-6959</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using sightly the following html:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;td class=&lt;span class=&quot;code-quote&quot;&gt;&quot;infoline&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt; ${component.infoline @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;html&apos;&lt;/span&gt;} &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it will be compiled to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; var_28 = ((&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;+renderContext.toString(renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;xss&quot;&lt;/span&gt;, renderContext.resolveProperty(_global_component, &lt;span class=&quot;code-quote&quot;&gt;&quot;infoline&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;html&quot;&lt;/span&gt;)))+&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which calls &lt;br/&gt;
org.apache.sling.scripting.sightly.impl.engine.extension.XSSRuntimeExtension.call(RenderContext, Object...)&lt;/p&gt;

&lt;p&gt;and later:&lt;/p&gt;

&lt;p&gt;org.apache.sling.xss.impl.XSSAPIImpl.filterHTML(String)&lt;/p&gt;

&lt;p&gt;When this method is called with this String:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;Is it a &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;span style=&lt;span class=&quot;code-quote&quot;&gt;&quot;color:#e60000&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;threat&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; or an &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;span style=&lt;span class=&quot;code-quote&quot;&gt;&quot;color:#e60000&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;opportunity&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;?&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;br&amp;gt;&lt;/span&gt;
Is it a threat or an opportunity?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will be turned into&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;Is it a &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;span style=&lt;span class=&quot;code-quote&quot;&gt;&quot;color: rgb(230,0,0);&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;threat&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
 or an &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;span style=&lt;span class=&quot;code-quote&quot;&gt;&quot;color: rgb(230,0,0);&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;opportunity&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
?&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;br /&amp;gt;&lt;/span&gt;

Is it a threat or an opportunity?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which leads to the problem, that there will be a space between the word opportunity and the question mark.&lt;/p&gt;

&lt;p&gt;However, the formatting could be configured by changing the SLING-INF/content/config.xml&lt;br/&gt;
(from &amp;lt;directive name=&quot;formatOutput&quot; value=&quot;true&quot;/&amp;gt; to &amp;lt;directive name=&quot;formatOutput&quot; value=&quot;false&quot;/&amp;gt;)&lt;/p&gt;

&lt;p&gt;But anyway the formatting shouldn&apos;t change the semantics, which why the formatting directive should be always false&lt;/p&gt;
</description>
                <environment>AEM</environment>
        <key id="13079809">SLING-6959</key>
            <summary>XssProtection changes html semantic caused by formatting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="luckyluke80">Lukas Kummer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jun 2017 16:04:39 +0000</created>
                <updated>Fri, 16 Jun 2017 10:12:20 +0000</updated>
                            <resolved>Fri, 16 Jun 2017 10:12:20 +0000</resolved>
                                    <version>XSS Protection API 1.0.2</version>
                    <version>Scripting Sightly Engine 1.0.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16050258" author="luckyluke80" created="Thu, 15 Jun 2017 09:58:03 +0000"  >&lt;p&gt;might be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5050&quot; title=&quot;Disable AntiSamy&amp;#39;s default formatOutput policy directive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5050&quot;&gt;&lt;del&gt;SLING-5050&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16051727" author="kwin" created="Fri, 16 Jun 2017 10:12:01 +0000"  >&lt;p&gt;Indeed I think it is. Please try out the XSS Protection Bundle 1.0.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12895439">SLING-5050</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12872999" name="space.png" size="23629" author="luckyluke80" created="Wed, 14 Jun 2017 16:04:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g9qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6958] Sling Eclipse IDE Tooling fails when exporting rep:policy nodes to server</title>
                <link>https://issues.apache.org/jira/browse/SLING-6958</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;usecase - try to export an content package eclipse project with sling ide tooling (i&apos;ve tested only version 1.1.0) to a local instance, e.g. this one:&lt;br/&gt;
&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/aem-sample-we-retail/tree/master/ui.apps&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/aem-sample-we-retail/tree/master/ui.apps&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this fails once it hits the &quot;rep:policy&quot; node with this exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[14. Juni 2017 15:48:26 MESZ] AddOrUpdateNodeCommand -&amp;gt; /apps/public/weretail/hapi_types : JcrResult[ success:true] (25 ms)
[14. Juni 2017 15:48:26 MESZ] AddOrUpdateNodeCommand -&amp;gt; /apps/public/weretail/hapi_types/rep:policy : JcrResult[ success:false, exception: org.apache.sling.ide.transport.RepositoryException - javax.jcr.nodetype.ConstraintViolationException: {}allow is protected.] (12 ms)
org.apache.sling.ide.transport.RepositoryException: javax.jcr.nodetype.ConstraintViolationException: {}allow is protected.
	at org.apache.sling.ide.impl.vlt.JcrResult.failure(JcrResult.java:33)
	at org.apache.sling.ide.impl.vlt.JcrCommand.execute(JcrCommand.java:76)
	at org.apache.sling.ide.transport.TracingCommand.execute(TracingCommand.java:45)
	at org.apache.sling.ide.eclipse.ui.internal.ExportWizard$1$2.visit(ExportWizard.java:89)
	at org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:120)
	at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:84)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:87)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:87)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:87)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:87)
	at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:87)
	at org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:129)
	at org.eclipse.core.internal.resources.Resource.accept(Resource.java:94)
	at org.eclipse.core.internal.resources.Resource.accept(Resource.java:52)
	at org.eclipse.core.internal.resources.Resource.accept(Resource.java:117)
	at org.eclipse.core.internal.resources.Resource.accept(Resource.java:105)
	at org.apache.sling.ide.eclipse.ui.internal.ExportWizard$1.run(ExportWizard.java:81)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:119)
Caused by: javax.jcr.nodetype.ConstraintViolationException: {}allow is protected.
	at org.apache.jackrabbit.jcr2spi.nodetype.EffectiveNodeTypeImpl.checkAddNodeConstraints(EffectiveNodeTypeImpl.java:375)
	at org.apache.jackrabbit.jcr2spi.state.ItemStateValidator.checkAddNode(ItemStateValidator.java:388)
	at org.apache.jackrabbit.jcr2spi.state.SessionItemStateManager.addNodeState(SessionItemStateManager.java:435)
	at org.apache.jackrabbit.jcr2spi.state.SessionItemStateManager.visit(SessionItemStateManager.java:245)
	at org.apache.jackrabbit.jcr2spi.operation.AddNode.accept(AddNode.java:79)
	at org.apache.jackrabbit.jcr2spi.state.SessionItemStateManager.execute(SessionItemStateManager.java:215)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.createNode(NodeImpl.java:1454)
	at org.apache.jackrabbit.jcr2spi.NodeImpl.addNode(NodeImpl.java:186)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.createNode(AddOrUpdateNodeCommand.java:176)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.update(AddOrUpdateNodeCommand.java:100)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.update(AddOrUpdateNodeCommand.java:112)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.execute0(AddOrUpdateNodeCommand.java:85)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.execute0(AddOrUpdateNodeCommand.java:1)
	at org.apache.sling.ide.impl.vlt.JcrCommand.execute(JcrCommand.java:68)
	... 17 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13079772">SLING-6958</key>
            <summary>Sling Eclipse IDE Tooling fails when exporting rep:policy nodes to server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jun 2017 13:51:01 +0000</created>
                <updated>Wed, 14 Jun 2017 17:13:04 +0000</updated>
                            <resolved>Wed, 14 Jun 2017 17:12:26 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16049383" author="kwin" created="Wed, 14 Jun 2017 17:09:58 +0000"  >&lt;p&gt;Isn&apos;t this a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3827&quot; title=&quot;Unable to create nodes with protected properties, e.g. rep:User&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3827&quot;&gt;SLING-3827&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16049386" author="sseifert@pro-vision.de" created="Wed, 14 Jun 2017 17:12:26 +0000"  >&lt;p&gt;yes, i think so - i&apos;ve look for an already existing ticket but did not find that one&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12732312">SLING-3827</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g9in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>