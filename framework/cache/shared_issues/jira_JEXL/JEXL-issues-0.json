<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:41:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22JEXL%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="200" total="228"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[JEXL-447] Regression in script-defined functions</title>
                <link>https://issues.apache.org/jira/browse/JEXL-447</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have this existing behavior test in my code.&#160; It passes using 3.5.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
let results = [...]
function expect(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; left, &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; right, &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; equal) {
  let correct = (left == right) === equal &amp;amp;&amp;amp; !(left != right) === equal;
&#160; results.add(correct ?: `${left} ?= ${right}`);
&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; results;
}
function expectStrict(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; left, &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; right, &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; equal) {
&#160; let correct = (left === right) === equal &amp;amp;&amp;amp; !(left !== right) === equal;
&#160; results.add(correct ?: `${left} ?== ${right}`);
&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; results;
}

expect(1.0, &#160;1, &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
expect(1.1, &#160;1, &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
expect(1.1, &#160;1.1d, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
expect(1.1, &#160;1.1f, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
expect(&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &#160; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
expect(&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &#160; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
expect(&lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;, &#160;1, &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);

expectStrict(1.0, &#160;1.0, &#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
expectStrict(1.0, &#160;1.0d, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
expectStrict(1.0, &#160;1.0f, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
expectStrict(1.0, &#160;1, &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
expectStrict(1, &#160; &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;, &#160; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When I switched to a locally built version off the master branch (containing my proposed fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-446&quot; title=&quot;ClassTool module inspection is too strict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-446&quot;&gt;&lt;del&gt;JEXL-446&lt;/del&gt;&lt;/a&gt;) it throws JexlException.Method:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;unsolvable function/method &apos;expectStrict(Byte, Byte, Boolean) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I turned the above into a JUnit test and ran `git bisect` between 3.5.0 (working) and the current head of master and bisect says the regression was introduced in:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;61b76f0b576893c2c53ed6a386089f4e89d9e542 is the first bad commit
commit 61b76f0b576893c2c53ed6a386089f4e89d9e542
Author: Henrib &amp;lt;hbiestro@gmail.com&amp;gt;
Date: &#160; Tue Jul 8 17:36:06 2025 +0200

&#160; &#160; JEXL-441 : updated tokenization for interpolation / back-quoted strings;
&#160; &#160; - preparations for JEXL-442 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13629770">JEXL-447</key>
            <summary>Regression in script-defined functions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wrprice">William Price</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Sep 2025 02:33:35 +0000</created>
                <updated>Thu, 25 Sep 2025 05:00:02 +0000</updated>
                            <resolved>Wed, 24 Sep 2025 14:20:14 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18022437" author="henrib" created="Wed, 24 Sep 2025 14:02:53 +0000"  >&lt;p&gt;Problem stems from parsing that fails with 2 JXLT literals in script (goes through multiple lines reaching last occurence of back-tick).&lt;/p&gt;</comment>
                            <comment id="18022442" author="henrib" created="Wed, 24 Sep 2025 14:20:14 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/7f1371be2b87df40501193115f557548d4357a62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;7f1371b&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="18022618" author="wrprice" created="Thu, 25 Sep 2025 05:00:02 +0000"  >&lt;p&gt;Confirmed WFM. Thanks for the quick turnaround. Looking forward to 3.6.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13622377">JEXL-441</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xu94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-446] ClassTool module inspection is too strict</title>
                <link>https://issues.apache.org/jira/browse/JEXL-446</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/blob/master/src/main/java/org/apache/commons/jexl3/internal/introspection/ClassTool.java#L125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ClassTool#isExported&lt;/a&gt; calls &lt;a href=&quot;https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Module.html#isExported(java.lang.String)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Module#isExported(String packageName)&lt;/a&gt; via a MethodHandle.&#160; However, that method checks if the target package is exported &lt;b&gt;unconditionally&lt;/b&gt; (to all modules) which is too restrictive.&lt;/p&gt;

&lt;p&gt;In my modularized application, I can use a &lt;b&gt;qualified export&lt;/b&gt;&#160;and have more granular control following the principle of least privilege:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
module my.module {
  exports my.module.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; to org.apache.commons.jexl3;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Because `my.module.package` is not unqualified, it is not exported unconditionally and Module#isExported(&quot;my.module.package&quot;) returns false, preventing Jexl from accessing classes in that package.&lt;/p&gt;

&lt;p&gt;ClassTool should instead check that the package is exported to &lt;b&gt;at least&lt;/b&gt; Jexl&apos;s own module using &lt;a href=&quot;https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Module.html#isExported(java.lang.String,java.lang.Module)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Module#isExported(String packageName, Module module)&lt;/a&gt; as this tests whether Jexl is allowed to reflect over public API and no more.&lt;/p&gt;

&lt;p&gt;As a workaround the package can be exported unconditionally, but this may not be desirable as it impacts encapsulation and security in other parts of the larger program:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
module my.module {
  exports my.module.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;;
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13629704">JEXL-446</key>
            <summary>ClassTool module inspection is too strict</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wrprice">William Price</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Sep 2025 12:55:08 +0000</created>
                <updated>Wed, 24 Sep 2025 13:59:43 +0000</updated>
                            <resolved>Wed, 24 Sep 2025 13:59:43 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="18022267" author="wrprice" created="Tue, 23 Sep 2025 22:18:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/pull/374&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/pull/374&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18022435" author="henrib" created="Wed, 24 Sep 2025 13:59:43 +0000"  >&lt;p&gt;Diagnostic and #PR are accurate and efficient; thanks again &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wrprice&quot; class=&quot;user-hover&quot; rel=&quot;wrprice&quot;&gt;wrprice&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xtug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-443] ObjectContext can&apos;t find fields with jexl3 &gt;= 3.3</title>
                <link>https://issues.apache.org/jira/browse/JEXL-443</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m creating simple ObjectContext and with jexl3 &amp;gt;= 3.3 I am getting &quot;variable &apos;param1&apos; is undefined&quot;. This example works on jexl3 3.2.1.&lt;br/&gt;
Surprisingly neither version can find &quot;param0&quot; even though getParam0() works.&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JexlTest {
&#160; &#160; @Test
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testJexlFields() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&#160; &#160; &#160; &#160; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .cache(0)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .silent(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .create();
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; &#160; &#160; Parameters object = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parameters();
&#160; &#160; &#160; &#160; object.setParam1(Enum1.VALUE1);
&#160; &#160; &#160; &#160; JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;&amp;gt;(jexl, object);
&#160; &#160; &#160; &#160; jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;param1&quot;&lt;/span&gt;).evaluate(context);
&lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160; &#160; &#160;jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;param0&quot;&lt;/span&gt;).evaluate(context);
&lt;/span&gt;&#160; &#160; &#160; &#160; jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;getParam0()&quot;&lt;/span&gt;).evaluate(context);
&#160; &#160; }
&#160; &#160;&#160;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parameters {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; param0;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Enum1 param1;
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getParam0() {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; param0;
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setParam0(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; param0) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.param0 = param0;
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Enum1 getParam1() {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; param1;
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setParam1(Enum1 param1) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.param1 = param1;
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; }
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; Enum1 {
&#160; &#160; &#160; &#160; VALUE1
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux / JDK 21&lt;/p&gt;

&lt;p&gt;Windows / JDK 17&lt;/p&gt;</environment>
        <key id="13623875">JEXL-443</key>
            <summary>ObjectContext can&apos;t find fields with jexl3 &gt;= 3.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="arysin">Andriy Rysin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jul 2025 15:30:14 +0000</created>
                <updated>Mon, 21 Jul 2025 16:02:31 +0000</updated>
                            <resolved>Mon, 21 Jul 2025 16:02:31 +0000</resolved>
                                    <version>3.3</version>
                    <version>3.4.0</version>
                    <version>3.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="18008102" author="arysin" created="Fri, 18 Jul 2025 15:30:56 +0000"  >&lt;p&gt;I&apos;ve also tried the example from &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-370&quot; title=&quot;Cannot check if variable is defined using ObjectContext if the value is null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-370&quot;&gt;&lt;del&gt;JEXL-370&lt;/del&gt;&lt;/a&gt; and it has the same behavior - works only on 3.2.1&lt;/p&gt;</comment>
                            <comment id="18008235" author="henrib" created="Sat, 19 Jul 2025 17:07:26 +0000"  >&lt;p&gt;This is likely caused by the permissions defaults that changed in 3.3 (see &lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/relnotes35.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-jexl/relnotes35.html&lt;/a&gt; ) and more to the point &lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl3/introspection/JexlPermissions.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl3/introspection/JexlPermissions.html&lt;/a&gt; .&lt;br/&gt;
A remediation example in &lt;a href=&quot;https://stackoverflow.com/questions/77842177/errors-upon-apache-jexl-upgrade-from-3-2-1-to-3-3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/77842177/errors-upon-apache-jexl-upgrade-from-3-2-1-to-3-3&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="18008236" author="garydgregory" created="Sat, 19 Jul 2025 17:17:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Are there Javadoc changes we could do to help?&lt;/p&gt;</comment>
                            <comment id="18008237" author="henrib" created="Sat, 19 Jul 2025 17:34:07 +0000"  >&lt;p&gt;The release notes still point out those changes, the links to remediation are there; I suppose users rarely read the release notes.&lt;br/&gt;
An FAQ that captures some of the common configurations and usages would help but this is a huge undertaking... &lt;/p&gt;</comment>
                            <comment id="18008238" author="arysin" created="Sat, 19 Jul 2025 17:34:33 +0000"  >&lt;p&gt;Ahh, thank you for the prompt reply.&lt;/p&gt;

&lt;p&gt;Setting permissions helps, e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
permissions(JexlPermissions.UNRESTRICTED)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I just could not find any example with that code quickly online (and neither did copilot).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I wonder if we should explicitly say permissions not allowed in the error message, unless we don&apos;t want to expose that for security reasons. But then if I am setting the object to the context, not sure what would be the purpose if I can&apos;t access any of its fields.&lt;/p&gt;</comment>
                            <comment id="18008239" author="arysin" created="Sat, 19 Jul 2025 18:49:14 +0000"  >&lt;p&gt;Just to note about release notes: I&apos;ve never used jexl before and started with 3.4, and when it didn&apos;t work, I looked at 3.5 release notes, haven&apos;t found anything related, and tried it anyway, and only as a last resort downgraded to 3.2 (which to my surprise actually worked).&lt;/p&gt;</comment>
                            <comment id="18008240" author="garydgregory" created="Sat, 19 Jul 2025 18:53:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arysin&quot; class=&quot;user-hover&quot; rel=&quot;arysin&quot;&gt;arysin&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;That&apos;s a non-obvious journey : -(&lt;/p&gt;

&lt;p&gt;Do you feel like providing a PR to improve the docs and/or site?&lt;/p&gt;</comment>
                            <comment id="18008241" author="arysin" created="Sat, 19 Jul 2025 18:59:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; I think ideally I&apos;d change the error message to be more explicit. But if that&apos;s not an option we can work on doc/site change.&lt;/p&gt;</comment>
                            <comment id="18008244" author="garydgregory" created="Sat, 19 Jul 2025 19:25:17 +0000"  >&lt;p&gt;That sounds reasonable to me. WDYT &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="18008454" author="henrib" created="Sun, 20 Jul 2025 06:25:03 +0000"  >&lt;p&gt;I&apos;m sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arysin&quot; class=&quot;user-hover&quot; rel=&quot;arysin&quot;&gt;arysin&lt;/a&gt; experience with JEXL was so... non-obvious.&lt;/p&gt;

&lt;p&gt;On changing the error message, this is probably hard since, by design, there is no difference from the introspection perspective between a non existent method/constructor/field and a not visible/allowed one.&lt;/p&gt;

&lt;p&gt;One could try and introduce check/error messages on specific unambiguous cases to clearly state that permissions should be set for these classes to behave as intended but it is really not easy to distinguish valid cases from configuration &apos;mistakes&apos;. Or one could try and add JEXL builder caller class loader package as being allowed by default but that (re)opens the door to potential (bogus) CVE; user exposes a class that can create processes, can instantiate from JEXL by default, security issue ensues. &lt;/p&gt;

&lt;p&gt;As an experiment, I asked Gemini &apos;how do I configure JEXL to access my own classes ?&lt;br/&gt;
&apos; and it generated code that sets up permissions correctly. I also prompted &apos;JEXL ObjectMapper does not see my methods&apos; and it did generate an extensive solution.&lt;br/&gt;
Since 3.3 release - 30 months ago -, there have been 3 permissions configuration related questions including this one.&lt;br/&gt;
The information on the first page (&lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-jexl/index.html&lt;/a&gt;) before the Detailed Example warns about permissions, the release notes warn about them as well.&lt;/p&gt;

&lt;p&gt;I honestly dont think there is anything that can/should be done code wise; documentation can always be improved but must be read.&lt;/p&gt;</comment>
                            <comment id="18008710" author="arysin" created="Mon, 21 Jul 2025 12:19:29 +0000"  >&lt;p&gt;Thanks for the details explanation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt; , I suspected that changing the error message wouldn&apos;t be trivial. And I do admit I didn&apos;t dive into the documentation deep enough.&lt;/p&gt;

&lt;p&gt;We can close this ticket then, sorry for the false alarm.&lt;/p&gt;</comment>
                            <comment id="18008750" author="henrib" created="Mon, 21 Jul 2025 15:58:00 +0000"  >&lt;p&gt;No worries &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arysin&quot; class=&quot;user-hover&quot; rel=&quot;arysin&quot;&gt;arysin&lt;/a&gt; ; glad this was solved easily.&lt;/p&gt;</comment>
                            <comment id="18008751" author="henrib" created="Mon, 21 Jul 2025 16:02:31 +0000"  >&lt;p&gt;Permissions must be configured wrt user environment .&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13423558">JEXL-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wu7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-442] Local variables are not resolved in interpolation string expression.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-442</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code throws an exception: JexlExample.main:24@3:1 variable &apos;x&apos; is undefined&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlBuilder jexlBuilder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder();
JexlEngine jexl = jexlBuilder.create();
JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; code = &quot;&quot;&quot;
  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;;
  function test() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; `${x}`
  }
  test();
&quot;&quot;&quot;;
JexlScript script = jexl.createScript(code);
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(context);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expression Result: &quot;&lt;/span&gt; + result);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but if I change to&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13622415">JEXL-442</key>
            <summary>Local variables are not resolved in interpolation string expression.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jul 2025 03:56:36 +0000</created>
                <updated>Wed, 24 Sep 2025 13:55:04 +0000</updated>
                            <resolved>Sat, 2 Aug 2025 05:58:24 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17993135" author="henrib" created="Thu, 3 Jul 2025 17:39:24 +0000"  >&lt;p&gt;The culprit is the JXLT expression (ie `${x}`) whose parsing is delayed and for which variable capture is limited to its usage scope.&lt;br/&gt;
In the example, adding a local variable to the test function that captures x and referencing it in the expression &apos;solves&apos; the problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; code = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;function test() {\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;  let y = x;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; `${y}`;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;}\n&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;test();&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18004233" author="JIRAUSER294041" created="Wed, 9 Jul 2025 17:52:56 +0000"  >&lt;p&gt;Here is my fix by customizing TemplateInterpreter and JexlContext&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getVariable(Frame frame, LexicalScope block, ASTIdentifier identifier) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (identifier.getSymbol() &amp;lt; 0) {
    MyContext ctx = (MyContext) &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.context;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = identifier.getName();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ctx.hasVariableValue(name)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ctx.getVariableValue(name);
    }
  }
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getVariable(frame, block, identifier);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;MyContext is my customized&#160;JexlContext which hold the call frame stack, if the symbol &amp;lt; 0, I will find it from the parent call frame.&#160;&lt;/p&gt;</comment>
                            <comment id="18011547" author="henrib" created="Sat, 2 Aug 2025 05:58:24 +0000"  >&lt;p&gt;Create expression-parser sharing scope information with outer script parser to process interpolation expressions; ensures that local variables are correctly resolved at parsing time (not evaluation time).&lt;/p&gt;

&lt;p&gt;Fixed &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/45b0d219c149b6ca539f3b9b43cdf93eb2fb0c16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5b0d21&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wl7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-441] tokenization error if &quot;\n&quot; in template expression.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-441</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code throws an exception: JexlExample.main:19@1:9 tokenization error in &apos;&quot;&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  JexlBuilder jexlBuilder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder();
  JexlEngine jexl = jexlBuilder.create();
  JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
  context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello&quot;&lt;/span&gt;);
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; code = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; `${name + \&quot;&lt;/span&gt;\\n\&lt;span class=&quot;code-quote&quot;&gt;&quot; + name}`;&quot;&lt;/span&gt;;
  JexlScript script = jexl.createScript(code);
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(context);
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expression Result: &quot;&lt;/span&gt; + result); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but if I change to&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; code = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; `${name + \&quot;&lt;/span&gt;\\t\&lt;span class=&quot;code-quote&quot;&gt;&quot; + name}`;&quot;&lt;/span&gt;; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which works.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13622377">JEXL-441</key>
            <summary>tokenization error if &quot;\n&quot; in template expression.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jul 2025 18:34:20 +0000</created>
                <updated>Wed, 24 Sep 2025 13:55:34 +0000</updated>
                            <resolved>Tue, 8 Jul 2025 16:14:50 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17995797" author="JIRAUSER294041" created="Fri, 4 Jul 2025 17:41:23 +0000"  >&lt;p&gt;and seems the value in template string is been double escaped.&lt;/p&gt;

&lt;p&gt;size(`${&apos;\\\\n&apos;}`) = 2&lt;br/&gt;
size(&apos;\\\\n&apos;) = 3;&lt;/p&gt;</comment>
                            <comment id="18003850" author="henrib" created="Tue, 8 Jul 2025 16:14:50 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modified tokenization to accommodate for newlines, etc. in interpolation strings.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/61b76f0b576893c2c53ed6a386089f4e89d9e542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;61b76f0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13629770">JEXL-447</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wkzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-439] When using reference capture, incorrect scoping when local variable redefines a captured symbol</title>
                <link>https://issues.apache.org/jira/browse/JEXL-439</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In relation to &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-426&quot; title=&quot;Enable pass-by-reference for Captured Variables &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-426&quot;&gt;&lt;del&gt;JEXL-426&lt;/del&gt;&lt;/a&gt;, the dynamic scope is wrongly managed when a captured variable (ie a lexical variable defined at top-level) is overridden in a function (same symbol is used to name local lexical variable) and this function calls another that captures the top-level variable.&lt;br/&gt;
With reference capture, when a symbol is captured, the call frame ensures captured variables are wrapped into a reference ensuring the &apos;pass by reference&apos; behavior. The culprit here is that when redefining the variable, that new variable must be wrapped, not pass the previous one.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13619642">JEXL-439</key>
            <summary>When using reference capture, incorrect scoping when local variable redefines a captured symbol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 May 2025 09:16:01 +0000</created>
                <updated>Fri, 30 May 2025 09:21:38 +0000</updated>
                            <resolved>Fri, 30 May 2025 09:18:25 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17955155" author="henrib" created="Fri, 30 May 2025 09:18:25 +0000"  >&lt;p&gt;This issue is only meant for tracking; the initial report and solution are in &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-426&quot; title=&quot;Enable pass-by-reference for Captured Variables &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-426&quot;&gt;&lt;del&gt;JEXL-426&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/e5f4f5f8934152d9b75c245ffe526867c951a89e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;e5f4f5f8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13589936">JEXL-426</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1w43s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-437] Semicolons not actually optional between function calls on separate lines</title>
                <link>https://issues.apache.org/jira/browse/JEXL-437</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The syntax documentation states that &quot;Statements are optionally terminated with a semicolon&quot; but I&apos;m finding that semicolons are &lt;b&gt;required&lt;/b&gt; when invoking a script-defined function multiple times, with each invocation on a separate line.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
let values = [...]
function append(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; value) {
  values.add(value)
}

append(1)
append(2)
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; values &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Expectedresult%3A&quot;&gt;&lt;/a&gt;Expected result:&lt;/h3&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[1, 2, ...] &lt;span class=&quot;code-comment&quot;&gt;// list size 2 containing integers 1 and 2&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a name=&quot;ActualResult%3A&quot;&gt;&lt;/a&gt;Actual Result:&lt;/h3&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.jexl3.JexlException$Ambiguous: @7:1 ambiguous statement error in &lt;span class=&quot;code-quote&quot;&gt;&apos;append(2)&apos;&lt;/span&gt;
&#160; &#160; at app&lt;span class=&quot;code-comment&quot;&gt;//org.apache.commons.jexl3.JexlEngine.createScript(JexlEngine.java:411)  &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a name=&quot;Workaround%3A&quot;&gt;&lt;/a&gt;Workaround:&lt;/h3&gt;

&lt;p&gt;Terminating line 6 with a semicolon (&lt;tt&gt;append(1);&lt;/tt&gt;) gets around the error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;JEXL 3.4.0&#160; (also tested on 3.3)&lt;br/&gt;
OpenJDK 23.0.2 (Red Hat, Inc. 23.0.2+7)&lt;br/&gt;
Linux 5.15.167.4-microsoft-standard-WSL2 amd64&lt;/p&gt;</environment>
        <key id="13610257">JEXL-437</key>
            <summary>Semicolons not actually optional between function calls on separate lines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wrprice">William Price</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Mar 2025 18:58:38 +0000</created>
                <updated>Tue, 8 Jul 2025 16:20:44 +0000</updated>
                            <resolved>Tue, 8 Jul 2025 16:20:36 +0000</resolved>
                                    <version>3.3</version>
                    <version>3.4.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="18003853" author="henrib" created="Tue, 8 Jul 2025 16:20:36 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added an internal parsing flag (autoSemicol) for low ambiguity statement cases;&lt;/li&gt;
	&lt;li&gt;Added a feature flag that removes all controls on what is considered ambiguous statements;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Part of commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/8c8defa84a7bb33dec0917120a058a3c92a301ed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;8c8defa&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1uimo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-436] The increment (decrement) operator does not check for null operand</title>
                <link>https://issues.apache.org/jira/browse/JEXL-436</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Using the default arithmetic (strict):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
++i;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The operation returns 1 when it should fail. Same behavior for all version of increment/decrement operators. The other operators (like add or self add) throw an error &quot;variable &apos;i&apos; is null&quot; as expected.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
void testStrictIncrementOperatorOnNull() {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
&#160; &#160; JexlScript script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; ++i&quot;&lt;/span&gt;);
&#160; &#160; assertThrows(JexlException.class, () -&amp;gt; script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13606585">JEXL-436</key>
            <summary>The increment (decrement) operator does not check for null operand</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jan 2025 09:52:08 +0000</created>
                <updated>Wed, 29 Jan 2025 22:02:56 +0000</updated>
                            <resolved>Wed, 29 Jan 2025 22:02:56 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17922225" author="henrib" created="Wed, 29 Jan 2025 21:44:22 +0000"  >&lt;p&gt;Thanks for the report; it seems other self-assignment operators perform that check through the base operator (ie a+=b &amp;lt;=&amp;gt; a = a+b). Functionally, if a set-assign operator is strict, the left-hand side being null should always trigger an error.&lt;/p&gt;</comment>
                            <comment id="17922227" author="henrib" created="Wed, 29 Jan 2025 22:02:56 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/9fc51924b13b62e73e7e4ee0e90e7c99dc2ea2c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;9fc51924&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tw0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-435] Changed behavior of empty operator overloading</title>
                <link>https://issues.apache.org/jira/browse/JEXL-435</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In the previous versions (since &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/7f1336e81d1b84ffe53d53a408380e5cfd94d91c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.2&lt;/a&gt;), it was possible to overload the empty operator and return an object that was not a boolean.&lt;/p&gt;

&lt;p&gt;The java documentation still mentions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Note that the result may not be a &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The current version returns true if the returned object is not a boolean.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;OverloadedArithmetic &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; OverloadedArithmetic(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; strict) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(strict);
&#160; &#160; }
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; empty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; type) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;list&quot;&lt;/span&gt;.equals(type)) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Collections.emptyList();
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&#160; &#160; }
}

@Test
void test() {
&#160; &#160; JexlArithmetic arithmetic = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OverloadedArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&#160; &#160; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(arithmetic).create();
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;empty(&lt;span class=&quot;code-quote&quot;&gt;&apos;list&apos;&lt;/span&gt;)&quot;&lt;/span&gt;;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = jexl.createScript(src);
&#160; &#160; assertNotNull(script);
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&#160; &#160; assertTrue(result &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; List);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13602082">JEXL-435</key>
            <summary>Changed behavior of empty operator overloading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Dec 2024 19:24:59 +0000</created>
                <updated>Mon, 16 Dec 2024 16:53:25 +0000</updated>
                            <resolved>Mon, 16 Dec 2024 16:53:25 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17906119" author="henrib" created="Mon, 16 Dec 2024 16:53:25 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/48dfac24691396ccd3d030d620570dedd29cc3d2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;48dfac24&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1t49s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-434] The safe-access array operator is not safe</title>
                <link>https://issues.apache.org/jira/browse/JEXL-434</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;From the documentation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
The safe-access array &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; (as in&#160;foo?[bar]) provides the same behavior as the safe-access &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; and shortcuts any &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; or non-existent references along the navigation path, allowing a safe-navigation free of errors. In the previous expression, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, the whole expression will evaluate as &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Trying to use this syntax:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().safe(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;let foo = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; let value = foo?[bar]&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = jexl.createScript(src);
assertNotNull(script);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
assertNull(result); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;throws a Variable exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1:29 variable &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13601377">JEXL-434</key>
            <summary>The safe-access array operator is not safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Dec 2024 13:14:22 +0000</created>
                <updated>Tue, 10 Dec 2024 10:25:09 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 10:25:09 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17904445" author="henrib" created="Tue, 10 Dec 2024 10:25:09 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/ae3b1cbe611229bb402f46b09a85858c3a8d2bb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ae3b1cbe&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1szy0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-433] Debugger does not accept empty return statement</title>
                <link>https://issues.apache.org/jira/browse/JEXL-433</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;A NullPointerException is thrown when using the Debugger with an empty return statement.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;let condition = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (condition) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;; }&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = jexl.createScript(src);
assertNotNull(script);
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
assertNull(result);
Debugger debugger = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Debugger();
assertTrue(debugger.debug(script)); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: Cannot load from object array because &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.children&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13601362">JEXL-433</key>
            <summary>Debugger does not accept empty return statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Dec 2024 11:44:09 +0000</created>
                <updated>Tue, 10 Dec 2024 10:25:00 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 10:25:00 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17904444" author="henrib" created="Tue, 10 Dec 2024 10:25:00 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/ae3b1cbe611229bb402f46b09a85858c3a8d2bb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ae3b1cbe&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1szuo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-432] Namespace functors are not cleared when the classloader is updated</title>
                <link>https://issues.apache.org/jira/browse/JEXL-432</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Using a cache-enabled engine, when the classloader is updated, nodes with namespace functor values are not cleared and still use the previous version.&lt;/p&gt;

&lt;p&gt;From the &quot;ClassCreatorTest&quot; class, here is a test to illustrate the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; @Test
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFunctorFour() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ClassCreator cctor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClassCreator(jexl, base);
&#160; &#160; &#160; &#160; cctor.setSeed(2);
&#160; &#160; &#160; &#160; cctor.setCtorBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;value = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) ctxt.get(\&quot;&lt;/span&gt;value\&lt;span class=&quot;code-quote&quot;&gt;&quot;) + 10;&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; foo1 = cctor.createClass(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&#160; &#160; &#160; &#160; assertSame(foo1.getClassLoader(), cctor.getClassLoader());
&#160; &#160; &#160; &#160; assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo2&quot;&lt;/span&gt;, foo1.getSimpleName());&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; ns = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
&#160; &#160; &#160; &#160; ns.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;, foo1.getName());
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// use cache
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().namespaces(ns).cache(16).create();
&#160; &#160; &#160; &#160; jexl2.setClassLoader(cctor.getClassLoader());
&#160; &#160; &#160; &#160; cctor.clear();&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
&#160; &#160; &#160; &#160; ctxt.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;, 1000);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = jexl2.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;test:getValue()&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(ctxt);
&#160; &#160; &#160; &#160; assertEquals(1010, result);&#160; &#160; &#160; &#160; cctor.setSeed(2);
&#160; &#160; &#160; &#160; cctor.setCtorBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;value = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) ctxt.get(\&quot;&lt;/span&gt;value\&lt;span class=&quot;code-quote&quot;&gt;&quot;) + 99;&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; foo11 = cctor.createClass(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&#160; &#160; &#160; &#160; assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo2&quot;&lt;/span&gt;, foo1.getSimpleName());
&#160; &#160; &#160; &#160; assertNotSame(foo11, foo1);
&#160; &#160; &#160; &#160; foo1 = foo11;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// drum rolll....
&lt;/span&gt;&#160; &#160; &#160; &#160; jexl2.setClassLoader(foo1.getClassLoader());
&#160; &#160; &#160; &#160; result = script.execute(ctxt);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// tada!
&lt;/span&gt;&#160; &#160; &#160; &#160; assertEquals(1099, result);
&#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A solution could be to add the &quot;NamespaceFunctor&quot; to the list of instances to clean (JexlNode#clearCache()).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13601354">JEXL-432</key>
            <summary>Namespace functors are not cleared when the classloader is updated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Dec 2024 10:55:55 +0000</created>
                <updated>Tue, 10 Dec 2024 10:24:49 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 10:24:49 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17904443" author="henrib" created="Tue, 10 Dec 2024 10:24:49 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/ae3b1cbe611229bb402f46b09a85858c3a8d2bb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ae3b1cbe&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1szsw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-431] Parse error with variables declared in a catch clause</title>
                <link>https://issues.apache.org/jira/browse/JEXL-431</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;A variable defined in a catch clause cannot be reused in the same block.&lt;br/&gt;
The following scripts are not allowed by the parser:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; stuff
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (let error) {
  &lt;span class=&quot;code-comment&quot;&gt;// manage error
&lt;/span&gt;}
let error = &lt;span class=&quot;code-quote&quot;&gt;&apos;hello error&apos;&lt;/span&gt;;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; stuff
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (let error) {
  &lt;span class=&quot;code-comment&quot;&gt;// manage error
&lt;/span&gt;}
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; stuff
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (let error) {
  &lt;span class=&quot;code-comment&quot;&gt;// manage error
&lt;/span&gt;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both cases end with a parsing error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
error: variable is already declared &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A failing test can look like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;let x = 0; &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { x += 19 } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (let error) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 169 } &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { x += 23 } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (let error) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 169 }&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = jexl.createScript(src);
assertNotNull(script);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
assertEquals(42, result); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At runtime it works fine.&lt;br/&gt;
A try-with-resources is working fine as well:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (let closeable = open()) {
  &lt;span class=&quot;code-comment&quot;&gt;// IO stuff
&lt;/span&gt;}
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (let closeable = open()) {
  &lt;span class=&quot;code-comment&quot;&gt;// IO stuff
&lt;/span&gt;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13601183">JEXL-431</key>
            <summary>Parse error with variables declared in a catch clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kshvbussol">Vincent Bussol</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Dec 2024 19:21:35 +0000</created>
                <updated>Sun, 8 Dec 2024 17:56:03 +0000</updated>
                            <resolved>Sun, 8 Dec 2024 17:56:03 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17903943" author="henrib" created="Sun, 8 Dec 2024 17:56:03 +0000"  >&lt;p&gt;Grammar change to consider a try/catch as a lexical node (so local variables can be declared without clashing with outer scope, same as try-with-resource).&lt;/p&gt;

&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/1934f2bd3a392382ee525bd649da10eda0e9ef2d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1934f2b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1syqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-430] JexlArithmetic behavior change</title>
                <link>https://issues.apache.org/jira/browse/JEXL-430</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;b&gt;Regression&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;1.1&quot;&lt;/span&gt; &amp;gt; 0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;returns &lt;b&gt;true&lt;/b&gt; in 3.3. But it throws an exception in 3.4.0.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.ArithmeticException: &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; comparison:(1.1 GT 0)
at org.apache.commons.jexl3.JexlArithmetic.doCompare(JexlArithmetic.java:806)
at org.apache.commons.jexl3.JexlArithmetic.compare(JexlArithmetic.java:503)
at org.apache.commons.jexl3.JexlArithmetic.greaterThan(JexlArithmetic.java:892)
at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1448)
at org.apache.commons.jexl3.parser.ASTGTNode.jjtAccept(ASTGTNode.java:19)
at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1532)
at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:137)
at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:843)
at org.apache.commons.jexl3.internal.Script.execute(Script.java:239) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13593159">JEXL-430</key>
            <summary>JexlArithmetic behavior change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10005">Workaround</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Sep 2024 05:13:32 +0000</created>
                <updated>Wed, 25 Sep 2024 05:54:39 +0000</updated>
                            <resolved>Wed, 25 Sep 2024 05:20:33 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17884501" author="henrib" created="Wed, 25 Sep 2024 05:20:33 +0000"  >&lt;p&gt;This new behavior is intended, the type system is less lenient than it was. In this case, comparing a string to a number is not a clear semantic; do we try and coerce to number before comparison or to string ?&lt;/p&gt;

&lt;p&gt;The workaround Is to remove the ambiguity by deriving the JexlArithmetic and adding a method &apos;public int compare(Number n, String s);&apos; which will be used by all comparison operators (and even automatically be applied to arguments (String, Number) thanks to &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-428&quot; title=&quot;Make Comparable object high priority while comparing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-428&quot;&gt;&lt;del&gt;JEXL-428&lt;/del&gt;&lt;/a&gt; ) that gives you full control over the intended behavior.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13591081">JEXL-428</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rlko:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-429] Ternary expression regression</title>
                <link>https://issues.apache.org/jira/browse/JEXL-429</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;b&gt;Regression&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; f = function(a) {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a;}; 
b ? b : f(2);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the script is executed, there is a variable &lt;b&gt;b&lt;/b&gt; in the jexl context with value as &lt;b&gt;1&lt;/b&gt;.&#160;&lt;/p&gt;

&lt;p&gt;The script returns 1 as expected in 3.3, but throws a parsing exception in 3.4.0.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
parsing error in &lt;span class=&quot;code-quote&quot;&gt;&apos;;&apos;&lt;/span&gt;
&#160; &#160; at org.apache.commons.jexl3.JexlEngine.createScript(JexlEngine.java:411) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If the ternary statement is changed to &lt;tt&gt;b ? f(2) : b;&lt;/tt&gt; , there is no issue and 2 is returned as expected.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13592883">JEXL-429</key>
            <summary>Ternary expression regression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="shuo.geng">Shuo Geng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Sep 2024 03:05:52 +0000</created>
                <updated>Wed, 25 Sep 2024 05:51:52 +0000</updated>
                            <resolved>Wed, 25 Sep 2024 05:46:07 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17883765" author="henrib" created="Mon, 23 Sep 2024 08:07:37 +0000"  >&lt;p&gt;Related to:&lt;br/&gt;
1/ &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-420&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JEXL-420&lt;/a&gt;&lt;br/&gt;
2/ &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JEXL-412&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17883820" author="garydgregory" created="Mon, 23 Sep 2024 11:00:35 +0000"  >&lt;p&gt;I think we can close this ticket as &quot;info provided&quot;.&lt;/p&gt;</comment>
                            <comment id="17883891" author="henrib" created="Mon, 23 Sep 2024 14:14:29 +0000"  >&lt;p&gt;Something can be done to improve &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-412&quot; title=&quot;Ambiguous syntax between namespace function call and map object definition.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-412&quot;&gt;&lt;del&gt;JEXL-412&lt;/del&gt;&lt;/a&gt;; a function call using a local variable can be used as hint.&lt;/p&gt;

&lt;p&gt;For the arithmetic new stricter behavior, the workaround would be to derive a JexlArithmetic and add a compare(String, Number) method; need to commit &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-428&quot; title=&quot;Make Comparable object high priority while comparing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-428&quot;&gt;&lt;del&gt;JEXL-428&lt;/del&gt;&lt;/a&gt; related work first.&lt;/p&gt;

&lt;p&gt;PS: 2 issues in one ticket is really inconvenient.&lt;/p&gt;</comment>
                            <comment id="17884502" author="henrib" created="Wed, 25 Sep 2024 05:25:39 +0000"  >&lt;p&gt;Ternary and namespace syntax is a grammar ambiguity pothole.&lt;br/&gt;
To fix this, a new hint will consider if the function name (the fun in ns : fun()) is a variable which solves this precise case.&lt;/p&gt;

&lt;p&gt;A new feature flag is introduced, &apos;namespace identifier&apos; which considers a namespace identifier as one token that is only when &apos;ns:fun&apos; is written with no space in between. Default remains false but, as per recommendation, one should be explicit about which feature, option, security and arithmetic is used.&lt;/p&gt;</comment>
                            <comment id="17884504" author="henrib" created="Wed, 25 Sep 2024 05:46:07 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/2d2300e0fea55e1da432d3ef1b04ba49afc5b025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2d2300e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rjvc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-425] Multiline format literals does not always return string.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-425</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;For example&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
let x = 10;
let y = `${x}` &lt;span class=&quot;code-comment&quot;&gt;// y is integer type of 10, expect y to be string
&lt;/span&gt;let z = `${x}1` &lt;span class=&quot;code-comment&quot;&gt;// z is string &lt;span class=&quot;code-quote&quot;&gt;&apos;101&apos;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;here the type of `y` expected to be string.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13589919">JEXL-425</key>
            <summary>Multiline format literals does not always return string.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Aug 2024 01:15:03 +0000</created>
                <updated>Sat, 31 Aug 2024 17:11:11 +0000</updated>
                            <resolved>Sat, 31 Aug 2024 17:11:11 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17876654" author="henrib" created="Mon, 26 Aug 2024 09:57:12 +0000"  >&lt;p&gt;We will have to protect this behavior change with some flag since it is very likely this bug has been exploited in the field.&lt;/p&gt;

&lt;p&gt;Typically, if a is a map keyed by integers, an expression like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a.`${b}`&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; will cease to return the expected value since the key will be coerced to String (and &quot;1&quot; != 1).&lt;/p&gt;</comment>
                            <comment id="17876771" author="JIRAUSER294041" created="Mon, 26 Aug 2024 16:07:48 +0000"  >&lt;p&gt;got it, a flag is fine, thanks for your explaination!&lt;/p&gt;</comment>
                            <comment id="17877119" author="henrib" created="Tue, 27 Aug 2024 17:41:02 +0000"  >&lt;p&gt;Prototyping using an option flag (strictInterpolation) that, when true, enforces interpolation expressions (`${...}`) return a string on evaluation.&lt;br/&gt;
More tests required.&lt;/p&gt;</comment>
                            <comment id="17877680" author="JIRAUSER294041" created="Thu, 29 Aug 2024 11:34:10 +0000"  >&lt;p&gt;Great, thank you very much!&lt;/p&gt;</comment>
                            <comment id="17878370" author="henrib" created="Sat, 31 Aug 2024 17:11:11 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/aecb3934d3702d60c456750051374ca756f20826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;aecb393&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1r1m8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-424] Permission error after upgraded to JDK 21</title>
                <link>https://issues.apache.org/jira/browse/JEXL-424</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlSandbox sandbox = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
sandbox.permissions(Map.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
...
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jexlCode = &lt;span class=&quot;code-quote&quot;&gt;&quot;x.foo = &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;;&quot;&lt;/span&gt; 
JexlEngine engine =
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine(
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
            .sandbox(sandbox)
            .safe(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
            .strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; vars = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LinkedHashMap&amp;lt;&amp;gt;();
vars.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;,  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LinkedHashMap&amp;lt;&amp;gt;());
engine.createScript(jexlCode).execute(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(vars)); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The code is ok with JDK11, but&#160;caused an error &quot;undefined property &apos;foo&apos;&quot; with JDK21.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I did some debug and found the problem is&lt;/p&gt;

&lt;p&gt;JDK11:&#160; LinkedHashMap implements Map&lt;/p&gt;

&lt;p&gt;JDK21: LinkedHashMap implements&#160;SequencedMap extends Map&lt;/p&gt;

&lt;p&gt;and from &lt;a href=&quot;https://github.com/apache/commons-jexl/blob/master/src/main/java/org/apache/commons/jexl3/introspection/JexlSandbox.java#L540&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JexlSandbox.java#L540&lt;/a&gt;]&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; inter : clazz.getInterfaces()) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; permissions = sandbox.get(inter.getName());
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (permissions != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (permissions.isInheritable()) {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; permissions = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;sandbox only checks the direct interfaces but not check it&apos;s super interface, but for class permission check, it looks into its parents, is it by design or a bug?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And also because which checking permission of class, it does not check it&apos;s interface&apos;s permission, the result of class is not stable in case parent class has permission from it&apos;s interface.&lt;/p&gt;

&lt;p&gt;for example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; I{}
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;A &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; I{}
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;B &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; A{}

@Test
void testPermission() {
  JexlSandbox sandbox = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
  sandbox.permissions(I.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;permission A=&quot;&lt;/span&gt; + sandbox.get(A.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()).write());
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;permission B=&quot;&lt;/span&gt; + sandbox.get(B.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName()).write());
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;result is&#160;&lt;/p&gt;

&lt;p&gt;permission A=org.apache.commons.jexl3.introspection.JexlSandbox$AllowSet@31e04b13&lt;br/&gt;
permission B=org.apache.commons.jexl3.introspection.JexlSandbox$AllowSet@31e04b13&lt;/p&gt;

&lt;p&gt;but if checking B befoer A, the result is&#160;&lt;/p&gt;

&lt;p&gt;permission B=org.apache.commons.jexl3.introspection.JexlSandbox$2@6c1832aa&lt;br/&gt;
permission A=org.apache.commons.jexl3.introspection.JexlSandbox$AllowSet@47ad69f7&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Maybe we need to travel the whole inheritance tree and also need a merge policy for multiple permission definitions?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;BTW, what is the release date for next version? thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13582657">JEXL-424</key>
            <summary>Permission error after upgraded to JDK 21</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jun 2024 08:25:43 +0000</created>
                <updated>Sat, 31 Aug 2024 06:33:08 +0000</updated>
                            <resolved>Sat, 31 Aug 2024 06:33:08 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17855015" author="garydgregory" created="Fri, 14 Jun 2024 09:55:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xupengcheng&quot; class=&quot;user-hover&quot; rel=&quot;xupengcheng&quot;&gt;xupengcheng&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;We just released 3.4.0.&lt;/p&gt;</comment>
                            <comment id="17855020" author="JIRAUSER294041" created="Fri, 14 Jun 2024 10:16:53 +0000"  >&lt;p&gt;got it, thank you!&lt;/p&gt;</comment>
                            <comment id="17855984" author="henrib" created="Tue, 18 Jun 2024 15:58:17 +0000"  >&lt;p&gt;Code was indeed dependent on permission lookup order since it was only checking the permission cache; fix is to compute permission fully on a &apos;get&apos; (if not cached).&lt;/p&gt;

&lt;p&gt;That being said, the new framework org.apache.commons.jexl3.introspection.JexlPermissions is now the preferred way to secure applications and restrict class/method/fields visibility.&lt;/p&gt;

&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/78b3dd90f07d86531c8c99f6f9b5bea00bea8205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;78b3dd9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17878207" author="henrib" created="Fri, 30 Aug 2024 17:53:51 +0000"  >&lt;p&gt;Regression detected... &lt;/p&gt;</comment>
                            <comment id="17878306" author="henrib" created="Sat, 31 Aug 2024 06:33:08 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/788c4059eda8baf45150c2fb205793dae5c7b590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;788c405&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1psv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-420] Error while comparing float and string value</title>
                <link>https://issues.apache.org/jira/browse/JEXL-420</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1.2 == &apos;&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;returns false&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1.2 == &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;causes exception&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.ArithmeticException: &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; coercion: (a)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is it possible to check the right side is a number like string and return false if not?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13567509">JEXL-420</key>
            <summary>Error while comparing float and string value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2024 03:24:39 +0000</created>
                <updated>Fri, 9 Feb 2024 09:09:12 +0000</updated>
                            <resolved>Fri, 9 Feb 2024 09:04:28 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17815391" author="henrib" created="Wed, 7 Feb 2024 18:03:42 +0000"  >&lt;p&gt;It is always possible to use an arithmetic (ie a JexlArithmetic derived class) of your choosing.&lt;br/&gt;
In your case, you might want to override the method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; toDouble(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; val)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so it returns NaN when encountering a String.&lt;br/&gt;
Alternatively, you could override:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; left, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; right, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlOperator &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.compare(left, right, &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(ArithmeticException xa) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (EQ.equals(&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;)) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; xa;
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to return a comparison value leading to false for the operator when catching an ArithmeticException.&lt;/p&gt;

&lt;p&gt;As for the general case, I&apos;d rather not weaken the type system; the empty string is already an (historic) convenient exception.&lt;/p&gt;</comment>
                            <comment id="17815516" author="JIRAUSER294041" created="Thu, 8 Feb 2024 05:30:36 +0000"  >&lt;p&gt;I agree that not weaken the type system, but in Java, usually the &apos;equals&apos; method should handle type diff and return false instead of throwing exception.&lt;/p&gt;

&lt;p&gt;For java object in JEXL, &apos;==&apos; Equality uses the java equals method, for numeric values, I think it is good to try parsing non-numeric object for comparison, but personally I think returns false for parsing failure is more consistently, and if so, the historic convenient exception for empty string is no need any more.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17815639" author="henrib" created="Thu, 8 Feb 2024 11:23:01 +0000"  >&lt;p&gt;You are right; it makes more sense to follow the Java convention. The type system is already lenient so it might as well be convenient and coherent.&#160;&lt;/p&gt;</comment>
                            <comment id="17815979" author="henrib" created="Fri, 9 Feb 2024 09:04:28 +0000"  >&lt;ul&gt;
	&lt;li&gt;Added specific CoercionException (subclass of ArithmeticException) to be ignored during comparisons to allow fall through.&lt;/li&gt;
	&lt;li&gt;Throw &#160;CoercionException from parse{Number*} methods.&lt;/li&gt;
	&lt;li&gt;Added consistency in treating NaN and &apos;&apos; in all cases&lt;/li&gt;
	&lt;li&gt;Avoid going through parse(value.toString()) since type system is (seems) stable enough&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/f5bf27caaf7c577ed039232e5db81bcb835bc228&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f5bf27ca&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1n8eo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-417] JexlArithmetic looses precision during arithmetic operator execution</title>
                <link>https://issues.apache.org/jira/browse/JEXL-417</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a an argument/variable is a BigDecimal or BigInteger, JEXL may try and convert it to double/long during arithmetic operator execution leading to unexpected results.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://lists.apache.org/thread/h673m554ncjg06f5pqhjjtvy1qk3o2jt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;discussion&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(56.1B - 12) / 12 = 3.66666B != 3&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;User intent about precision should be maintained.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13559674">JEXL-417</key>
            <summary>JexlArithmetic looses precision during arithmetic operator execution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Nov 2023 09:18:35 +0000</created>
                <updated>Tue, 28 Nov 2023 20:45:56 +0000</updated>
                            <resolved>Tue, 28 Nov 2023 20:45:24 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17790745" author="henrib" created="Tue, 28 Nov 2023 20:45:24 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/5ab46d9935c992eab7ab7dce4f1fde196976c789&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5ab46d&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/d894074fb485c8f23ca5111ad1470dc6018bc9fb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d894074&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lw2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-416] Null-valued pragma throws NPE in 3.3</title>
                <link>https://issues.apache.org/jira/browse/JEXL-416</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Version 3.2.1 seemed to allow &lt;tt&gt;null&lt;/tt&gt; as a value for pragmas, but version 3.3 throws NPE.&#160; I&apos;m not necessarily advocating for null pragma values, but it&apos;s a behavior regression due to the use of &lt;tt&gt;TreeMap::merge&lt;/tt&gt;. Even if disallowing nulls was desired, it should be a JexlException not NPE.&lt;/p&gt;

&lt;p&gt;Passes on 3.2.1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; script = engine.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;#pragma myNull &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;\n&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; pragmas = script.getPragmas();
assertTrue(pragmas.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&quot;myNull&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;pragma key present?&quot;&lt;/span&gt;);
assertNull(pragmas.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;myNull&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;expected &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; value&quot;&lt;/span&gt;); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Behavior on 3.3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertThrows(
    NullPointerException.class,
    () -&amp;gt; engine.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;#pragma myNull &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;\n&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at java.base/java.util.Objects.requireNonNull(Objects.java:233)
	at java.base/java.util.TreeMap.merge(TreeMap.java:743)
	at org.apache.commons.jexl3.parser.JexlParser.declarePragma(JexlParser.java:557)
	at org.apache.commons.jexl3.parser.Parser.Pragma(Parser.java:1246)
	at org.apache.commons.jexl3.parser.Parser.JexlScript(Parser.java:63)
	at org.apache.commons.jexl3.parser.Parser.parse(Parser.java:25)
	at org.apache.commons.jexl3.internal.Engine.parse(Engine.java:1009)
	at org.apache.commons.jexl3.internal.Engine.createScript(Engine.java:617)
	at org.apache.commons.jexl3.internal.Engine.createScript(Engine.java:69)
	at org.apache.commons.jexl3.JexlEngine.createScript(JexlEngine.java:375)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;JEXL 3.3&lt;br/&gt;
Java 21 (21+35) Red Hat, Inc.&lt;br/&gt;
Linux 5.15.133.1-microsoft-standard-WSL2 (amd64)&lt;/p&gt;</environment>
        <key id="13559110">JEXL-416</key>
            <summary>Null-valued pragma throws NPE in 3.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wrprice">William Price</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Nov 2023 21:39:55 +0000</created>
                <updated>Thu, 23 Nov 2023 16:06:34 +0000</updated>
                            <resolved>Thu, 23 Nov 2023 16:06:34 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17789201" author="henrib" created="Thu, 23 Nov 2023 16:06:34 +0000"  >
&lt;p&gt;Thanks for catching this regression.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/0a2e94323a642cc224b1b97ce28e87aaf073408e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;0a2e943&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lsls:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-415] incorrect template eval result</title>
                <link>https://issues.apache.org/jira/browse/JEXL-415</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code should return &quot;#1&quot;, but actually returns &quot;#${a}&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; a = 1;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; `#${a}`; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I checked the syntax doc, seems there is no such rule.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13558434">JEXL-415</key>
            <summary>incorrect template eval result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Nov 2023 15:50:34 +0000</created>
                <updated>Sat, 18 Nov 2023 04:24:36 +0000</updated>
                            <resolved>Sat, 18 Nov 2023 04:24:36 +0000</resolved>
                                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17787447" author="henrib" created="Sat, 18 Nov 2023 04:24:36 +0000"  >&lt;p&gt;Thanks for the report.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/b2431dd4bdc5ede8a2a7b163d039b3e8056c3110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;b2431dd4&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1loqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-414] SoftCache may suffer from race conditions</title>
                <link>https://issues.apache.org/jira/browse/JEXL-414</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I found the SoftCache used from within the JEXL class Engine to be very relevant for overall performance (depending on the application) on the one hand, but on the other hand it may suffer from race conditions.&lt;/p&gt;

&lt;p&gt;While solid efford was taken to protect it from race conditions by surrounding access using a ReadWriteLock, parallel read access actually do reach out on a LinkedHashMap having set accessOrder=true. This means that on every potentially parallel, non serialized invocation of LinkedHashMap#get the order of elements is modified to bring the last accessed element down to the tail of the internal linked list structure and modCount is incremented.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In our application rendering web templates, we observe multiple of 10000 access on the SoftCache per page impression and multiple of 10 page impressions per second per JVM instance.&lt;/p&gt;

&lt;p&gt;Not sure whether this is result of race condition claimed above, in heapdumps of that application I observed the LinkedHashMap used within SoftCache having a size of ~9500 elements while the SoftCache#size is set to limit the cache to 5000 elements. Additionaly the LinkedHashMap#modCount shows up with arbitrary giant positive or negative numbers, telling me it has overflown already after some hours of application uptime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13558416">JEXL-414</key>
            <summary>SoftCache may suffer from race conditions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="holgersunke">Holger Sunke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Nov 2023 14:03:52 +0000</created>
                <updated>Wed, 29 Nov 2023 11:11:30 +0000</updated>
                            <resolved>Tue, 28 Nov 2023 20:43:18 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17787444" author="henrib" created="Sat, 18 Nov 2023 03:07:34 +0000"  >&lt;p&gt;Very good catch and analysis, thank you. A correction is in the works.&lt;/p&gt;</comment>
                            <comment id="17787449" author="henrib" created="Sat, 18 Nov 2023 04:31:41 +0000"  >&lt;p&gt;I&apos;ve dropped a &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/e4b6b3956ed4f7e1404e4523c6629216b2384476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;version&lt;/a&gt; that exposes a cache interface and method factories to create either synchronous or concurrent caches.&lt;br/&gt;
The former uses a linkedhashmap but fully synchronized (to correct the initial bug) whilst the latter uses a concurrentlinkedhashmap-lru (from Google). Since this introduces a new dependency, it would be nice to ensure this improves concurrency; I suspect that under low contention, there is no disadvantage to the synchronized version.&lt;br/&gt;
I may revise this to let the concurrent version in the test directory to avoid the new dependency; it might also be better to use Cafeine but that is an even bigger dependency.&lt;br/&gt;
Let me know what you think and find.&lt;/p&gt;</comment>
                            <comment id="17788775" author="JIRAUSER303087" created="Wed, 22 Nov 2023 13:19:41 +0000"  >&lt;p&gt;Thank you for quick action. Looking at the source it looks very solid and should remove any race condition.&lt;/p&gt;

&lt;p&gt;Do you have some kind of reproducible concurrent performance test to compare old implementation and both new variants?&lt;/p&gt;</comment>
                            <comment id="17789193" author="henrib" created="Thu, 23 Nov 2023 15:45:43 +0000"  >&lt;p&gt;I&apos;ve added a rough performance evaluation test class and another JexlCache implementation to compare to. I played with some parameters to get a sense of it but I feel confident the cache handling only has a small impact on overall performance.&lt;br/&gt;
Let me know what you find.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/b36890794bcbef32acc6b11899e5848f10905609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;b36890&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17790801" author="JIRAUSER303087" created="Tue, 28 Nov 2023 22:56:41 +0000"  >&lt;p&gt;Nice test case, thank you.&lt;/p&gt;

&lt;p&gt;When using the test as is, testSynchronized and testSpread are performing nearly equally while testConcurrent is a bit faster.&lt;/p&gt;

&lt;p&gt;When setting HIT=500 I get quite expressive results:&lt;/p&gt;

&lt;p&gt;INFORMATION: testSynchronized : 5,523&lt;br/&gt;
INFORMATION: testSpread : 1,349&lt;br/&gt;
INFORMATION: testConcurrent : 1,248&lt;/p&gt;

&lt;p&gt;Same remains true when playing with other settings (THREADS, SCRIPTS, CACHED): testConcurrent typically is slightly faster than testSpread which is way faster than testSynchronized.&lt;/p&gt;

&lt;p&gt;testSynchronized produces lowest CPU utilization likely because it is blocking more than the other tests.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So after all I&apos;d prefer to use the ConcurrentCache on our application or the SpreadCache if introducing a dependency was an issue to me.&lt;/p&gt;

&lt;p&gt;Would it be useful to set the concurrentlinkedhashmap-lru dependency scope to &apos;provided&apos; ? Not sure about this scopes&apos; implications tho.&lt;/p&gt;</comment>
                            <comment id="17790946" author="henrib" created="Wed, 29 Nov 2023 07:40:18 +0000"  >&lt;p&gt;As with any benchmark, I&apos;d take the result with a grain of salt. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; A tight loop of 500 create/execute of a constant script definitely biases the result by emphasizing cache performance wrt actual code parsing/execution.&lt;br/&gt;
Anyhow, the code as is allows you to choose. Since you must create a JexlBuilder and set a few options to use JEXL, you might as well take that opportunity to use the cache implementation you want. Add the eventual dependency to your project, copy the ConcurrentCache code from JEXL test to some of your packages and you&apos;re good to go.&lt;/p&gt;</comment>
                            <comment id="17791019" author="JIRAUSER303087" created="Wed, 29 Nov 2023 11:11:30 +0000"  >&lt;p&gt;Just wanted to add that in our case the SoftCache was configured too small (capacity 5000 where 10000 was needed) and the write-lock actually figured out to be the bottleneck during throughput peaks. I pulled threaddumps when things got wild (giant response times) and found hundreds of threads waiting for a lock on the cache which I didn&apos;t even know is existing up to that moment. Increasing the cache size boosted overall response times visibly in all monitoring graphs. This is likely caused due to less expression parsing but maybe also less (exclusive write-)locking.&lt;/p&gt;

&lt;p&gt;At least in situations where the app is close to congestion due to a peak I&apos;m sure the SyncronizedMap would be a problem in our case. Thus the solution of now being able to choose and experiment on different Map implementations is great &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lomw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-412] Ambiguous syntax between namespace function call and map object definition.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-412</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
function test() {
&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;;
}

let var1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;var1&apos;&lt;/span&gt;;
let x = {
&#160; var1: test(),
&#160; &lt;span class=&quot;code-quote&quot;&gt;&apos;var2&apos;&lt;/span&gt;: 1
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this code caused a parse error.&lt;/p&gt;

&lt;p&gt;Looks like the reason is the parser consider `var1: test()` as a namespace function call but here I just want define a map keyed by variable.&lt;/p&gt;

&lt;p&gt;Is it possible to disable &apos;namespace&apos; feature to avoid this ambiguous syntax?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13556403">JEXL-412</key>
            <summary>Ambiguous syntax between namespace function call and map object definition.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Nov 2023 14:39:55 +0000</created>
                <updated>Fri, 22 Dec 2023 09:02:07 +0000</updated>
                            <resolved>Fri, 22 Dec 2023 09:02:07 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17782143" author="henrib" created="Thu, 2 Nov 2023 13:20:55 +0000"  >&lt;p&gt;I&apos;ll look into it. As a workaround, there is a &apos;syntactic hint&apos; for this case, add a space before the &apos;:&apos; as in &apos;{ var1 : test() }&apos;.&lt;/p&gt;</comment>
                            <comment id="17782545" author="henrib" created="Fri, 3 Nov 2023 12:18:53 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/4692b3c606baca56a2d2f0a4cb34faa85f920eee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4692b3c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17795832" author="henrib" created="Tue, 12 Dec 2023 16:07:16 +0000"  >&lt;p&gt;Some people experience regressions; modules in particular declare namespaces.&lt;/p&gt;</comment>
                            <comment id="17799731" author="henrib" created="Fri, 22 Dec 2023 09:02:07 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Kinda restored previous behavior by looking at the whole ns:func sequence and adding a grammar disambiguation for map entries.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/5072cdd36c1e80e0889f24133606a8cf6d7d4fe7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5072cd&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lc8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-411] Leading zeroes in floating point numbers should be optional</title>
                <link>https://issues.apache.org/jira/browse/JEXL-411</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When parsing arithmetic expressions, JEXL should be able to deal with omitted leading zeroes in floating point numbers between -1.0 and 1.0, e.g. &quot;.1&quot;&lt;br/&gt;
&quot;(1+0.1)*2&quot; evaluates to 2.2, while &quot;(1+.1)*2&quot; gives a parsing error. In Java, this is valid code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13556373">JEXL-411</key>
            <summary>Leading zeroes in floating point numbers should be optional</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chemFelix">Felix Rudolphi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Nov 2023 10:29:59 +0000</created>
                <updated>Fri, 24 Nov 2023 16:25:34 +0000</updated>
                                            <version>3.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17789206" author="henrib" created="Thu, 23 Nov 2023 16:11:58 +0000"  >&lt;p&gt;Tried to modify the grammar but this is not easy; JEXL allows &apos;x.3&apos; as an (almost) equivalent for &apos;x&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&apos; , lexical states are probably required. &lt;br/&gt;
If you&apos;ve submit a PR, I&apos;ll gladly look at it.&lt;/p&gt;</comment>
                            <comment id="17789274" author="chemfelix" created="Thu, 23 Nov 2023 23:35:46 +0000"  >&lt;p&gt;If the character preceding the &apos;.&apos; is the very beginning, an operator +-*/^ or &apos;(&apos;, it should be interpreted as float/double literal, and if a variable precedes the &apos;.&apos;, it should treat the number following the &apos;.&apos; like an array/list index (as it already does). &lt;/p&gt;

&lt;p&gt;Which class should I look at? NumberParser.assignReal(..) just uses Double.parseDouble(..), which should work fine with &quot;.1&quot;. We should modify the step before, where the parser decides to use NumberParser when coming across 0-9 starting a number literal, and should do the same when coming across a &apos;.&apos;. My 5 cents&lt;/p&gt;</comment>
                            <comment id="17789513" author="henrib" created="Fri, 24 Nov 2023 16:25:34 +0000"  >&lt;p&gt;The logic for parsing is described in the &lt;a href=&quot;https://github.com/apache/commons-jexl/blob/master/src/main/java/org/apache/commons/jexl3/parser/Parser.jjt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Parser.jjt&lt;/a&gt; grammar, a &lt;a href=&quot;https://javacc.github.io/javacc/tutorials/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Javacc&lt;/a&gt; grammar.&lt;/p&gt;

&lt;p&gt;I could not find an easy way to introduce the syntax you seek; controlling the production of float literals by adding states quickly became a tangled mess. May be you&apos;ll find a cleaner way.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lc1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-410] JexlFeatures: ctor does not enable all features</title>
                <link>https://issues.apache.org/jira/browse/JEXL-410</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The ctor Javadoc says it &quot;Creates an all-features-enabled instance.&quot;&lt;br/&gt;
However, that is not the case, as several flags are not included:&lt;br/&gt;
REGISTER&lt;br/&gt;
LEXICAL&lt;br/&gt;
LEXICAL_SHADE&lt;br/&gt;
FAT_ARROW&lt;br/&gt;
CONST_CAPTURE&lt;/p&gt;

&lt;p&gt;(RESERVED is also omitted, but it is not a feature flag - it only indicates reservedNames is non-empty)&lt;/p&gt;

&lt;p&gt;If these are intentional omissions, they should be documented as such.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13554455">JEXL-410</key>
            <summary>JexlFeatures: ctor does not enable all features</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2023 19:01:27 +0000</created>
                <updated>Tue, 24 Oct 2023 07:37:49 +0000</updated>
                            <resolved>Tue, 24 Oct 2023 07:37:49 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17776681" author="henrib" created="Wed, 18 Oct 2023 13:34:41 +0000"  >&lt;p&gt;Updated Javadoc in commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/41d6999840bc54ad4b044924060406738337ffeb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;41d6999&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17776765" author="sebb@apache.org" created="Wed, 18 Oct 2023 16:06:18 +0000"  >&lt;p&gt;I think that is the wrong fix.&lt;br/&gt;
I think the original Javadoc should be honoured; that helps with &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-408&quot; title=&quot;Using JexlFeatures is tedious&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-408&quot;&gt;&lt;del&gt;JEXL-408&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="17776819" author="henrib" created="Wed, 18 Oct 2023 17:22:41 +0000"  >
&lt;p&gt;If I solve the way you suggest, it will break scripts that are today in production.&lt;br/&gt;
We should not be breaking backwards (runtime) compatibility for mere convenience.&lt;/p&gt;</comment>
                            <comment id="17776928" author="sebb@apache.org" created="Wed, 18 Oct 2023 22:38:35 +0000"  >&lt;p&gt;It&apos;s not about convenience, it&apos;s about not honouring the Javadoc.&lt;/p&gt;

&lt;p&gt;As to breaking scripts:&lt;br/&gt;
The LEXICAL flags and CONST_CAPTURE appear to be restrictive flags, so could cause failures.&lt;/p&gt;

&lt;p&gt;AFAICT REGISTER and  FAT_ARROW are permissive, so surely cannot cause script failures if enabled?&lt;br/&gt;
Indeed if the related syntax was available before the flags were added, then omitting them from the default can cause failures.&lt;br/&gt;
It looks like the default flag set was updated in the past when new features were added - why was this not done for all new flags?&lt;/p&gt;</comment>
                            <comment id="17777223" author="henrib" created="Thu, 19 Oct 2023 12:00:10 +0000"  >&lt;p&gt;I&apos;d rather correct the Javadoc than break production scripts.&lt;/p&gt;

&lt;p&gt;As to why not changing the default flags (again), even enabling new more permissive ones, this is to avoid breaking upwards syntactic compatibility in a micro release. The known pitfall is the following scenario. To check 3.3.1, one may install it on a dev environment; someone &apos;discovers&apos; new syntactic elements are permitted and starts using them in dev. Scripts are then moved to staging/qa (or even worse, production) environments that are still in 3.3 and failures ensue. Lesson (hard) learnt.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13554452">JEXL-408</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l07s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-409] Disable LEXICAL should disable LEXICAL_SHADE</title>
                <link>https://issues.apache.org/jira/browse/JEXL-409</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The code to enable LEXICAL_SHADE automatically enables LEXICAL.&lt;br/&gt;
However the code to disable LEXICAL does not disable LEXICAL_SHADE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13554454">JEXL-409</key>
            <summary>Disable LEXICAL should disable LEXICAL_SHADE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2023 18:56:27 +0000</created>
                <updated>Wed, 18 Oct 2023 13:34:13 +0000</updated>
                            <resolved>Wed, 18 Oct 2023 13:34:13 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17776679" author="henrib" created="Wed, 18 Oct 2023 13:33:56 +0000"  >&lt;p&gt;Fixed in commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/41d6999840bc54ad4b044924060406738337ffeb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;41d6999&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l07k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-407] Sum of values shows incorrect</title>
                <link>https://issues.apache.org/jira/browse/JEXL-407</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;We are using JEXL expression in our project which is 3.0 version.&lt;/p&gt;

&lt;p&gt;When adding these values&#160;&lt;br/&gt;
&lt;b&gt;99.0 + 7.82 -99.0 -7.82&lt;/b&gt;&lt;br/&gt;
It should be zero but the result we are seeing is &lt;b&gt;-7.105427357601002E-15&lt;/b&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13553423">JEXL-407</key>
            <summary>Sum of values shows incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="hakr">HAKR</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Oct 2023 17:56:28 +0000</created>
                <updated>Tue, 10 Oct 2023 07:30:12 +0000</updated>
                            <resolved>Tue, 10 Oct 2023 07:30:12 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17773583" author="henrib" created="Tue, 10 Oct 2023 07:30:12 +0000"  >&lt;p&gt;As surprising as it may be, the result is coherent with IEEE 754 computations on binary64 (used by most computers nowadays).&lt;/p&gt;

&lt;p&gt;The following test illustrates Java vs JEXL (double) vs JEXL (BigDecimal); none of the 3 will return a 0.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test407() {
  &lt;span class=&quot;code-comment&quot;&gt;// Java version
&lt;/span&gt;  &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; r = 99.0d + 7.82d -99.0d -7.82d;
  Assert.assertEquals(0d, r, 8.e-15); &lt;span class=&quot;code-comment&quot;&gt;// Not zero, IEEE 754
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// jexl
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
  JexlScript script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;a + b - a - b&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;);
  &lt;span class=&quot;code-comment&quot;&gt;// using doubles, same as Java
&lt;/span&gt;  &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; result = (&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 99.0d, 7.82d);
  Assert.assertEquals(0d, result.doubleValue(), 8.e-15);
  &lt;span class=&quot;code-comment&quot;&gt;// using BigdDecimal, more precise, still not zero
&lt;/span&gt;  result = (&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BigDecimal(99.0d), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BigDecimal(7.82d));
  Assert.assertEquals(0d, result.doubleValue(), 3.e-32);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ktuo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-405] Recursive functions corrupt evaluation frame if reassigned</title>
                <link>https://issues.apache.org/jira/browse/JEXL-405</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;This issue stems from the special handling recursive functions. A recursive function is detected when a lambda is created and assigned to a variable and that variable is captured by the lambda. During the assignment, the lambda frame - the captured value for the lambda symbol in that frame - is updated with a reference to the lambda itself. This can only occur after the lambda is created (obviously).&lt;br/&gt;
The code that handles the special case during assignment does not verify that the caller is indeed its creator frame. Thus, if the lambda is assigned to a different variable later on in a different scope, that same code will trash the frame with a reference to the lambda...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13549192">JEXL-405</key>
            <summary>Recursive functions corrupt evaluation frame if reassigned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Aug 2023 18:42:28 +0000</created>
                <updated>Fri, 1 Sep 2023 15:16:14 +0000</updated>
                            <resolved>Thu, 31 Aug 2023 18:08:26 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17761055" author="henrib" created="Thu, 31 Aug 2023 18:08:26 +0000"  >&lt;p&gt;The fix ensures that the lambda frame is only updated during its creation/assignment by checking that the caller&apos;s scope is indeed the lambda&apos;s scope parent.&lt;/p&gt;

&lt;p&gt;Many thanks to VincentB for reporting and analyzing this.&lt;/p&gt;

&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/53eb3dbd42d27ba5411197f024ce9ddf2c1bcca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;53eb3db&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1k3rs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-403] Exception while evaluating template literal used in array assignment in loop.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-403</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; a = {&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;: 1};
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; list = [a, a];
let map1 = {:};
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; item : list) {
&#160; map1[`${item.a}`] = 1;
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The fist iteration is ok, but failed at the second time.&lt;/p&gt;

&lt;p&gt;error stack&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.ClassCastException: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.commons.jexl3.internal.introspection.MapSetExecutor cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.commons.jexl3.internal.TemplateEngine$TemplateExpression (org.apache.commons.jexl3.internal.introspection.MapSetExecutor and org.apache.commons.jexl3.internal.TemplateEngine$TemplateExpression are in unnamed module of loader &lt;span class=&quot;code-quote&quot;&gt;&apos;app&apos;&lt;/span&gt;)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1909)
&#160; &#160; at org.apache.commons.jexl3.parser.ASTJxltLiteral.jjtAccept(ASTJxltLiteral.java:54)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1558)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1319)
&#160; &#160; at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:19)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.visitBlock(Interpreter.java:615)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:594)
&#160; &#160; at org.apache.commons.jexl3.parser.ASTBlock.jjtAccept(ASTBlock.java:35)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.forIterator(Interpreter.java:700)
&#160; &#160; at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:639) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13548812">JEXL-403</key>
            <summary>Exception while evaluating template literal used in array assignment in loop.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Aug 2023 09:39:43 +0000</created>
                <updated>Wed, 30 Aug 2023 00:57:34 +0000</updated>
                            <resolved>Tue, 29 Aug 2023 19:14:55 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17759945" author="henrib" created="Tue, 29 Aug 2023 12:22:58 +0000"  >&lt;p&gt;I must be missing something, so far I&apos;m not reproducing the pb. The following code works correctly on JEXL 3.3 trunk.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/cd3db936723ca8e5c7bf68a62f23f15642ce992a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cd3db9&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test403() {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; a = {&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;: 1};\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; list = [a, a];\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;let map1 = {:};\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; item : list) {\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;  map1[`${item.a}`] = 1;\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;}\n &quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;map1&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
    JexlScript script = jexl.createScript(src);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 2; ++ i) {
      &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(ctxt);
      Assert.assertTrue(result &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Map);
      Map&amp;lt;?, ?&amp;gt; map = (Map&amp;lt;?, ?&amp;gt;) result;
      Assert.assertEquals(1, map.size());
      Assert.assertTrue(map.containsKey(1));
      Assert.assertTrue(map.containsValue(1));
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17759998" author="JIRAUSER294041" created="Tue, 29 Aug 2023 15:20:52 +0000"  >&lt;p&gt;I tried at my side and found the problem is caused by setting cache size &amp;gt; 0.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().cache(100)); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;BTW, I read the comment of this method but not quite understand what is in cache, can you please provide more explanation?&lt;/p&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17760051" author="henrib" created="Tue, 29 Aug 2023 17:25:19 +0000"  >&lt;p&gt;Reproduced the problem with caching enabled.&lt;/p&gt;

&lt;p&gt;The cache is a cache of expressions/scripts keyed by source and valued by the DAG (direct acyclic graph) of AST (abstract syntactic tree) nodes used for interpretation. A lot of those nodes further cache costly interpretation operations in particular solving methods and property accessors, those requiring Java reflection (introspection).&lt;br/&gt;
Calling cache(...) on a JexlBuilder will set the number of entries (scripts, expressions) kept in the engine cache.&lt;/p&gt;

&lt;p&gt;The issue seem to stem from caching a property setter in the wrong node.&lt;/p&gt;</comment>
                            <comment id="17760116" author="henrib" created="Tue, 29 Aug 2023 19:14:55 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/c64ee0df87677b82d062fc4096ed1cb6c5e858a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;c64ee0d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17760176" author="JIRAUSER294041" created="Wed, 30 Aug 2023 00:57:34 +0000"  >&lt;p&gt;great, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1k1fc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-402] parse failed with empty return value.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-402</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
function foo() {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;got exception: parsing error in &apos;{&apos;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;but&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
function foo() {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is ok&lt;/p&gt;</description>
                <environment></environment>
        <key id="13548137">JEXL-402</key>
            <summary>parse failed with empty return value.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2023 05:26:00 +0000</created>
                <updated>Wed, 23 Aug 2023 14:05:59 +0000</updated>
                            <resolved>Tue, 22 Aug 2023 15:38:33 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17757538" author="henrib" created="Tue, 22 Aug 2023 15:38:33 +0000"  >&lt;p&gt;Thanks for raising this issue. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/12c0a9389f413ebdc9024ac7290aff7685df4034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;12c0a9&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17758067" author="JIRAUSER294041" created="Wed, 23 Aug 2023 14:05:59 +0000"  >&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jx9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-400] modify primitive value in lambda/function does not affect original value</title>
                <link>https://issues.apache.org/jira/browse/JEXL-400</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
let count = 0;

function inc() {
  count ++;
  &lt;span class=&quot;code-comment&quot;&gt;// here count is 1
&lt;/span&gt;}

inc();
&lt;span class=&quot;code-comment&quot;&gt;// here count is still 0&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It maybe not a &apos;bug&apos;, just seems making it as a global variable and keep the value consistently&#160; makes more sense.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13542875">JEXL-400</key>
            <summary>modify primitive value in lambda/function does not affect original value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Jul 2023 12:01:31 +0000</created>
                <updated>Mon, 10 Jul 2023 07:14:37 +0000</updated>
                            <resolved>Mon, 10 Jul 2023 07:14:37 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17741478" author="henrib" created="Mon, 10 Jul 2023 07:14:37 +0000"  >&lt;p&gt;Captured local variables in a lambda are copied in the lambda frame; in Java, this are made const/immutable. In JEXL, those copies are not immutable but they still are copies; modifying is local to the lambda lexical scope.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j16o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-397] Dynamic proxy should not require specific permission</title>
                <link>https://issues.apache.org/jira/browse/JEXL-397</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;With the default restricted permissions, dynamic proxies can not be introspected since they extend java.lang.reflect.Proxy whose package is denied.&lt;/p&gt;

&lt;p&gt;A workaround is to explicitly allow them as in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlPermissions p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlPermissions.Delegate(JexlPermissions.RESTRICTED) {
  @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; allow(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; clazz) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Proxy.isProxyClass(clazz) || &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.allow(clazz);
  }
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This workaround should not be necessary.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13534958">JEXL-397</key>
            <summary>Dynamic proxy should not require specific permission</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 May 2023 10:27:03 +0000</created>
                <updated>Fri, 24 May 2024 13:55:34 +0000</updated>
                            <resolved>Thu, 4 May 2023 13:31:21 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17719326" author="henrib" created="Thu, 4 May 2023 13:31:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/46854b60a75fba8ec96066fae6051e38c6fe1245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/46854b60a75fba8ec96066fae6051e38c6fe1245&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1honk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-395] 3.2.1 vs 3.3 hello get property</title>
                <link>https://issues.apache.org/jira/browse/JEXL-395</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;import&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; org.apache.commons.jexl3.JexlBuilder;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;import&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; org.apache.commons.jexl3.JexlContext;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;import&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; org.apache.commons.jexl3.JexlEngine;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;import&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; org.apache.commons.jexl3.JexlExpression;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;import&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; org.apache.commons.jexl3.MapContext;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#3f7f5f&quot;&gt;//works with 3.2.1/ does not work with 3.3&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;class&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; JexlIssue {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;static&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;class&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; Foo {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;text&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;bar&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;static&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &amp;lt;T&amp;gt; T eval(JexlExpression &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;expr&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, JexlContext &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;context&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;return&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(T) &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;expr&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.evaluate(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;context&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;)&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;static&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;void&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; main(String[] &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;args&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;final&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; JexlEngine &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;engine&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;new&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; JexlBuilder().strict(&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;true&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;).lexical(&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;true&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;).silent(&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;false&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;).create();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;final&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; JexlContext &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;context&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;new&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; MapContext();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;final&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; Foo &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;foo&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;new&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; Foo();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;context&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.set(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;foo&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;foo&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; JexlExpression &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;expr&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;engine&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.createExpression(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;foo.text&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;o&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;eval&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;expr&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;context&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;o&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;{color:#000000}}&lt;font color=&quot;&quot;&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
In 3.2.1&lt;br/&gt;
&lt;br/&gt;
prints&lt;br/&gt;
&lt;br/&gt;
bar&lt;br/&gt;
&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;br/&gt;
In 3.3&lt;br/&gt;
&lt;br/&gt;
throws JexlException$Property...&quot;&lt;font color=&quot;#172b4d&quot;&gt;&lt;/font&gt;undefined property &apos;text&apos;&quot;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;/font&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac java 17&lt;/p&gt;</environment>
        <key id="13531655">JEXL-395</key>
            <summary>3.2.1 vs 3.3 hello get property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="mergewreck">mergewreck</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Apr 2023 20:43:10 +0000</created>
                <updated>Fri, 7 Apr 2023 14:10:04 +0000</updated>
                            <resolved>Fri, 7 Apr 2023 14:10:04 +0000</resolved>
                                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17709691" author="henrib" created="Fri, 7 Apr 2023 14:10:04 +0000"  >&lt;p&gt;This is related to the new default permissions scheme described in the &lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/relnotes33.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;release notes&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-381&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JEXL-381&lt;/a&gt;.&lt;br/&gt;
Although inconvenient - apologies again -, the previous behaviour can be reverted easily (see &lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl3/introspection/JexlPermissions.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JexlPermissions&lt;/a&gt;). It might also be an occasion to assess application security and which classes/methods should be accessible through scripts.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h4dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-394] RC1 hides most StringBuilder methods</title>
                <link>https://issues.apache.org/jira/browse/JEXL-394</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems abstract classes methods are often synthetic and/or bridge methods and way more current than what the spec may lead to expect; StringBuilder.setLength(...) for instance is no longer accessible through introspection with latest/RC1 modifications.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13528856">JEXL-394</key>
            <summary>RC1 hides most StringBuilder methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Mar 2023 19:53:42 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Thu, 16 Mar 2023 20:37:57 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17701371" author="henrib" created="Thu, 16 Mar 2023 20:37:57 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Let synthetic/bridge method be visible to classmap&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/b40bbc023bad5be5a7b37ff9fe4dbe0ecb576377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;b40bbc0&lt;/a&gt;&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/398f5cdf121801cc7a0479827ce8e0c8f014491a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;398f5cd&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gn4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-393] const must not be modifiable</title>
                <link>https://issues.apache.org/jira/browse/JEXL-393</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code works with JEXL master (2022-02-21) when it&apos;s not supposed to.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; total = 0;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
  total = 1;
}
total;  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;At the end, this script yields 1 as total constant was treated as a variable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13525657">JEXL-393</key>
            <summary>const must not be modifiable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="hussachai">Hussachai Puripunpinyo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2023 23:59:02 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Fri, 17 Mar 2023 18:04:16 +0000</resolved>
                                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17694670" author="henrib" created="Tue, 28 Feb 2023 18:00:57 +0000"  >&lt;p&gt;Good catch, thanks for the report; the original unit test had a bug (using cont instead of const...). And the solution was a bit more involved than anticipated.&lt;br/&gt;
Determining if a variable is const requires going through the stack of lexical units and eventually follow captured variables in their functional scope. The association between the lexical unit (block, for) and the scope was missing; the parser uses a map to maintain it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/ed41476588a2e28c661394ccf6827185c9a9a65c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/ed41476588a2e28c661394ccf6827185c9a9a65c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17701361" author="henrib" created="Thu, 16 Mar 2023 19:56:48 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; f = ()-&amp;gt;{ &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; foo = 3; foo = 5; }&quot;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;leads to an assignment exception when it shouldn&apos;t.&lt;/p&gt;</comment>
                            <comment id="17701928" author="henrib" created="Fri, 17 Mar 2023 18:04:16 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Stop looking when symbol is declared (const or let/var).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a3fe9a60d2717c409ee5694747a2896b4bc58d56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a3fe9a60&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13442998">JEXL-369</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1g3f4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-388] v3.3-SNAPSHOT doesn&apos;t find public getter as property</title>
                <link>https://issues.apache.org/jira/browse/JEXL-388</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In my &lt;a href=&quot;https://github.com/globalmentor/guise-mummy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy&lt;/a&gt; static site generator I&apos;m using JEXL to interpret the built-in &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/tree/main/mesh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Mesh Expression Language&lt;/a&gt; (MEXL). Everything was working fine with JEXL 3.1. In fact the entire &lt;a href=&quot;https://guise.io/mummy/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy web site&lt;/a&gt; itself was produced using Guise Mummy with MEXL on top of JEXL. But when I upgrade to JEXL 3.3-SNAPSHOT, a couple of unit tests break. In particular, the new version doesn&apos;t seem to find a public getter method on a custom public class as a property.&lt;/p&gt;

&lt;p&gt;In the Mesh templating, we have an &lt;tt&gt;mx:each&lt;/tt&gt; attribute (similar to JSP or Thymeleaf) which loops through and replicates some HTML element (e.g. an &lt;tt&gt;&amp;lt;li&amp;gt;&lt;/tt&gt; inside an &lt;tt&gt;&amp;lt;ul&amp;gt;&lt;/tt&gt;) for each value in a list. It assigns each value, one at a time, to a variable &lt;tt&gt;it&lt;/tt&gt; in the context. That is working fine. But on each iteration it also assigns &lt;tt&gt;iter&lt;/tt&gt; in the context, with the value being an instance of &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/blob/main/mesh/src/main/java/io/guise/mesh/MeshIterator.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;MeshIterator&lt;/tt&gt;&lt;/a&gt;. That object has, among other things, &lt;tt&gt;getCurrent()&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Returns the current item. This will be the result of the last successful call to {@link #next()}.
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; NoSuchElementException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; iteration has not yet started.
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; The current item.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getCurrent() { ... }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To make a long story short, the MEXL expression should be able to use &lt;tt&gt;iter.current&lt;/tt&gt; to get the value, but it&apos;s not finding it. I traced through the new code, and it&apos;s finding the &lt;tt&gt;MeshIterator&lt;/tt&gt; instance just fine and assigning it to &lt;tt&gt;iter&lt;/tt&gt;. The problem is that JEXL&apos;s &lt;tt&gt;ClassMap&lt;/tt&gt; (probably inside &lt;tt&gt;create()&lt;/tt&gt;) is not finding and caching &lt;tt&gt;getCurrent()&lt;/tt&gt; mapped to the &lt;tt&gt;current&lt;/tt&gt; property.&lt;/p&gt;

&lt;p&gt;It looks like &lt;tt&gt;Permissions.allow()&lt;/tt&gt; for method &lt;tt&gt;MeshIterator.getCurrent()&lt;/tt&gt;, is falling through to the end and returning &lt;tt&gt;explicit&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/tt&gt;, which happens to be &lt;tt&gt;false&lt;/tt&gt;. It looks like this comes from &lt;tt&gt;wildcardAllow(Class&amp;lt;?&amp;gt; clazz)&lt;/tt&gt;, which eventually calls &lt;tt&gt;wildcardAllow(Set&amp;lt;String&amp;gt; allowed, String name)&lt;/tt&gt;. There&apos;s what I presume to be a set of allowed packages. Is that new? Do we have to explicitly provide a list of allowed packages for property discovery via reflection now?&lt;/p&gt;

&lt;p&gt;To reproduce this:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Clone &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/releases/tag/v0.5.3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy 0.5.3&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;In the overall project &lt;tt&gt;pom.xml&lt;/tt&gt;, change the version of &lt;tt&gt;org.apache.commons:commons-jexl3&lt;/tt&gt; from &lt;tt&gt;&amp;lt;version&amp;gt;3.1&amp;lt;/version&amp;gt;&lt;/tt&gt; to &lt;tt&gt;&amp;lt;version&amp;gt;3.3-SNAPSHOT&amp;lt;/version&amp;gt;&lt;/tt&gt;. (You&apos;ll also need to add the &lt;tt&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/tt&gt; repository in the POM.)&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean verify&lt;/tt&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;You&apos;ll see that &lt;tt&gt;io.guise.mesh.GuiseMeshTest.testMxEachWithIterVar()&lt;/tt&gt; will fail because &lt;tt&gt;iter.current&lt;/tt&gt; can&apos;t be found.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 17; Windows 10&lt;/p&gt;</environment>
        <key id="13507158">JEXL-388</key>
            <summary>v3.3-SNAPSHOT doesn&apos;t find public getter as property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="garretwilson">Garret Wilson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2022 00:23:43 +0000</created>
                <updated>Fri, 2 Dec 2022 11:34:13 +0000</updated>
                            <resolved>Fri, 2 Dec 2022 11:34:13 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17640643" author="henrib" created="Tue, 29 Nov 2022 12:02:24 +0000"  >&lt;p&gt;Current trunk default is to restrict what JEXL can see using permissions (JexlPermissions).&lt;br/&gt;
To revert to previous (security oblivious) setting:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder() 
     ...permissions(JexlPermissions.UNRESTRICTED) .create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or more globall, before creating the builder:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlBuilder.setDefaultPermissions(JexlPermissions.UNRESTRICTED);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Btw, any comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-342&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JEXL-342&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17641437" author="garretwilson" created="Wed, 30 Nov 2022 16:33:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;&#8230; to restrict what JEXL can see using permissions &#8230;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;On the face of it that sounds reasonable. Where can I find the documentation for this, since this is a breaking change?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Btw, any comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-342&quot; title=&quot;Support for Java Optional.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-342&quot;&gt;JEXL-342&lt;/a&gt;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure what comment you want. That was a feature request that is still open, even though a third party indicated they had added something to a modified fork of the library.&lt;/p&gt;

&lt;p&gt;In any case JEXL is pretty much stuck at the same place it was years ago, since v3.2.1 is completely broken because of &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-387&quot; title=&quot;v3.2.1 breaks with logger-related NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-387&quot;&gt;&lt;del&gt;JEXL-387&lt;/del&gt;&lt;/a&gt;, v3.3 is not released, and &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-387?focusedCommentId=17640302&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17640302&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;there will be no v3.2.2 to fix the bug&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17641473" author="henrib" created="Wed, 30 Nov 2022 18:12:00 +0000"  >&lt;p&gt;Documentation for permissions is in the 3.3 Javadoc which can be generated using &apos;mvn clean install site&apos;.&lt;/p&gt;

&lt;p&gt;Wrt &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-342&quot; title=&quot;Support for Java Optional.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-342&quot;&gt;JEXL-342&lt;/a&gt;, the proposal has been &lt;a href=&quot;https://github.com/apache/commons-jexl/tree/master/src/test/java/org/apache/commons/jexl3/jexl342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; for some time.&lt;/p&gt;

&lt;p&gt;Wrt &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-387&quot; title=&quot;v3.2.1 breaks with logger-related NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-387&quot;&gt;&lt;del&gt;JEXL-387&lt;/del&gt;&lt;/a&gt;, I suspect the Uberspect receives a null logger which ultimately is related to a logging misconfiguration; I&apos;d suggest solving this first, ideally using a dedicated logger (create the Uberspect, pass it to the JexlBuilder).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17642455" author="henrib" created="Fri, 2 Dec 2022 11:34:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/globalmentor/guise-mummy/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/globalmentor/guise-mummy/pull/4&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1cxs0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-387] v3.2.1 breaks with logger-related NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/JEXL-387</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In my &lt;a href=&quot;https://github.com/globalmentor/guise-mummy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy&lt;/a&gt; static site generator I&apos;m using JEXL to interpret the built-in &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/tree/main/mesh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Mesh Expression Language&lt;/a&gt; (MEXL). Everything was working fine with JEXL 3.1. In fact the entire &lt;a href=&quot;https://guise.io/mummy/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy web site&lt;/a&gt; itself was produced using Guise Mummy with MEXL on top of JEXL.&lt;/p&gt;

&lt;p&gt;But when I upgrade to JEXL 3.2.1, the unit tests break. The MEX+JEXL error message says &quot;Error in MEXL expression `foo.bar`: io.guise.mesh.JexlMexlEvaluator.evaluate:93 undefined property &apos;bar&apos;&quot;, but if you look in the stack trace, you&apos;ll see that the problem seems to be a deeper &lt;tt&gt;NullPointerException&lt;/tt&gt; which &lt;tt&gt;InterpreterBase.getAttribute(&#8230;)&lt;/tt&gt; catches and effectively ignores, making it look like the problem was a missing variable.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Exception xany) {
  xcause = xany;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the real problem:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because &quot;log&quot; is null
	at org.apache.commons.jexl3.internal.introspection.ClassMap.populateWithClass(ClassMap.java:296)
	at org.apache.commons.jexl3.internal.introspection.ClassMap.populateWithInterface(ClassMap.java:270)
	at org.apache.commons.jexl3.internal.introspection.ClassMap.create(ClassMap.java:229)
	at org.apache.commons.jexl3.internal.introspection.ClassMap.&amp;lt;init&amp;gt;(ClassMap.java:100)
	at org.apache.commons.jexl3.internal.introspection.Introspector.getMap(Introspector.java:315)
	at org.apache.commons.jexl3.internal.introspection.Introspector.getMethod(Introspector.java:146)
	at org.apache.commons.jexl3.internal.introspection.Introspector.getMethod(Introspector.java:133)
	at org.apache.commons.jexl3.internal.introspection.PropertyGetExecutor.discoverGet(PropertyGetExecutor.java:107)
	at org.apache.commons.jexl3.internal.introspection.PropertyGetExecutor.discover(PropertyGetExecutor.java:42)
	at org.apache.commons.jexl3.internal.introspection.Uberspect.getPropertyGet(Uberspect.java:263)
	at org.apache.commons.jexl3.internal.InterpreterBase.getAttribute(InterpreterBase.java:971)
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1108)
	at org.apache.commons.jexl3.parser.ASTIdentifierAccess.jjtAccept(ASTIdentifierAccess.java:104)
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1156)
	at org.apache.commons.jexl3.parser.ASTReference.jjtAccept(ASTReference.java:19)
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1029)
	at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:58)
	at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:193)
	at org.apache.commons.jexl3.internal.Script.execute(Script.java:188)
	at org.apache.commons.jexl3.internal.Script.evaluate(Script.java:180)
	... 72 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the line in question inside &lt;tt&gt;ClassMap.populateWithClass(ClassMap cache, Permissions permissions, Class&amp;lt;?&amp;gt; clazz, Log log)&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pmi != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; pmi != CACHE_MISS &amp;amp;&amp;amp; log.isDebugEnabled() &amp;amp;&amp;amp; !key.equals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MethodKey(pmi))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For some reason your internal &lt;tt&gt;ClassMap&lt;/tt&gt; class is being passed a &lt;tt&gt;Log&lt;/tt&gt; that is &lt;tt&gt;null&lt;/tt&gt;. Looking up the stack trace, it would appear this is coming from your &lt;tt&gt;Introspector&lt;/tt&gt;. (There is a similar &lt;a href=&quot;https://stackoverflow.com/q/64927054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;error on Stack Overflow&lt;/a&gt; with no answers; I don&apos;t know if they are using JAXL.)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;First, passing the &lt;tt&gt;Log&lt;/tt&gt; around as a parameter is an antipattern. Logging is a cross-cutting concern; passing it around as a parameter is a bad idea.&lt;/li&gt;
	&lt;li&gt;I wish you were using &lt;tt&gt;SLF4J&lt;/tt&gt; like practically everyone else instead of &lt;tt&gt;org.apache.commons.logging&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;You shouldn&apos;t catch &lt;tt&gt;NullPointerException&lt;/tt&gt; and turn it into a &quot;normal&quot; error condition, trying to say that a variable wasn&apos;t defined when really this was an internal error with the library.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In any case, for some reason JEXL 3.2.1 isn&apos;t initializing its internal logging support.&lt;/p&gt;

&lt;p&gt;To reproduce this:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Clone &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/releases/tag/v0.5.3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Guise Mummy 0.5.3&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;In the overall project &lt;tt&gt;pom.xml&lt;/tt&gt;, change the version of &lt;tt&gt;org.apache.commons:commons-jexl3&lt;/tt&gt; from &lt;tt&gt;&amp;lt;version&amp;gt;3.1&amp;lt;/version&amp;gt;&lt;/tt&gt; to &lt;tt&gt;&amp;lt;version&amp;gt;3.2.1&amp;lt;/version&amp;gt;&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Run &lt;tt&gt;mvn clean verify&lt;/tt&gt;.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;Java 17; Windows 10&lt;/p&gt;</environment>
        <key id="13506719">JEXL-387</key>
            <summary>v3.2.1 breaks with logger-related NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="garretwilson">Garret Wilson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Nov 2022 17:41:58 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:03 +0000</updated>
                            <resolved>Fri, 2 Dec 2022 15:40:28 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17640159" author="garretwilson" created="Mon, 28 Nov 2022 17:44:13 +0000"  >&lt;p&gt;To guide you through the project unit test, look in &lt;tt&gt;io.guise.mesh.JexlMexlEvaluatorTest&lt;/tt&gt;. The &quot;MEXL&quot; interfaces are a very thin wrapper around JEXL, just in case Mesh wants to switch to a different expression engine in the future. An example unit test looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shouldRetrieveMapValue() {
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MeshContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultMeshContext();
  context.setVariable(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, Map.of(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;, 123));
  assertThat(JexlMexlEvaluator.INSTANCE.evaluate(context, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo.bar&quot;&lt;/span&gt;), is(123));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can&apos;t get much simpler than that. It works fine in JEXL 3.1, but breaks as described in JEXL 3.2.1.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;JexlMexlEvaluator&lt;/tt&gt; you&apos;ll see we create an instance of &lt;tt&gt;JexlEngine&lt;/tt&gt; using &lt;tt&gt;new JexlBuilder().strategy(RESOLVER_STRATEGY).create()&lt;/tt&gt;, where &lt;tt&gt;RESOLVER_STRATEGY&lt;/tt&gt; is a &lt;tt&gt;JexlUberspect.PropertyResolver&lt;/tt&gt; that knows how to get properties from &lt;a href=&quot;https://urf.io/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;URF&lt;/a&gt;. That&apos;s about all there is. Even those are irrelevant details, as the problem here stems from some internal logger not getting initialized.&lt;/p&gt;

&lt;p&gt;The question is: what did you change with your internal logger that suddenly makes me go through extra steps (as of yet unknown) in order to get it initialized?&lt;/p&gt;</comment>
                            <comment id="17640179" author="garydgregory" created="Mon, 28 Nov 2022 18:28:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garretwilson&quot; class=&quot;user-hover&quot; rel=&quot;garretwilson&quot;&gt;garretwilson&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;What happens when you use 3.3-SNAPSHOT (&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl3/3.3-SNAPSHOT/)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl3/3.3-SNAPSHOT/)&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17640291" author="garretwilson" created="Mon, 28 Nov 2022 23:08:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, switching to the latest v3.3-SNAPSHOT stops the log-related &lt;tt&gt;NullPointerException&lt;/tt&gt;. Most of the unit tests pass now.&lt;/p&gt;

&lt;p&gt;However a couple of other unit tests are now breaking. (Let me know if I should file a separate ticket.) In the Mesh templating, we have an &lt;tt&gt;mx:each&lt;/tt&gt; attribute (similar to JSP or Thymeleaf) which loops through and replicates some HTML element (e.g. an &lt;tt&gt;&amp;lt;li&amp;gt;&lt;/tt&gt; inside an &lt;tt&gt;&amp;lt;ul&amp;gt;&lt;/tt&gt;) for each value in a list. It assigns each value, one at a time, to a variable &lt;tt&gt;it&lt;/tt&gt; in the context. That is working fine. But on each iteration it also assigns &lt;tt&gt;iter&lt;/tt&gt; in the context, with the value being an instance of &lt;a href=&quot;https://github.com/globalmentor/guise-mummy/blob/main/mesh/src/main/java/io/guise/mesh/MeshIterator.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;MeshIterator&lt;/tt&gt;&lt;/a&gt;. That object has, among other things, &lt;tt&gt;getCurrent()&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Returns the current item. This will be the result of the last successful call to {@link #next()}.
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; NoSuchElementException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; iteration has not yet started.
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; The current item.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getCurrent() { ... }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To make a long story short, the MEXL expression should be able to use &lt;tt&gt;iter.current&lt;/tt&gt; to get the value, but it&apos;s not finding it. I traced through the new code, and it&apos;s finding the &lt;tt&gt;MeshIterator&lt;/tt&gt; instance just fine and assigning it to &lt;tt&gt;iter&lt;/tt&gt;. The problem is that JEXL&apos;s &lt;tt&gt;ClassMap&lt;/tt&gt; (probably inside &lt;tt&gt;create()&lt;/tt&gt;) is not finding and caching &lt;tt&gt;getCurrent()&lt;/tt&gt; mapped to the &lt;tt&gt;current&lt;/tt&gt; property.&lt;/p&gt;

&lt;p&gt;This worked fine in earlier versions. You can reproduce it exactly as explained in the description, except using the &lt;tt&gt;-SNAPSHOT&lt;/tt&gt; version you mentioned and running the &lt;tt&gt;GuiseMeshTest.testMxEachWithIterVar()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Did something change in the &lt;tt&gt;-SNAPSHOT&lt;/tt&gt; version that would make it no longer recognize a public &lt;tt&gt;getCurrent()&lt;/tt&gt; method as representing a readable &lt;tt&gt;current&lt;/tt&gt; property?&lt;/p&gt;</comment>
                            <comment id="17640295" author="garretwilson" created="Mon, 28 Nov 2022 23:23:23 +0000"  >&lt;p&gt;It looks like &lt;tt&gt;Permissions.allow()&lt;/tt&gt; for method &lt;tt&gt;MeshIterator.getCurrent()&lt;/tt&gt;, is falling through to the end and returning &lt;tt&gt;explicit&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/tt&gt;, which happens to be &lt;tt&gt;false&lt;/tt&gt;. It looks like this comes from &lt;tt&gt;wildcardAllow(Class&amp;lt;?&amp;gt; clazz)&lt;/tt&gt;, which I&apos;ll have to back and trace through, which is a real pain. Maybe you would know offhand why &lt;tt&gt;wildcardAllow(Class&amp;lt;?&amp;gt; clazz)&lt;/tt&gt; is returning an array starting with &lt;tt&gt;false&lt;/tt&gt; for permissions for a public class with a public getter?&lt;/p&gt;

&lt;p&gt;Oh, I see that in &lt;tt&gt;wildcardAllow(Set&amp;lt;String&amp;gt; allowed, String name)&lt;/tt&gt; there&apos;s what I presume to be a set of allowed packages. Is that new? Where can I find more information about that?&lt;/p&gt;

&lt;p&gt;Coming back to this current ticket, I guess v3.2.1 is just completely broken, huh? Can you release a hotfix? Or will we have to wait until some other version in the future to get off v3.1?&lt;/p&gt;</comment>
                            <comment id="17640302" author="garydgregory" created="Tue, 29 Nov 2022 00:01:58 +0000"  >&lt;p&gt;Since the NPE is resolved in 3.3, then a different issue should be in a new ticket. You&apos;ll have to wait until 3.3 which is the next planned release. There is no &quot;hotfix&quot;.&lt;/p&gt;</comment>
                            <comment id="17642582" author="henrib" created="Fri, 2 Dec 2022 15:40:28 +0000"  >&lt;p&gt;Specifying a logger at JEXL creation time solves the issue.&lt;br/&gt;
&lt;a href=&quot;https://github.com/globalmentor/guise-mummy/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/globalmentor/guise-mummy/pull/5&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1cv2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-386] Non-inheritable permissions on interfaces are ignored in an inheritable sandbox</title>
                <link>https://issues.apache.org/jira/browse/JEXL-386</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hello, I found that if I create an inheritable sandbox with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlSandbox sandbox = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and add an non-inheritable permission on an interface:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sandbox.permission(SomeInterface.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then any object which implemented SomeInterface still gained access to its methods.&lt;/p&gt;

&lt;p&gt;Is this normal?&lt;/p&gt;

&lt;p&gt;I have created a PR on &lt;a href=&quot;https://github.com/apache/commons-jexl/pull/140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/pull/140&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13499693">JEXL-386</key>
            <summary>Non-inheritable permissions on interfaces are ignored in an inheritable sandbox</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="notsyncing">Song Fuchang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2022 14:04:08 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Wed, 16 Nov 2022 17:14:49 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17630444" author="JIRAUSER298196" created="Tue, 8 Nov 2022 14:06:36 +0000"  >&lt;p&gt;but now I think a non-inheritable permission on an interface may be meaningless? I&apos;m not sure. Any ideas?&lt;/p&gt;</comment>
                            <comment id="17630574" author="henrib" created="Tue, 8 Nov 2022 19:09:16 +0000"  >&lt;p&gt;Interesting question... I&apos;ll get to it momentarily.&lt;/p&gt;</comment>
                            <comment id="17630766" author="henrib" created="Wed, 9 Nov 2022 06:11:54 +0000"  >&lt;p&gt;Question remains valid, functionally I&apos;m unsure there is usage for the case.&lt;br/&gt;
Anyhow , determination of inherited permission was wrong (could exit loop with non-null non-inherited permission).&lt;br/&gt;
Incorporated your changes in &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/d73a3c130494f5ce9dafdb2644a98d1bc9abd7dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d73a3c&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17634932" author="henrib" created="Wed, 16 Nov 2022 17:14:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/535e621d827a68e17e274fa34b6cbd7b24ecdccd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/535e621d827a68e17e274fa34b6cbd7b24ecdccd&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1bns0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-383] Inconsistent behavior after overriding toBoolean method in JexlArithmetic</title>
                <link>https://issues.apache.org/jira/browse/JEXL-383</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I tried to overriding &quot;toBoolean&quot; method of JexlArithmetic for &apos;strict&apos; mode.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; toBoolean(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; val) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.toBoolean(val);
  }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;while executing code:&lt;/p&gt;

&lt;p&gt;parameters:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but while executing scripts, the behavior is inconsistent&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (a) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 2;  &lt;span class=&quot;code-comment&quot;&gt;// returns 2
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!a) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 2; &lt;span class=&quot;code-comment&quot;&gt;// expects &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1 but &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; exception: variable &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;what should I do to fix it? thanks!&lt;/p&gt;

&lt;p&gt;-Pengcheng&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13494295">JEXL-383</key>
            <summary>Inconsistent behavior after overriding toBoolean method in JexlArithmetic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xupengcheng">Xu Pengcheng</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2022 10:45:12 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:03 +0000</updated>
                            <resolved>Fri, 4 Nov 2022 16:18:35 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17629075" author="henrib" created="Fri, 4 Nov 2022 16:18:35 +0000"  >&lt;p&gt;Thank you for your issue.&lt;br/&gt;
This has been fixed and implemented through &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-359&quot; title=&quot;Allow per-operator arithmetic handling of null arguments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-359&quot;&gt;&lt;del&gt;JEXL-359&lt;/del&gt;&lt;/a&gt; and is actually being refined in &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-384&quot; title=&quot;Improve control over JexlArithmetic null argument handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-384&quot;&gt;&lt;del&gt;JEXL-384&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Added your test case in the &lt;a href=&quot;https://github.com/apache/commons-jexl/tree/JEXL-384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JEXL-384 branch&lt;/a&gt;. Your JexlArithmetic need to state that the &apos;not&apos; operator is not strict.&lt;/p&gt;</comment>
                            <comment id="17629497" author="JIRAUSER294041" created="Sun, 6 Nov 2022 15:38:33 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;Looks like&#160; isStrict(JexlOperator operator) api of JexlArithmetic is not in 3.2.1, what is the next release time?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1aqgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-378] Incremental operator and decremental operator do not honor the side-effect flag</title>
                <link>https://issues.apache.org/jira/browse/JEXL-378</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I tested the new features (++/&#8211;-) and found that these operators do not honor the side-effect flag. I also have a very straightforward PR for this ticket: &lt;a href=&quot;https://github.com/apache/commons-jexl/pull/111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/pull/111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13477695">JEXL-378</key>
            <summary>Incremental operator and decremental operator do not honor the side-effect flag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="hussachai">Hussachai Puripunpinyo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Aug 2022 05:17:04 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Sun, 21 Aug 2022 08:16:05 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17582496" author="henrib" created="Sun, 21 Aug 2022 08:10:06 +0000"  >&lt;p&gt;Thank you for catching this, solving it and adding tests; much appreciated.&lt;br/&gt;
will merge momentarily.&lt;/p&gt;</comment>
                            <comment id="17582497" author="henrib" created="Sun, 21 Aug 2022 08:16:05 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/45363aaad57a34868bb47d92a99f2315f80301f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;45363aa&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17wo8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-376] Introspector captures methods on non-exported classes (modules, java9+)</title>
                <link>https://issues.apache.org/jira/browse/JEXL-376</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;WHAT:&lt;br/&gt;
When running on Java9+, module encapsulation shields classes from usage even through reflection. The introspector is unfortunately not aware of this leading to unexpected runtime errors.&lt;br/&gt;
Error looks like this:&lt;br/&gt;
&amp;lt;code&amp;gt;&lt;br/&gt;
class org.apache.commons.jexl3.internal.introspection.MethodExecutor cannot access class sun.net.www.protocol.https.HttpsURLConnectionImpl (in module java.base) because module java.base does not export sun.net.www.protocol.https to unnamed module @1e5c7dc&lt;br/&gt;
&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;HOW:&lt;br/&gt;
Through reflection (since we are compiling/releasing on Java8), add a check before introspection in the ClassMap.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13473115">JEXL-376</key>
            <summary>Introspector captures methods on non-exported classes (modules, java9+)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Jul 2022 10:38:32 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:05 +0000</updated>
                            <resolved>Sun, 24 Jul 2022 15:20:38 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17570454" author="henrib" created="Sun, 24 Jul 2022 10:44:48 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a641dc4325a4526c537bf142e2983ef3c3b9ea84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a641dc432&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17570483" author="henrib" created="Sun, 24 Jul 2022 14:27:41 +0000"  >&lt;p&gt;Animal sniffer having issues with MethodHandle(s) ?&lt;/p&gt;</comment>
                            <comment id="17570499" author="henrib" created="Sun, 24 Jul 2022 15:20:38 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/5b86c7cbcdac48682bb1e3e201d2e4def44ff56a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5b86c7cbc&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z174iw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-375] Cannot access enums by their name when using sandbox</title>
                <link>https://issues.apache.org/jira/browse/JEXL-375</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;when using sandbox, accessing enum value via the dot notation fails with an exception `JexlException$Property: JexlTest.addressTypeTest:186 undefined property &apos;DOMICILE&apos;`.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The only workaround I have found was to use the `valueOf` method on the enum.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried tracking down the cause. I believe the issue lies in `SandboxUberspect.getPropertyGet` on line&lt;/p&gt;

&lt;p&gt;`final String actual = sandbox.read(obj.getClass(), property)`&lt;/p&gt;

&lt;p&gt;where obj is the class of the enum, and thus the permission gets read for `Class&amp;lt;Object&amp;gt;` (result of `obj.getClass()`) instead of the enum.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Contrast this to the code in `Uberspect.getPropertyGet` , where it tries to also resolve against `obj`, not only its superclass.&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;executor = FieldGetExecutor.discover(is, claz, property);&lt;br/&gt;
// static class fields (enums included)&lt;br/&gt;
if (obj instanceof Class&amp;lt;?&amp;gt;)&lt;/p&gt;

{ &#160; &#160;executor = FieldGetExecutor.discover(is, (Class&amp;lt;?&amp;gt;) obj, property); }

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is unit test demonstrating this issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addressTypeTest() {
    JexlSandbox jexlSandbox = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    jexlSandbox.allow(Type.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName());

    JexlEngine engine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
            .sandbox(jexlSandbox)
            .create();

    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
    context.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Type&quot;&lt;/span&gt;, Type.class);

    Type typeValueOf = (Type) engine.createScript(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.valueOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;DOMICILE&apos;&lt;/span&gt;);\n&quot;&lt;/span&gt;
    ).execute(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(context));
    assertEquals(Type.DOMICILE, typeValueOf);

    Type typeDirect = (Type) engine.createScript(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.DOMICILE;\n&quot;&lt;/span&gt;
    ).execute(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(context));
    assertEquals(Type.DOMICILE, typeDirect);
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; Type {
    DELIVERY_ADDRESS,
    DOMICILE
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13471333">JEXL-375</key>
            <summary>Cannot access enums by their name when using sandbox</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="klickajan">Jan Kli&#269;ka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jul 2022 06:52:11 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Sun, 24 Jul 2022 14:26:22 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="17570482" author="henrib" created="Sun, 24 Jul 2022 14:26:22 +0000"  >&lt;p&gt;Thanks for the report.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/bec28b3353fa5e158d72bf9c40c5020308e6ae40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bec28b33&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17572287" author="JIRAUSER292727" created="Thu, 28 Jul 2022 07:51:47 +0000"  >&lt;p&gt;Thank you for the fix. Do you know when we can expect release of version 3.3 on maven?&lt;/p&gt;</comment>
                            <comment id="17572332" author="henrib" created="Thu, 28 Jul 2022 08:55:31 +0000"  >&lt;p&gt;I might try to release in second half of August...&lt;/p&gt;</comment>
                            <comment id="17572357" author="JIRAUSER292727" created="Thu, 28 Jul 2022 09:44:23 +0000"  >&lt;p&gt;Ok, thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16tjk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-374] No exception if dereferencing null object using safe(false) and antish(false)</title>
                <link>https://issues.apache.org/jira/browse/JEXL-374</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I create a JexlEngine as follows:&lt;/p&gt;

&lt;p&gt;new JexlBuilder().cache(512).strict(true).silent(false).safe(false).antish(false).create();&lt;/p&gt;

&lt;p&gt;with these options, I expected that if I evaluate an expression like &apos;nested.name&apos; and nested is null, that an exception similar to an NPE will be thrown, instead it returns null, the behaviour I would expected if safe were true.&#160; I also noticed that I can put anything like &apos;foo.name&apos; and it also returns null.&#160; I am including the workaround from &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-370&quot; title=&quot;Cannot check if variable is defined using ObjectContext if the value is null &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-370&quot;&gt;&lt;del&gt;JEXL-370&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a test class to demonstrate the example. Please let me know if any extra info is needed, and as always, thanks for all the great work on Jexl.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13469451">JEXL-374</key>
            <summary>No exception if dereferencing null object using safe(false) and antish(false)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="alex24">Alex</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jun 2022 11:49:02 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Sun, 24 Jul 2022 15:21:54 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17570455" author="henrib" created="Sun, 24 Jul 2022 10:48:38 +0000"  >&lt;p&gt;Stopgap measure.&lt;br/&gt;
Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/4d9a57cdad3fb5f179328a898735cdd1a47091d6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4d9a57c&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17570500" author="henrib" created="Sun, 24 Jul 2022 15:21:54 +0000"  >&lt;p&gt;Not perfect but antish support needs to be rethought.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13046096" name="ObjectContextNullRefTest-1.java" size="1775" author="alex24" created="Thu, 30 Jun 2022 11:48:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16i1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-371] Override of a protected method with public visibility is not callable</title>
                <link>https://issues.apache.org/jira/browse/JEXL-371</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;A protected method with a public override is not visible. &lt;br/&gt;
Example is the clone method (protected) which is public in LinkedList; it should be callable but fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13449386">JEXL-371</key>
            <summary>Override of a protected method with public visibility is not callable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2022 07:17:03 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Sat, 11 Jun 2022 09:58:47 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17553064" author="henrib" created="Sat, 11 Jun 2022 09:58:47 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/25b22b982487b3bc0fb48d08e3622fd93a359cd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;25b22b98&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z134a8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-370] Cannot check if variable is defined using ObjectContext if the value is null </title>
                <link>https://issues.apache.org/jira/browse/JEXL-370</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m migrating from 3.1 to 3.2.1, and I&apos;ve noticed the following change in behaviour when using ObjectContext:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Calling ObjectContext.has(String) for an object which has the given property, but for which the current value is null, returns false, and not true as it did before.&lt;/li&gt;
	&lt;li&gt;Similarly, evaluating an expression which uses a property that is defined but which is null, throws an (&apos;is undefined&apos;) exception rather than returning the null value.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The javadoc for JexlContext.has(String) says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A variable may be defined with a null value; this method checks whether the value is null or if the variable is undefined.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;so my impression is that the behaviour of ObjectContext does not match what is written in the Javadoc  for the JexlContext interface.  It is a problem in my case because the &apos;undefined&apos; exception causes quite a lot of confusion in use.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a test class to demonstrate the example.  Please let me know if any extra info is needed, and thanks for all the great work on Jexl!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13446357">JEXL-370</key>
            <summary>Cannot check if variable is defined using ObjectContext if the value is null </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="ahutton">Alex Hutton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2022 11:36:23 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:01 +0000</updated>
                            <resolved>Wed, 25 May 2022 08:53:45 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17541846" author="henrib" created="Wed, 25 May 2022 06:33:21 +0000"  >&lt;p&gt;Thank you for the report Alex, issue confirmed.&lt;br/&gt;
As a workaround, you can use your own ObjectContext and override the has() method as in the following.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Var370 {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s) {
            name = s;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getName() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name;
        }
    }
    @Test &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test370() {
        Var370 var370 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Var370();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().safe(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
        ObjectContext&amp;lt;Var370&amp;gt; ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;Var370&amp;gt;(jexl, var370) {
            @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; has(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; jexl.getUberspect().getPropertyGet(getObject(), name) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }
        };
        JexlExpression get = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;        var370.setName(&lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;,get.evaluate(ctxt));
        Assert.assertTrue(ctxt.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;        var370.setName(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertNull(get.evaluate(ctxt));
        Assert.assertTrue(ctxt.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17541888" author="JIRAUSER289876" created="Wed, 25 May 2022 08:27:12 +0000"  >&lt;p&gt;Many thanks for the confirmation and suggested workaround Henri.&lt;/p&gt;</comment>
                            <comment id="17541905" author="henrib" created="Wed, 25 May 2022 08:53:45 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/dfc15a7472d0b641a19bc6e69f6bb90690eda4f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dfc15a7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13044060" name="ObjectContextTest.java" size="1715" author="ahutton" created="Mon, 23 May 2022 11:28:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12lpc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-368] Namespace functor resolution is not cached</title>
                <link>https://issues.apache.org/jira/browse/JEXL-368</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;WHAT:&lt;br/&gt;
It appears that when the namespace points to a class, its constructor (wrapped in the JexlMethod) is not cached properly in the corresponding JexlNode. Incidentally, the call to the cached method is wrong too. (Detected through jacoco coverage).&lt;br/&gt;
HOW:&lt;br/&gt;
Cache the method/ctor (as a NamespaceFunctor) in the namespace identifier (the first child), not the method/funcalll node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13442626">JEXL-368</key>
            <summary>Namespace functor resolution is not cached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 Apr 2022 09:24:03 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:01 +0000</updated>
                            <resolved>Wed, 4 May 2022 07:19:52 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17531529" author="henrib" created="Wed, 4 May 2022 07:19:52 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/bb04b40c71f381e8fe1e3b012c91db58010157d0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bb04b40&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11yso:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-364] Evaluator options not propagated in closures</title>
                <link>https://issues.apache.org/jira/browse/JEXL-364</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;WHAT:&lt;br/&gt;
It appears that when using a pragma processor to change the evaluation options during execution, closures or templates (or backquoted strings) do not use the aforementioned options.&lt;br/&gt;
HOW:&lt;br/&gt;
The options lifetime and overall usage workflow needs to be clarified. The options instance need to be captured and used in closures (and template closures).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13433667">JEXL-364</key>
            <summary>Evaluator options not propagated in closures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Mar 2022 15:09:08 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:03 +0000</updated>
                            <resolved>Mon, 14 Mar 2022 15:37:49 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17506295" author="henrib" created="Mon, 14 Mar 2022 15:37:49 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/4b3d1ca57d64655fa6b669d7a9cbe87f494352ee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4b3d1ca&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10gmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-362] JexlInfo position reporting is off</title>
                <link>https://issues.apache.org/jira/browse/JEXL-362</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JexlInfo allows positions with line/column of 0 which is pointless.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13433613">JEXL-362</key>
            <summary>JexlInfo position reporting is off</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Mar 2022 09:22:27 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Mon, 14 Mar 2022 09:24:17 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17506090" author="henrib" created="Mon, 14 Mar 2022 09:24:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/38e1e99a685e8c91fc1acf881fcfd713fa6a9754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/38e1e99a685e8c91fc1acf881fcfd713fa6a9754&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10gao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-361] Null may be used as operand silently even in arithmetic strict(true) mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-361</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It appears null may be used as an operator argument despite arithmetic strictness.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (i &amp;lt; 0) {...}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should fail when arithmetic is strict.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13432462">JEXL-361</key>
            <summary>Null may be used as operand silently even in arithmetic strict(true) mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2022 14:57:39 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:03 +0000</updated>
                            <resolved>Mon, 14 Mar 2022 15:43:45 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17502327" author="henrib" created="Mon, 7 Mar 2022 15:06:57 +0000"  >&lt;p&gt;Unfortunately the culprit is not the arithmetic but the Interpreter(Base) trying to catch errors early. It is doubly unfortunate since fixing the issue results in breaking existing scripts. Need a 3.2 compatibility Engine... &lt;/p&gt;</comment>
                            <comment id="17506302" author="henrib" created="Mon, 14 Mar 2022 15:43:45 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/commons-jexl/blob/45ba71775d7df9762101a36f6894ff4a14425b77/src/test/java/org/apache/commons/jexl3/Issues300Test.java#L652&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test361{a,b,c}_3{2,3}&lt;/a&gt;&#160;illustrate the difference in behaviour between the fix in 3.3 and 3.2. The Engine32 class may be used to &apos;unfix&apos; and recover the previous behaviour with 3.3 - for those apps with lots of scripts that would be too costly to amend.&lt;/p&gt;

&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/d1c0a050e1374f5d7ddf8efba163b11a94a6467e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d1c0a05&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1097s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-358] JexlScript.curry(...) resulting scripts don&apos;t evaluate correctly</title>
                <link>https://issues.apache.org/jira/browse/JEXL-358</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;A script obtained by explicit naming of parameters will not lead to properly evaluated scripts through curry(). Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript base = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; t = x + y + z; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; t&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;z&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlScript script = base.curry(5); 
script.execute(context, 15, 25); &lt;span class=&quot;code-comment&quot;&gt;// leads to an error&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Culprit is evaluation of Closure which are not ASTJexlLambda.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13424996">JEXL-358</key>
            <summary>JexlScript.curry(...) resulting scripts don&apos;t evaluate correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jan 2022 17:57:52 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Wed, 26 Jan 2022 18:01:31 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17482651" author="henrib" created="Wed, 26 Jan 2022 18:01:31 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/0e186325b2ee03dcc3e5d96aafff1f70b276ccd6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;0e18632&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yzfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-356] no exception thrown when a method does not exist</title>
                <link>https://issues.apache.org/jira/browse/JEXL-356</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;this test case fails after upgrading to 3.2 . also fails on 3.2.1&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&#160;
&#160;@Test
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testJexlActionExecutionWithFailureWhenMethodIsNotFound() {
&#160; &#160; &#160; &#160; JexlEngine jexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().silent(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
&#160; &#160;&#160;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// given
&lt;/span&gt;&#160; &#160; &#160; &#160; JexlScript action = jexlEngine.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;person.setBlah(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);&quot;&lt;/span&gt;)
&#160; &#160; &#160; &#160; MapContext mc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
&#160; &#160; &#160; &#160; Person foo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Person(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, 20);
&#160; &#160; &#160; &#160; mc.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;person&quot;&lt;/span&gt;, foo);

&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// when
&lt;/span&gt;&#160; &#160; &#160; &#160; Assertions.assertThatThrownBy(() -&amp;gt; action.execute(mc))
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .isInstanceOf(JexlException.Method.class)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .hasMessage(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.jeasy.rules.jexl.JexlRuleAction.&amp;lt;init&amp;gt;@1:7 unsolvable function/method &lt;span class=&quot;code-quote&quot;&gt;&apos;setBlah&apos;&lt;/span&gt;&quot;&lt;/span&gt;);

&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// then
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// excepted exception
&lt;/span&gt;&#160; &#160; }
&#160; &#160;&#160;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Person {

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age;

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Person(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = name;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.age = age;
&#160; &#160; }
&#160; &#160;&#160;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getName() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name;
&#160; &#160; }

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = name;
&#160; &#160; }

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getAge() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; age;
&#160; &#160; }

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAge(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.age = age;
&#160; &#160; }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13421987">JEXL-356</key>
            <summary>no exception thrown when a method does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="himhim">ai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jan 2022 14:07:01 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Wed, 19 Jan 2022 17:47:11 +0000</resolved>
                                    <version>3.2</version>
                    <version>3.2.1</version>
                                    <fixVersion>3.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17478847" author="henrib" created="Wed, 19 Jan 2022 17:47:11 +0000"  >&lt;p&gt;Hi;&lt;br/&gt;
I believe you are missing setting &apos;safe navigation &apos; to off in your JexlBuilder. (...safe(false).)&lt;br/&gt;
As follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testJexlActionExecutionWithFailureWhenMethodIsNotFound() {
        JexlEngine jexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().silent(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).safe(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
        JexlScript action = jexlEngine.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;person.setBlah(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;person&quot;&lt;/span&gt;);
        Person foo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Person(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, 20);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            action.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, foo);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should have thrown&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(JexlException.Method xm) {
            Assert.assertTrue(xm.getMessage().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;setBlah&quot;&lt;/span&gt;));
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ygww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-355] Conditional operation fails</title>
                <link>https://issues.apache.org/jira/browse/JEXL-355</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m evaluating time interval and I noticed a strange behaviour when, for example, I&apos;ve tried to create an expression like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create().createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;0900 &amp;gt;= 0900&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;this fails with the following message:&#160;&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;org.apache.commons.jexl3.JexlException$Parsing: :2 parsing error in &apos;900&apos;&lt;/cite&gt;&lt;br/&gt;
&lt;cite&gt;&#160; &#160; at org.apache.commons.jexl3.JexlEngine.createExpression(JexlEngine.java:335)&lt;/cite&gt;&lt;br/&gt;
&lt;cite&gt;&#160; &#160; at it.bookingexpert.be.bebeeval.logic.jexl.JexlEvaluator.internalEval(JexlEvaluator.java:39)&lt;/cite&gt;&lt;br/&gt;
&lt;cite&gt;&#160; &#160; ... 27 more&lt;/cite&gt;????&lt;/p&gt;

&lt;p&gt;as well as this one&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create().createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;0800 &amp;gt;= 0800&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;but won&apos;t if I replace {{0800 }}with one of the following&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;0100, 0200, 0300, 0400, 0500, 0600, 0700&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;If I remove the first 0 in all the previous expressions, then everything will work.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13415085">JEXL-355</key>
            <summary>Conditional operation fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="renatopapo">Renato</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Dec 2021 14:51:32 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Fri, 3 Dec 2021 06:46:31 +0000</resolved>
                                    <version>3.1</version>
                    <version>3.2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17452779" author="henrib" created="Fri, 3 Dec 2021 06:46:31 +0000"  >&lt;p&gt;Literals with a leading zero are octal literals, same as Java. Octal numbers can only use digits 0-7, just like decimal can use 0-9, binary can use 0-1 and hexadecimal 0-9,A-F.&lt;br/&gt;
0900 generates a syntax error since 9 is not in the acceptable digit range.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xavk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-354] #pragma does not handle negative integer or real literals</title>
                <link>https://issues.apache.org/jira/browse/JEXL-354</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Using 3.2.1, I get a parse exception on the simple JEXL script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#pragma myInt -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Throws:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.jexl3.JexlException$Parsing: com.example.Test.testMethod:54@1:15 parsing error in &apos;-&apos;
	at app//org.apache.commons.jexl3.JexlEngine.createScript(JexlEngine.java:375)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And similar, also for negative real literals such as &lt;tt&gt;-1.0&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13413930">JEXL-354</key>
            <summary>#pragma does not handle negative integer or real literals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wrprice">William Price</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Nov 2021 03:08:48 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:04 +0000</updated>
                            <resolved>Wed, 1 Dec 2021 09:26:48 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17451652" author="henrib" created="Wed, 1 Dec 2021 09:26:48 +0000"  >&lt;p&gt;Committed revision &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/abd63473c899d98ce8e0f1ea236bc38a63806b3f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;abd6347&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0x3rc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-353] Documentation error for not-in/not-match operator</title>
                <link>https://issues.apache.org/jira/browse/JEXL-353</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/reference/syntax.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache Commons-jexl Reference&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Part&#160;&lt;b&gt;Operators&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Example :&#160;&lt;em&gt;Not-In or Not-Match&lt;/em&gt;{{&lt;em&gt;!~&lt;/em&gt; }}&lt;/p&gt;

&lt;p&gt;When the expression&#160;&lt;font color=&quot;#FF0000&quot;&gt;&lt;em&gt;&lt;b&gt;&quot;a&quot; !~ &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;,&amp;quot;d&amp;quot;,&amp;quot;e&amp;quot;,f&amp;quot;&amp;#93;&lt;/span&gt;&lt;/b&gt;&lt;/em&gt;&lt;/font&gt; is executed,will return &lt;em&gt;&lt;b&gt;false,&lt;/b&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;but now doc is &lt;b&gt;true&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13409573">JEXL-353</key>
            <summary>Documentation error for not-in/not-match operator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="hello2050">Mr.Z</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Nov 2021 02:26:25 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:03 +0000</updated>
                            <resolved>Fri, 3 Dec 2021 06:49:30 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="17437458" author="henrib" created="Tue, 2 Nov 2021 16:21:58 +0000"  >&lt;p&gt;Thanks for pointing out this unedited copy-paste in the documentation.&lt;/p&gt;</comment>
                            <comment id="17452780" author="henrib" created="Fri, 3 Dec 2021 06:49:30 +0000"  >&lt;p&gt;Commit &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/248b71de1c3c5f25b7ec8c7ff87d6cb18b0d1896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;248b71de1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13035580" name="Snipaste_2021-11-02_10-24-40.png" size="47199" author="hello2050" created="Tue, 2 Nov 2021 02:25:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wd14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-352] Possible memory leak regarding parser jjtree nodes in JEXL 3.2</title>
                <link>https://issues.apache.org/jira/browse/JEXL-352</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Our application encountered a memory leak issue after upgrading from JEXL 3.1 to 3.2.&lt;/p&gt;

&lt;p&gt;It seems that every call to JexlEngine createExpression now adds new entries to engine.parser.jjtree.nodes. In our case we suddenly had millions of nodes in this list.&lt;/p&gt;

&lt;p&gt;This sample seems to reproduce the issue&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JexlEngine jexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; testExpression = &lt;span class=&quot;code-quote&quot;&gt;&quot;dummy&quot;&lt;/span&gt;;

jexlEngine.createExpression(testExpression); &lt;span class=&quot;code-comment&quot;&gt;// jexlEngine.parser.jjtree.nodes.size() == 1
&lt;/span&gt;jexlEngine.createExpression(testExpression); &lt;span class=&quot;code-comment&quot;&gt;// jexlEngine.parser.jjtree.nodes.size() == 2&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We currently don&apos;t cache the returned expression and JexlEngine is configured with defaults as shown in the sample.&lt;/p&gt;

&lt;p&gt;Note that calling jexlEngine.clearCache() does not free the nodes.&lt;/p&gt;

&lt;p&gt;Attached screenshot for the hprof of our application with ~ 1.7 million nodes in jjtree.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;JEXL 3.2&lt;/li&gt;
	&lt;li&gt;Java 11&lt;/li&gt;
	&lt;li&gt;Jetty 9.4.41.v20210516&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13383685">JEXL-352</key>
            <summary>Possible memory leak regarding parser jjtree nodes in JEXL 3.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="oyvind.horneland">&#216;yvind Horneland</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2021 08:52:12 +0000</created>
                <updated>Fri, 25 Jun 2021 16:25:06 +0000</updated>
                            <resolved>Thu, 17 Jun 2021 10:19:11 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17364778" author="henrib" created="Thu, 17 Jun 2021 08:16:07 +0000"  >&lt;p&gt;Good catch, thank you.&lt;/p&gt;

&lt;p&gt;jjTreeParserState.java:&lt;br/&gt;
  /* Call this to reinitialize the node stack.  It is called&lt;br/&gt;
     automatically by the parser&apos;s ReInit() method. */&lt;br/&gt;
  public void reset() &lt;/p&gt;
{...}

&lt;p&gt;It appears ReInit() no longer call this method. Probably linked to &lt;a href=&quot;https://github.com/apache/commons-jexl/pull/50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/pull/50&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17364821" author="henrib" created="Thu, 17 Jun 2021 10:19:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/tree/d81b04281cd01b8d656acbda382c856cd57c94b8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/tree/d81b04281cd01b8d656acbda382c856cd57c94b8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17365271" author="oyvind.horneland" created="Fri, 18 Jun 2021 06:35:45 +0000"  >&lt;p&gt;Excellent! Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13026803" name="jexl-engine-hprof.png" size="218144" author="oyvind.horneland" created="Mon, 14 Jun 2021 08:43:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rxf4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-351] JXLT Template fails when using sandboxing</title>
                <link>https://issues.apache.org/jira/browse/JEXL-351</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Regression, total loss of functionality.&lt;/p&gt;

&lt;p&gt;In 3.2:&lt;br/&gt;
When the JEXL engine is built with a custom sandboxing Uberspect that strictly narrows the classes and methods allowed, the TemplateInterpreter methods may end up being in the blocked list. Since the interpreter relies on finding the methods to operate, the whole template silently fails with an empty content.&lt;/p&gt;

&lt;p&gt;The fix is to mimic 3.1, the AST nodes for the jexl:print and jexl:includes calls being interpreted directly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382671">JEXL-351</key>
            <summary>JXLT Template fails when using sandboxing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 09:30:20 +0000</created>
                <updated>Fri, 25 Jun 2021 16:25:05 +0000</updated>
                            <resolved>Tue, 8 Jun 2021 16:30:11 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17359450" author="henrib" created="Tue, 8 Jun 2021 16:30:12 +0000"  >&lt;p&gt;Can not tag it properly (INFRA issue), should be Fixed in 3.2.1.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/tree/04da59b8ca751196e7493d681d52ef21455f9780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/tree/04da59b8ca751196e7493d681d52ef21455f9780&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-349] Script valid in 3.0 no longer valid</title>
                <link>https://issues.apache.org/jira/browse/JEXL-349</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = &lt;span class=&quot;code-quote&quot;&gt;&quot;(A ? B.C : D)&quot;&lt;/span&gt;;
JexlExpression expr = engine.createExpression(text); &lt;span class=&quot;code-comment&quot;&gt;// works at HEAD
&lt;/span&gt;JexlExpression script = engine.createScript(text); &lt;span class=&quot;code-comment&quot;&gt;// does not work&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Both lines above work in 3.0&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381760">JEXL-349</key>
            <summary>Script valid in 3.0 no longer valid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="csamak">Cameron Samak</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 17:43:02 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:54 +0000</updated>
                            <resolved>Thu, 3 Jun 2021 11:40:40 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17355903" author="csamak" created="Wed, 2 Jun 2021 18:14:29 +0000"  >&lt;p&gt;In our case we just need getVariables from JexlScript so forcing it to work with the createScript overload that takes JexlFeatures is enough.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13381553">JEXL-348</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rljs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-348] Parsing error when mixing namespaces with conditional expressions</title>
                <link>https://issues.apache.org/jira/browse/JEXL-348</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;empty(A) ? ns:func() : B&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in an unexpected parse error: 1:22 parsing error in &apos;:&apos;&lt;/p&gt;

&lt;p&gt;Tested at HEAD. This seems like it worked in 3.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381553">JEXL-348</key>
            <summary>Parsing error when mixing namespaces with conditional expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="csamak">Cameron Samak</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jun 2021 21:26:41 +0000</created>
                <updated>Mon, 7 Jun 2021 13:15:00 +0000</updated>
                            <resolved>Thu, 3 Jun 2021 11:40:04 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17355767" author="csamak" created="Wed, 2 Jun 2021 14:25:20 +0000"  >&lt;p&gt;I just read through the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-346&quot; title=&quot;namespace function syntax leads to strange error for &amp;quot;common case&amp;quot; of ternary operator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-346&quot;&gt;&lt;del&gt;JEXL-346&lt;/del&gt;&lt;/a&gt; and I think I understand the issue more now.&lt;/p&gt;

&lt;p&gt;As I understand it, to make this parse the namespaces need to be set directly in JexlBuilder or in JexlFeatures.&lt;/p&gt;

&lt;p&gt;In that case, is this a known breaking change vs 3.0? To clarify:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create().createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;empty(A) ? ns:func() : B&quot;&lt;/span&gt;).evaluate(context);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;works in 3.0 and does not work at HEAD. In 3.0 namespace resolution could happen completely in the JexlContext/JexlContext.NamespaceResolver.&lt;/p&gt;

&lt;p&gt;For our upgrade from 3.0 I think we might be able to collect all possible namespace names upfront, but I&apos;m not sure yet. Alternative workarounds include using multiple engines and predicting more namespaces than necessary (would a namespace predicate in JexlFeatures that always returns true break other things?)&lt;/p&gt;</comment>
                            <comment id="17355851" author="henrib" created="Wed, 2 Jun 2021 16:29:07 +0000"  >&lt;p&gt;My bad, forgot the 3.0 way of dealing with namespace. I&apos;ve been using a property file + builder based engine creation for too long... &lt;/p&gt;</comment>
                            <comment id="17355870" author="henrib" created="Wed, 2 Jun 2021 17:12:12 +0000"  >&lt;p&gt;Added exploration test through :&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/62ed42fcdbd9a754a5349eb6408ee666b78c532e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/62ed42fcdbd9a754a5349eb6408ee666b78c532e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A quick &apos;hack&apos; using a &apos;true&apos; predicate for namespace test in features as default, all tests run. I&apos;ve yet to understand why.&lt;/p&gt;</comment>
                            <comment id="17356352" author="henrib" created="Thu, 3 Jun 2021 11:40:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/263e221a7a71b1b14469d6778b681f5100fa4e81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/263e221a7a71b1b14469d6778b681f5100fa4e81&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The grammar is back to cleaner self where ternary expressions use a simple rule.&lt;br/&gt;
The namespace identifiers and function parts call got a refined lookahead to try and disambiguate the usage of namespaces. Knowledge of local variables and declared namespaces is used to solve ambiguities; in the worst case, a syntactic hint (kludge) uses the fact that spaces between a name and a colon is probably not a namespace identifier...&lt;/p&gt;

&lt;p&gt;Anyhow, this solves the real-life cases and usage.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13379612">JEXL-346</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13381760">JEXL-349</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rka0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-347] Missing unsolvable property exception for reference when used with equals</title>
                <link>https://issues.apache.org/jira/browse/JEXL-347</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I expected &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A.B == 5&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; (with a strict engine and with nothing in the context) to result in an unsolvable property exception, but instead the result was false.&lt;/p&gt;

&lt;p&gt;I hit this as part of an attempt to upgrade from 3.0 to a recent snapshot. I think the change in behavior may be related to the addition of ASTEQNode and ASTNENode to isTernaryProtected?&lt;/p&gt;

&lt;p&gt;Is it intentional that equal and not equal are handled this way when e.g. greater than or less than are not? If so, is there any option flag that can restore the behavior?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380217">JEXL-347</key>
            <summary>Missing unsolvable property exception for reference when used with equals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="csamak">Cameron Samak</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 May 2021 00:55:36 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:55 +0000</updated>
                            <resolved>Mon, 31 May 2021 17:46:08 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17353461" author="henrib" created="Fri, 28 May 2021 17:01:58 +0000"  >&lt;p&gt;Source of the issue is undefined vs null property/variables handling and arithmetic operators. Since arithmetic in strict mode disallows null as arguments, we need an exceptional mechanism for equal and not-equal operators (a == null must be a valid error less statement). The &apos;isTernaryProtected&apos; offered a mitigation but is indeed wrong.&lt;/p&gt;

&lt;p&gt;The proper solution is to determine whether we are evaluating the argument(s) of an arithmetic operator (besides ==/!=) and treat the null vs undefined error accordingly.&lt;/p&gt;</comment>
                            <comment id="17354603" author="henrib" created="Mon, 31 May 2021 17:46:08 +0000"  >&lt;p&gt;Mixed up 2 bug fixes at commit, should have stashed...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/cc963c93c1ded0238f1cb53cea69cfc0fd659b9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/cc963c93c1ded0238f1cb53cea69cfc0fd659b9c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/438bc977beecf51f922f5e02a7dac630911a511d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/438bc977beecf51f922f5e02a7dac630911a511d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rc34:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-336] Escape some control characters</title>
                <link>https://issues.apache.org/jira/browse/JEXL-336</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I found that JEXL doesn&apos;t honor the escape control characters such as \n, \t.&#160;&lt;/p&gt;

&lt;p&gt;To reproduce this is simply evaluate this string &quot;a\t\b&quot; and it will yield &quot;a\t\b&quot; instead of &quot;a&#160; &#160;b&quot;.&lt;/p&gt;

&lt;p&gt;The test code can explain this better. Note that I have to escape twice because one is for Java and another one is for JEXL.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[][] strings = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[][] {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;a\nb\tc&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;a\nb\tc&apos;&lt;/span&gt;&quot;&lt;/span&gt;}, &lt;span class=&quot;code-comment&quot;&gt;// we still honor the actual characters
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;a\nb\tc&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;a\\nb\\tc&apos;&lt;/span&gt;&quot;&lt;/span&gt;},
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;a\nb\tc&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;a\\nb\\tc\&quot;&quot;},
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;\b\t\n\f\r&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;\\b\\t\\n\\f\\r&apos;&lt;/span&gt;&quot;&lt;/span&gt;},
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;hi&apos;&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;\\&apos;&lt;/span&gt;hi\\&apos;&apos;&quot;&lt;/span&gt;},
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;hi\&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;\&lt;span class=&quot;code-quote&quot;&gt;&quot;hi\&quot;&lt;/span&gt;&apos;&lt;/span&gt;&quot;},
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;hi\&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;\&lt;span class=&quot;code-quote&quot;&gt;&quot;hi\&quot;&lt;/span&gt;&apos;&lt;/span&gt;&quot;},
};
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] pair: strings) {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; output = StringParser.buildString(pair[1], &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    Assert.assertEquals(pair[0], output);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This change doesn&apos;t cover all control characters because it won&apos;t be used. I follow the &lt;a href=&quot;http://es5.github.io/x7.html#x7.8.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ES5 JavaScript spec&lt;/a&gt; for the control characters that it supports except \v which Java itself doesn&apos;t support. I don&apos;t think it&apos;s being used that much anyway. Supporting \v is tricky. We can represent it with the unicode value (\u000B) but JEXL is Java and doing that in Java is not possible. Developers have to put the unicode in the String anyway when it&apos;s used in the host language. That&apos;s why \v is not included in the list.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13338265">JEXL-336</key>
            <summary>Escape some control characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="hussachai">Hussachai Puripunpinyo</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Nov 2020 06:30:37 +0000</created>
                <updated>Mon, 7 Jun 2021 13:15:04 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 15:54:58 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17224224" author="hussachai" created="Sun, 1 Nov 2020 06:39:43 +0000"  >&lt;p&gt;The PR: &lt;a href=&quot;https://github.com/apache/commons-jexl/pull/32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/pull/32&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17224613" author="henrib" created="Mon, 2 Nov 2020 11:56:10 +0000"  >&lt;p&gt;Thanks a lot for the bug and the PR; will resolve momentarily.&lt;/p&gt;</comment>
                            <comment id="17224615" author="henrib" created="Mon, 2 Nov 2020 12:03:42 +0000"  >&lt;p&gt;Changeset: 27190455411103ab6a64fb13450075d17a471155&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-11-02 13:03&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-336&quot; title=&quot;Escape some control characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-336&quot;&gt;&lt;del&gt;JEXL-336&lt;/del&gt;&lt;/a&gt;: changes, release notes&lt;/p&gt;</comment>
                            <comment id="17224831" author="hussachai" created="Mon, 2 Nov 2020 17:35:54 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17355723" author="henrib" created="Wed, 2 Jun 2021 13:33:19 +0000"  >&lt;p&gt;Detected regression in JXLT Templates.&lt;/p&gt;</comment>
                            <comment id="17355816" author="henrib" created="Wed, 2 Jun 2021 15:54:58 +0000"  >&lt;p&gt;fixed/reverted behavior of constant template that must not interpret escape characters&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/8c385e3dee534fc497644dc1e8403cb42c668ee7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/8c385e3dee534fc497644dc1e8403cb42c668ee7&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17356985" author="hussachai" created="Fri, 4 Jun 2021 00:30:41 +0000"  >&lt;p&gt;I&apos;m not using JXLT and didn&apos;t know that it&apos;s broken. Sorry and thank you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0k6ps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-331] Please document \uXXXX escape sequence</title>
                <link>https://issues.apache.org/jira/browse/JEXL-331</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;One of my JEXL programmers discovered an undocumented feature of JEXL that they could use the Java-style &lt;tt&gt;\uXXXX&lt;/tt&gt; escape sequence in string literals (this might be &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-22&quot; title=&quot;Allow unicode literals to be used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-22&quot;&gt;&lt;del&gt;JEXL-22&lt;/del&gt;&lt;/a&gt;). This is useful enough to be worth documenting.&lt;/p&gt;

&lt;p&gt;It&apos;s not clear to me if the &lt;tt&gt;\uXXXX&lt;/tt&gt; sequences can only be used within string literals (as in C) or anywhere in a JEXL script (as in Java).&#160; I tried creating a JEXL string literal that used \u0027 instead of a single quote as its delimiter, but it didn&apos;t work, so I suspect this is just for string literals.&lt;/p&gt;

&lt;p&gt;For reference, the escape sequences are documented under &quot;String literals&quot; in syntax.xml like this:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;lt;p&amp;gt;The escape character is &amp;lt;code&amp;gt;\&amp;lt;/code&amp;gt; (backslash); it only escapes the string delimiter&amp;lt;/p&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;By the way, the second clause is not strictly true, since (experimentally) the escape character can also be escaped (this might be &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-98&quot; title=&quot;Quote escaping cannot be escaped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-98&quot;&gt;&lt;del&gt;JEXL-98&lt;/del&gt;&lt;/a&gt;). This might be obvious enough that it doesn&apos;t need to be documented, though.&lt;/p&gt;</description>
                <environment>&lt;p&gt;N/A&lt;/p&gt;</environment>
        <key id="13306568">JEXL-331</key>
            <summary>Please document \uXXXX escape sequence</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 May 2020 18:44:07 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:29 +0000</updated>
                            <resolved>Thu, 28 May 2020 20:11:39 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17119041" author="henrib" created="Thu, 28 May 2020 20:11:39 +0000"  >&lt;p&gt;Changeset: c8fd05a5448581f6388aef27e2866da1b0c4438e&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-05-28 22:10&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-331&quot; title=&quot;Please document \uXXXX escape sequence&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-331&quot;&gt;&lt;del&gt;JEXL-331&lt;/del&gt;&lt;/a&gt;: document unicode escape sequence&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f0o0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-330] JexlException.Parsing.getMessage() throws StringIndexOutOfBoundsException when parse error is in long expression</title>
                <link>https://issues.apache.org/jira/browse/JEXL-330</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL makes some nice diagnostic messages available from &lt;tt&gt;Exception.getMessage()&lt;/tt&gt;. However, in the case where a &lt;tt&gt;JexlException.Parsing&lt;/tt&gt; is thrown in the middle of a long expression,&#160; &lt;tt&gt;getMessage()&lt;/tt&gt; throws a &lt;tt&gt;StringIndexOutOfBoundsException&lt;/tt&gt; instead of returning a nice diagnostic message.&lt;/p&gt;

&lt;p&gt;I encountered this in JEXL 3.1, but have confirmed that it is reproducible using a recent clone of the GitHub repository.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact:&lt;/b&gt;&lt;br/&gt;
In the case where the JEXL programmer includes the badly-formed expression, my program, which uses JEXL, throws an unhanded exception, instead of printing out a clear message to the JEXL programmer.&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Steps to Reproduce:&lt;/b&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testLongParseError() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();

    &lt;span class=&quot;code-comment&quot;&gt;// Extended form of: &lt;span class=&quot;code-quote&quot;&gt;&apos;literal&apos;&lt;/span&gt; + VARIABLE   &lt;span class=&quot;code-quote&quot;&gt;&apos;literal&apos;&lt;/span&gt;
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// missing + &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; here ---------------^
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longExpression = &quot;&quot; + &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;THIS IS A VERY VERY VERY VERY VERY VERY VERY &quot;&lt;/span&gt; + &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;VERY VERY LONG STRING CONCATENATION &lt;span class=&quot;code-quote&quot;&gt;&apos; + VARIABLE &apos;&lt;/span&gt; &amp;lt;--- &quot;&lt;/span&gt; + &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;error: missing + between VARIABLE and literal&apos;&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        jexl.createExpression(longExpression);
        Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;parsing malformed expression did not &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; exception&quot;&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Parsing exception) {
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;???&quot;&lt;/span&gt;, exception.getMessage());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;What Happens:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;createExpression()&lt;/tt&gt; throws a &lt;tt&gt;JexlException.Parsing&lt;/tt&gt;, as expected.&lt;br/&gt;
Calling &lt;tt&gt;getMessage()&lt;/tt&gt; on the resulting &lt;tt&gt;JexlException.Parsing&lt;/tt&gt;, in turn, throws &lt;tt&gt;StringIndexOutOfBoundsException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Result:&lt;/b&gt;&lt;br/&gt;
&lt;tt&gt;getMessage()&lt;/tt&gt; returns a brief description of the syntax error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Technical Details:&lt;/b&gt;&lt;br/&gt;
The problem might be in &lt;tt&gt;JexlException.parseError&lt;/tt&gt;. In the case where the expression is long (in this case, the part after the VARIABLE), it tries to extract a snippet of the error.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parserError(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr) {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = expr.length();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (length &amp;lt; MAX_EXCHARLOC) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; prefix + &lt;span class=&quot;code-quote&quot;&gt;&quot; error in &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + expr + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;&quot;&lt;/span&gt;;
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; begin = info.getColumn(); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;---- column in original expression, not within expr
&lt;/span&gt;                                      &lt;span class=&quot;code-comment&quot;&gt;//        In &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, begin &amp;gt; length
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; end = begin + (MAX_EXCHARLOC / 2);
        begin -= (MAX_EXCHARLOC / 2);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (begin &amp;lt; 0) {
            end -= begin;
            begin = 0;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; prefix + &lt;span class=&quot;code-quote&quot;&gt;&quot; error near &apos;... &quot;&lt;/span&gt;
                + expr.substring(begin, end &amp;gt; length ? length : end) + &lt;span class=&quot;code-quote&quot;&gt;&quot; ...&apos;&quot;&lt;/span&gt;;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, the expression that it&apos;s given is already an extract, not the entire line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&apos; &amp;lt;--- error: missing + between VARIABLE and literal&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;info.getColumn()&lt;/tt&gt; returns an index in the &lt;em&gt;original&lt;/em&gt; expression, which is already already past the end of the &lt;tt&gt;expr&lt;/tt&gt;.&#160; So when &lt;tt&gt;JexlException.parseError&lt;/tt&gt; invokes &lt;tt&gt;expr.substring()&lt;/tt&gt;, it throws &lt;tt&gt;StringIndexOutOfBoundsException&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13296542">JEXL-330</key>
            <summary>JexlException.Parsing.getMessage() throws StringIndexOutOfBoundsException when parse error is in long expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Apr 2020 15:24:09 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:34 +0000</updated>
                            <resolved>Wed, 8 Apr 2020 11:02:17 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17077983" author="henrib" created="Wed, 8 Apr 2020 09:20:06 +0000"  >&lt;p&gt;Thanks for reporting this issue with such precision.&lt;/p&gt;</comment>
                            <comment id="17078069" author="henrib" created="Wed, 8 Apr 2020 11:02:17 +0000"  >&lt;p&gt;Changeset: 1c2bdb466698e7dd7173c8ac52432188401f8296&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-04-08 13:01&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-330&quot; title=&quot;JexlException.Parsing.getMessage() throws StringIndexOutOfBoundsException when parse error is in long expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-330&quot;&gt;&lt;del&gt;JEXL-330&lt;/del&gt;&lt;/a&gt;: use source in parsing error reporting&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dbp4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-329] Uberspect may loose its Classloader</title>
                <link>https://issues.apache.org/jira/browse/JEXL-329</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In the current implementation Uberspect keeps references to its Introspector and ClassLoader via SoftReference. This means that when memory is short it can loose not only Introspector reference, which is OK, but also ClassLoader that was specified for resolving constructors, which looks like a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13295568">JEXL-329</key>
            <summary>Uberspect may loose its Classloader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Apr 2020 15:51:18 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:03 +0000</updated>
                            <resolved>Wed, 1 Apr 2020 16:37:51 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17072949" author="henrib" created="Wed, 1 Apr 2020 16:37:51 +0000"  >&lt;p&gt;The soft reference may only be cleared if the class loader becomes softly referenced which implies that no instance of any class loaded through it is strongly referenced.&lt;br/&gt;
See ClassCreatorTest.testMany().&lt;/p&gt;

&lt;p&gt;Beside the theory, I&apos;ve (unfortunately) seen OOM occur &lt;del&gt;in production&lt;/del&gt; but &lt;b&gt;never&lt;/b&gt; seen JEXL loose its class loader. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17076258" author="dmitri_blinov" created="Mon, 6 Apr 2020 11:28:58 +0000"  >&lt;p&gt;We supply JexlUberspect with our classloader to be able to create our classes in the future, so its possible for a classloader not to have any instances of the classes for the moment, so to be softly referenced, but that doesn&#8217;t mean we are ready to throw it away, right?&#160;&lt;/p&gt;



&lt;p&gt;While I can somehow provide that my custom classloader is Hard-referenced from application to prevent its unloading, I dont understand what is the idea behind keeping classloader via softreference in uberpect? What is the use-case for it?&lt;/p&gt;</comment>
                            <comment id="17080644" author="henrib" created="Fri, 10 Apr 2020 17:15:11 +0000"  >&lt;p&gt;As much as possible, JEXL tries to be a good platform - and memory -  citizen even wrt class loading by keeping the exterior world softly reachable .&lt;/p&gt;

&lt;p&gt;The customary contract when supplying a class loader to JEXL is that its lifecycle is  under &lt;b&gt;your&lt;/b&gt; control; JEXL is definitely &lt;b&gt;not&lt;/b&gt; the owner of any class loader - considered as a system/provided resource - , it merely references it and uses it in a unobtrusive way so you can change it. This still does seem like proper behavior.&lt;/p&gt;

&lt;p&gt;If you ever need to change the class loader instance, you call JexlEngine.setClassLoader and JEXL will not preclude the now old version to be GCed along its loaded classes. The script cache is cleared and it is also soft ref-ed for the same reason.&lt;br/&gt;
Furthermore, scripts instances themselves detect class loader changes (when it differs from the Uberspect&apos;s version) in which case their cached Jexl(Getter,Setter,Method,...) are cleared and re-introspection through new class loader performed; useful when JexlScript themselves are made members of other classes. &lt;/p&gt;

&lt;p&gt;Since the Uberspect can be used on its own, it follows the same unobtrusive access to your provided class loader so soft ref it is. And since the Introspector is also soft ref-ed (it caches a lot of info), it may be necessary to recreate it which requires the class loader held by the Uberspect.&lt;/p&gt;

&lt;p&gt;This has been used to implement automatic reloading of JEXL namespace libraries in a (closed source) server. (thread owning a watch service on a directory used to instantiate a class loader on that directory, JEXL using that class loader). And this soft-referencing as proved efficient at avoiding class loading memory leaks.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0d680:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-328] JXLT template scripts evaluation do not process pragmas</title>
                <link>https://issues.apache.org/jira/browse/JEXL-328</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;If a template defines a pragma, it is never processed.&lt;br/&gt;
The same code in a JEXL script gets its pragma processed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13289493">JEXL-328</key>
            <summary>JXLT template scripts evaluation do not process pragmas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2020 10:54:40 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:57 +0000</updated>
                            <resolved>Wed, 4 Mar 2020 16:46:07 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17051405" author="henrib" created="Wed, 4 Mar 2020 16:46:07 +0000"  >&lt;p&gt;Changeset: 8e4f41de2f8407bc3b9e42bbbac7749944c1d538&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-03-04 17:44&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-328&quot; title=&quot;JXLT template scripts evaluation do not process pragmas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-328&quot;&gt;&lt;del&gt;JEXL-328&lt;/del&gt;&lt;/a&gt;: ensure creation of options before evaluation do call pragma processing, added tests&lt;/p&gt;</comment>
                            <comment id="17077922" author="henrib" created="Wed, 8 Apr 2020 07:54:23 +0000"  >&lt;p&gt;Changeset: 27910a286c11313e62a71454dc6801b5e8fc712f&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-04-08 09:53&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-328&quot; title=&quot;JXLT template scripts evaluation do not process pragmas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-328&quot;&gt;&lt;del&gt;JEXL-328&lt;/del&gt;&lt;/a&gt;: updated test&lt;/p&gt;</comment>
                            <comment id="17078483" author="henrib" created="Wed, 8 Apr 2020 16:50:52 +0000"  >&lt;p&gt;Changeset: 01e1ae7557ef36cc12a1dce0d7eb403658c4ce74&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-04-08 18:32&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-328&quot; title=&quot;JXLT template scripts evaluation do not process pragmas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-328&quot;&gt;&lt;del&gt;JEXL-328&lt;/del&gt;&lt;/a&gt;: force lexical/lexicalShade from features to options&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c5eg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-327] map[null] does not work in assignment context</title>
                <link>https://issues.apache.org/jira/browse/JEXL-327</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In JEXL, you can create a map with a null key by using a map literal and you can get the value associated with a null key.&#160; However,&#160; you can&apos;t assign a value to a null key, as in&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
map[&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;] = &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This asymmetry is weird and might be an oversight.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This has not blocked us from doing anything, so &lt;b&gt;the impact nearly zero&lt;/b&gt;.&#160; It&apos;s something I found while writing unit tests for my application, but it does not impact my users.&#160; I&apos;m mostly reporting it as a &quot;language weirdness&quot;, in case the JEXL developers care.&lt;/p&gt;

&lt;p&gt;That said, we &lt;em&gt;do&lt;/em&gt; use null keys in maps.&#160; In my domain (working with data from clinical trials), a null numeric value means &quot;missing&quot;, which is a valid value.&#160; Our JEXL programmers implement &quot;switch&quot; statements using a map, so you might see an expression that translates a coded variable named &quot;DMSEX&quot; into an English description like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
   &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Unknown&quot;&lt;/span&gt;,
   1    : &lt;span class=&quot;code-quote&quot;&gt;&quot;MALE&quot;&lt;/span&gt;,
   2    : &lt;span class=&quot;code-quote&quot;&gt;&quot;FEMALE&quot;&lt;/span&gt;
}[DMSEX]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Fortunately, this works as expected.&#160; This bug only prevents us from building the lookup map programmatically, but we prefer using a literal, anyway.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to Reproduce:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSetNullKey() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
    JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
    JexlExpression expression1 = jexl.createExpression(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;(function () {\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; map = {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;};\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;  map[&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;] = &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;;\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; map[&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;];\n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;})()&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// JEXL 3.1, &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JexlException$Property &lt;span class=&quot;code-quote&quot;&gt;&quot;unsolvable property &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;?&amp;gt;.&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;gt;&apos;&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// JEXL 3.2, &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JexlException$Property &lt;span class=&quot;code-quote&quot;&gt;&quot;undefined property &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;?&amp;gt;.&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;gt;&apos;&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1 = expression1.evaluate(jc);
    Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;, o1);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;What Happens:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;JEXL throws a JexlException.Property exception when it tries to evaluate &quot;&lt;tt&gt;map&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; = &apos;bar&apos;&lt;/tt&gt;&quot;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Result:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&quot;&lt;tt&gt;map&lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; = &apos;bar&apos;&lt;/tt&gt;&quot; changes the null key&apos;s value from &quot;foo&quot; to &quot;bar&quot; and the function returns &quot;bar&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13282048">JEXL-327</key>
            <summary>map[null] does not work in assignment context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2020 20:29:37 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:17 +0000</updated>
                            <resolved>Wed, 29 Jan 2020 16:59:52 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17026037" author="henrib" created="Wed, 29 Jan 2020 16:59:52 +0000"  >&lt;p&gt;Changeset: ef8a3e3435e2948b2afd7972901eac5a45721b19&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-29 17:57&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-323&quot; title=&quot;Ant-style variables can throw exception when evaluated for their value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-323&quot;&gt;&lt;del&gt;JEXL-323&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-327&quot; title=&quot;map[null] does not work in assignment context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-327&quot;&gt;&lt;del&gt;JEXL-327&lt;/del&gt;&lt;/a&gt;: fixed error reporting an null checks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ay2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-326] Link to &quot;JavaCC&quot; on syntax reference page is broken</title>
                <link>https://issues.apache.org/jira/browse/JEXL-326</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The JEXL syntax reference page at &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/reference/syntax.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/reference/syntax.html&lt;/a&gt; has a broken link to JavaCC:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;For more technical information about the JEXL Grammar, you can find the &lt;a href=&quot;https://javacc.dev.java.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JavaCC&lt;/a&gt; grammar for JEXL here: &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl3/parser/Parser.jjt?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Parser.jjt.&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It looks like the Parse.jjt link has already been fixed in GitHub, but the JavaCC link is still broken.&#160; I suggest changing&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://javacc.dev.java.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://javacc.dev.java.net/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://javacc.github.io/javacc/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://javacc.github.io/javacc/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281987">JEXL-326</key>
            <summary>Link to &quot;JavaCC&quot; on syntax reference page is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2020 16:37:24 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:27 +0000</updated>
                            <resolved>Tue, 28 Jan 2020 18:32:22 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17025360" author="henrib" created="Tue, 28 Jan 2020 18:32:22 +0000"  >&lt;p&gt;Changeset: 69f4bcc3802ed0b0bcda5e91d45d0ce372c3d1c1&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-28 19:30&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-326&quot; title=&quot;Link to &amp;quot;JavaCC&amp;quot; on syntax reference page is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-326&quot;&gt;&lt;del&gt;JEXL-326&lt;/del&gt;&lt;/a&gt;: fixed javacc project link&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0axp4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-325] Potential race-condition in NumberParser.toString()</title>
                <link>https://issues.apache.org/jira/browse/JEXL-325</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;To format &lt;tt&gt;BigDecimal&lt;/tt&gt; values the current implementation uses &lt;b&gt;static&lt;/b&gt; instance of &lt;tt&gt;DecimalFormat&lt;/tt&gt; class without synchronization, whereas according to Java doc Decimal formats are not synchronized and must be synchronized externally. There is also a dead branch on BigDecimal check. The suggestion is to change NumberParser.to String() to something as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (literal == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || clazz == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.isNaN(literal.doubleValue())) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;NaN&quot;&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigDecimal.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;equals(clazz)) {
            &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (BIGDF) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; BIGDF.format(literal);
            }
        }
        StringBuilder strb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder(literal.toString());
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;equals(clazz)) {
            strb.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;equals(clazz)) {
            strb.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;d&apos;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigInteger.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;equals(clazz)) {
            strb.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;h&apos;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;equals(clazz)) {
            strb.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;l&apos;&lt;/span&gt;);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; strb.toString();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13281877">JEXL-325</key>
            <summary>Potential race-condition in NumberParser.toString()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2020 08:28:44 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:42 +0000</updated>
                            <resolved>Tue, 28 Jan 2020 15:44:21 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17025189" author="henrib" created="Tue, 28 Jan 2020 15:00:18 +0000"  >&lt;p&gt;Low potentiality of occurence but needs to be fixed.&lt;/p&gt;</comment>
                            <comment id="17025229" author="henrib" created="Tue, 28 Jan 2020 15:44:21 +0000"  >&lt;p&gt;Changeset: c591d00af08b1bff8642e047c12e5c10c76428f3&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-28 16:43&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-325&quot; title=&quot;Potential race-condition in NumberParser.toString()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-325&quot;&gt;&lt;del&gt;JEXL-325&lt;/del&gt;&lt;/a&gt;: fixed potential concurrent execution pb&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ax0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-324] JexlEngine.createExpression(&quot;new()&quot;).getParsedText() throws NPE</title>
                <link>https://issues.apache.org/jira/browse/JEXL-324</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL is able to parse the expression &quot;new()&quot;, but some parts of the system do not expect this.&#160; Specifically, if you try to get the parsed text, JEXL throws a NullPointerException instead of returning &quot;new()&quot;.&lt;/p&gt;

&lt;p&gt;I expect &lt;tt&gt;JexlExpression.getParsedText()&lt;/tt&gt; to return a String&#160; for any expression that was successfully parsed. So either &lt;tt&gt;createExpression()&lt;/tt&gt; should throw an exception or &lt;tt&gt;getParsedText()&lt;/tt&gt; should return &quot;new()&quot;.&#160; My preference is for &lt;tt&gt;createExpression()&lt;/tt&gt; to fail and I&apos;ll try to submit a PR for this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact:&lt;/b&gt;&lt;br/&gt;
My program tries to fail fast with a clear error message when a user attempts to &quot;register&quot; a function using a reserved name (function registration happens outside of JEXL and is implemented by populating a JexlContext with a parsed expression). My program does this by probing for valid function names by parsing &lt;tt&gt;&lt;em&gt;FUNCTION_NAME&lt;/em&gt;+&quot;()&quot;&lt;/tt&gt; and checking for errors.&#160; Since &quot;new()&quot; is a legal expression, my program has a special case to disallow &quot;new&quot;.&#160; If &lt;tt&gt;createExpression(&quot;new()&quot;)&lt;/tt&gt; threw an exception, then I could remove the special case.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to Reproduce:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNew() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            JexlExpression expression = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;()&quot;&lt;/span&gt;);
            Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;()&quot;&lt;/span&gt;, expression.getParsedText());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Parsing exception) {
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;What Happens:&lt;/b&gt;&lt;br/&gt;
&lt;tt&gt;getParsedText()&lt;/tt&gt; throws a &lt;tt&gt;NullPointerException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Result:&lt;/b&gt;&lt;br/&gt;
Either &lt;tt&gt;JexlEngine.createExpression()&lt;/tt&gt; throws a &lt;tt&gt;JexlException.Parsing&lt;/tt&gt; or &lt;tt&gt;expression.getParsedText()&lt;/tt&gt; returns &quot;new()&quot;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;br/&gt;
This was found on JEXL 3.1, the latest official release. I reproduced it on a snapshot of JEXL 3.2 built from GitHub source.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281798">JEXL-324</key>
            <summary>JexlEngine.createExpression(&quot;new()&quot;).getParsedText() throws NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2020 20:35:01 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:33 +0000</updated>
                            <resolved>Mon, 27 Jan 2020 21:49:25 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17024689" author="henrib" created="Mon, 27 Jan 2020 21:49:25 +0000"  >&lt;p&gt;Changeset: 9dab666d3ecb09fc9ab2e9acd9486ac066e888c8&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-27 22:48&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-324&quot; title=&quot;JexlEngine.createExpression(&amp;quot;new()&amp;quot;).getParsedText() throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-324&quot;&gt;&lt;del&gt;JEXL-324&lt;/del&gt;&lt;/a&gt;: fixed grammar for new(arg, ...), made one arg mandatory&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fixed debugger (belt and suspenders)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17025023" author="henrib" created="Tue, 28 Jan 2020 10:29:26 +0000"  >&lt;p&gt;Changeset: 1a304ae037c278ce2204989ecfdddf9ac449638c&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-28 11:26&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-324&quot; title=&quot;JexlEngine.createExpression(&amp;quot;new()&amp;quot;).getParsedText() throws NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-324&quot;&gt;&lt;del&gt;JEXL-324&lt;/del&gt;&lt;/a&gt;: refining parsing error reporting&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0awj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-323] Ant-style variables can throw exception when evaluated for their value</title>
                <link>https://issues.apache.org/jira/browse/JEXL-323</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When try to evaluate an expression that is the name of a variable and the value is null, I get the value null. This is good. However, when I do the same thing with an ant-style variable name, a JexlException$Variable is thrown claiming that the variable is null. I think this is a bug because I would expect all variables to behave the same, regardless of their name.&lt;/p&gt;

&lt;p&gt;The reason for this behavior is evident in Interpreter.visit() and InterpreterBase.unsolvableVariable().&#160; There is already special-case logic to detect when an ant variable is null versus when it&apos;s undefined, and this information is given to unsolvableVariable(), but it still throws an exception.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (object == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !isTernaryProtected(node)) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (antish &amp;amp;&amp;amp; ant != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// V--- NOTE: context.has() returns &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, so undefined is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; undefined = !(context.has(ant.toString()) || isLocalVariable(node, 0));
            &lt;span class=&quot;code-comment&quot;&gt;// variable unknown in context and not a local
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; unsolvableVariable(node, ant.toString(), undefined); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;-- still &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; exception
&lt;/span&gt;        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!pty) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; unsolvableProperty(node, &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;gt;.&amp;lt;?&amp;gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        }
    }
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In in unsolvableVariable():&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; unsolvableVariable(JexlNode node, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; undef) {
    &lt;span class=&quot;code-comment&quot;&gt;// V-- NOTE: both my engine and arithmetic are strict, so &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; evaluates to &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isStrictEngine() &amp;amp;&amp;amp; (undef || arithmetic.isStrict())) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlException.Variable(node, &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;, undef);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logger.isDebugEnabled()) {
        logger.debug(JexlException.variableError(node, &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;, undef));
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;StepstoReproduce%3A&quot;&gt;&lt;/a&gt;Steps to Reproduce:&lt;/h3&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNullAntVariable() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-comment&quot;&gt;// Create or retrieve an engine
&lt;/span&gt;    JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
    &lt;span class=&quot;code-comment&quot;&gt;// on recent code: JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().safe(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
&lt;/span&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Populate to identical global variables
&lt;/span&gt;    JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;NormalVariable&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;ant.variable&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// Evaluate the value of the normal variable
&lt;/span&gt;    JexlExpression expression1 = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;NormalVariable&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1 = expression1.evaluate(jc);
    Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, o1);

    &lt;span class=&quot;code-comment&quot;&gt;// Evaluate the value of the ant-style variable
&lt;/span&gt;    JexlExpression expression2 = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;ant.variable&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2 = expression2.evaluate(jc); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;-- BUG: &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; exception instead of returning &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;    Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, o2);
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;WhatHappens%3A&quot;&gt;&lt;/a&gt;What Happens:&lt;/h3&gt;

&lt;p&gt;&quot;expression2.evaluate(jc)&quot; throws an JexlException$Variable exception with text like &quot;variable &apos;ant.variable&apos; is null&quot;.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;ExpectedResult%3A&quot;&gt;&lt;/a&gt;Expected Result:&lt;/h3&gt;

&lt;p&gt;expression2.evaluate(jc) returns the value of &apos;ant.variable&apos;, which is null.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;%C2%A0&quot;&gt;&lt;/a&gt;&#160;&lt;/h3&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;p&gt;This was found on JEXL 3.1, the latest official release. I reproduced it on a snapshot of JEXL 3.2 built from github source, but had to disable &quot;safe&quot;.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;%C2%A0&quot;&gt;&lt;/a&gt;&#160;&lt;/h3&gt;

&lt;p&gt;Impact:&lt;/p&gt;

&lt;p&gt;My organization uses JEXL to build datasets for clinical trials. In our domain, it&apos;s very common to have an expression that is simply the name of a variable whose value is desired. In our domain, we want any sloppy expressions to be a hard error, so we we use strict engines and will use &quot;safe=false&quot; when we update to JEXL 3.2. In our domain, &quot;null&quot; has a specific meaning (it means &quot;missing&quot;).&#160; A missing value is distinct from an &quot;undefined variable&quot;, which is always an error to reference. Because of this bug, we had to ban using &quot;.&quot; in names of &quot;global&quot; variables (variables populated in the JexlContext).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281766">JEXL-323</key>
            <summary>Ant-style variables can throw exception when evaluated for their value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jan 2020 17:27:42 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:41 +0000</updated>
                            <resolved>Wed, 29 Jan 2020 17:14:29 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17024573" author="henrib" created="Mon, 27 Jan 2020 18:53:43 +0000"  >&lt;p&gt;Thank for a clear case and some background.&lt;/p&gt;

&lt;p&gt;The &apos;safe&apos; flag has been introduced to mitigate several bugs where JEXL(3.1) was not hard failing on nulls when it should have. Unfortunately, this bug has been exploited as a &apos;safe navigation&apos; feature (ie return null as soon as evaluation fails on a null), thus the introduction of the &apos;safe&apos; flag enabling backwards compatibility.&lt;/p&gt;

&lt;p&gt;In 3.2, default scripting behaviour should be &apos;safe&apos; disabled (and &apos;lexical&apos; and &apos;lexicalShade&apos; enabled). &lt;/p&gt;</comment>
                            <comment id="17025163" author="david_costanzo" created="Tue, 28 Jan 2020 14:33:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;The &apos;safe&apos; flag has been introduced to mitigate several bugs where JEXL(3.1) was not hard failing on nulls when it should have.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Glad to hear it.&#160;&#160; For my purpose, I want JEXL to hard fail on nulls unless the JEXL programmer explicitly handles null.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;In 3.2, default scripting behaviour should be &apos;safe&apos; disabled (and &apos;lexical&apos; and &apos;lexicalShade&apos; enabled).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I build the JexlEngine using JexlBuilder and see opposite for the defaults.&#160; If I understand the code, this comes from &lt;tt&gt;JexlOptions.DEFAULT&lt;/tt&gt;.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; DEFAULT = 1 &lt;span class=&quot;code-comment&quot;&gt;/*&amp;lt;&amp;lt; CANCELLABLE*/&lt;/span&gt; | 1 &amp;lt;&amp;lt; STRICT | 1 &amp;lt;&amp;lt; ANTISH | 1 &amp;lt;&amp;lt; SAFE;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Programmatically, each of the following tests fail:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Assert.assertTrue(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().lexical());
Assert.assertTrue(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().lexicalShade());
Assert.assertFalse(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().safe());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Have I misunderstood the API?&#160; Am I building from the wrong branch?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To reproduce the problem mentioned in this ticket on 3.2, I had to explicitly call &quot;safe(false)&quot; on my JexlBuilder (see the commented out &quot;// on recent code&quot;).&#160; Without this, &lt;tt&gt;testNullAntVariable()&lt;/tt&gt; passes on 3.2 (the bug is not reproducible).&#160; I assumed this was because the &quot;null&quot; value returned was &lt;b&gt;not&lt;/b&gt; from the value of &quot;ant.variable&quot;, but instead because the ant-style variable name &quot;ant.variable&quot; was re-interpreted as a property access &quot;ant.getVariable()&quot; and since &quot;ant&quot; is missing, safe browsing would say &quot;ant.getVariable()&quot; is null.&lt;/p&gt;</comment>
                            <comment id="17026050" author="henrib" created="Wed, 29 Jan 2020 17:13:56 +0000"  >&lt;p&gt;About the default flags, I&apos;m sorry for the confusion.&lt;br/&gt;
 As stated in JexlOptions.setDefaultFlags(...) javadoc, JEXL builders should be explicit and not rely on default flags since those may change with versions (sic). That static method (setDefaultFlags) - called by JexlTestCase - ensures some default flags but this is pretty fragile.&lt;br/&gt;
 Before you create the builder, If you call:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
        JexlOptions.setDefaultFlags(&lt;span class=&quot;code-quote&quot;&gt;&quot;-safe&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;+lexical&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;+lexicalShade&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The 3 asserts on builder should succeed; again though, brittle. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17026051" author="henrib" created="Wed, 29 Jan 2020 17:14:29 +0000"  >&lt;p&gt;Changeset: ef8a3e3435e2948b2afd7972901eac5a45721b19&lt;br/&gt;
Author: henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date: 2020-01-29 17:57&lt;br/&gt;
Message: &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-323&quot; title=&quot;Ant-style variables can throw exception when evaluated for their value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-323&quot;&gt;&lt;del&gt;JEXL-323&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-327&quot; title=&quot;map[null] does not work in assignment context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-327&quot;&gt;&lt;del&gt;JEXL-327&lt;/del&gt;&lt;/a&gt;: fixed error reporting an null checks&lt;/p&gt;</comment>
                            <comment id="17028425" author="dmitri_blinov" created="Sun, 2 Feb 2020 12:43:50 +0000"  >&lt;p&gt;Not sure whether its worth creating a separate issue for this, but the following test case fails, because we are mixing null values with undefined variables when resolving antish variables.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testBadAnt() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEvalContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEvalContext();
        JexlOptions options = ctxt.getEngineOptions();
        ctxt.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.y&quot;&lt;/span&gt;, 42);
        JexlScript script = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; x.y&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(ctxt);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;antish &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; shall not be resolved&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(JexlException xother) {
            Assert.assertTrue(xother != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0awc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-322] JXLT String literals cannot contain curly braces</title>
                <link>https://issues.apache.org/jira/browse/JEXL-322</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In the TemplateEngine, inside an Inline-Expression, a String literal containing a curly brace leads to a parser error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To reproduce, just run this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create().createJxltEngine()
    .createTemplate(&lt;span class=&quot;code-quote&quot;&gt;&quot;${\&quot;&lt;/span&gt;{\&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Exception is either &quot;malformed expression&quot; or &quot;tokenization error&quot;, depending on if the inner curly brace is opening or closing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The problem lies in the parsing state machine of TemplateEngine.parseExpression(). It does not recognize the String literal.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281363">JEXL-322</key>
            <summary>JXLT String literals cannot contain curly braces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="constantinhirschsemvox">Constantin Hirsch</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2020 11:07:18 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:58 +0000</updated>
                            <resolved>Tue, 28 Jan 2020 10:29:32 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17024560" author="henrib" created="Mon, 27 Jan 2020 18:41:47 +0000"  >&lt;p&gt;Changeset: fc4b5a4d52c68c6f788526983a6df5bdd4f972b0&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-27 19:40&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-322&quot; title=&quot;JXLT String literals cannot contain curly braces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-322&quot;&gt;&lt;del&gt;JEXL-322&lt;/del&gt;&lt;/a&gt;: read through strings when parsing template exrepssions&lt;/p&gt;</comment>
                            <comment id="17024913" author="henrib" created="Tue, 28 Jan 2020 07:24:36 +0000"  >&lt;p&gt;Template with quotes outside expressions escape the inner string.&lt;/p&gt;</comment>
                            <comment id="17025024" author="henrib" created="Tue, 28 Jan 2020 10:29:32 +0000"  >&lt;p&gt;Changeset: c1be44c091fbd47d431c0b6045e555b0b4686b30&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-28 08:35&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-322&quot; title=&quot;JXLT String literals cannot contain curly braces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-322&quot;&gt;&lt;del&gt;JEXL-322&lt;/del&gt;&lt;/a&gt;: read through strings only when in expression&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0atug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-321] Empty do-while loop is broken</title>
                <link>https://issues.apache.org/jira/browse/JEXL-321</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following test case with AIOOB.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEmptyBody() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = 0; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; ; &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((i+=1) &amp;lt; 10); i&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = e.execute(jc);
        Assert.assertEquals(10, o);       
    } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The suggestion is to change interpreter as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; visit(ASTDoWhileStatement node, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; data) {
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;/* last objectNode is the expression */&lt;/span&gt;
        Node expressionNode = node.jjtGetChild(node.jjtGetNumChildren()-1);
        &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
            cancelCheck(node);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (node.jjtGetNumChildren() &amp;gt; 1) {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    &lt;span class=&quot;code-comment&quot;&gt;// execute statement
&lt;/span&gt;                    result = node.jjtGetChild(0).jjtAccept(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, data);
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Break stmtBreak) {
                    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Continue stmtContinue) {
                    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/span&gt;                }
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (arithmetic.toBoolean(expressionNode.jjtAccept(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, data)));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and Debugger as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; visit(ASTDoWhileStatement node, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; data) {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; num = node.jjtGetNumChildren();
        builder.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (num &amp;gt; 1) {
            acceptStatement(node.jjtGetChild(0), data);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            builder.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; ; &quot;&lt;/span&gt;);
        }
        builder.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&quot;&lt;/span&gt;);
        accept(node.jjtGetChild(num - 1), data);
        builder.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; data;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13280125">JEXL-321</key>
            <summary>Empty do-while loop is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jan 2020 12:13:45 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:19 +0000</updated>
                            <resolved>Fri, 17 Jan 2020 15:48:48 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17018141" author="henrib" created="Fri, 17 Jan 2020 15:48:48 +0000"  >&lt;p&gt;Changeset: a70b3d8a75d5805a6daeedcf80ff44bf8b8cb276&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-17 16:43&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-321&quot; title=&quot;Empty do-while loop is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-321&quot;&gt;&lt;del&gt;JEXL-321&lt;/del&gt;&lt;/a&gt;: do/while with empty statement contributed fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0am7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-320] &quot;mvn test&quot; fails with COMPILATION ERROR in SynchronizedArithmetic.java on Java 11</title>
                <link>https://issues.apache.org/jira/browse/JEXL-320</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Running &quot;mvn test&quot; when using OpenJDK&apos;s Java 11 fails with the following errors:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] COMPILATION WARNING : 
[INFO] -------------------------------------------------------------
[WARNING] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[24,16] sun.misc.Unsafe is internal proprietary API and may be removed in a future release
[WARNING] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[97,20] sun.misc.Unsafe is internal proprietary API and may be removed in a future release
[WARNING] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[100,23] sun.misc.Unsafe is internal proprietary API and may be removed in a future release
[WARNING] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[102,23] sun.misc.Unsafe is internal proprietary API and may be removed in a future release
[INFO] 4 warnings 
[INFO] -------------------------------------------------------------
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[63,19] cannot find symbol
  symbol:   method monitorEnter(java.lang.Object)
  location: variable UNSAFE of type sun.misc.Unsafe
[ERROR] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[72,19] cannot find symbol
  symbol:   method monitorExit(java.lang.Object)
  location: variable UNSAFE of type sun.misc.Unsafe
[ERROR] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[113,19] cannot find symbol
  symbol:   method monitorEnter(java.lang.Object)
  location: variable UNSAFE of type sun.misc.Unsafe
[ERROR] /local_static/github/commons-jexl/src/test/java/org/apache/commons/jexl3/SynchronizedArithmetic.java:[118,19] cannot find symbol
  symbol:   method monitorExit(java.lang.Object)
  location: variable UNSAFE of type sun.misc.Unsafe
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;BUILDING.txt states that JEXL &quot;requires Java 6 (or later)&quot;.&#160; I assume that you expect &quot;mvn test&quot; to work with Java 11.&#160; If not, then this is really a doc bug in&#160;BUILDING.txt&#8211;it should say that it &quot;requires Java 6 (exactly)&quot; or include the range of supported Java versions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This is a small barrier to entry for a new contributor.&#160; There is an obvious and straight-forward way to get past the problem, which is to download a compatible version of Java and set JAVA_HOME accordingly.&#160; I used Java 1.8, which already had installed on my dev machine.&#160; This prints the same warnings, but no errors.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK: OpenJDK 11 (hotspot)&lt;/p&gt;

&lt;p&gt;OS: Ubuntu 18.04.3 LTS&lt;/p&gt;

&lt;p&gt;Apache Maven 3.3.9&lt;/p&gt;</environment>
        <key id="13279974">JEXL-320</key>
            <summary>&quot;mvn test&quot; fails with COMPILATION ERROR in SynchronizedArithmetic.java on Java 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2020 20:27:35 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:44 +0000</updated>
                            <resolved>Fri, 24 Jan 2020 13:08:49 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17018140" author="henrib" created="Fri, 17 Jan 2020 15:48:42 +0000"  >&lt;p&gt;Changeset: de8eb7d2897ebcbfa7d4ff61ed5fce5fa42e20f7&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-17 16:45&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-320&quot; title=&quot;&amp;quot;mvn test&amp;quot; fails with COMPILATION ERROR in SynchronizedArithmetic.java on Java 11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-320&quot;&gt;&lt;del&gt;JEXL-320&lt;/del&gt;&lt;/a&gt;: remove dependency on Unsafe in test&lt;/p&gt;</comment>
                            <comment id="17022927" author="henrib" created="Fri, 24 Jan 2020 13:08:49 +0000"  >&lt;p&gt;Verified on Mac OS + jdk 11&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ala0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-319] Apache project documentation gives instructions in subversion</title>
                <link>https://issues.apache.org/jira/browse/JEXL-319</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The Apache project page for JEXL at &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/&lt;/a&gt;&#160;contains many links for getting started with the source code, none of which work because they all give instructions for Subversion.&#160; These should rewritten in terms of git, be replaced with a link to the github project (which has an up-to-date contributor&apos;s guide), or simply be removed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Places to Update&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;1) The instructions on &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/source-repository.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/source-repository.html&lt;/a&gt; are written for subversion and (fortunately) don&apos;t work at all.&lt;/p&gt;

&lt;p&gt;2) &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/issue-tracking.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/issue-tracking.html&lt;/a&gt; includes a sentence&lt;/p&gt;

&lt;p&gt;&amp;gt; For more information on subversion and creating patches see the &lt;a href=&quot;http://www.apache.org/dev/contributors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache Contributors Guide&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The contribute guide is also written for subversion and an Apache-hosted git.&#160; This should be removed or replaced with a reference to &lt;a href=&quot;https://github.com/apache/commons-jexl/blob/master/CONTRIBUTING.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/blob/master/CONTRIBUTING.md&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3)&#160; There&apos;s a helpfully-named file that&apos;s committed into Subversion&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/jexl/JEXLnowUsesGit.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/jexl/JEXLnowUsesGit.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However, the content is misleading, as it says to go to&#160;&lt;a href=&quot;http://commons.apache.org/jexl/source-repository.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/jexl/source-repository.html&lt;/a&gt; (see #1 above).&#160;&#160; It also says&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The SVN tree has been moved to:
https://svn.apache.org/repos/asf/commons/_moved_to_git/jexl 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, this looks like a stale copy of the source code from GitHub.&#160; It might be better to direct people to GitHub.&lt;/p&gt;

&lt;p&gt;4) On &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/building.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/building.html&lt;/a&gt; there&apos;s a sentence&lt;/p&gt;

&lt;p&gt;&amp;gt; The source is &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/jexl/trunk/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, that link returns a 404 not found.&lt;/p&gt;

&lt;p&gt;5) On &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/integration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/integration.html&lt;/a&gt; it says that the project uses Jenkins, but I couldn&apos;t find it in the given link.&#160; (It might be there, but I was under the impression that GitHub has its own CI system).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I have a few bugs to report on JEXL.&#160; Before reporting a bug, I usually try to see if it&apos;s still reproducible in the trunk, instead of just the latest release.&#160; I typed &quot;jexl&quot; in a search engine and it took me to the project page.&#160; None of the instructions I found to get that source code worked and even the place-holder that said it had moved to hit didn&apos;t help.&#160; Eventually, I found my way to this Jira, which led me to some active bugs, which led me to a pull request, which led me to the GitHub.&#160; All in all, this only took a few hours, but it&apos;s a few hours that could have been saved if the project documentation pointed me straight to GitHub.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13279939">JEXL-319</key>
            <summary>Apache project documentation gives instructions in subversion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2020 17:14:40 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:44 +0000</updated>
                            <resolved>Fri, 24 Jan 2020 13:12:11 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17022928" author="henrib" created="Fri, 24 Jan 2020 13:12:11 +0000"  >&lt;p&gt;It seems all these are corrected in the 3.2 trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0al28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-318] Annotation processing may fail in lexical mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-318</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I fave found that the annotation processing under certain conditions may lead to NPE&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;OptAnnotationContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlEvalContext &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext.AnnotationProcessor {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; processAnnotation(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args, Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; statement) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
            JexlOptions options = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getEngineOptions();
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; side effect &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; strict
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;scale&quot;&lt;/span&gt;.equals(name)) {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; scale = options.getMathScale();
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newScale = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) args[0];
                options.setMathScale(newScale);
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; statement.call();
                } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                    options.setMathScale(scale);
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; statement.call();
        }
    }
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testAnnotation() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlFeatures f = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlFeatures();
        f.lexical(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).features(f).create();
        JexlScript script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;@scale(13) @test &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = 42&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OptAnnotationContext();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(jc);
        Assert.assertEquals(result, 42);
    }
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is because new instance of Interpeter is created to process annotation under certain conditions, and this new instance does not inherit the current lexical block. Furthermore, the constructor of InterperterBase &lt;tt&gt;InterpreterBase(InterpreterBase ii, JexlArithmetic jexla)&lt;/tt&gt; now silently ignores JexlArithmetic passed to it, which is possibly another bug.&lt;/p&gt;

&lt;p&gt;As a suggestion, can we refactor the code to simply make JexlArithmetic non final in InterpreterBase? There would be no need to create new instance of Interpeter and complicate code with sync-state code?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13279009">JEXL-318</key>
            <summary>Annotation processing may fail in lexical mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2020 08:26:05 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:55 +0000</updated>
                            <resolved>Thu, 16 Jan 2020 13:39:38 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17016931" author="henrib" created="Thu, 16 Jan 2020 13:39:38 +0000"  >&lt;p&gt;Changeset: 12146f65fca5c24ac276c82e08b2ee52b3209225&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-16 14:38&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-318&quot; title=&quot;Annotation processing may fail in lexical mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-318&quot;&gt;&lt;del&gt;JEXL-318&lt;/del&gt;&lt;/a&gt;: release notes and changes&lt;/p&gt;</comment>
                            <comment id="17016932" author="henrib" created="Thu, 16 Jan 2020 13:39:44 +0000"  >&lt;p&gt;Changeset: 1eefeb59e3f0d52aa011c29b1e18eee18e841049&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-16 14:36&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-318&quot; title=&quot;Annotation processing may fail in lexical mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-318&quot;&gt;&lt;del&gt;JEXL-318&lt;/del&gt;&lt;/a&gt;: test&lt;/p&gt;</comment>
                            <comment id="17016935" author="henrib" created="Thu, 16 Jan 2020 13:39:56 +0000"  >&lt;p&gt;Changeset: bff5feb4e5680d8932155634e3adf989c8f17d8e&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-01-16 14:34&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-318&quot; title=&quot;Annotation processing may fail in lexical mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-318&quot;&gt;&lt;del&gt;JEXL-318&lt;/del&gt;&lt;/a&gt;: added copy constructor&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0afq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-316] Operator ?? has very low priority</title>
                <link>https://issues.apache.org/jira/browse/JEXL-316</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In current version of JEXL the script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
10??0 + 200 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;evaluates to 10, which is counterintuitive. It requires to always use parantheses after &lt;tt&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;??&lt;/tt&gt;. The operator &lt;tt&gt;??&lt;/tt&gt; should have higer priority. It is the same problem as with current version of freemarker, but they promise to fix it in the next major release.&lt;/p&gt;

&lt;p&gt;The suggestion is to set priority of operator &lt;tt&gt;??&lt;/tt&gt; to be between &lt;tt&gt;UnaryExpression()&lt;/tt&gt; and &lt;tt&gt;ValueExpression()&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void ConditionalExpression() #void : {}
{
  ConditionalOrExpression()
  (
    &amp;lt;QMARK&amp;gt; Expression() &amp;lt;COLON&amp;gt; Expression() #TernaryNode(3)
  |
    &amp;lt;ELVIS&amp;gt; Expression() #TernaryNode(2)
  )?
}
...
void UnaryExpression() #void : {}
{
    &amp;lt;minus&amp;gt; UnaryExpression() #UnaryMinusNode(1)
  |
    &amp;lt;plus&amp;gt; UnaryExpression() #UnaryPlusNode(1)
  |
    &amp;lt;tilda&amp;gt; UnaryExpression() #BitwiseComplNode(1)
  |
    (&amp;lt;not&amp;gt;|&amp;lt;NOT&amp;gt;) UnaryExpression() #NotNode(1)
  |
    &amp;lt;EMPTY&amp;gt; UnaryExpression() #EmptyFunction(1)
  |
    &amp;lt;SIZE&amp;gt; UnaryExpression() #SizeFunction(1)
  |
    NullpExpression()
}

void NullpExpression() #void : {}
{
    ValueExpression()
    (
       &amp;lt;NULLP&amp;gt; ValueExpression() #NullpNode(2)
    )*
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13259632">JEXL-316</key>
            <summary>Operator ?? has very low priority</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10011">Won&apos;t Do</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Sep 2019 10:15:06 +0000</created>
                <updated>Fri, 18 Jun 2021 16:31:39 +0000</updated>
                            <resolved>Fri, 18 Jun 2021 16:31:39 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16940978" author="henrib" created="Mon, 30 Sep 2019 14:10:07 +0000"  >&lt;p&gt;I agree, operator precedence is wrong in this case; shouldn&apos;t this apply to the Elvis operator as well ?&lt;/p&gt;</comment>
                            <comment id="16941000" author="dmitri_blinov" created="Mon, 30 Sep 2019 14:38:37 +0000"  >&lt;p&gt;The &lt;tt&gt;??&lt;/tt&gt; operator was introduced IIRC, in version 3.2. Not sure about elvis operator. Intuitively nothing is wrong with it. &lt;/p&gt;</comment>
                            <comment id="16941034" author="henrib" created="Mon, 30 Sep 2019 15:02:23 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;10?:0 + 200&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; should behave like: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;10??0 + 200&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; Shouldn&apos;t it?&lt;br/&gt;
The only difference is &apos;is null&apos; versus &apos;is false&apos;.&lt;/p&gt;</comment>
                            <comment id="16941603" author="dmitri_blinov" created="Tue, 1 Oct 2019 07:23:43 +0000"  >&lt;p&gt;The difference is subtle yet significant. The ability of elvis operator to handle logical expressions places it to the higher league. One can expect to use elvis operator to calculate complicated conditions, may be even with side effects, like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;transferAmount = checkAccountBalance(x) &amp;amp;&amp;amp; lockAmount(y) ?: 0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, where its ability to evaluate left part only once really kicks in. On the other hand, the null coalescing operator is only needed to protect from &lt;b&gt;null&lt;/b&gt; values from undefined variables and properties to leak into calculation, like &lt;tt&gt;a + b??2&lt;/tt&gt;. In most cases this is expected to be &lt;tt&gt;a + (b??2)&lt;/tt&gt; and not &lt;tt&gt;(a+b)??2&lt;/tt&gt;, since its natural, though not totally impossible, for any arithmetic calculation or logical conditions not to produce null results. &lt;/p&gt;

&lt;p&gt;Personally I think elvis operator is strange and its usage is questionable, I have never found the reason to use it except may be only once or twice. And personally I don&apos;t care much. But for compatibility reasons I would let it be as it is.&lt;/p&gt;</comment>
                            <comment id="16942930" author="henrib" created="Wed, 2 Oct 2019 16:00:06 +0000"  >&lt;p&gt;Discussed this with other parties (devs, consultants) that disliked the idea that &apos;?:&apos; and &apos;??&apos; would lead to potentially very different usages and results. The current semantic of &apos;if-false&apos; and &apos;if-null&apos; and their difference is understood; the surprise that would come from having so drastically different syntactic applicable rules in a scripting language is not liked. Not sure the change can survive the &apos;no surprise&apos; rule.... &lt;br/&gt;
Considering the (external) consensus is using the same syntactic rules for both, I only hope we can muster something clearer than the current situation.&lt;/p&gt;</comment>
                            <comment id="16943401" author="dmitri_blinov" created="Thu, 3 Oct 2019 08:01:06 +0000"  >&lt;p&gt;I have checked how in other languages the position of the null-coalescing operator is defined, and results are very mixed. The languages like C#, Javascript (being proposed) place null coalescing operand closer to ternary, like it is currently implemented in JEXL. Some languages like PHP and freemarker are closer to what is being proposed. There are some like Swift that are in between - above the arithmetic, but below comparisons, and not without the reason, sinse comparisons are never null. Some languages do not have null coalescing operator at all, but use &lt;b&gt;elvis&lt;/b&gt; operator for this purpose, which they BTW, see as shortened form of ternary operator, and as such, define the priority of elvis operator close to ternary. For me, for example, this is also comes as no surprise  - I get used to elvis being a ternary sibling, not a null coaliscing one. In some sence, IMO, the introduction of null coalescing operator in JEXL is more justified when it differs from what we have already had.&lt;/p&gt;

&lt;p&gt;So, the community has no single approach to the problem, and no industry-wide convention. Lets leave it as it is for now.&lt;/p&gt;</comment>
                            <comment id="16947558" author="dmitri_blinov" created="Wed, 9 Oct 2019 11:03:52 +0000"  >&lt;p&gt;As an example of &apos;?:&apos; and &apos;??&apos; having different results &lt;b&gt;now&lt;/b&gt; we could consider the following tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{} ?? 3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{} ?: 3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z075co:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-315] JxltEngine literal string strings ending in \ $ or # throw JxltEngine$Exception</title>
                <link>https://issues.apache.org/jira/browse/JEXL-315</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When parsing literal strings with the&#160;JxltEngine, if the string ends with \ $ or # a&#160;JxltEngine$Exception is thrown. Escaping the ending character works, but seems an unnecessary burden on the user.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;JxltEngine jxltEngine = (new JexlBuilder()).create().createJxltEngine();&lt;br/&gt;
 Expression exp = jxltEngine.createExpression(&quot;Testing$&quot;);&lt;br/&gt;
 Object value = exp.evaluate(new MapContext());&lt;/p&gt;

&lt;p&gt;Stack Trace:&lt;/p&gt;

&lt;p&gt;org.apache.commons.jexl3.JxltEngine$Exception: com.openmarket.workflow.el.ElEngineTest.testBug@40 failed to parse &apos;Testing$&apos;org.apache.commons.jexl3.JxltEngine$Exception: com.openmarket.workflow.el.ElEngineTest.testBug@40 failed to parse &apos;Testing$&apos; at org.apache.commons.jexl3.internal.TemplateEngine.createExpression(TemplateEngine.java:668) at org.apache.commons.jexl3.JxltEngine.createExpression(JxltEngine.java:217) at com.openmarket.workflow.el.ElEngineTest.testBug(ElEngineTest.java:40) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)Caused by: org.apache.commons.jexl3.JxltEngine$Exception: com.openmarket.workflow.el.ElEngineTest.testBug@40 malformed expression: Testing$ at org.apache.commons.jexl3.internal.TemplateEngine.parseExpression(TemplateEngine.java:886) at org.apache.commons.jexl3.internal.TemplateEngine.createExpression(TemplateEngine.java:664) ... 25 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Simple Fix in the code:&lt;/p&gt;

&lt;p&gt;org.apache.commons.jexl3.internal.TemplateEngine&lt;/p&gt;

&lt;p&gt;In method:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;TemplateExpression parseExpression(JexlInfo info, String expr, Scope scope) { // CSOFF: MethodLength&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;for (int column = 0; column &amp;lt; size; ++column) {&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; ...&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;// Add this code at the end of the for loop to h&lt;/tt&gt;&lt;tt&gt;andle strings ending in \, # or $&lt;/tt&gt;&lt;br/&gt;
{{ if (state == ParseState.ESCAPE) {}}&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; strb.append(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; state = ParseState.CONST;&lt;/tt&gt;&lt;br/&gt;
{{ } else if (state == ParseState.DEFERRED0) {}}&lt;br/&gt;
&lt;tt&gt;&#160; &#160; strb.append(deferredChar);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; state = ParseState.CONST;&lt;/tt&gt;&lt;br/&gt;
{{ } else if (state == ParseState.IMMEDIATE0) {}}&lt;br/&gt;
&lt;tt&gt;&#160; &#160; strb.append(immediateChar);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; state = ParseState.CONST;&lt;/tt&gt;&lt;br/&gt;
{{ }}}&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;...&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13257430">JEXL-315</key>
            <summary>JxltEngine literal string strings ending in \ $ or # throw JxltEngine$Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="mbartlett">Mike Bartlett</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Sep 2019 16:31:16 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:13 +0000</updated>
                            <resolved>Sun, 27 Oct 2019 13:01:12 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16960573" author="henrib" created="Sun, 27 Oct 2019 13:01:12 +0000"  >&lt;p&gt;Changeset: c46fb0d5084c17b648088b36cfdf648f67328d5c&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-10-27 13:37&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-315&quot; title=&quot;JxltEngine literal string strings ending in \ $ or # throw JxltEngine$Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-315&quot;&gt;&lt;del&gt;JEXL-315&lt;/del&gt;&lt;/a&gt;: added handling of delimiters at end of lines&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06rrk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-312] @NoJexl fails to disallow method call</title>
                <link>https://issues.apache.org/jira/browse/JEXL-312</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a method is overriden through a class hierarchy,&#160;the @NoJexl annotation fails and lets a user call a method that should not be permitted.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13252817">JEXL-312</key>
            <summary>@NoJexl fails to disallow method call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Aug 2019 13:38:26 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:16 +0000</updated>
                            <resolved>Sat, 24 Aug 2019 13:48:36 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16914955" author="henrib" created="Sat, 24 Aug 2019 13:48:36 +0000"  >&lt;p&gt;Changeset: 71d185007d8ba0a935fe4ac084822784a19bcffa&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-08-24 15:47&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-312&quot; title=&quot;@NoJexl fails to disallow method call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-312&quot;&gt;&lt;del&gt;JEXL-312&lt;/del&gt;&lt;/a&gt;: create explicit cache miss entry when method is disallowed by @NoJexl&lt;/p&gt;</comment>
                            <comment id="16931196" author="dmitri_blinov" created="Tue, 17 Sep 2019 08:47:09 +0000"  >&lt;p&gt;The commit leads to false messages in log file:&lt;/p&gt;

&lt;p&gt;{{Method public static java.lang.reflect.Method org.apache.commons.jexl3.internal.introspection.ClassMap.cacheMiss() is already registered, key: isNumberable(java.lang.Object)&lt;br/&gt;
 }}&lt;/p&gt;

&lt;p&gt;The suggestion is we should not compare the already registered method to CACHE_MISS&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0606o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-311] Jxlt template scripts fail using verbatim expressions embedded in lambdas</title>
                <link>https://issues.apache.org/jira/browse/JEXL-311</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems lambdas in template break the template interpreter. Quick analysis shows the jexl namespace is not solved, the symbols are not recognised as such.&lt;/p&gt;

&lt;p&gt;The following test should work.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test311a() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext ctx = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; rpt
                = &lt;span class=&quot;code-quote&quot;&gt;&quot;$$((a)-&amp;gt;{\n&quot;&lt;/span&gt;
                + &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;p&amp;gt;Universe ${a}&amp;lt;/p&amp;gt;\n&quot;&lt;/span&gt;
                + &lt;span class=&quot;code-quote&quot;&gt;&quot;$$})(42)&quot;&lt;/span&gt;;
        JxltEngine.Template t = JXLT.createTemplate(&lt;span class=&quot;code-quote&quot;&gt;&quot;$$&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(rpt));
        StringWriter strw = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        t.evaluate(ctx, strw);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; output = strw.toString();
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;p&amp;gt;Universe 42&amp;lt;/p&amp;gt;\n&quot;&lt;/span&gt;, output);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13252220">JEXL-311</key>
            <summary>Jxlt template scripts fail using verbatim expressions embedded in lambdas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Aug 2019 21:58:03 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:36 +0000</updated>
                            <resolved>Wed, 21 Aug 2019 22:05:02 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16912722" author="henrib" created="Wed, 21 Aug 2019 22:05:02 +0000"  >&lt;p&gt;Changeset: 9064d425b5e1d3e7cea1f5a6deeeb23effb66c2a&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-08-22 00:04&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-311&quot; title=&quot;Jxlt template scripts fail using verbatim expressions embedded in lambdas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-311&quot;&gt;&lt;del&gt;JEXL-311&lt;/del&gt;&lt;/a&gt;: parse verbatim expressions with correct scope, added tests using lambdas&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05wi8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-309] Line numbers are not correct when template generate errors</title>
                <link>https://issues.apache.org/jira/browse/JEXL-309</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a template generates a parsing (or ambiguous) exception, the reported error location is wrong; the line number reported through info is not where the source error is.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13248872">JEXL-309</key>
            <summary>Line numbers are not correct when template generate errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Aug 2019 12:46:42 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:15 +0000</updated>
                            <resolved>Wed, 7 Aug 2019 08:24:33 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16901869" author="henrib" created="Wed, 7 Aug 2019 08:24:33 +0000"  >&lt;p&gt;Changeset: ca41392409e8e1fb6760d4b452d728edb5a06c6f&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-08-07 10:24&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-309&quot; title=&quot;Line numbers are not correct when template generate errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-309&quot;&gt;&lt;del&gt;JEXL-309&lt;/del&gt;&lt;/a&gt;: generate comment lines when replacing verbatims in templates to keep line number in sync&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05bzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-306] Ternary operator ? protects also its branches from resolution errors</title>
                <link>https://issues.apache.org/jira/browse/JEXL-306</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Consider the following test case (suppose its added to IfTest)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#160;&#160; @Test
&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testTernaryFail() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlEvalContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEvalContext();
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlExpression e = JEXL.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; ? bar : quux&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o;

&#160;&#160;&#160;&#160;&#160;&#160;&#160; jc.setStrict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; jc.setSilent(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; o = e.evaluate(jc);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should have failed&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;// OK
&lt;/span&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
&#160;&#160;&#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The expected behavior is to fail with &lt;tt&gt;undefined variable...&lt;/tt&gt; because neither &lt;tt&gt;bar&lt;/tt&gt; nor &lt;tt&gt;quux&lt;/tt&gt; is defined &lt;/p&gt;</description>
                <environment></environment>
        <key id="13238146">JEXL-306</key>
            <summary>Ternary operator ? protects also its branches from resolution errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Jun 2019 09:01:23 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:51 +0000</updated>
                            <resolved>Tue, 11 Jun 2019 12:50:48 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16859219" author="henrib" created="Sat, 8 Jun 2019 13:21:19 +0000"  >&lt;p&gt;Changeset: 041fcaf0b32e1316c578f971039e1632a01f8f79&lt;br/&gt;
Author:    Henri Biestro &amp;lt;hbiestro@gmail.com&amp;gt;&lt;br/&gt;
Date:      2019-06-08 15:18&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-306&quot; title=&quot;Ternary operator ? protects also its branches from resolution errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-306&quot;&gt;&lt;del&gt;JEXL-306&lt;/del&gt;&lt;/a&gt;: ensure ternary expressions only protect the condition part against variable resolution failure&lt;/p&gt;</comment>
                            <comment id="16859816" author="dmitri_blinov" created="Mon, 10 Jun 2019 08:23:52 +0000"  >&lt;p&gt;The following script throws an exception &quot;Undefined property y&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&quot;&lt;/span&gt;); x.y ? 1 : 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m confused, is it a supposed behaviour? Shouldn&apos;t it return &lt;tt&gt;2&lt;/tt&gt; just like in&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x ? 1 : 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="16859823" author="henrib" created="Mon, 10 Jun 2019 08:35:44 +0000"  >&lt;p&gt;Not a regression but the&#160;behaviour&#160;between &apos;??&apos;, &apos;?:&apos; wrt&#160;&apos;?.&apos; and the &apos;safe&apos; mode seems inconsistent. The question is twofold:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;should all ternaries behave the same (aka ?: and ??) wrt to unsolvable variables and properties?&lt;/li&gt;
	&lt;li&gt;should the ternaries also protect from unsolvable properties - or only from unsolvable variables - in non-safe mode?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16860053" author="dmitri_blinov" created="Mon, 10 Jun 2019 15:02:04 +0000"  >&lt;p&gt;Regarding second part of the question, consider the following example &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x.y ? 1 : 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It returns 2 because x.y is undefined ant-ish variable. Another example that returns 2 is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = {&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;:1}; x.y ? 1 : 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My opinion is that we would expect predicted equal behaviour from syntactically equal constructs. So yes - ternaries should protect from unsolvable properties.&lt;/p&gt;</comment>
                            <comment id="16860093" author="dmitri_blinov" created="Mon, 10 Jun 2019 15:40:57 +0000"  >&lt;p&gt;Regarding the first part of the question. &lt;/p&gt;

&lt;p&gt;Lets start with &lt;tt&gt;x?.y&lt;/tt&gt;. My understanding is that this operator is simply an inline for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (x == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x.y&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;tt&gt;else&lt;/tt&gt; part of the &lt;tt&gt;if&lt;/tt&gt; is an ordinary unprotected property access operator that should behave just as simple &lt;tt&gt;x.y&lt;/tt&gt;. So we can keep &lt;tt&gt;?.&lt;/tt&gt; aside and focus on &lt;tt&gt;??&lt;/tt&gt; and &lt;tt&gt;?:&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;&apos;l try to summarize what we have now for ternaries. The operator &lt;tt&gt;&amp;#63;?&lt;/tt&gt; is the most simple case because its only checks its left side for &lt;tt&gt;null&lt;/tt&gt; or undefined. The elvis operator &lt;tt&gt;?:&lt;/tt&gt; is like &lt;tt&gt;??&lt;/tt&gt; but checks its left side not only for &lt;tt&gt;null&lt;/tt&gt; or undefined, but also for the left side to be logically &lt;tt&gt;false&lt;/tt&gt;. Conventional ternary operator &lt;tt&gt;?:&lt;/tt&gt; is like &lt;tt&gt;?:&lt;/tt&gt; elvis operator regarding its left-side operand, but allows to specify a value not only for &lt;tt&gt;false&lt;/tt&gt; but also for &lt;tt&gt;true&lt;/tt&gt;. So, I think all ternaries differ only in their result part, and should be equal in their treatment of the left part&lt;/p&gt;</comment>
                            <comment id="16860139" author="henrib" created="Mon, 10 Jun 2019 16:36:28 +0000"  >&lt;p&gt;Intermediate commit&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a69782bea469a766f71f12f76e9d5154b7415be4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/a69782bea469a766f71f12f76e9d5154b7415be4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16860331" author="henrib" created="Mon, 10 Jun 2019 21:09:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/c6fa248e6c51c36a61be9d7bc6b6b15d4013875e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/c6fa248e6c51c36a61be9d7bc6b6b15d4013875e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16861007" author="henrib" created="Tue, 11 Jun 2019 12:48:25 +0000"  >&lt;p&gt;Code may be simpler&lt;/p&gt;</comment>
                            <comment id="16861010" author="henrib" created="Tue, 11 Jun 2019 12:50:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a10776a6afd3a9f2c07069cf56183a78e0a4ed76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/a10776a6afd3a9f2c07069cf56183a78e0a4ed76&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03ih4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-305] Script debugger produces incorrect syntax</title>
                <link>https://issues.apache.org/jira/browse/JEXL-305</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Consider the following script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) {}; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The script parses correctly, but the script debugger produces the following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) {
  }  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Because the semicolon after the &lt;tt&gt;while&lt;/tt&gt; is removed, the block syntax becomes invalid&lt;/p&gt;</description>
                <environment></environment>
        <key id="13234533">JEXL-305</key>
            <summary>Script debugger produces incorrect syntax</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 May 2019 08:33:28 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:50 +0000</updated>
                            <resolved>Fri, 14 Jun 2019 15:01:05 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16846033" author="henrib" created="Wed, 22 May 2019 16:31:20 +0000"  >&lt;p&gt;Thanks for the bug report; &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16864163" author="henrib" created="Fri, 14 Jun 2019 14:49:49 +0000"  >&lt;p&gt;Found a regression case using TemplateDebugger.&lt;/p&gt;</comment>
                            <comment id="16864169" author="henrib" created="Fri, 14 Jun 2019 15:01:05 +0000"  >&lt;p&gt;Changeset: 4ffa7acc032f58cdf484f4ceae1283111cf1c3b5&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-06-14 17:00&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-305&quot; title=&quot;Script debugger produces incorrect syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-305&quot;&gt;&lt;del&gt;JEXL-305&lt;/del&gt;&lt;/a&gt;: TemplateDebugger must be able to behave as (script) Debugger (its superclass) when there are no template expressions&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02w9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-304] Error parsing overview.limit.var</title>
                <link>https://issues.apache.org/jira/browse/JEXL-304</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m a user and committer of the JXLS framework. It uses JEXL to evaluate expressions. Since JEXL 3 it&apos;s not possible to evaluate &quot;overview.limit.var&quot;. It was possible in V2. In our context &quot;var&quot; means &quot;Value At Risk&quot;. I know &quot;var&quot; is a reserved word in JEXL. But in this &quot;dotted-variables&quot; context I think JEXL should try to use it as a variable, because it makes no sense as a var (=define variable) command.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testVar() {
  JexlEngine jexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
  JexlExpression jexlExpresssion =
      jexlEngine.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;overview.limit.&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt;);

  HashMap map3 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap();
  map3.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;4711&quot;&lt;/span&gt;);
  HashMap map2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap();
  map2.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;limit&quot;&lt;/span&gt;, map3);
  HashMap map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap();
  map.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;overview&quot;&lt;/span&gt;, map2);

  MapContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(map);
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = jexlExpresssion.evaluate(context);
  assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;4711&quot;&lt;/span&gt;, value); &lt;span class=&quot;code-comment&quot;&gt;// fails
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Error message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.jexl3.JexlException$Parsing: de.xmap.tools.jexl.JEXL3VariableTest.testVar@1:15 parsing error in &lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt;
  at org.apache.commons.jexl3.JexlEngine.createExpression(JexlEngine.java:304)
  at de.xmap.tools.jexl.JEXL3VariableTest.testVar(JEXL3VariableTest.java:107)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13234523">JEXL-304</key>
            <summary>Error parsing overview.limit.var</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="xmarcus">Marcus Warm</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 May 2019 08:07:09 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:45 +0000</updated>
                            <resolved>Thu, 23 May 2019 14:33:20 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16846032" author="henrib" created="Wed, 22 May 2019 16:31:04 +0000"  >&lt;p&gt;Thanks for the bug report; &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16846542" author="dmitri_blinov" created="Thu, 23 May 2019 08:57:34 +0000"  >&lt;p&gt;If I am allowed to make a suggestion, the change to the&#160;&lt;tt&gt;DOT_ID&lt;/tt&gt; token is unnessesary, the code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;DOT_ID&amp;gt; TOKEN : &lt;span class=&quot;code-comment&quot;&gt;/* IDENTIFIERS */&lt;/span&gt;
{
  &amp;lt; DOT_IDENTIFIER: ( [ &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;$&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;@&quot;&lt;/span&gt; ])+ | &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt; &amp;gt; { popDot(); } &lt;span class=&quot;code-comment&quot;&gt;/* Revert state to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;. */&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;does not add anything new to the initial definition of token&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;DOT_ID&amp;gt; TOKEN : &lt;span class=&quot;code-comment&quot;&gt;/* IDENTIFIERS */&lt;/span&gt;
{
  &amp;lt; DOT_IDENTIFIER: ( [ &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;-&lt;span class=&quot;code-quote&quot;&gt;&quot;Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;$&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;@&quot;&lt;/span&gt; ])+ &amp;gt; { popDot(); } &lt;span class=&quot;code-comment&quot;&gt;/* Revert state to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;. */&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But we need to change token&#160;&lt;tt&gt;VAR&lt;/tt&gt; from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;*&amp;gt; TOKEN : &lt;span class=&quot;code-comment&quot;&gt;/* KEYWORDS */&lt;/span&gt;
{
...
    | &amp;lt; VAR : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt; &amp;gt;
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;*&amp;gt; TOKEN : &lt;span class=&quot;code-comment&quot;&gt;/* KEYWORDS */&lt;/span&gt;
{
...
    | &amp;lt; VAR : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;&quot;&lt;/span&gt; &amp;gt; { popDot(); } &lt;span class=&quot;code-comment&quot;&gt;/* Revert state to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; was DOT_ID. */&lt;/span&gt;
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If we going to allow &apos;var&apos; to go after the dot&lt;/p&gt;</comment>
                            <comment id="16846552" author="xmarcus" created="Thu, 23 May 2019 09:06:41 +0000"  >&lt;p&gt;Henri, thanks for the quick fix. I&apos;m impressed. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;What about other reserved words? or and eq ne lt gt le ge div mod not null true false new var return&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is there a time plan for the 3.2 release or a pre-release (with git tag)?&lt;/p&gt;</comment>
                            <comment id="16846708" author="henrib" created="Thu, 23 May 2019 13:12:00 +0000"  >&lt;p&gt;Need to add other keywords as identifier parts.&lt;/p&gt;</comment>
                            <comment id="16846755" author="henrib" created="Thu, 23 May 2019 14:33:21 +0000"  >&lt;p&gt;Added the set of keywords as part of identifiers.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a0ac2f42d8038e1572490d616a5f2fb94422476e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/a0ac2f42d8038e1572490d616a5f2fb94422476e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17225930" author="xmarcus" created="Wed, 4 Nov 2020 08:41:14 +0000"  >&lt;p&gt;Why is version 3.2 not being released?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02w7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-303] Block syntax is broken</title>
                <link>https://issues.apache.org/jira/browse/JEXL-303</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following script fails to parse correctly&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0) 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; 2; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;while the following script parses perfectly&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0) 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; 2;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testOuterBlock() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;{&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0) 1 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; 2; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;}&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = e.execute(jc);
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Block result is wrong&quot;&lt;/span&gt;, 1, o);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13234516">JEXL-303</key>
            <summary>Block syntax is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 May 2019 07:36:16 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:41 +0000</updated>
                            <resolved>Thu, 23 May 2019 14:32:07 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16844763" author="dmitri_blinov" created="Tue, 21 May 2019 12:01:33 +0000"  >&lt;p&gt;I can&apos;t figure it out, but for some reason the following grammar lookahead seems not to work in the failing case&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void Statement() #void : {}
{
...
&#160;&#160;&#160; | LOOKAHEAD(&amp;lt;LCURLY&amp;gt; Statement() &amp;lt;SEMICOL&amp;gt;) Block() &lt;span class=&quot;code-comment&quot;&gt;//&#160; to disambiguate the set literals
&lt;/span&gt;...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Things get fixed when I change the grammar to the following&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void StatementLookahead() #void : {}
{
    &amp;lt;SEMICOL&amp;gt; | &amp;lt;IF&amp;gt; | &amp;lt;FOR&amp;gt; | &amp;lt;DO&amp;gt; | &amp;lt;WHILE&amp;gt; | &amp;lt;RETURN&amp;gt; | &amp;lt;BREAK&amp;gt; | &amp;lt;CONTINUE&amp;gt; | &amp;lt;VAR&amp;gt;
}
void Statement() #void : {}
{
...
    | LOOKAHEAD(&amp;lt;LCURLY&amp;gt; StatementLookahead())  Block() &lt;span class=&quot;code-comment&quot;&gt;//  to disambiguate the set literals
&lt;/span&gt;...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hope this helps...&lt;/p&gt;</comment>
                            <comment id="16845897" author="henrib" created="Wed, 22 May 2019 13:57:47 +0000"  >&lt;p&gt;It does! Thanks!&lt;/p&gt;</comment>
                            <comment id="16846035" author="henrib" created="Wed, 22 May 2019 16:31:33 +0000"  >&lt;p&gt;Thanks for the bug report; &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16846530" author="dmitri_blinov" created="Thu, 23 May 2019 08:34:23 +0000"  >&lt;p&gt;Sorry, but it has turned out the solution I proposed does not take into account nested blocks in&#160;&lt;tt&gt;StatementLookahead()&lt;/tt&gt;. Now I think I understand the real reason for the initial issue. The problem is with&#160;&lt;tt&gt;ExpressionStatement()&lt;/tt&gt; grammar which may have trailing semicolon. In the failing case &lt;tt&gt;if (0) 1 else 2;&lt;/tt&gt; that last semicolon was treated as part of &lt;tt&gt;ExpressionStatement()&lt;/tt&gt; of &lt;tt&gt;else&lt;/tt&gt; part, not the statement separator, thats why the &lt;tt&gt;LOOKAHEAD(&amp;lt;LCURLY&amp;gt; Statement() &amp;lt;SEMICOL&amp;gt;) Block()&lt;/tt&gt; didn&apos;t work.&lt;/p&gt;

&lt;p&gt;Anyway, I think I have more robust grammar proposal for this. First, we need to change &lt;tt&gt;SetLiteral&lt;/tt&gt; lookahead from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void PrimaryExpression() #void : {}
{
...
       LOOKAHEAD( &amp;lt;LCURLY&amp;gt; Expression()) SetLiteral()
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void PrimaryExpression() #void : {}
{
...
       LOOKAHEAD( &amp;lt;LCURLY&amp;gt; Expression() (&amp;lt;COMMA&amp;gt; | &amp;lt;RCURLY&amp;gt;)) SetLiteral()
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Second, we can change the Statement() grammar to this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void Statement() #void : {}
{
    &amp;lt;SEMICOL&amp;gt;
    | LOOKAHEAD(&amp;lt;ANNOTATION&amp;gt;) AnnotatedStatement()
    | LOOKAHEAD(Expression()) ExpressionStatement() 
    | Block() 
    | IfStatement()
    | ForeachStatement()
    | WhileStatement()
    | DoWhileStatement()
    | ReturnStatement()
    | Continue()
    | Break()
    | Var()
    | Pragma()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So that we don&apos;t need &lt;tt&gt;StatementLookahead()&lt;/tt&gt; anymore...&lt;/p&gt;</comment>
                            <comment id="16846750" author="henrib" created="Thu, 23 May 2019 14:27:49 +0000"  >&lt;p&gt;Syntax needs modifications.&lt;/p&gt;</comment>
                            <comment id="16846754" author="henrib" created="Thu, 23 May 2019 14:32:07 +0000"  >&lt;p&gt;Pushing Dmitri solution, thanks.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/a0ac2f42d8038e1572490d616a5f2fb94422476e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/a0ac2f42d8038e1572490d616a5f2fb94422476e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02w5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-302] JexlScript.getVariables returns strange values for array access</title>
                <link>https://issues.apache.org/jira/browse/JEXL-302</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I can not understand the logic behind the current implementation of &lt;tt&gt;JexlScript.getVariables()&lt;/tt&gt; method. From the documentation we know that the result should be the set of script variables. For the code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a[b][c]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it gives three variables &lt;tt&gt;a&lt;/tt&gt;, &lt;tt&gt;b&lt;/tt&gt;, &lt;tt&gt;c&lt;/tt&gt;. So far so good. But for the code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a[b][&lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it returns &lt;tt&gt;a&lt;/tt&gt; and &lt;tt&gt;b c&lt;/tt&gt;, where second variable has two fragments &lt;tt&gt;b&lt;/tt&gt; and &lt;tt&gt;c&lt;/tt&gt;. The documentation states that variables with multiple fragments are ant-ish variables, but I don&apos;t have any of ant-ish variables in the example, and &lt;tt&gt;&apos;c&apos;&lt;/tt&gt; is not a variable, but a constant. I expect to get &lt;tt&gt;a&lt;/tt&gt; and &lt;tt&gt;b&lt;/tt&gt; as a result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13233923">JEXL-302</key>
            <summary>JexlScript.getVariables returns strange values for array access</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 May 2019 08:55:01 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:48 +0000</updated>
                            <resolved>Sat, 8 Jun 2019 13:21:13 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16845983" author="henrib" created="Wed, 22 May 2019 15:27:01 +0000"  >&lt;p&gt;I suspect your (failing) example is: why does &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;c&amp;#93;&lt;/span&gt;&lt;/tt&gt; generate &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;a&amp;quot;,&#8221;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;&#160;and &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;c&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;&#160;as the variable set of lists ?&lt;/p&gt;

&lt;p&gt;This probably stems from the current behaviour where &lt;tt&gt;a.b&lt;/tt&gt; is equivalent to &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt; or &lt;tt&gt;a.0&lt;/tt&gt; is equivalent to &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/tt&gt;. There are plenty of tests in VarTests.testRef(...) that indicate the intent for getVariable to collect that equivalence.&lt;br/&gt;
It is guaranteed that the 1st member of each segment (list) is the name of a variable; one can consider the whole segment as the actual varying element ( as in a.b value changes with a and a.b ).&lt;br/&gt;
Does this make more sense?&lt;/p&gt;</comment>
                            <comment id="16854569" author="dmitri_blinov" created="Mon, 3 Jun 2019 13:02:48 +0000"  >&lt;p&gt;I have got your point, but for the sake of argument, as of now - &lt;tt&gt;a.b&lt;/tt&gt; is not equivalent to &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;. First because of ant-ish variables. One can only address anti-sh variable as &lt;tt&gt;a.b&lt;/tt&gt;, not as &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;. Strictly speaking&#160;&lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt; is not equivalent to &lt;tt&gt;a.b&lt;/tt&gt;, because we can have &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b+c&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;, but we can not have &lt;tt&gt;a.(b+c)&lt;/tt&gt;. And second - because we can have &lt;tt&gt;propertyGet()/propertySet()&lt;/tt&gt; and &lt;tt&gt;arrayGet()/arraySet()&lt;/tt&gt; to be overloaded separately, so that they can perform different operations.&lt;/p&gt;

&lt;p&gt;I also understand that what the &lt;tt&gt;a.b&lt;/tt&gt; is resolved into (whether this a variable &lt;tt&gt;a.b&lt;/tt&gt; or only &lt;tt&gt;a&lt;/tt&gt; is a variable, and &lt;tt&gt;b&lt;/tt&gt; is property name) is decided during runtime, so this can not be defined from syntax representation tree alone - a tough task for &lt;tt&gt;JexlScript.getVariables()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Still, the example of issue&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a[b][&lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;does not follow the pattern of &lt;tt&gt;a.b&lt;/tt&gt; == &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;. From what I get from the &lt;tt&gt;JexlScript.getVariables(),&lt;/tt&gt; the code &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;b&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;&lt;/tt&gt; is equivalent to &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;b.c&amp;#93;&lt;/span&gt;&lt;/tt&gt;, which in fact should be equivalent to &lt;tt&gt;a[b&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;c&amp;quot;&amp;#93;&lt;/span&gt;]&lt;/tt&gt;. Something is wrong here...&lt;/p&gt;</comment>
                            <comment id="16856126" author="henrib" created="Tue, 4 Jun 2019 21:13:23 +0000"  >&lt;p&gt;I&apos;m sorry, I must have been unclear; let me try again.&lt;/p&gt;

&lt;p&gt;The intended purpose of getVariable is to retrieve the list of variables susceptible to change the outcome of a script/expression evaluation. The output is a set of list of strings. Each list is at least a (top level) variable followed by properties; if one of this list is {&lt;tt&gt;&quot;a&quot;, &quot;b&quot;&lt;/tt&gt;}, it means if there is a solvable variable &lt;tt&gt;&apos;a&apos;&lt;/tt&gt; - and more precisely a solvable property &lt;tt&gt;&quot;b&quot;&lt;/tt&gt; of  a variable &lt;tt&gt;&quot;a&quot;&lt;/tt&gt;, varying its value is susceptible to change the outcome of the script evaluation. If one list is {&lt;tt&gt;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&lt;/tt&gt;}, it means the solvable property &lt;tt&gt;&quot;c&quot;&lt;/tt&gt; of the solvable property &lt;tt&gt;&quot;b&quot;&lt;/tt&gt; of the solvable variable &lt;tt&gt;&quot;a&quot;&lt;/tt&gt; may have an effect etc. You get the idea.&lt;br/&gt;
It also means in that latest form case, that &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;&lt;/tt&gt; may behave the same way and thus generates the same list..&lt;br/&gt;
A side effect is that the method also picks up the (evil) antish-variables but I suspect (and hope) anyone using those in their environment knows them and should have no difficulty reconciling the output of getVariables and the potential antish vars.&lt;/p&gt;

&lt;p&gt;As for you example, &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;b&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;&lt;/tt&gt; is not equivalent to &lt;tt&gt;a&lt;span class=&quot;error&quot;&gt;&amp;#91;b.c&amp;#93;&lt;/span&gt;&lt;/tt&gt; ; the latter is equivalent to &lt;tt&gt;a[b&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;]&lt;/tt&gt;. I&apos;ve added 2 more examples in VarTest.testRefs ( &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/66d5f6e69992a6473c94bff2cf17889a428ab622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/66d5f6e69992a6473c94bff2cf17889a428ab622&lt;/a&gt; ).&lt;/p&gt;

&lt;p&gt;All that being said, I think the feature still works as intended (per &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-113&quot; title=&quot;Add functions to extract which variables, parameters and local variables are used to evaluate a script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-113&quot;&gt;&lt;del&gt;JEXL-113&lt;/del&gt;&lt;/a&gt;). But I hear you, things have changed wrt to property/array resolution so we may want to add an option to that feature to only consider dotted identifiers - not their array counterparts. That&apos;s fairly easy (Engine.java, lline 588, add a condition), we just need to specify how to pass it down. I prototried with a boolean argument to getVariable, that works but changes lots of code, adding overloads; may be the Engine could be configured through an option since it is probably related to resolver strategies.&lt;/p&gt;

&lt;p&gt;Share your thoughts.&lt;/p&gt;</comment>
                            <comment id="16857849" author="dmitri_blinov" created="Thu, 6 Jun 2019 16:29:24 +0000"  >&lt;p&gt;I think the idea of having an option at the Engine level is more preferrable than a parameter of the &lt;tt&gt;getVariables()&lt;/tt&gt;. I can not imagine a situation where one needs to analyze variables both ways at once, so we can have the engine to be in compatible mode by default, and allow to trigger it on during engine creation in case one sees its more appropriate.&lt;/p&gt;</comment>
                            <comment id="16857942" author="dmitri_blinov" created="Thu, 6 Jun 2019 17:48:22 +0000"  >&lt;p&gt;Just as I thought, there is a bug in current implementation. Consider the following test case in &lt;tt&gt;VarTest.testRefs&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;a[b].c&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; vars = e.getVariables();
&#160;&#160;&#160;&#160;&#160;&#160;&#160; expect = mkref(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[][]{{&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;}, {&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;}});
&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.assertTrue(eq(expect, vars));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16859218" author="henrib" created="Sat, 8 Jun 2019 13:21:13 +0000"  >&lt;p&gt;Changeset: a3c210cfc5eabd1bbb1d6ae4b009fe831e2f1d9b&lt;br/&gt;
Author:    Henri Biestro &amp;lt;hbiestro@gmail.com&amp;gt;&lt;br/&gt;
Date:      2019-06-08 15:20&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-302&quot; title=&quot;JexlScript.getVariables returns strange values for array access&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-302&quot;&gt;&lt;del&gt;JEXL-302&lt;/del&gt;&lt;/a&gt;: added jexl builder flag to control variable collecting behavior (collectAll); fixed wrong collecting behavior on array references&lt;/p&gt;</comment>
                            <comment id="17030755" author="dmitri_blinov" created="Wed, 5 Feb 2020 15:54:09 +0000"  >&lt;p&gt;Maybe I&apos;m kicking a dead horse here, but can you please explain the logic behind &lt;tt&gt;x.y[&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;z&amp;#39;, &amp;#39;t&amp;#39;&amp;#93;&lt;/span&gt;]&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testLiteral() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.y[[&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;t&apos;&lt;/span&gt;]]&quot;&lt;/span&gt;);
        Set&amp;lt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; vars = e.getVariables();
        Assert.assertEquals(1, vars.size());
        Assert.assertTrue(eq(mkref(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[][]{{&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;[ &lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;t&apos;&lt;/span&gt; ]&quot;&lt;/span&gt;}}), vars));
    } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why do we expect the last &quot;[ &apos;z&apos;, &apos;t&apos; ]&quot; part? How is it differ from, for instance, &lt;tt&gt;x.y&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;z&amp;#39; + &amp;#39;t&amp;#39;&amp;#93;&lt;/span&gt;&lt;/tt&gt; in a sense that both &lt;tt&gt;&apos;z&apos; + &apos;t&apos;&lt;/tt&gt; and &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;z&amp;#39;, &amp;#39;t&amp;#39;&amp;#93;&lt;/span&gt;&lt;/tt&gt; are just expressions?&lt;/p&gt;</comment>
                            <comment id="17034586" author="henrib" created="Tue, 11 Feb 2020 16:32:41 +0000"  >&lt;p&gt;That subject is moot if you use a JexBuilder(). collectAll(false) as in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        JexlEngine jexld = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().collectAll(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
        e = jexld.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.y[{&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;t&apos;&lt;/span&gt;}]&quot;&lt;/span&gt;);
        vars = e.getVariables();
        Assert.assertEquals(1, vars.size());
        Assert.assertTrue(eq(mkref(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[][]{{&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;}}), vars));}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the collectAll(true) case, the logic is in the actual intent of getVariables ; statically capture the elements that will potentially influence the script execution flow, ie all variables. Since one can configure JEXL so that a.b is equivalent to a&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;&amp;#93;&lt;/span&gt;, it stands to reason that a a[&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;, &amp;#39;c&#8217;&amp;#93;&lt;/span&gt;] can be interpreted as &lt;span class=&quot;error&quot;&gt;&amp;#91;a.b, a.c&amp;#93;&lt;/span&gt;. , thus the a, &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;, &amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt; resulting of getVariables.&#160;The same logic can be applied to constant sets and maps.&lt;/p&gt;

&lt;p&gt;For instance:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        script = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;moon.landing[[&lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;MM&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;dd&apos;&lt;/span&gt;]]&quot;&lt;/span&gt;);
        result = (List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;) script.execute(ctxt);
        Assert.assertEquals(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;1969&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;), result);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this example, the script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 moon.landing[[&lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;MM&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;dd&apos;&lt;/span&gt;]]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;is equivalent to&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 [ moon.landing.yyyy, moon.landing.MM, moon.landing.dd ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With a bit of added parsing, it becomes possible to determine those from getVariables.&lt;br/&gt;
 I&apos;m adding a test case to illustrate, &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/09db242b8cffbf63ad4a59d4e62f3ac358d4be24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JEXL-302: added a test for JexBuilder.captureAll() and JexlScript.get&#8230;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17035185" author="dmitri_blinov" created="Wed, 12 Feb 2020 09:20:21 +0000"  >&lt;p&gt;Thanks for the clarification, it was the transion from &lt;tt&gt;a[&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;, &amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;]&lt;/tt&gt; to &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;a.b, a.c&amp;#93;&lt;/span&gt;&lt;/tt&gt; that I wasn&apos;t able to figure out. This is not obvious because getting list of properties via array access is not supported anywhere in the basic implementation. Not sure whether it&apos;s worth adding such a feature though. But one thing that I think is strange here is that &lt;tt&gt;getVariables()&lt;/tt&gt;&#160; in fact &lt;b&gt;relies&lt;/b&gt; on the hypotesis that one should implement array access to support sets and arrays in such a way.&lt;/p&gt;</comment>
                            <comment id="17037331" author="henrib" created="Fri, 14 Feb 2020 22:13:11 +0000"  >&lt;p&gt;Changeset: 8dee2ad6abe88213625dc126cf811d43925c6317&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2020-02-14 23:12&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-302&quot; title=&quot;JexlScript.getVariables returns strange values for array access&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-302&quot;&gt;&lt;del&gt;JEXL-302&lt;/del&gt;&lt;/a&gt;: added a capture mode to further refine how getVariable should behave wrt constants in array references&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02shk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-301] Array access operator does not fail on null object in non-strict arithmetic mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-301</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Consider the following test cases &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNullArrayAccess() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)).create();
        JexlScript s = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; x[0]&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
           &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = s.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
           Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should have failed&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
           &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNullArrayAccess2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)).create();
        JexlScript s = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = [&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,1]; x[0][0]&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
           &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = s.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
           Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should have failed&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
           &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I exect array access operator to work identically in both cases, i.e. we should fail on trying to get an array element of null. Nevertheless, only the second case fails. I think this is a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13233916">JEXL-301</key>
            <summary>Array access operator does not fail on null object in non-strict arithmetic mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 May 2019 08:01:45 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:20 +0000</updated>
                            <resolved>Wed, 22 May 2019 16:31:52 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16846036" author="henrib" created="Wed, 22 May 2019 16:31:52 +0000"  >&lt;p&gt;Thanks for the bug report and unit tests; &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/68d1b317f38e49a6cad3c283ad05c7d79f29b490&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02sg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-300] Ant-ish variables should not use safe-access operator syntax</title>
                <link>https://issues.apache.org/jira/browse/JEXL-300</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a?.x = 1; a.x&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;returns 1 and creates ant-ish variable &lt;tt&gt;a.x&lt;/tt&gt; in the evaluation context. The expected behaviour is to fail with assignment error because there is no &lt;tt&gt;a&lt;/tt&gt; variable. As an alternative approach we can restrict safe-access operator at the left side of assignment at all, since there is no much sense in assigning anything to what can be null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13233219">JEXL-300</key>
            <summary>Ant-ish variables should not use safe-access operator syntax</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 May 2019 11:34:20 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:43 +0000</updated>
                            <resolved>Wed, 15 May 2019 16:46:21 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16840563" author="henrib" created="Wed, 15 May 2019 16:46:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/ee40b6eeded0acd7057bf9fea75f89139ae4528a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/ee40b6eeded0acd7057bf9fea75f89139ae4528a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02o4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-296] Real literal in scientific format is not parsed without suffix</title>
                <link>https://issues.apache.org/jira/browse/JEXL-296</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have found that in current implementation the &lt;tt&gt;testRealLiteralScript()&lt;/tt&gt; fails with ambigous statement error &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testRealLiteralScript() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o;
        o = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;1e10&quot;&lt;/span&gt;).execute(jc);
        Assert.assertEquals(1e10, o);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13225199">JEXL-296</key>
            <summary>Real literal in scientific format is not parsed without suffix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Apr 2019 08:32:15 +0000</created>
                <updated>Fri, 28 Apr 2023 15:15:46 +0000</updated>
                            <resolved>Mon, 1 Apr 2019 14:04:15 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16806786" author="henrib" created="Mon, 1 Apr 2019 14:04:15 +0000"  >&lt;p&gt;Changeset: bf6d0dd4c11221c13df11a364339765586fac18e&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-04-01 16:03&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-296&quot; title=&quot;Real literal in scientific format is not parsed without suffix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-296&quot;&gt;&lt;del&gt;JEXL-296&lt;/del&gt;&lt;/a&gt;: fix grammar, add test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01b4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-294] expression:b == true , when b=&quot;abc&quot; then return true</title>
                <link>https://issues.apache.org/jira/browse/JEXL-294</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems a bit odd that the expression &quot;abc&quot; == true returns true.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test294() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str = &lt;span class=&quot;code-quote&quot;&gt;&quot;(b)-&amp;gt;{ b == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }&quot;&lt;/span&gt;;
        JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        JexlScript e = jexl.createScript(str);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = e.execute(ctxt, &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, value); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt; == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; ??
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;java 8&lt;/p&gt;

&lt;p&gt;commons-jexl 3.1&lt;/p&gt;</environment>
        <key id="13224250">JEXL-294</key>
            <summary>expression:b == true , when b=&quot;abc&quot; then return true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="&#26928;&#27713;&#33760;&#33821;">&#38145;&#25112;&#24378;</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Mar 2019 10:05:16 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:25 +0000</updated>
                            <resolved>Thu, 28 Mar 2019 09:08:22 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16802844" author="henrib" created="Wed, 27 Mar 2019 14:20:36 +0000"  >&lt;p&gt;It may seem odd but the explanation resides in the logic statement&#160;&apos;everything that is not false is true&apos;.&lt;/p&gt;

&lt;p&gt;The values 0, NaN, null, false, the empty-string and the &quot;false&quot; string are considered false in the default JEXL arithmetic, any other value is considered true. The default &apos;equals&apos; operator in presence of one boolean argument will coerce the second one to a boolean also. The implication is thus that &quot;abc&quot; is our example is coerced to boolean; since that string is neither empty nor &quot;false&quot;, it is true. And true == true.&lt;/p&gt;

&lt;p&gt;If you need a different behaviour, I&apos;d recommend implementing your own JexlArithmetic, one that would not coerce boolean arguments.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Arithmetic294 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
        &lt;span class=&quot;code-comment&quot;&gt;/** Ctor. */&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Arithmetic294(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; f) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(f);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equals(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; left, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; right) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left == right) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || right == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; compare(left, right, &lt;span class=&quot;code-quote&quot;&gt;&quot;==&quot;&lt;/span&gt;) == 0;
            }
        }
    }
        
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test294b() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str = &lt;span class=&quot;code-quote&quot;&gt;&quot;(b)-&amp;gt;{ b == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }&quot;&lt;/span&gt;;
        JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Arithmetic294(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)).create();
        JexlScript e = jexl.createScript(str);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = e.execute(ctxt, &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, value); 
        value = e.execute(ctxt, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, value); 
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16803633" author="&#26928;&#27713;&#33760;&#33821;" created="Thu, 28 Mar 2019 06:53:49 +0000"  >&lt;p&gt;Thank you for your quick answer. Do I need to close this ?&lt;/p&gt;</comment>
                            <comment id="16803721" author="henrib" created="Thu, 28 Mar 2019 09:08:22 +0000"  >&lt;p&gt;Works as intended, other behaviours are possible through arithmetic customisation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z015bk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-293] leading plus sign not recognized</title>
                <link>https://issues.apache.org/jira/browse/JEXL-293</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The expression &quot;+2&quot; is not valid ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13224041">JEXL-293</key>
            <summary>leading plus sign not recognized</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sharonbn">Sharon Ben Asher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2019 13:47:25 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:21 +0000</updated>
                            <resolved>Fri, 29 Mar 2019 14:49:50 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16802788" author="henrib" created="Wed, 27 Mar 2019 13:33:57 +0000"  >&lt;p&gt;Indeed, it is not syntactically correct; there is a unary minus operator, no unary plus operator.&lt;br/&gt;
In Java, unary plus promotes a byte, char or short operand to int; note that this is not a Math.abs(...) shortcut btw.&lt;br/&gt;
Since number literals are already integer in Jexl, functional value seems narrow.&lt;br/&gt;
Care to explain why this is a major bug in your case ?&lt;/p&gt;</comment>
                            <comment id="16802824" author="sharonbn" created="Wed, 27 Mar 2019 14:03:30 +0000"  >&lt;p&gt;Our application accepts String containing user-defined arithmetic expression and needs to validate and evaluate it. My QA has opened a bug report saying my solution does not accept valid&#160;arithmetic expressions that our customers may enter. I do not believe that &quot;narrow functional value&quot; is sufficient reason to close the ticket, nor would it be acceptable by our Product or Support managers.&#160;&lt;/p&gt;

&lt;p&gt;Simply put: a valid arithmetic expression that produces an error is a major bug. It is not far fetched to say it should be critical.&#160;&lt;/p&gt;

&lt;p&gt;PS, Although the&#160;Language Elements page mentions only the unary minus operator, &lt;b&gt;it does not explicitly specifies that&#160;unary&#160;plus&#160;is invalid&lt;/b&gt;. Something that devs may easily overlook when evaluating whether or not to use&#160;this library (as I have done)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16802868" author="henrib" created="Wed, 27 Mar 2019 14:36:55 +0000"  >&lt;p&gt;Thank you for clarifying why this is an issue in your environment.&lt;br/&gt;
Are you in a position to use snapshot versions ? If a Jexl 3.2-SNAPSHOT jar was produced, would you be able to use it ?&lt;br/&gt;
PS: Do you need to be angry or right or do you want help ?&lt;/p&gt;</comment>
                            <comment id="16802874" author="sharonbn" created="Wed, 27 Mar 2019 14:45:39 +0000"  >&lt;p&gt;I am OK to use snapshot version.&lt;br/&gt;
 I am not angry. I did not understand why I need to explain something that is obvious in my eyes.&#160;&lt;/p&gt;

&lt;p&gt;I apologize if my choice of words was perceived as abrasive.&lt;/p&gt;</comment>
                            <comment id="16802901" author="henrib" created="Wed, 27 Mar 2019 15:08:26 +0000"  >&lt;p&gt;JEXL is 8+ years old, lack of unary plus has not been an issue till yesterday. Pardon my curiosity.&lt;/p&gt;

&lt;p&gt;Based on your reaction, I&apos;d encourage your PM/PO/QA and you to check that the rest of the JEXL syntax - and JEXL itself - is appropriate to your project. There might be many other unmet expectations and behaviour discrepancies from the specification of your own expression language.&lt;/p&gt;</comment>
                            <comment id="16805056" author="henrib" created="Fri, 29 Mar 2019 14:49:50 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-295&quot; title=&quot;Add unary plus operator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-295&quot;&gt;&lt;del&gt;JEXL-295&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13224373">JEXL-295</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0141k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-291] Using sandbox prevents array-syntax lookup by number in Map</title>
                <link>https://issues.apache.org/jira/browse/JEXL-291</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Using a JexlSandbox, even if it&apos;s a whitebox sandbox that allows everything, makes all array-syntax lookup by integer in a Map fail.&#160; The array lookup syntax for a String key still works.&lt;/p&gt;

&lt;p&gt;For example&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;value&apos;&lt;/span&gt;}.[&lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;can find &apos;value&apos;, but&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{1 : &lt;span class=&quot;code-quote&quot;&gt;&apos;value&apos;&lt;/span&gt;}[1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;evaluates to null, instead of &apos;value&apos;.&lt;/p&gt;

&lt;p&gt;The problem seems to be that SandboxUberspect converts the property 1 to a String &quot;1&quot; when determining the name of the property and then, when it attempts to look up the value, it uses the String.&#160; The problem exists for getting and setting by array syntax.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to Reproduce:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This can be seen with a simple program:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Main {
&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] arguments) {
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlEngine simpleJexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlExpression simpleExpression = simpleJexlEngine.createExpression(
           &lt;span class=&quot;code-quote&quot;&gt;&quot;{1:&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;}[1]&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = simpleExpression.evaluate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext());
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;.equals(value);

&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlEngine sandboxedJexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().
           sandbox(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)). &lt;span class=&quot;code-comment&quot;&gt;// add a whitebox sandbox
&lt;/span&gt;           create();
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlExpression sandboxedExpression =
           sandboxedJexlEngine.createExpression(
              &lt;span class=&quot;code-quote&quot;&gt;&quot;{1:&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;}[1]&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; sandboxedValue = sandboxedExpression.evaluate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext());
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;.equals(sandboxedValue); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;--- fails
&lt;/span&gt;&#160;&#160;&#160; }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Work-around&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;As the Java developer, I was able to work around this problem by creating a custom Uberspect that&apos;s a copy of SandboxUberspect, but has a different implementation for getPropertySet() and getPropertyGet().&#160; Instead of passing in &quot;actual&quot; to uberspect.getPropertySet() and uberspect.getPropertyGet() (which has been converted to a String), it passes in &quot;identifier&quot;, which is the original object.&#160; I don&apos;t understand the JEXL internals well enough to know if this is correct, though.&lt;/p&gt;

&lt;p&gt;As a JEXL programmer, I could only work around this by calling &quot;get&quot; and &quot;put&quot; on the Map object, instead of using the array syntax.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13215330">JEXL-291</key>
            <summary>Using sandbox prevents array-syntax lookup by number in Map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Feb 2019 20:54:39 +0000</created>
                <updated>Mon, 7 Jun 2021 13:15:00 +0000</updated>
                            <resolved>Fri, 22 Mar 2019 17:21:46 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16799202" author="henrib" created="Fri, 22 Mar 2019 17:21:46 +0000"  >&lt;p&gt;Changeset: c39f4cf674000f45c23597fa945a0421aac79cbf&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-03-22 18:20&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-291&quot; title=&quot;Using sandbox prevents array-syntax lookup by number in Map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-291&quot;&gt;&lt;del&gt;JEXL-291&lt;/del&gt;&lt;/a&gt;: use user-provided property object if sandbox does not change input&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0wv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-290] safe navigation fails on chained method calls</title>
                <link>https://issues.apache.org/jira/browse/JEXL-290</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL safe navigation either by configuration or by explicit notation (?.) fails on chained method calls when one method is not solvable.&lt;br/&gt;
For example, &apos;x?.nosuchmethod()?.toString()&apos; should not throw an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209840">JEXL-290</key>
            <summary>safe navigation fails on chained method calls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jan 2019 09:56:03 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:56 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 10:11:32 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16743825" author="henrib" created="Wed, 16 Jan 2019 10:11:32 +0000"  >
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/1b5472edd4b50a8c3d3b8ddc41e8e5387d76bad5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/1b5472edd4b50a8c3d3b8ddc41e8e5387d76bad5&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|y0025k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-289] Passing undeclared function parameter can overwrite a local function variable</title>
                <link>https://issues.apache.org/jira/browse/JEXL-289</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = function(a) { &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; b; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; b}; x(1,2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;returns &lt;tt&gt;2&lt;/tt&gt;. The expected behaviour is to return &lt;tt&gt;null&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;As an additional safeguarding measure we may also consider restricting a function call with more supplied arguments than the number of declared parameters, since, IMO, in a majority of cases this is a bug, like where the function definition was changed but the call was not updated accordingly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209176">JEXL-289</key>
            <summary>Passing undeclared function parameter can overwrite a local function variable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Jan 2019 12:22:35 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:17 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 17:11:40 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16744261" author="henrib" created="Wed, 16 Jan 2019 17:11:40 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When binding arguments, check the number of params as the upper limit of transferable ones; other args will be lost.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/817224be9c2762c8a79c1f392522cc98001e5be1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/817224be9c2762c8a79c1f392522cc98001e5be1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00rww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-287] Wrong resolution of local variables</title>
                <link>https://issues.apache.org/jira/browse/JEXL-287</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Consider the following example&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x = 1; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 2; x
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this example the &lt;tt&gt;null&lt;/tt&gt; is returned, which is the value of uninitialized local variable &lt;tt&gt;x&lt;/tt&gt;. The expected behaviour is to return &lt;tt&gt;1.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The reason is the variable declaration is a &lt;b&gt;statement&lt;/b&gt;, so one can expect that, as a statement, it should be evaluated according to its position within the script structure. &lt;/p&gt;

&lt;p&gt;The suggestion is to move the &lt;tt&gt;Scope.declareVariable()&lt;/tt&gt; call from parse time to interpretation time. Also, the resolution whether an identifier inside the script referes to the local variable or to the contextual variable should be moved from parse time to the interpretation time. &lt;/p&gt;

&lt;p&gt;I think we can also reconsider the variable resolution during a variable initialization:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sum = 0; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; sum = sum + 1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As of now, Jexl evaluates the local variable &lt;tt&gt;sum&lt;/tt&gt; as &lt;tt&gt;1&lt;/tt&gt;, as it considers the &lt;tt&gt;sum+1&lt;/tt&gt; an expression referencing the local variable &lt;tt&gt;sum&lt;/tt&gt;, which is, sort of, pointless. We can change this to referencing a contextual variable instead, so that the result would be &lt;tt&gt;2&lt;/tt&gt;. It can be useful in plain-vanilla Jexl (without an access differentiator between local and contextual variables) to allow one to initialize a local variable &lt;tt&gt;foo&lt;/tt&gt; with the value of contextual variable &lt;tt&gt;foo&lt;/tt&gt; without using temporary variable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209159">JEXL-287</key>
            <summary>Wrong resolution of local variables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Jan 2019 07:51:45 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:17 +0000</updated>
                            <resolved>Thu, 17 Jan 2019 16:24:05 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16743803" author="henrib" created="Wed, 16 Jan 2019 09:50:45 +0000"  >&lt;p&gt;The actual behaviour is by design; as in JavaScript, local variable have global scope after their point of declaration.&lt;br/&gt;
What you describe would be a new behaviour aka a new feature.&lt;/p&gt;</comment>
                            <comment id="16743855" author="henrib" created="Wed, 16 Jan 2019 10:51:08 +0000"  >&lt;p&gt;Actually, there is something there to consider...&lt;/p&gt;</comment>
                            <comment id="16744260" author="henrib" created="Wed, 16 Jan 2019 17:10:35 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Code now differentiates a declared local (var x; ) vs a defined local - a local that has been assigned a value - (var x = 1; or var x; .... x = 1; )&lt;/li&gt;
	&lt;li&gt;Local variables begin their life uninitialized; variable resolution reverts to global when hitting an uninitialised local.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/817224be9c2762c8a79c1f392522cc98001e5be1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/817224be9c2762c8a79c1f392522cc98001e5be1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16745251" author="henrib" created="Thu, 17 Jan 2019 16:17:54 +0000"  >&lt;p&gt;Found regression case related to safe navigation.&lt;/p&gt;</comment>
                            <comment id="16745257" author="henrib" created="Thu, 17 Jan 2019 16:24:05 +0000"  >&lt;p&gt;A cross between &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-287&quot; title=&quot;Wrong resolution of local variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-287&quot;&gt;&lt;del&gt;JEXL-287&lt;/del&gt;&lt;/a&gt; and safe navigation.&lt;br/&gt;
In this case, the local variable is declared, not defined, there is no global of that name, the var is undefined; this was detected but not protected by the &apos;safe&apos; navigation (aka behave like 3.1).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/d23fc99a99ac44f2a4352899e2a6d12d26a74503&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/d23fc99a99ac44f2a4352899e2a6d12d26a74503&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00rt4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-286] &apos;for&apos; statement without a body should update its variable</title>
                <link>https://issues.apache.org/jira/browse/JEXL-286</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following scripts produce different results&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x = 0; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(x : 1..2); &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x = 0; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(x : 1..2){}; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The expected behaviour is that both scripts should return the same value of &lt;tt&gt;2&lt;/tt&gt;, i.e. the &apos;for&apos; statement without a body should nevertheless update its iteration variable&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209158">JEXL-286</key>
            <summary>&apos;for&apos; statement without a body should update its variable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Jan 2019 07:46:31 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:54 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 10:49:33 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16743848" author="henrib" created="Wed, 16 Jan 2019 10:49:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/4dc0dcf7a89a5cbfb613e64bb2e052984fd1a2a9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/4dc0dcf7a89a5cbfb613e64bb2e052984fd1a2a9&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00rsw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-285] For statement variable may seem unaffected by iteration</title>
                <link>https://issues.apache.org/jira/browse/JEXL-285</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a &apos;for&apos; loop uses a global variable (as in (for c: ...)), if a local variable with that name has been declared previously, the global variable is nevertheless used for iteration. Since the local variable is preferred during resolution in statements within the loop, the iteration does not change the variable value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13208777">JEXL-285</key>
            <summary>For statement variable may seem unaffected by iteration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2019 13:02:58 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:30 +0000</updated>
                            <resolved>Fri, 11 Jan 2019 16:05:01 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16740518" author="henrib" created="Fri, 11 Jan 2019 16:05:01 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Detect reuse of local variable in &apos;for&apos; statements at parsing time&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/889b4b01e7998c485661eca4eb3159fbe1840a5e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/889b4b01e7998c485661eca4eb3159fbe1840a5e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16740547" author="dmitri_blinov" created="Fri, 11 Jan 2019 16:41:51 +0000"  >&lt;p&gt;Though I don&apos;t like the initial idea of using contextual variables in &apos;for&apos; statements, I think we are breaking contract by this change. It is stated that &lt;tt&gt;for(x : items)&lt;/tt&gt; should use a contextual variable, because it was syntaxically specified to do so. After this change it becomes unclear whether a contextual variable is used or a local one, because it is not defined by syntax anymore.&lt;br/&gt;
Consider the following example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
x = 0; 
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (somecondition) {
   &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = 1;
}
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (x : items) {
}
&lt;span class=&quot;code-comment&quot;&gt;// What is the value of contextual variable &lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt; here?&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If one is intentionally mixing local and contextual variables, one should be prepared to resolve the visibilty shadowing by some other means, like using &lt;tt&gt;this.variable&lt;/tt&gt; or something.&lt;/p&gt;</comment>
                            <comment id="16741385" author="henrib" created="Sat, 12 Jan 2019 19:54:18 +0000"  >&lt;p&gt;After the declaration of a local variable, its symbol is always resolved as the local variable; local variables have global scope after their declaration and they do have precedence over contextual ones. In you example, the contextual &apos;x&apos; is 0 ; &apos;x&apos; is however solved as the local one (ie the last value of iteration). In other words, in a vanilla JEXL -&apos;this&apos; not pointing at the context - , there is no way to access a contextual variable whose symbol clashes with a local after its declaration.&lt;br/&gt;
No-one does clash intentionally contextual and local variables; these are mistake that cause much grief since forgetting the &apos;var&apos; in the &apos;for&apos; may result in incorrect iteration. The fix is actually enforcing the contract of variable resolution in the &apos;for&apos; statement.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00pgo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-283] JexlEngine parse an expression in wrong way.It seems like create a SimpleNode in the ASTJexlScript</title>
                <link>https://issues.apache.org/jira/browse/JEXL-283</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I used the jexl-2.0.1 in my project for process the user request data.Recently i met a problem,the jexl expression does not work correct. So i kill the preocess and restart my application.it work good!&lt;/p&gt;

&lt;p&gt;I seems like the &lt;b&gt;JexlEngine.createExpression(String exp)&lt;/b&gt; goes in wrong way,It create a Expression object which has a &lt;b&gt;simpleNode&lt;/b&gt; in it.So when the Excepssion oject call method &lt;b&gt;evaluate(JexlContext)&lt;/b&gt; thow a &lt;b&gt;UnsupportedOperationException:Not Supported yet (Interpreter.java line 1338).&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Expression in my project is &lt;b&gt;ASTReference&lt;/b&gt;,it looks like this &lt;b&gt;&quot;ff:upper(&apos;sss&apos;)&quot;&lt;/b&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;AIX 6.1&lt;/p&gt;

&lt;p&gt;JDK 1.6&lt;/p&gt;</environment>
        <key id="13204827">JEXL-283</key>
            <summary>JexlEngine parse an expression in wrong way.It seems like create a SimpleNode in the ASTJexlScript</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zhuliang891122">zhuliang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Dec 2018 07:39:16 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:27 +0000</updated>
                            <resolved>Tue, 18 Dec 2018 14:16:36 +0000</resolved>
                                    <version>2.0.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16722819" author="dmitri_blinov" created="Mon, 17 Dec 2018 09:22:18 +0000"  >&lt;p&gt;The 2.0.1 library is realy outdated now. Please try to use 2.1.1 library to see your problem is resolved in it. &lt;/p&gt;</comment>
                            <comment id="16722834" author="zhuliang891122" created="Mon, 17 Dec 2018 09:51:14 +0000"  >&lt;p&gt;I know 2.0.1 library is out of date now,but i don&#8216;t know how this happend. So i can&#8217;t make sure that if i update the version to 2.1.1, it won&apos;t happen again&lt;/p&gt;</comment>
                            <comment id="16724105" author="henrib" created="Tue, 18 Dec 2018 14:16:36 +0000"  >&lt;p&gt;I&apos;m sorry but as is, this is not a bug report. You need at least a reproducible case to illustrate a problem that can be observed and fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12951995" name="292207985048712103.jpg" size="297545" author="zhuliang891122" created="Mon, 17 Dec 2018 07:39:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u001dc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-282] Pragmas with antish names are broken</title>
                <link>https://issues.apache.org/jira/browse/JEXL-282</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The test cases in &lt;tt&gt;PragmaTest.java&lt;/tt&gt; are now silently swallowing parsing exceptions of tests with antish pragma names. In fact we should report a test error if there is any exception caught during test run.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&#160;&#160; @Test
&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testPragmas() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; JexlScript script = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;#pragma one 1\n#pragma the.very.hard &lt;span class=&quot;code-quote&quot;&gt;&apos;truth&apos;&lt;/span&gt;\n2;&quot;&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.assertTrue(script != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; pragmas = script.getPragmas();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.assertEquals(2, pragmas.size());
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.assertEquals(1, pragmas.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;truth&quot;&lt;/span&gt;, pragmas.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;the.very.hard&quot;&lt;/span&gt;));
&#160;&#160;&#160;&#160;&#160;&#160;&#160; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = xjexl.toString();
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;/* We need to add &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to the test */&lt;/span&gt; 
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should not fail with: &quot;&lt;/span&gt; + s);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; }
&#160;&#160;&#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As for the problem itself, now a jexl script will not parse correctly with pragmas specifying antish name, like the example specified in the documentation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#pragma execution.option 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13204242">JEXL-282</key>
            <summary>Pragmas with antish names are broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Dec 2018 14:00:37 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:56 +0000</updated>
                            <resolved>Tue, 18 Dec 2018 10:15:29 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16723895" author="henrib" created="Tue, 18 Dec 2018 10:15:30 +0000"  >&lt;p&gt;Fixed grammar and test&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/3b4a48485e691618d79b15c0e18190b06b1e2a7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/3b4a48485e691618d79b15c0e18190b06b1e2a7f&lt;/a&gt;&lt;br/&gt;
revision   : 3b4a48485e691618d79b15c0e18190b06b1e2a7f&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01hjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-281] MethodExecutor incorrectly tests for empty parameters list</title>
                <link>https://issues.apache.org/jira/browse/JEXL-281</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Currently MethodExecutor constructor contains code&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (method != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;[] formal = method.getParameterTypes();
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the last parameter is an array, the method is considered as vararg
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (formal != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; MethodKey.isVarArgs(method)) {
        vastart = formal.length - 1;
        vaclass = formal[vastart].getComponentType();
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;variable formal is never null, beacause Javadoc for getParameterTypes&#160; states that&#160; &quot;returns an array of length 0 if the underlying executable takes no parameters.&quot; (implementation invokes&#160; clone - so there always be an object)&lt;/p&gt;

&lt;p&gt;So test for empty parameter list&#160; should not test for null, but for empty array -&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (formal.length &amp;gt; 0 &amp;amp;&amp;amp; MethodKey.isVarArgs(method)) {&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;Problem is that MethodKey.isVarArgs is very costly (it traverses class hierarchy, and throws Exception for every object which does not have method by this name) - so invocation of isVarArgs should be avoided if not required. Currently it is always called due to wrong test condition&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13204067">JEXL-281</key>
            <summary>MethodExecutor incorrectly tests for empty parameters list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="mhankus">Mirek Hankus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Dec 2018 18:34:08 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:57 +0000</updated>
                            <resolved>Mon, 17 Dec 2018 15:45:34 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16723065" author="henrib" created="Mon, 17 Dec 2018 15:13:34 +0000"  >
&lt;p&gt;Refined logic in MethodKey.isVarArgs avoiding costly class hierarchy walk&lt;br/&gt;
revision   : 51a58ed28ce0a530c7854aa863849e47de294356&lt;/p&gt;</comment>
                            <comment id="16723093" author="henrib" created="Mon, 17 Dec 2018 15:45:34 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;releases notes and changes&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/51a58ed28ce0a530c7854aa863849e47de294356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/51a58ed28ce0a530c7854aa863849e47de294356&lt;/a&gt;&lt;br/&gt;
revision   : e7d212e423cd409bdd049864e77b0521ea5e4c10&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13356033">JEXL-343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01ggg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-280] break/continue statements outside of the loop</title>
                <link>https://issues.apache.org/jira/browse/JEXL-280</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;As of now Jexl checks if the &lt;tt&gt;break&lt;/tt&gt; and &lt;tt&gt;continue&lt;/tt&gt; statements are only used inside the &lt;tt&gt;loop&lt;/tt&gt; statements, if not - the parsing execption is thrown. But the checks do not fire inside the nested function declaration, if the function itself is declared inside the &lt;tt&gt;loop&lt;/tt&gt; statement.&lt;/p&gt;

&lt;p&gt;The following test case illustates the problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testForEachBreakBrokenInsideFunction() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i : 1..2) y = function() {&lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;}}&quot;&lt;/span&gt;);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; is out of loop!&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Parsing xparse) {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str = xparse.detailedMessage();
            Assert.assertTrue(str.contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;&quot;&lt;/span&gt;));
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The suggested behaviour is to throw the parsing exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13201961">JEXL-280</key>
            <summary>break/continue statements outside of the loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Dec 2018 11:10:30 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:52 +0000</updated>
                            <resolved>Tue, 18 Dec 2018 14:04:41 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16724093" author="henrib" created="Tue, 18 Dec 2018 14:04:41 +0000"  >&lt;p&gt;Added stack of loop counters in parser and tests.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/1a9f28fb6992c641af1c12531716e18dcde4fad6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/1a9f28fb6992c641af1c12531716e18dcde4fad6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16766256" author="henrib" created="Tue, 12 Feb 2019 17:12:34 +0000"  >&lt;p&gt;Changeset: 31eec803d83bab7fe157f40f932bab63aaee22aa&lt;br/&gt;
Author:    henrib &amp;lt;henrib@apache.org&amp;gt;&lt;br/&gt;
Date:      2019-02-12 18:11&lt;br/&gt;
Message:   &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-280&quot; title=&quot;break/continue statements outside of the loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-280&quot;&gt;&lt;del&gt;JEXL-280&lt;/del&gt;&lt;/a&gt;: found new case when lambda created within loop of a lambda, fixed loop counter stack management&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s013mg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-279] Null variables property access do not throw exceptions</title>
                <link>https://issues.apache.org/jira/browse/JEXL-279</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;If &apos;x&apos; is a null variable, &apos;x&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos; does not throw an exception even in strict mode. It should.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13201045">JEXL-279</key>
            <summary>Null variables property access do not throw exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Nov 2018 09:45:11 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:46 +0000</updated>
                            <resolved>Wed, 26 Dec 2018 17:11:27 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16729107" author="henrib" created="Wed, 26 Dec 2018 17:11:27 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refined logic to discriminate undefined vs null variables or properties&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/23c45771d63da0746d86c83d20b8b2f4019d4598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/23c45771d63da0746d86c83d20b8b2f4019d4598&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00xzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-278] Ambiguous exceptions should point to actual statement ambiguity</title>
                <link>https://issues.apache.org/jira/browse/JEXL-278</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;WHAT:&lt;br/&gt;
During parsing, if a JexlException.Ambiguous exception is raised, the location information (JexlInfo) points to the last token before the ambiguity.&lt;br/&gt;
HOW:&lt;br/&gt;
When detecting a parsing ambiguity, use the next parsed token as location information.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13193256">JEXL-278</key>
            <summary>Ambiguous exceptions should point to actual statement ambiguity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Oct 2018 13:02:49 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:40 +0000</updated>
                            <resolved>Sun, 28 Oct 2018 17:14:40 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16666477" author="henrib" created="Sun, 28 Oct 2018 17:14:40 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refined logic to better capture ambiguous statements&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;src/main/java/org/apache/commons/jexl3/parser/Parser.jjt src/test/java/org/apache/commons/jexl3/Issues200Test.java src/main/java/org/apache/commons/jexl3/JexlException.java src/main/java/org/apache/commons/jexl3/parser/JexlParser.java&lt;/p&gt;

&lt;p&gt;revision   : 1d2be49e6fc0fd8bf70a98cf633991c970657136&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zhev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-272] Dereferencing null property not reported on method call</title>
                <link>https://issues.apache.org/jira/browse/JEXL-272</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;With expression &apos;x.&lt;span class=&quot;error&quot;&gt;&amp;#91;y&amp;#93;&lt;/span&gt;.z()&apos;, if x.y is null, the evaluation succeeds returning null instead of raising a JexlException.Property exception. This behaviour should only explicitly occur with &apos;x.&lt;span class=&quot;error&quot;&gt;&amp;#91;y&amp;#93;&lt;/span&gt;?.z()&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184587">JEXL-272</key>
            <summary>Dereferencing null property not reported on method call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Sep 2018 12:39:55 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:50 +0000</updated>
                            <resolved>Wed, 12 Sep 2018 12:59:15 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16612098" author="henrib" created="Wed, 12 Sep 2018 12:59:15 +0000"  >&lt;p&gt;Commit 2f7d6e91261a7211e34efaa53e7e6eb860e1dc62&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/2f7d6e91261a7211e34efaa53e7e6eb860e1dc62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/2f7d6e91261a7211e34efaa53e7e6eb860e1dc62&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y067:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-271] Hoisted variable is lost when currying lambda</title>
                <link>https://issues.apache.org/jira/browse/JEXL-271</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have noticed that when I curry the lambda that contains hoisted variable, then binding to that variable is lost when I call curried lambda. The following test case illustrates the problem&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCurry4() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
        JexlScript base = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; base = 2; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; sum = (x, y, z)-&amp;gt;{ base + x + y + z }; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; y = sum.curry(1); y(2,3)&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = base.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertEquals(8, result);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To put it another way, the following script returns &lt;tt&gt;2&lt;/tt&gt; when it should return &lt;tt&gt;0&lt;/tt&gt;;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; base = 2; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; sum = (x, y, z)-&amp;gt;{ base + x + y + z }; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; y = sum.curry(1); sum(1, 2, 3) - y(2,3)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13182114">JEXL-271</key>
            <summary>Hoisted variable is lost when currying lambda</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2018 12:41:16 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:14 +0000</updated>
                            <resolved>Mon, 10 Sep 2018 13:39:42 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16599625" author="dmitri_blinov" created="Sat, 1 Sep 2018 12:40:48 +0000"  >&lt;p&gt;The following test case also fails.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testHoistLambda() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
        JexlScript base = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; base = 1; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = (a)-&amp;gt;{ &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; y = (b) -&amp;gt; {base + b}; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; base + y(a)}; x(40)&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = base.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertEquals(42, result);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16601863" author="dmitri_blinov" created="Mon, 3 Sep 2018 08:12:59 +0000"  >&lt;p&gt;I have found a fix for both of these problems, for the first we need to fix a constructor of &lt;tt&gt;Curried&lt;/tt&gt; to honor a &lt;tt&gt;Closure&lt;/tt&gt; as a valid base,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Curried(Script base, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(base.jexl, base.source, base.script);
            Scope.Frame sf = (base &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Curried) ? ((Curried) base).frame : 
                             (base &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Closure) ? ((Closure) base).frame :&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sf != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            ...
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the second we need to fix &lt;tt&gt;Scope.getSymbol()&lt;/tt&gt; method to fetch symbol from parent with hoist option set to true&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; getSymbol(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hoist) {
        &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; register = namedVariables != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? namedVariables.get(name) : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (register == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; hoist &amp;amp;&amp;amp; parent != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; pr = parent.getSymbol(name, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            ...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If there are no objections, can I have the changes to be applied the source tree?&lt;/p&gt;</comment>
                            <comment id="16609204" author="henrib" created="Mon, 10 Sep 2018 13:39:42 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;simplified curry(...) after being reminded it was a form of closure (thanks Dmitri)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;commit	2fdb4278d755b85c9c1d9f767a92bde1b9d098cb&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Closure.java	&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java		&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Script.java		&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/Issues200Test.java&lt;/p&gt;</comment>
                            <comment id="16609354" author="dmitri_blinov" created="Mon, 10 Sep 2018 15:02:36 +0000"  >&lt;p&gt;It would also be very helpful if &lt;tt&gt;Closure.getParameters()&lt;/tt&gt; method would return correct argument names on curried closure. Suppose we have a function {{(x,y,z) -&amp;gt; &lt;/p&gt;
{x+y+z}
&lt;p&gt;}} , for which &lt;tt&gt;getParameters()&lt;/tt&gt; returns &lt;span class=&quot;error&quot;&gt;&amp;#91;x,y,z&amp;#93;&lt;/span&gt;. After currying the first parameter it is reasonable to expect the corresponding closure to return &lt;span class=&quot;error&quot;&gt;&amp;#91;y,z&amp;#93;&lt;/span&gt;&#160;as remaining parameter list.&lt;/p&gt;</comment>
                            <comment id="16609371" author="dmitri_blinov" created="Mon, 10 Sep 2018 15:14:16 +0000"  >&lt;p&gt;Since we modified the Interpreter.java here, can you also look at&#160;&lt;tt&gt;Interpreter.interpret()&lt;/tt&gt; method, there is a possibility of incorrect&#160;&lt;tt&gt;ThreadLocal&lt;/tt&gt; handling. First there is a &lt;tt&gt;cancelCheck(node)&lt;/tt&gt; call in &lt;tt&gt;try&lt;/tt&gt; block before threadlocal initialization, and since &lt;tt&gt;cancelCheck()}}can throw exception we may eventually end up in restoring wrong values in&#160;{{finally&lt;/tt&gt; section later on. Moreover, within&#160;&lt;tt&gt;finally&lt;/tt&gt; section we try to call &lt;tt&gt;closiIfSupported()&lt;/tt&gt; for each functor, and who knows, the corresponding &lt;tt&gt;close()&lt;/tt&gt; method may also throw an exception, like &lt;tt&gt;java.io.IOException&lt;/tt&gt;, so we again can skip to restore the correct threadlocal values. ThreadLocals are very important in container environment&lt;/p&gt;</comment>
                            <comment id="16612375" author="henrib" created="Wed, 12 Sep 2018 15:44:44 +0000"  >&lt;p&gt;On TLS handling, good catch; I&apos;ve moved the code accordingly.&lt;br/&gt;
closeIfSupported(...) swallows everything so no worry there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xl6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-270] Wrong Script$Curried creation when script.curry() method is called inside script</title>
                <link>https://issues.apache.org/jira/browse/JEXL-270</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have noticed that when i call lambda.curry() method inside the script, then the curried lamba is created with wrong source text. I expect the source text of the curried lambda to be always equal to that of original, but that is not the case now. To illustrate this I have prepared two testcases, from which &lt;tt&gt;testCurryScript2&lt;/tt&gt; fails with &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failures:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;&#160;&#160; LambdaTest.testCurryScript2:307 expected:&amp;lt;true&amp;gt; but was:&amp;lt;false&amp;gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCurryScript() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlScript base = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;(x, y, z)-&amp;gt;{ x + y + z }&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = base.toString();
        JexlScript script = base.curry(5, 15);
        Assert.assertEquals(text, script.toString());

        JexlEvalContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEvalContext();
        ctxt.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;s&quot;&lt;/span&gt;, base);
        script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; s&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(ctxt);
        Assert.assertEquals(text, result.toString());

        script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; s.curry(1)&quot;&lt;/span&gt;);
        result = script.execute(ctxt);
        Assert.assertEquals(text, result.toString());
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCurryScript2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlScript base = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; base = 0; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; sum = (y, z) -&amp;gt; {&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = base; x += y; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x}; base = 2; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; y = sum.curry(1); y.toString() eq sum.toString()&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = base.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.TRUE, result);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13181567">JEXL-270</key>
            <summary>Wrong Script$Curried creation when script.curry() method is called inside script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2018 09:42:04 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:30 +0000</updated>
                            <resolved>Mon, 10 Sep 2018 13:34:24 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16594854" author="dmitri_blinov" created="Tue, 28 Aug 2018 11:32:50 +0000"  >&lt;p&gt;Somehow the source text of the curried lambda in the second test case becomes the one of the script itself, i.e. {{var base = 0; var sum = (y, z) -&amp;gt;&lt;/p&gt;

{var x = base; x += y; return x}; base = 2; var y = sum.curry(1); y.toString() eq sum.toString()}}, not the {{(y, z) -&amp;gt; {var x = base; x += y; return x}

&lt;p&gt;}}, if this is of any help&lt;/p&gt;</comment>
                            <comment id="16597351" author="dmitri_blinov" created="Thu, 30 Aug 2018 11:54:23 +0000"  >&lt;p&gt;I figured out that the problem was with two methods of &lt;tt&gt;internal/Script.java&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;the second argument &lt;tt&gt;false&lt;/tt&gt; should be added to the &lt;tt&gt;debug.debug(script)&lt;/tt&gt; call&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getParsedText(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; indent) {
        Debugger debug = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Debugger();
        debug.setIndentation(indent);
        debug.debug(script, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; debug.toString();
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
        CharSequence src = source;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (src == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            Debugger debug = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Debugger();
            debug.debug(script, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
            src = debug.toString();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; src.toString();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can we apply the patch to the source tree?&lt;/p&gt;</comment>
                            <comment id="16609195" author="henrib" created="Mon, 10 Sep 2018 13:34:24 +0000"  >&lt;p&gt;commit	cb4f54a0e3468e5b1f5336a47ea98308d163d605&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xht3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-267] Lambda evaluation</title>
                <link>https://issues.apache.org/jira/browse/JEXL-267</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following script returns correct lambda &lt;tt&gt;function(s,v){42;&lt;/tt&gt;}&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = (s, v)-&amp;gt;{42}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While the following script returns &lt;tt&gt;42&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(s, v)-&amp;gt;{42}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The expected result is the same lambda as in the first example&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179312">JEXL-267</key>
            <summary>Lambda evaluation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Aug 2018 09:38:34 +0000</created>
                <updated>Tue, 28 Aug 2018 06:58:30 +0000</updated>
                            <resolved>Thu, 16 Aug 2018 13:35:26 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16582522" author="henrib" created="Thu, 16 Aug 2018 13:35:26 +0000"  >&lt;p&gt;This behavior is what is expected and has been implemented since 3.0; the actual commit happened in 2013 ( &lt;a href=&quot;https://github.com/apache/commons-jexl/commit/771afc52b2161d1db9859670509b73ee5e7c0b35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/771afc52b2161d1db9859670509b73ee5e7c0b35&lt;/a&gt; ).&lt;/p&gt;

&lt;p&gt;The second form allows creating a script with parameters without having to use the explicit API.&lt;br/&gt;
The following commit added a test that illustrates the expected behaviours:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/b6c6db7c60726c1eeefe90da8506941ec1ad561b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/b6c6db7c60726c1eeefe90da8506941ec1ad561b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16582590" author="dmitri_blinov" created="Thu, 16 Aug 2018 14:12:57 +0000"  >&lt;p&gt;Well, should we reflect this anywhere in the docs then? Now I see it states that the script &lt;cite&gt;can be created with named parameters which allow a later evaluation to be performed with arguments&lt;/cite&gt; but I thought it is hint to JexlEngine.createScript() method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlScript createScript(JexlInfo info, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; source, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] names)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x3xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-265] Ternary expression and namespace identifier grammar ambiguity leads to parsing error</title>
                <link>https://issues.apache.org/jira/browse/JEXL-265</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;A common expression like &lt;tt&gt;(true) ? x : abs(1)&lt;/tt&gt; throws a parsing exception.&lt;br/&gt;
The workaround is to add parentheses around the right hand side &lt;tt&gt;(true) ? x : (abs(1))&lt;/tt&gt; .&lt;/p&gt;

&lt;p&gt;The actual cause is that the grammar can not disambiguate between a correct ternary expression that uses a function call as right choice and one that uses a namespace function call as left choice &lt;tt&gt;x : abs(1)&lt;/tt&gt; and misses the right hand choice, that latter case raising an exception.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="13176895">JEXL-265</key>
            <summary>Ternary expression and namespace identifier grammar ambiguity leads to parsing error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Aug 2018 14:42:52 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:37 +0000</updated>
                            <resolved>Mon, 6 Aug 2018 09:18:02 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16569254" author="henrib" created="Sat, 4 Aug 2018 17:31:43 +0000"  >&lt;p&gt;HOW (0):&lt;br/&gt;
It&apos;s not possible to check at parsing time wether a namespace is actually valid or not; solution must be syntax/grammar only.&lt;br/&gt;
HOW (1):&lt;br/&gt;
To remove the ambiguity and actually stick to identifier form, a namespace identifier like &apos;x:y&apos; will no longer allow spaces between the inner &apos;:&apos; and the namespace &apos;x&apos; and identifier &apos;y&apos;. This way, the intention of using a namespace is clear and the previous ambiguity removed.&lt;br/&gt;
With this solution, &lt;tt&gt;x?y:z()&lt;/tt&gt; will generate an error... &lt;/p&gt;</comment>
                            <comment id="16569923" author="henrib" created="Mon, 6 Aug 2018 09:18:02 +0000"  >&lt;p&gt;There is no way to remove the grammatical ambiguity; there are many working workarounds.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wp1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-263] Can&apos;t declare Local variables in jexl3</title>
                <link>https://issues.apache.org/jira/browse/JEXL-263</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I failed to define&#160;Local variables&lt;/p&gt;

&lt;p&gt;var x;&lt;/p&gt;

&lt;p&gt;I got exception:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.apache.commons.jexl3.JexlException$Parsing: @1:1 parsing error in &apos;var&apos; at org.apache.commons.jexl3.JexlEngine.createExpression(JexlEngine.java:304) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl3-3.1.jar:3.1&amp;#93;&lt;/span&gt; at org.apache.jmeter.functions.Jexl3Function.execute(Jexl3Function.java:94) &lt;span class=&quot;error&quot;&gt;&amp;#91;ApacheJMeter_functions.jar:4.0 r1823414&amp;#93;&lt;/span&gt; at org.apache.jmeter.engine.util.CompoundVariable.execute(CompoundVariable.java:137) &lt;span class=&quot;error&quot;&gt;&amp;#91;ApacheJMeter_core.jar:4.0 r1823414&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;relevant question:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/50021110/jmeter-jexl3-function-cant-declare-local-variables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/50021110/jmeter-jexl3-function-cant-declare-local-variables&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13168635">JEXL-263</key>
            <summary>Can&apos;t declare Local variables in jexl3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="orimarko">ori marko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jun 2018 13:37:57 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:17 +0000</updated>
                            <resolved>Fri, 3 Aug 2018 08:04:29 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16544173" author="henrib" created="Sat, 14 Jul 2018 10:55:19 +0000"  >&lt;p&gt;Most likely due to JMeter using JexlExpression instead of JexlScript.&lt;/p&gt;</comment>
                            <comment id="16567932" author="henrib" created="Fri, 3 Aug 2018 08:04:29 +0000"  >&lt;p&gt;JMeter issue 62541 :&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1836220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1836220&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vaon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-261] JexlEngine.setClassLoader(...) should reload namespaces that are classes</title>
                <link>https://issues.apache.org/jira/browse/JEXL-261</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When setting the class-loader, JEXL does everything it can to &apos;forget&apos; as much as possible classes that may have been loaded by the now obsolete loader. Glaring omission were namespaces / functors that should be reloaded.&lt;/p&gt;

&lt;p&gt;Incidentally, this will introduce a (user friendly) breaking API change, JexlUberspect missing the getClassLoader() method which is a stupid omission. Since this interface is &lt;b&gt;not&lt;/b&gt; one that end-users implement, this change is harmless. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13160583">JEXL-261</key>
            <summary>JexlEngine.setClassLoader(...) should reload namespaces that are classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 May 2018 20:02:38 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:23 +0000</updated>
                            <resolved>Fri, 3 Aug 2018 07:48:04 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16567906" author="henrib" created="Fri, 3 Aug 2018 07:48:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/6c8f22a7a17f462f921ed07093d1eab0cdcf0968&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/6c8f22a7a17f462f921ed07093d1eab0cdcf0968&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/f1f466dee130b42c1b422e312d96db3268612eea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/f1f466dee130b42c1b422e312d96db3268612eea&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3txfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-259] Shorter ant-ish variables prevent longer ant-ish variables from being resolved properly</title>
                <link>https://issues.apache.org/jira/browse/JEXL-259</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following script is evaluated successfully&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a.b.c = 2; a.b = 1; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a.b
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While the following scripts are terminated with error &lt;tt&gt;unsolvable property &apos;c&apos;&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a.b = 1; a.b.c = 2; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a.b
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a.b.c = 2; a.b = 1; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a.b.c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13154455">JEXL-259</key>
            <summary>Shorter ant-ish variables prevent longer ant-ish variables from being resolved properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10005">Workaround</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Apr 2018 11:29:10 +0000</created>
                <updated>Wed, 25 Dec 2019 07:34:49 +0000</updated>
                            <resolved>Mon, 28 May 2018 12:04:25 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16458024" author="henrib" created="Sun, 29 Apr 2018 13:31:44 +0000"  >&lt;p&gt;This is the intended behavior; you can not mix antish and property accessed variables. If &lt;b&gt;a.b&lt;/b&gt; resolves as an antish var and returns a non-null object (lets call it &apos;ab&apos;), &lt;b&gt;a.b.c&lt;/b&gt; must be a property of  &apos;ab&apos;. if this is null, &lt;b&gt;a.b.c.d&lt;/b&gt; is not solvable (note the &apos;d&apos; here)&lt;br/&gt;
.&lt;br/&gt;
In general, as soon as an antish var returns a non-null object, the remaining expression is expected to be solved as properties. Alternative behaviors would be easily inconsistent or unpredictable. Is &lt;b&gt;a.b.c.&lt;/b&gt; the &apos;c&apos; property of &apos;a.b&apos; or the antish var &lt;b&gt;a.b.c&lt;/b&gt; ?&lt;/p&gt;

&lt;p&gt;As is, this issue is not a bug; as an improvement, it might be possible to detect/flag &apos;pure&apos; antish references and set/get them through overridable method. &lt;/p&gt;</comment>
                            <comment id="16458364" author="dmitri_blinov" created="Mon, 30 Apr 2018 06:58:23 +0000"  >&lt;p&gt;I understand the difficulty of the resolving dotted names that can clash with properties of the objects themselves, since as I think, Jexl is an interpreted scripting language, and should process access operators one by one, without peeping over what would come next in chain. But something needs to be done with that, because to my mind, clashing of the multi-levelled names is natural for people to put their thoughts in order, I think there are many examples like system property names &lt;tt&gt;java.vendor&lt;/tt&gt; and &lt;tt&gt;java.vendor.url&lt;/tt&gt; to name a few. If you see a reliable way to improve the ant-ish variable detection, my opinion is that definitely needs to be done, and I&apos;m ready to jump in and test whatever I can. Without that I would be left with the only choice of abandoning ant-ish variables altogether in favour of something like a recursive cascading resolver, which is like an old  dirty hack &lt;/p&gt;</comment>
                            <comment id="16492592" author="dmitri_blinov" created="Mon, 28 May 2018 12:04:26 +0000"  >&lt;p&gt;I have worked this out for my case, and I think we can close this issue, as further improvements to ant-ish variables, if any, could be made under separate task. For now, may be its worth mentioning somewhere in documentation that such variables have its limitations in naming&lt;/p&gt;</comment>
                            <comment id="17003008" author="sdhalex" created="Tue, 24 Dec 2019 22:40:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmitri_blinov&quot; class=&quot;user-hover&quot; rel=&quot;dmitri_blinov&quot;&gt;dmitri_blinov&lt;/a&gt; can u tell me, how did u do this by workaround ?  And one and a half year has passed, is there any real improvement to this issue? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17003126" author="dmitri_blinov" created="Wed, 25 Dec 2019 07:34:49 +0000"  >&lt;p&gt;I ditched the ant-ish variables and have managed to write cascade resolver that resolves one part after another. That was not a generic solution for all cases, but was just enough for my use-case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sw7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-257] Function throwing IllegalArgumentException may be called twice</title>
                <link>https://issues.apache.org/jira/browse/JEXL-257</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;With regard to &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-256&quot; title=&quot;Jexl should not try to resolve a variable from Context when Context.has() returns false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-256&quot;&gt;&lt;del&gt;JEXL-256&lt;/del&gt;&lt;/a&gt; I have noticed that a function which once had throw IllegalArgumentException may be called immediately once again in script. The problem is not always reproducible so I think it is somehow related to caching and &lt;tt&gt;tryInvoke()&lt;/tt&gt; being called first and &lt;tt&gt;invoke()&lt;/tt&gt; called afterwards.&lt;/p&gt;

&lt;p&gt;I can&apos;t produce test case at the moment but try to describe on the example. I ommited some irrelevant details for the sake of simplicity...&lt;/p&gt;

&lt;p&gt;First I have a function that evaluates Jexl script within script.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
eval(&lt;span class=&quot;code-quote&quot;&gt;&quot;java = 1&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then I have a &lt;tt&gt;Context.set()&lt;/tt&gt; that works like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void set(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;java&quot;&lt;/span&gt;))
   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;java&quot;&lt;/span&gt;);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As I stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-256&quot; title=&quot;Jexl should not try to resolve a variable from Context when Context.has() returns false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-256&quot;&gt;&lt;del&gt;JEXL-256&lt;/del&gt;&lt;/a&gt;, when &lt;tt&gt;Context.set()&lt;/tt&gt; throws IllegalArgumentException then script execution immediately terminates with this exception, and not with JexlException. So, the function &lt;tt&gt;eval()&lt;/tt&gt; im my case terminates with IllegalArgumentException also.&lt;/p&gt;

&lt;p&gt;Then I have two stack traces in the log, one for the first invocation&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.IllegalArgumentException: java&lt;br/&gt;
 at MyDefaultContext.set(MyDefaultContext.java:279) &lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1189) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1094) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:890) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:58) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:190) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Script.execute(Script.java:185) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at EvaluationContext.evalScript(EvaluationContext.java:1078) &lt;br/&gt;
 at EvaluationContext.evaluateScript(EvaluationContext.java:1043) &lt;br/&gt;
 at MyDefaultContext.eval(MyDefaultContext.java:736)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:498) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.introspection.MethodExecutor.invoke(MethodExecutor.java:93) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.introspection.MethodExecutor.tryInvoke(MethodExecutor.java:104) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter$Funcall.tryInvoke(Interpreter.java:1436) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.call(Interpreter.java:1545) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1357) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTFunctionNode.jjtAccept(ASTFunctionNode.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1149) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1094) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1907) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter$1.call(Interpreter.java:1917) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at com.msy.einie.f1.jexl.MsyDefaultContext.processAnnotation(MsyDefaultContext.java:531) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;msy-1.0.jar:1.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1963) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1936) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1877) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAnnotatedStatement.jjtAccept(ASTAnnotatedStatement.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:890) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:58) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:190) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Script.execute(Script.java:185) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;and the one for the second&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.IllegalArgumentException: java&lt;br/&gt;
 at MyDefaultContext.set(MyDefaultContext.java:279)&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1189) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1094) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:890) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:58) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:190) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Script.execute(Script.java:185) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at EvaluationContext.evalScript(EvaluationContext.java:1078)&lt;br/&gt;
 at EvaluationContext.evaluateScript(EvaluationContext.java:1043)&lt;br/&gt;
 at MyDefaultContext.eval(MyDefaultContext.java:736)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:498) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_162&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.introspection.MethodExecutor.invoke(MethodExecutor.java:93) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.call(Interpreter.java:1642) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1357) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTFunctionNode.jjtAccept(ASTFunctionNode.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1149) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1094) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1907) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter$1.call(Interpreter.java:1917) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at com.msy.einie.f1.jexl.MsyDefaultContext.processAnnotation(MsyDefaultContext.java:531) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;msy-1.0.jar:1.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1963) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1936) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1877) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTAnnotatedStatement.jjtAccept(ASTAnnotatedStatement.java:18) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:890) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:58) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:190) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.commons.jexl3.internal.Script.execute(Script.java:185) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-jexl-3.2.jar:3.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this is a bug and we should not call a function twice if it returned &lt;tt&gt;IllegalArgumentException&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13151640">JEXL-257</key>
            <summary>Function throwing IllegalArgumentException may be called twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2018 12:56:00 +0000</created>
                <updated>Mon, 7 Jun 2021 13:15:01 +0000</updated>
                            <resolved>Mon, 13 May 2019 14:51:25 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16582538" author="henrib" created="Thu, 16 Aug 2018 13:47:14 +0000"  >&lt;p&gt;Without a better test case that is reproducible somehow, I&apos;m afraid there is nothing that can be &apos;fixed&apos;.&lt;/p&gt;</comment>
                            <comment id="16638095" author="dmitri_blinov" created="Thu, 4 Oct 2018 11:30:10 +0000"  >&lt;p&gt;I think the problem lies in the code of &lt;tt&gt;MethodExecutor.tryInvoke()&lt;/tt&gt;, as it catches &lt;tt&gt;InvocationTargetException&lt;/tt&gt; and returns &lt;tt&gt;TRY_FAILED&lt;/tt&gt;, which is a signal to retry method execution later. So the cached method will be called twice. I think &lt;tt&gt;InvocationTargetException&lt;/tt&gt; should not be catched by &lt;tt&gt;tryInvoke&lt;/tt&gt;, as &lt;tt&gt;InvocationTargetException&lt;/tt&gt; means that we have successfully resolved the method, but for some reason it throwed an exception. The original problem seem not to be necessarily related to the method throwing &lt;tt&gt;IllegalArgumentException&lt;/tt&gt; per se, any exception thrown by the cached method will lead to this, which is clearly should not be the case.&lt;/p&gt;</comment>
                            <comment id="16659070" author="henrib" created="Mon, 22 Oct 2018 15:15:30 +0000"  >&lt;p&gt;Notes and implications of the proposed tryInvoke behaviour change. &lt;br/&gt;
The proposed modifications breaks the API contract by suddenly potentially throwing an exception, tryInvoke working on the premise that a previously resolved method can be called again successfully with the same type of arguments. Most if not all executors would be impacted by the change (not only MethodExecutor but all *Executor).&lt;br/&gt;
Reviewing the code, there does not seem to be a case where the code caches a method that has (hard) failed. &lt;br/&gt;
The issue described occurs when the 1st invocation is successful but the 2nd (tryInvoke) and 3rd (invoke) fail... If we want to avoid the 3rd (failing) invocation, we need the 2nd to keep around its cause implying the TRY_FAIL can not be a singleton anymore.&lt;br/&gt;
Being only used for caching purpose for *internal, the probability that the API contract actually breaks user code seems very (very) unlikely...&lt;/p&gt;</comment>
                            <comment id="16660280" author="dmitri_blinov" created="Tue, 23 Oct 2018 08:43:43 +0000"  >&lt;p&gt;I think the main point is that the cached method invokation (2nd &lt;tt&gt;tryInvoke&lt;/tt&gt;) should work exactly just like not cached version (1st &lt;tt&gt;invoke&lt;/tt&gt;). That means that if underlying method have thrown exception, we must either directly (by assuming &lt;tt&gt;tryInvoke&lt;/tt&gt; may throw an exception just like &lt;tt&gt;invoke&lt;/tt&gt; does) or by wrapping it into some kind of &lt;tt&gt;TryFail&lt;/tt&gt; class, nevertheless rethrow it to the calling code. It should not be silently swallowed, and instead the 3rd &lt;tt&gt;invoke&lt;/tt&gt; being called.&lt;/p&gt;

&lt;p&gt;BTW I have created a commit for this in side branch &lt;a href=&quot;https://github.com/dmitri-blinov/commons-jexl/commit/907ee345c66628b7f31d9cbee5927fc8811638ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dmitri-blinov/commons-jexl/commit/907ee345c66628b7f31d9cbee5927fc8811638ec&lt;/a&gt;, the change works by only impacting &lt;tt&gt;MethodExecutor&lt;/tt&gt;, changes to other executors are not required. Please have a look and tell what you think?&lt;/p&gt;</comment>
                            <comment id="16732141" author="henrib" created="Wed, 2 Jan 2019 15:00:49 +0000"  >&lt;p&gt;Made sure that tryInvoke only reuses a &apos;set&apos; method if the value class is also preserved.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/3d648dbc3537eff3330ecf70677f22097ff68a9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/3d648dbc3537eff3330ecf70677f22097ff68a9f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16838409" author="henrib" created="Mon, 13 May 2019 09:34:09 +0000"  >&lt;p&gt;After much debate, the semantic of &apos;tryInvoke&apos; will be changed and precised.&lt;/p&gt;

&lt;p&gt;When a &apos;Jexl{Method, Setter, Getter}&apos; is called through tryInvoke(...), the invocation will happen if the underlying method signature and actual arguments are compatible. If the call compatibility can not be ensured, the TRY_FAIL object is returned. As of 3.2, if the invocation occurs but the underlying method throws an Exception - which is carried through an InvocationTargetException - , tryInvoke will throw a JexlException.TryFailed wrapping the exception cause.&lt;/p&gt;

&lt;p&gt;This is a change in behaviour that is not expected to impact user code since exception occurring through invocation is expected to be very rate and tryInvoke is likely to only be used internally by JEXL. &lt;/p&gt;</comment>
                            <comment id="16838530" author="henrib" created="Mon, 13 May 2019 13:12:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/f9cd296856ec1373cf7b7492e231eb0208636aa0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/f9cd296856ec1373cf7b7492e231eb0208636aa0&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/2b271068c873c3bb9b08b7ee885a5fa6768a70b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/2b271068c873c3bb9b08b7ee885a5fa6768a70b9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16838593" author="henrib" created="Mon, 13 May 2019 14:51:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-jexl/commit/414f3d7f2899ae1e7f896aa55a821303e30bfd57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-jexl/commit/414f3d7f2899ae1e7f896aa55a821303e30bfd57&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3seyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-247] Possible value loss in case of coersion of BigInteger to BigDecimal</title>
                <link>https://issues.apache.org/jira/browse/JEXL-247</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems that &lt;tt&gt;JexlArithmetic.toBigDecimal&lt;/tt&gt; method does not have a special treatment for &lt;tt&gt;BigInteger&lt;/tt&gt; type, only for &lt;tt&gt;Number&lt;/tt&gt;, which can lead to value loss in arithmetic operations for values greater than &lt;tt&gt;Long.MAX_VALUE&lt;/tt&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13130574">JEXL-247</key>
            <summary>Possible value loss in case of coersion of BigInteger to BigDecimal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2018 16:41:36 +0000</created>
                <updated>Fri, 12 Jan 2018 16:54:55 +0000</updated>
                            <resolved>Fri, 12 Jan 2018 16:54:55 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16324233" author="dmitri_blinov" created="Fri, 12 Jan 2018 16:54:55 +0000"  >&lt;p&gt;Sorry, the code transforms BigInteger using toString(), so the problem should not happen.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ov1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-246] Intermittent ambiguous method invocation when processing assignOverload</title>
                <link>https://issues.apache.org/jira/browse/JEXL-246</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Sometimes the simple operator like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;z += 1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; when &lt;tt&gt;z&lt;/tt&gt; has not been defined yet raises an exception &lt;tt&gt;org.apache.commons.jexl3.internal.introspection.MethodKey$AmbiguousException&lt;/tt&gt; with the following stack trace: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ambiguous method invocation: MyArithmetic.selfAdd(null, java.lang.Integer)&lt;br/&gt;
org.apache.commons.jexl3.internal.introspection.MethodKey$AmbiguousException: null&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.MethodKey$Parameters.getMostSpecific(MethodKey.java:540)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.MethodKey$Parameters.access$000(MethodKey.java:452)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.MethodKey.getMostSpecificMethod(MethodKey.java:261)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.ClassMap.getMethod(ClassMap.java:178) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.Introspector.getMethod(Introspector.java:146)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.MethodExecutor.discover(MethodExecutor.java:52)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.Uberspect.getMethod(Uberspect.java:218) &lt;br/&gt;
	at MyUberspect.getMethod(MyUberspect.java:168)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.Uberspect$ArithmeticUberspect.getOperator(Uberspect.java:413)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.Operators.tryOverload(Operators.java:85) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Operators.tryAssignOverload(Operators.java:118) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1292) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1102) &lt;br/&gt;
....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The class MyArithmetic contains a couple of overloaded&lt;br/&gt;
&lt;tt&gt;public JexlOperator selfAdd(T x, Object y)&lt;/tt&gt; methods with the first argument being the desired type &lt;tt&gt;T&lt;/tt&gt; like &lt;tt&gt;Appendable&lt;/tt&gt; or &lt;tt&gt;Collection&lt;/tt&gt; for which the &lt;tt&gt;+=&lt;/tt&gt; operator is overloaded.&lt;/p&gt;

&lt;p&gt;Obviously in case where the first argument is null and the second argument is an Integer it is not possible to differentiate between &lt;tt&gt;public JexlOperator selfAdd(Collection x, Object y)&lt;/tt&gt; and &lt;tt&gt;public JexlOperator selfAdd(Appendable x, Object y)&lt;/tt&gt; but I wonder is there any point in trying to perform &lt;tt&gt;selfAdd&lt;/tt&gt; on the null variable? What questions me more is that this error is intermittent and sometimes there is an exception and sometimes there is not, so at the moment I have no test case to reproduce. So I think this is a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13127673">JEXL-246</key>
            <summary>Intermittent ambiguous method invocation when processing assignOverload</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Dec 2017 13:38:44 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:36 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 19:40:32 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16316464" author="henrib" created="Mon, 8 Jan 2018 15:16:09 +0000"  >&lt;p&gt;The behavior is not intermittent; when JEXL detects an ambiguity when resolving a method, it will log this exception as an info (using the JEXL engine logger if configured to allow these) and will remember this signature as a cache-miss. The second time this resolution is attempted, the cache-miss will be detected to return a null (and avoid throwing the same exception twice).&lt;br/&gt;
In effect, the MethodKey.AmbiguousException will only be logged once (per lifetime of the Introspector).&lt;/p&gt;

&lt;p&gt;The fix makes it clearer to determine what the error is due to; in the accompanying case, it is due to a null operand (z) during operator evaluation.&lt;/p&gt;

&lt;p&gt;trunk/RELEASE-NOTES.txt&lt;br/&gt;
trunk/src/main/java/org/apache/commons/jexl3/internal/Operators.java&lt;br/&gt;
trunk/src/site/xdoc/changes.xml&lt;br/&gt;
trunk/src/test/java/org/apache/commons/jexl3/IssuesTest200.java&lt;/p&gt;

&lt;p&gt;Committed revision 1820568.&lt;/p&gt;</comment>
                            <comment id="16318098" author="dmitri_blinov" created="Tue, 9 Jan 2018 09:15:52 +0000"  >&lt;p&gt;Well, while I can not say JEXL does not do its job here, I hate the idea of having even once an exception logged for a such simple situation. Obviously we have a contradiction with overloading. For a JEXL extension writer it would be not uncommon to try to overload an operator more than once using different signatures for different types. But that would surely lead to ambiguity with &lt;b&gt;null&lt;/b&gt; arguments. The solution I see right now on the developer side is to replace all overloaded methods with the only most broad definition like &lt;tt&gt;public JexlOperator selfAdd(Object x, Object y)&lt;/tt&gt;, and do class checking inside that method, forwarding further calls to the specific methods from there, and blocking &lt;b&gt;null&lt;/b&gt; arguements. But that kills the idea of using JEXL feature for resolving most specific methods, possibly conflicting with default JEXL implementation for other types, not speaking of creating messy code. Otherwise, if we try to fix it on JEXL side, in case where the first argument is &lt;b&gt;null&lt;/b&gt;, we should try to resolve this only to the overloaded methods whose first argument is &lt;b&gt;Object&lt;/b&gt;, like &lt;tt&gt;public JexlOperator selfAdd(Object x, T y)&lt;/tt&gt; of even unary &lt;tt&gt;public JexlOperator selfAdd(T y)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Null arguments are not suited for type checking, and even if we have had the only one overloaded method in Arithmetic class, for example &lt;tt&gt;public JexlOperator selfAdd(Collection x, Object y)&lt;/tt&gt;, it would be pointless to try to do anything with &lt;b&gt;null&lt;/b&gt; collection, except for returning JexlEngine.TRY_FAILED&lt;/p&gt;</comment>
                            <comment id="16322231" author="henrib" created="Thu, 11 Jan 2018 13:51:55 +0000"  >&lt;p&gt;Ambiguities related to null argument handling should not trigger logging an exception.&lt;/p&gt;</comment>
                            <comment id="16322248" author="henrib" created="Thu, 11 Jan 2018 14:06:10 +0000"  >&lt;p&gt;Adds the concept of severity to an AmbiguousException:&lt;/p&gt;

&lt;p&gt;The only &lt;b&gt;non-severe&lt;/b&gt; case is when there is at least one null argument and at most one method/ctor is having a corresponding &apos;Object&apos; parameter.&lt;br/&gt;
We thus consider that ambiguity is benign in presence of null arguments but in the case where the &apos;catch all&apos; type Object is applicable more than once.&lt;/p&gt;

&lt;p&gt;In other words:&lt;br/&gt;
If all arguments are valid instances - no null argument -, ambiguity is severe.&lt;br/&gt;
If there is at least one null argument, the ambiguity is severe if more than one method has a&lt;br/&gt;
corresponding parameter of class &apos;Object&apos;.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/introspection/Introspector.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/MethodKey.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest200.java&lt;/p&gt;

&lt;p&gt;Committed revision 1820883.&lt;/p&gt;</comment>
                            <comment id="16324122" author="dmitri_blinov" created="Fri, 12 Jan 2018 15:28:45 +0000"  >&lt;p&gt;As it has turned out for me, Jexl restricts me, for some reason, from overloading operators in Arithmetic, if the operator signature is of generalized form, like &lt;tt&gt;operator(Object)&lt;/tt&gt; or &lt;tt&gt;operator(Object, Object)&lt;/tt&gt;. So the idea of having &lt;tt&gt;public JexlOperator selfAdd(Object x, Object y)&lt;/tt&gt; does not apply. I don&apos;t know if it worth raising an issue about that, or it&apos;s better to find the more appropriate solution to the original problem. Lets not over-complicate. Suppose, we have an original script for &lt;tt&gt;z += 1&lt;/tt&gt; and standard Arithmetic without any &lt;tt&gt;selfAdd&lt;/tt&gt; overloaded operators. Should this work for an empty z value? I think it should. So, it should work exactly the same as with any number of &lt;tt&gt;selfAdd&lt;/tt&gt; overloaded operators too. It&apos;s not an ambiguity, it&apos;s like Jexl couldn&apos;t find an appropriate overloaded operator for this case, and reverted to the default implementation.&lt;/p&gt;</comment>
                            <comment id="16327643" author="henrib" created="Tue, 16 Jan 2018 19:25:07 +0000"  >&lt;p&gt;Not all Overloads on side-effects operators are properly&#160;detected.&lt;/p&gt;

&lt;p&gt;Note that&#160;the &lt;b&gt;default&lt;/b&gt; behavior of self assignment is based on the base operator behavior; so&#160;&#160;&apos;x += y&apos; is equivalent to &apos;x = x + y&apos;. If y == null, x + y will provoque an error due to a null operand. &apos;x += y&apos; will generate an error with the same cause.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16327665" author="henrib" created="Tue, 16 Jan 2018 19:40:32 +0000"  >&lt;p&gt;Uberspect&#160;on&#160;JexlArithmetic now properly sees&#160;all operator methods that are not mere overrides of base implementation. For instance &apos;JexlOperator selfAdd(Object...&apos; is now detected.&lt;/p&gt;

&lt;p&gt;MethodKey has relaxed rules wrt ambiguity with nulls; if there are several applicable method and one&#160;the parameter is null, if one applicable defines&#160;this parameter as an Object, no ambiguity will be reported and that method will be chosen. In other words, when null is present as argument, parameter of type Object is considered the best match (over more precisely typed parameters).&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/introspection/MethodKey.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest200.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/SideEffectTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1821295.&lt;/p&gt;</comment>
                            <comment id="16334042" author="dmitri_blinov" created="Mon, 22 Jan 2018 08:47:04 +0000"  >&lt;p&gt;The following messages have started to appear in the log&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Method public java.lang.Object MyArithmetic.add(java.lang.Object,java.lang.Object) is already registered, key: addjava.lang.Objectjava.lang.Object&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;for the overridden methods in MyArithmetic&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; add(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; left, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; right) {
   ....&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is expected the behaviour to have the basic JexlArithmetic class methods overridden, right? So why this message?&lt;/p&gt;</comment>
                            <comment id="16334201" author="henrib" created="Mon, 22 Jan 2018 12:30:50 +0000"  >&lt;p&gt;Fixed; message is only intended when signature is undistinguishable from JEXL point of view&#160;&lt;/p&gt;

&lt;p&gt;(for instance, void setFoo(Integer o) ; vs void setFoo(int i); )&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3odaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-245] Engine in strict mode fails to fail on unsolvable variables or properties </title>
                <link>https://issues.apache.org/jira/browse/JEXL-245</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;ve run into some unexpected behavior where the expectancy is that the Engine throws a unsolvable property exception.&lt;/p&gt;

&lt;p&gt;Example code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl3.*;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JexlTest {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getBar() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testJexl(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine engine, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext ctx, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expression) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(&lt;span class=&quot;code-quote&quot;&gt;&quot;test (&quot;&lt;/span&gt;+expression+&lt;span class=&quot;code-quote&quot;&gt;&quot;): &quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(engine.createExpression(expression).evaluate(ctx));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException e) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(e.getMessage());
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        MapContext ctx = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlEngine engine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).silent(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).create();
        ctx.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlTest());
        testJexl(engine, ctx, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo.bar&quot;&lt;/span&gt;);
        testJexl(engine, ctx, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo.bar.baz&quot;&lt;/span&gt;);
        testJexl(engine, ctx, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo.baz&quot;&lt;/span&gt;);
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which produces the following output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test (foo.bar): &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
test (foo.bar.baz): &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
test (foo.baz): JexlTest.testJexl@1:4 unsolvable property &lt;span class=&quot;code-quote&quot;&gt;&apos;baz&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is with the second test where accessing the property foo.bar.baz of the non-existing variable bar is not throwing an exception.&lt;br/&gt;
The third test demonstrates a similar/same scenario where accessing the non-existing property foo.baz is throwing the expected exception. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13122220">JEXL-245</key>
            <summary>Engine in strict mode fails to fail on unsolvable variables or properties </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Dec 2017 17:04:52 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:45 +0000</updated>
                            <resolved>Mon, 4 Dec 2017 11:34:53 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16276646" author="henrib" created="Mon, 4 Dec 2017 11:34:53 +0000"  >&lt;p&gt;Thanks for reporting the issue.&lt;br/&gt;
Committed revision 1817082.&lt;/p&gt;

&lt;p&gt;trunk/RELEASE-NOTES.txt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest200.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/scripting/JexlScriptEngineOptionalTest.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nftr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-244] Webapp classloader memory leaks</title>
                <link>https://issues.apache.org/jira/browse/JEXL-244</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have spotted that the following constructions, like for example in JexlEngine.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; TRY_FAILED = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;() {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;tryExecute failed&quot;&lt;/span&gt;;
        }
    };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;are not garbage collected when web-app is reloaded and its classloader is released. This is because circular references are created when static class members are initialized with non-static inner/anonymous classes, which are holding implicit references to its enclosing class and thus to its static class type. There are other such examples in JexlEngine.java like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; java.lang.ThreadLocal&amp;lt;JexlContext.ThreadLocal&amp;gt; CONTEXT =             &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.lang.ThreadLocal&amp;lt;JexlContext.ThreadLocal&amp;gt;() {..

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; java.lang.ThreadLocal&amp;lt;JexlEngine&amp;gt; ENGINE =
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.lang.ThreadLocal&amp;lt;JexlEngine&amp;gt;() {...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue is easily resolved if for example the following pattern is followed&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FailObject &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;tryExecute failed&quot;&lt;/span&gt;;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; TRY_FAILED = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FailObject();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Inside J2EE container when Jexl library is included in the deployed .war file&lt;/p&gt;</environment>
        <key id="13113259">JEXL-244</key>
            <summary>Webapp classloader memory leaks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Oct 2017 09:02:37 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:15 +0000</updated>
                            <resolved>Mon, 6 Nov 2017 14:31:22 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16240368" author="henrib" created="Mon, 6 Nov 2017 14:31:22 +0000"  >&lt;p&gt;I&apos;m respectfully skeptical that the leak you are reporting originates from a static inner class definition. I&apos;ve been unable to find another occurence of such a problem (stack overflow, Google...).&lt;br/&gt;
Nevertheless, long standing working relationship grants benefits. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Please report if this fixes things on your end.&lt;/p&gt;


&lt;p&gt;Committed revision 1814413.&lt;br/&gt;
trunk/RELEASE-NOTES.txt&lt;br/&gt;
trunk/src/main/java/org/apache/commons/jexl3/JexlEngine.java&lt;br/&gt;
trunk/src/site/xdoc/changes.xml&lt;/p&gt;</comment>
                            <comment id="16255010" author="dmitri_blinov" created="Thu, 16 Nov 2017 09:33:57 +0000"  >&lt;p&gt;Although it&apos;s not easy to admit ones mistakes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but I have a sin of premature reporing, sorry. I must aknowledge that you are right in your suggestion and the leak seems to stem from another source. I haven&apos;t finished with the research but I think we can close this issue, either rolling back changes or keeping it as it is now. Thanks for your efforts BTW, I appreciate your involvement!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lwnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-242] invalid jexl calculation while doing sum for particular value</title>
                <link>https://issues.apache.org/jira/browse/JEXL-242</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;For a particular value of 0.05 , jexl is returning value unxepectedly&lt;br/&gt;
I have face an issue with following calcualtion:&lt;/p&gt;


&lt;p&gt;Double a = -40.05;&lt;br/&gt;
Double b = -8.01;&lt;br/&gt;
final JexlContext context = new MapContext();&lt;br/&gt;
context.set(&quot;a&quot;,a);&lt;br/&gt;
context.set(&quot;b&quot;,b);&lt;br/&gt;
JexlEngine JEXL_ENGINE = new JexlBuilder().strict(true).silent(true).create();&lt;br/&gt;
JexlExpression jsp = JEXL_ENGINE.createExpression(&quot;a+b&quot;);&lt;br/&gt;
Double c = jsp.evaluate(context);&lt;/p&gt;

&lt;p&gt;The value returned by evaluation is -48.059999999999995 instead of -48.06&lt;br/&gt;
There seems some precision issue in calculation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13112543">JEXL-242</key>
            <summary>invalid jexl calculation while doing sum for particular value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="gargvk10">vikas garg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Oct 2017 09:10:31 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:21 +0000</updated>
                            <resolved>Fri, 27 Oct 2017 15:46:54 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16221996" author="dmitri_blinov" created="Fri, 27 Oct 2017 09:20:26 +0000"  >&lt;p&gt;I believe this is how floating point arithmetic works. Numbers in float or double format are basically not exact numbers but a close approximations. It has nothing to do with jexl&lt;/p&gt;</comment>
                            <comment id="16222009" author="gargvk10" created="Fri, 27 Oct 2017 09:31:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmitri_blinov&quot; class=&quot;user-hover&quot; rel=&quot;dmitri_blinov&quot;&gt;dmitri_blinov&lt;/a&gt;  I don&apos;t think so. Even in java if you do this simple addition this will return the exact value. Jexl is working fine if the value is like 0.06 + 0.03 = 0.09&lt;br/&gt;
it is behaving incorrectly only for 0.05 value. That should not happen. It should have consistency. &lt;/p&gt;</comment>
                            <comment id="16222015" author="gargvk10" created="Fri, 27 Oct 2017 09:34:33 +0000"  >&lt;p&gt;is there any document , comment or code  which can explain this inconsistency ? or how much it can vary ?&lt;/p&gt;</comment>
                            <comment id="16222024" author="dmitri_blinov" created="Fri, 27 Oct 2017 09:48:30 +0000"  >&lt;p&gt;You can check if jexl works correctly by evaluating your arithmetic in plain java. &lt;br/&gt;
Double a = -40.05; Double b = -8.01; Double c = a + b&lt;/p&gt;</comment>
                            <comment id="16222048" author="gargvk10" created="Fri, 27 Oct 2017 09:59:50 +0000"  >&lt;p&gt;yeah i  have checked that. Java is returning the results correctly. don&apos;t know somehow jexl is not returning it accurately&lt;/p&gt;</comment>
                            <comment id="16222139" author="dmitri_blinov" created="Fri, 27 Oct 2017 10:39:52 +0000"  >&lt;p&gt;I have no idea how you checked this. Try checking with the following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; a = -40.05;
&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; b = -8.01;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;,a);
context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;,b);
JexlEngine JEXL_ENGINE = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
JexlExpression jsp = JEXL_ENGINE.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;a+b&quot;&lt;/span&gt;);
&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; c = (&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) jsp.evaluate(context);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c != a + b) {
  &lt;span class=&quot;code-comment&quot;&gt;// Add your code to report a problem
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16222587" author="henrib" created="Fri, 27 Oct 2017 15:46:54 +0000"  >&lt;p&gt;Following code does not reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test242() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; a = -40.05d;
        &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; b = -8.01d;
        &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; c = a + b;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, a);
        context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, b);
        JexlEngine JEXL_ENGINE = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
        JexlExpression jsp = JEXL_ENGINE.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;a + b&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; e = (&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) jsp.evaluate(context);
        Assert.assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.doubleToLongBits(e) + &lt;span class=&quot;code-quote&quot;&gt;&quot; != &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.doubleToLongBits(c), c.doubleValue() == e.doubleValue());
        Assert.assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.doubleToLongBits(e) + &lt;span class=&quot;code-quote&quot;&gt;&quot; != &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.doubleToLongBits(c), a + b == e);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ls93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-241] NPE when script containing string interpolation executed in multiple threads</title>
                <link>https://issues.apache.org/jira/browse/JEXL-241</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When a script containing string interpolation is executed in multiple threads, a &quot;NullPointerException&quot; is sometimes thrown (other times it may hang or it may run successfully).&lt;/p&gt;

&lt;p&gt;The following is a sample program that can produce the bug (you may need to run it for a few times to encounter the bug).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; jexldemo2;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl3.JexlBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl3.JexlScript;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl3.MapContext;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.HashMap;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.ExecutorService;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.Executors;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DemoApplication {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ExecutorService pool;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; JexlScript script = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create().createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;`${item}`&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
        pool = Executors.newFixedThreadPool(4);

        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; m1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
        m1.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;);
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; m2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
        m2.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;item&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;B&quot;&lt;/span&gt;);

        handle(m1);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(script.execute(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(m2)));
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Reached the end&quot;&lt;/span&gt;);
        pool.shutdown();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void handle(Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; payload) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;START: %s\n&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread());
        pool.submit(() -&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(script.execute(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext(payload))));
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;STOP: %s\n&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread());
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the bug output is as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;START: Thread[main,5,main]
STOP: Thread[main,5,main]
Exception in thread &quot;main&quot; java.lang.NullPointerException
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1818)
	at org.apache.commons.jexl3.parser.ASTJxltLiteral.jjtAccept(ASTJxltLiteral.java:50)
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:892)
	at org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:55)
	at org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:186)
	at org.apache.commons.jexl3.internal.Script.execute(Script.java:178)
	at jexldemo2.DemoApplication.main(DemoApplication.java:26)
A
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;Centos Linux 7.2.1511&lt;/p&gt;

&lt;p&gt;openjdk version &quot;1.8.0_101&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_101-b13)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.101-b13, mixed mode)&lt;/p&gt;

&lt;p&gt;Gradle dependency for JEXL is org.apache.commons:commons-jexl3:3.1&lt;/p&gt;</environment>
        <key id="13109564">JEXL-241</key>
            <summary>NPE when script containing string interpolation executed in multiple threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="ywangd">Yang Wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Oct 2017 00:28:41 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:35 +0000</updated>
                            <resolved>Thu, 19 Oct 2017 12:03:31 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16210915" author="henrib" created="Thu, 19 Oct 2017 12:03:31 +0000"  >&lt;p&gt;Good catch, thanks for the issue!&lt;br/&gt;
Bad implementation of a double-check lazy initialization, aka item 71.&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Engine.java&lt;br/&gt;
Revision: 1812625&lt;/p&gt;</comment>
                            <comment id="16281978" author="krm1312" created="Thu, 7 Dec 2017 15:11:06 +0000"  >&lt;p&gt;Any plan to release 3.2 soon?  This is pretty fatal under reasonable concurrency.&lt;/p&gt;</comment>
                            <comment id="16282019" author="krm1312" created="Thu, 7 Dec 2017 15:42:13 +0000"  >&lt;p&gt;Take your time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  Workaround is not difficult.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    &lt;span class=&quot;code-comment&quot;&gt;// workaround https://issues.apache.org/jira/browse/JEXL-241.  Remove when 3.2 is released.
&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Jexl241Builder &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlBuilder {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlEngine create() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Jexl241Engine(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Jexl241Engine &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Engine {
        Jexl241Engine(JexlBuilder conf) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(conf);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; TemplateEngine jxlt() {
            TemplateEngine e = jxlt;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
                    e = jxlt;
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        e = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TemplateEngine(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, 0, &lt;span class=&quot;code-quote&quot;&gt;&apos;$&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;#&apos;&lt;/span&gt;);
                        jxlt = e;
                    }
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; e;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3labb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-240] Unable to invoke a call operator using antish style variable resoltion</title>
                <link>https://issues.apache.org/jira/browse/JEXL-240</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Suppose I have declared an antish style context variable under the name &lt;tt&gt;java.math.BigDecimal&lt;/tt&gt; of the &lt;tt&gt;Class&amp;lt;java.math.BigDecimal&amp;gt;&lt;/tt&gt; type.&lt;/p&gt;

&lt;p&gt;To test that it works correctly I use the following script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = java.math.BigDecimal; x(&lt;span class=&quot;code-quote&quot;&gt;&quot;1234&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; which returns correct value.&lt;/p&gt;

&lt;p&gt;Now I want to invoke an overloaded call operator directly for this variable using &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.math.BigDecimal(&lt;span class=&quot;code-quote&quot;&gt;&quot;1234&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;which returns an error &lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;undefined variable java.math&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The expected behaviour is to return the same value as in the first script.&lt;/p&gt;

&lt;p&gt;I have created a test case for this, please have a look.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13105772">JEXL-240</key>
            <summary>Unable to invoke a call operator using antish style variable resoltion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Sep 2017 14:43:19 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:19 +0000</updated>
                            <resolved>Fri, 27 Oct 2017 15:12:18 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16185523" author="henrib" created="Fri, 29 Sep 2017 08:49:33 +0000"  >&lt;p&gt;Thanks for reporting the issue.&lt;br/&gt;
As a temporary workaround, you can expose &apos;packages&apos; in your context instead of classes.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Package {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pkg;
        Package(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pkg) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pkg = pkg;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ClassNotFoundException {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Package.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader().loadClass(pkg + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + name);
        }
    }
...
jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.math&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Package(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.math&quot;&lt;/span&gt;));
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16194658" author="henrib" created="Fri, 6 Oct 2017 14:33:28 +0000"  >&lt;p&gt;Expose the Jexl engine evaluating a script/expression as a thread local;&lt;br/&gt;
Make classes functors, ie class(arg) will attempt to call a ctor, a simpler version of new(class, arg);&lt;br/&gt;
Fix antish variable resolution when used as method/function call; &lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlEngine.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Engine.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/AntishCallTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1811336.&lt;/p&gt;</comment>
                            <comment id="16222525" author="henrib" created="Fri, 27 Oct 2017 15:09:32 +0000"  >&lt;p&gt;Using classes (objects) as usable functors to create instances breaks the ability to statically determine whether a script attempts to create objects. Since implementing the feature is only one overload away in JexlContext, I&apos;m reverting to the original behavior.&lt;/p&gt;</comment>
                            <comment id="16222528" author="henrib" created="Fri, 27 Oct 2017 15:12:18 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/AntishCallTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1813542.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12889502" name="AntishCallTest.java" size="2485" author="dmitri_blinov" created="Thu, 28 Sep 2017 14:44:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ko27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-227] JexlScriptEngineFactory.getEngineVersion() should return actual version, ie 3.1 as of reporting</title>
                <link>https://issues.apache.org/jira/browse/JEXL-227</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JexlScriptEngineFactory.getEngineVersion() reports &quot;3.0&quot; as a script engine version in 3.1&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEngineVersion() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;3.0&quot;&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// ensure &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is updated &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; function changes are made to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; class
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13081115">JEXL-227</key>
            <summary>JexlScriptEngineFactory.getEngineVersion() should return actual version, ie 3.1 as of reporting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jun 2017 12:13:39 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:37 +0000</updated>
                            <resolved>Sat, 1 Jul 2017 14:55:47 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16057388" author="kinow" created="Wed, 21 Jun 2017 12:16:10 +0000"  >&lt;p&gt;Felt tempted to quickly fix and commit. But then realized there are two methods with 3.0: #getEngineVersion and #getLanguageVersion.&lt;/p&gt;

&lt;p&gt;Not sure if we should update both, or one and not the other, or update only with major releases... Will wait to see if someone else knows (maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ebourg&quot; class=&quot;user-hover&quot; rel=&quot;ebourg&quot;&gt;ebourg&lt;/a&gt;?) more about these methods, and then maybe we could override the javadoc (or complement, and use that inheritDoc tag too if necessary) saying what to do / why.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                            <comment id="16057653" author="henrib" created="Wed, 21 Jun 2017 15:03:27 +0000"  >&lt;p&gt;Since we&apos;ve introduced new syntactic elements in 3.1 (side effect operators), I&apos;d bump the language version to 3.1. However, releasing a new version will change the version number so #getEngineVersion should return 3.1.1 (probably).&lt;br/&gt;
Need to fix a few other bugs/enh before attempting release though.&lt;/p&gt;</comment>
                            <comment id="16058343" author="kinow" created="Wed, 21 Jun 2017 22:12:38 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; thanks for the explanation Henri!&lt;/p&gt;

&lt;p&gt;From the Javadocs of the parent&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Returns the version of the scripting language supported by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
     * &amp;lt;code&amp;gt;ScriptEngine&amp;lt;/code&amp;gt;.
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; The version of the supported language.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getLanguageVersion();

    /**
     * Returns the version of the &amp;lt;code&amp;gt;ScriptEngine&amp;lt;/code&amp;gt;.
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; The &amp;lt;code&amp;gt;ScriptEngine&amp;lt;/code&amp;gt; implementation version.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEngineVersion();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I think #getEngineVersionmust match the version in pom.xml, and #getLanguageVersion should be 3.0, until we introduce version to the language that deserve a version bump. Does that sound right?&lt;/p&gt;</comment>
                            <comment id="16058471" author="sebb@apache.org" created="Wed, 21 Jun 2017 23:58:07 +0000"  >&lt;p&gt;Surely if the language syntax changes (as mentioned above), then the language version needs updating?&lt;/p&gt;

&lt;p&gt;It&apos;s not as clear to me what the engine version is supposed to represent.&lt;br/&gt;
Maybe worth checking the JSR&lt;/p&gt;</comment>
                            <comment id="16058477" author="kinow" created="Thu, 22 Jun 2017 00:02:58 +0000"  >&lt;p&gt;Yup. Besides fixing the version in either or both methods, I&apos;d like to add some lines in the Javadocs, and then maybe a note somewhere in the project documentation (wiki?) for when someone releases a new version s/he can remember to check if this version needs to be updated too.&lt;/p&gt;</comment>
                            <comment id="16059203" author="henrib" created="Thu, 22 Jun 2017 11:30:08 +0000"  >&lt;p&gt;Checked the JSR 223; semantics on getLanguageVersion/getEngineVersion is not very detailed.&lt;br/&gt;
LANGUAGE_VERSION: Reserved key for the named value that identifies the version of the scripting language supported by the implementation.&lt;br/&gt;
ENGINE_VERSION: Reserved key for a named value that identifies the version of&lt;br/&gt;
the ScriptEngine implementation.&lt;/p&gt;

&lt;p&gt;As a reminder, we may want to create a bug that we re-create after each release stating &apos;verify getLanguageVersion/getEngineVersion before release&apos;. Otherwise, we&apos;ll probably keep forgetting about it...&lt;/p&gt;</comment>
                            <comment id="16060178" author="kinow" created="Thu, 22 Jun 2017 23:18:14 +0000"  >&lt;p&gt;Looking at Java 8 Nashorn;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.script.ScriptEngine;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.script.ScriptEngineManager;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Scripts {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        ScriptEngineManager manager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;nashorn&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ENGINE: &quot;&lt;/span&gt; + engine.getFactory().getEngineVersion());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;LANGUAGE: &quot;&lt;/span&gt; + engine.getFactory().getLanguageVersion());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Gives:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ENGINE: 1.8.0_131
LANGUAGE: ECMA - 262 Edition 5.1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I believe in our case, the ENGINE_VERSION must match the version of JEXL. And Language should either match that version, or be 3.0 until there are changes that impact the language (in that case, we need to remember to update it should we add/remove features from the language).&lt;/p&gt;

&lt;p&gt;&amp;gt;As a reminder, we may want to create a bug that we re-create after each release stating &apos;verify getLanguageVersion/getEngineVersion before release&apos;. Otherwise, we&apos;ll probably keep forgetting about it...&lt;/p&gt;

&lt;p&gt;Big +1 for that. Are you going to do that? Otherwise I can create the ticket, and assign to the next version, linking to this discussion, and asking the assignee to create a new one for the next release.&lt;/p&gt;</comment>
                            <comment id="16061793" author="dmitri_blinov" created="Sat, 24 Jun 2017 04:34:22 +0000"  >&lt;p&gt;Shouldn&apos;t we simply go away from precompiled values and take values of engine version and language version from jexl jar&apos;s manifest properties, like Implementation_Version and Specification_version?&lt;/p&gt;</comment>
                            <comment id="16071284" author="henrib" created="Sat, 1 Jul 2017 14:55:47 +0000"  >&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/scripting/JexlScriptEngineFactory.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/scripting/JexlScriptEngineTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1800511.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13084003">JEXL-235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ghsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-225] Incorrect invoking methods with ObjectContext</title>
                <link>https://issues.apache.org/jira/browse/JEXL-225</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;After apply fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-190&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JEXL-190&lt;/a&gt; folowing code doesn&apos;t work anymore:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Example {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();

        ObjectContext&amp;lt;Foo&amp;gt; context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;&amp;gt;(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo());
        JexlExpression expression = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar()&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(expression.evaluate(context));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;{
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bar(){
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Also doesn&apos;t work this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Example {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; functions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
        functions.put(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultFunctions());

        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
                .namespaces(functions)
                .create();

        ObjectContext&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;&amp;gt;(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;());
        JexlExpression expression = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar()&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(expression.evaluate(context));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DefaultFunctions {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bar(){
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Example.main@1:4 unsolvable function/method &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;note: with MapContext all working correct&lt;/p&gt;</description>
                <environment></environment>
        <key id="13074113">JEXL-225</key>
            <summary>Incorrect invoking methods with ObjectContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dpatriot">Vyacheslav Shago</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 May 2017 08:38:31 +0000</created>
                <updated>Mon, 7 Jun 2021 13:14:34 +0000</updated>
                            <resolved>Fri, 14 Jul 2017 13:10:43 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16027359" author="henrib" created="Sat, 27 May 2017 08:42:19 +0000"  >&lt;p&gt;ObjectContext is not really meant to work with a map as inner object; the &apos;has&apos; method in particular is not precise enough in this case since it only verifies it can muster a JexlPropertyGet. That is fine for getting an actual bean/property but in case of a map, we&apos;d need to call containsKey.&lt;br/&gt;
Anyhow, we try to resolve a variable (&apos;bar&apos;), think we can (&apos;has&apos;) and get a null and fail. &lt;/p&gt;

&lt;p&gt;In the second case, the ObjectContext is used as namespace resolver and resolves the &apos;null&apos; namespace with its inner object which does not expose a &apos;bar&apos; method. &lt;/p&gt;

&lt;p&gt;It seems it would be easier in the current case to just develop a tailored JexlContext.&lt;/p&gt;</comment>
                            <comment id="16087291" author="henrib" created="Fri, 14 Jul 2017 13:10:43 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/ObjectContext.java&lt;br/&gt;
Committed revision 1801955.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fc8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-223] Apache Commons JEXL Expression Execute Command Vulnerabilitity</title>
                <link>https://issues.apache.org/jira/browse/JEXL-223</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;0x01 Summary&lt;br/&gt;
Apache Commons JEXL Expression Execute Command Vulnerabilitity throught groovy.&lt;/p&gt;

&lt;p&gt;0x02 POC&lt;br/&gt;
POC Report to Apache Security Email Address security@apache.org.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13065795">JEXL-223</key>
            <summary>Apache Commons JEXL Expression Execute Command Vulnerabilitity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="cnbird">cnbird</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Apr 2017 07:35:41 +0000</created>
                <updated>Mon, 27 Mar 2023 10:59:02 +0000</updated>
                            <resolved>Tue, 14 Feb 2023 18:10:38 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15978236" author="kinow" created="Fri, 21 Apr 2017 07:39:19 +0000"  >&lt;p&gt;Edited to add code format.&lt;/p&gt;

&lt;p&gt;Also, see &lt;a href=&quot;http://www.apache.org/security/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/security/&lt;/a&gt;. For Security/Vulnerabilities issues, it is better to follow the guidelines provided by the ASF Security Team when disclosing issues like this.&lt;/p&gt;</comment>
                            <comment id="15978258" author="ebourg" created="Fri, 21 Apr 2017 07:59:37 +0000"  >&lt;p&gt;I&apos;m not sure to understand, executing untrusted code in a scripting language is dangerous, that&apos;s not really new. The same happens with any implementation of the javax.script API.&lt;/p&gt;</comment>
                            <comment id="15980923" author="henrib" created="Mon, 24 Apr 2017 09:26:15 +0000"  >&lt;p&gt;I dont understand either; any public method is callable though scripting.&lt;/p&gt;

&lt;p&gt;As a side-note, controlling what is allowed through JEXL can be tailored through 3 features that  hide/control which classes JEXL is allowed to introspect:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;using a specific ClassLoader&lt;/li&gt;
	&lt;li&gt;operating through a Sandbox&lt;/li&gt;
	&lt;li&gt;annotating classes/methods/fields with @NoJexl&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Old but mostly relevant: &lt;a href=&quot;http://stackoverflow.com/questions/6551073/how-do-you-create-a-secure-jexl-scripting-sandbox/6551087#6551087&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/6551073/how-do-you-create-a-secure-jexl-scripting-sandbox/6551087#6551087&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15980988" author="sebb@apache.org" created="Mon, 24 Apr 2017 10:48:20 +0000"  >&lt;p&gt;Maybe the docs should make it clearer that JEXL does not (and cannot in general) sanitise user input.&lt;br/&gt;
The control methods noted above should also be described.&lt;br/&gt;
This could be a new section on the home page.&lt;/p&gt;</comment>
                            <comment id="15980992" author="kinow" created="Mon, 24 Apr 2017 10:51:21 +0000"  >&lt;p&gt;&amp;gt;Maybe the docs should make it clearer that JEXL does not (and cannot in general) sanitise user input.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15981351" author="garydgregory" created="Mon, 24 Apr 2017 15:24:16 +0000"  >&lt;p&gt;+1 to better docs.&lt;/p&gt;</comment>
                            <comment id="15981458" author="markt" created="Mon, 24 Apr 2017 16:27:31 +0000"  >&lt;p&gt;Better docs are fine but this is a long way from a valid security vulnerability. Dropping the severity accordingly.&lt;/p&gt;</comment>
                            <comment id="15982872" author="henrib" created="Tue, 25 Apr 2017 13:21:34 +0000"  >&lt;p&gt;For future reference:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testRestrict() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.class);
        JexlSandbox sandbox = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlSandbox();
        &lt;span class=&quot;code-comment&quot;&gt;// only allow call to currentTimeMillis (avoid exit, gc, loadLibrary, etc)
&lt;/span&gt;        sandbox.white(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;&quot;&lt;/span&gt;).execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;currentTimeMillis&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// can not create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; file
&lt;/span&gt;        sandbox.black(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.File&quot;&lt;/span&gt;).execute(&quot;&quot;);
        &lt;span class=&quot;code-comment&quot;&gt;// can not create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; process builder
&lt;/span&gt;        sandbox.black(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.ProcessBuilder&quot;&lt;/span&gt;).execute(&quot;&quot;);

        JexlEngine sjexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().sandbox(sandbox).strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr;
        JexlScript script;
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result;

        script = sjexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit()&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            result = script.execute(context);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should not allow calling exit!&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
            LOGGER.info(xjexl.toString());
        }

        script = sjexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1)&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            result = script.execute(context);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should not allow calling exit!&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
            LOGGER.info(xjexl.toString());
        }

        script = sjexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.io.File&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/should-not-be-created&apos;&lt;/span&gt;)&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            result = script.execute(context);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should not allow creating a file&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
            LOGGER.info(xjexl.toString());
        }
        
        script = sjexl.createScript(
                &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.ProcessBuilder&apos;&lt;/span&gt;,&quot;&lt;/span&gt;
                 + &lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-quote&quot;&gt;&apos;touch /tmp/should-not-be-created&apos;&lt;/span&gt;).start()&quot;&lt;/span&gt;
        );
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            result = script.execute(context);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should not allow creating a process&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
            LOGGER.info(xjexl.toString());
        }

        expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()&quot;&lt;/span&gt;;
        script = sjexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()&quot;&lt;/span&gt;);
        result = script.execute(context);
        Assert.assertNotNull(result);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFuture() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);&quot;&lt;/span&gt;);
        FutureTask&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FutureTask&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(e.callable(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));

        ExecutorService executor = Executors.newFixedThreadPool(1);
        executor.submit(&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = 42;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            t = &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.get(100, TimeUnit.MILLISECONDS);
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should have timed out&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TimeoutException xtimeout) {
            &lt;span class=&quot;code-comment&quot;&gt;// ok, ignore
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.cancel(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            executor.shutdown();
        }

        Assert.assertTrue(&lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.isCancelled());
        Assert.assertEquals(42, t);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17688649" author="henrib" created="Tue, 14 Feb 2023 18:10:38 +0000"  >&lt;p&gt;Fixed by permissions and new defaults.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13423558">JEXL-357</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13488676">JEXL-381</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dwz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-221] Sporadic undefined property error caused by NPE at MapGetExecutor.tryInvoke()</title>
                <link>https://issues.apache.org/jira/browse/JEXL-221</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m getting sporadic undefined property error when accessing hashmap by a key. The stack trace tells the cause is NPE in MapGetExecutor.tryInvoke() at the following line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; method != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
                &amp;amp;&amp;amp; objectClass.equals(obj.getClass())
                &amp;amp;&amp;amp; (key == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || property.getClass().equals(key.getClass()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have managed to overcome this issue by adding the following null check:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; method != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
                &amp;amp;&amp;amp; objectClass.equals(obj.getClass())
                &amp;amp;&amp;amp; (key == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || property != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; property.getClass().equals(key.getClass()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have only vague understanding of how things work inside jexl with tryInvoke() and unfortunately can not provide any test case for this, but it has worked in my case, so if nobody have any objections please include the fix in source tree.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13047949">JEXL-221</key>
            <summary>Sporadic undefined property error caused by NPE at MapGetExecutor.tryInvoke()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Mar 2017 09:12:13 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:10 +0000</updated>
                            <resolved>Fri, 10 Mar 2017 14:35:20 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15901789" author="henrib" created="Wed, 8 Mar 2017 19:02:34 +0000"  >&lt;p&gt;Good catch, thanks!&lt;br/&gt;
Found how to reproduce; this occurs on the 3rd execution of a script that accesses a map with null as a key on its 2nd, i.e. uses a map executor with a null key argument. The executor is cached on the second execution (due to another bug in checkLoaderVersion that clears the script cache on the 2nd) and when reused by on the 3rd tryInvoke, NPE.&lt;br/&gt;
I&apos;ll commit a fix momentarily.&lt;/p&gt;</comment>
                            <comment id="15902603" author="dmitri_blinov" created="Thu, 9 Mar 2017 07:20:36 +0000"  >&lt;p&gt;Do you think we could also cross-check other Get|SetExecutors for similar bugs?&lt;/p&gt;</comment>
                            <comment id="15905183" author="henrib" created="Fri, 10 Mar 2017 14:35:20 +0000"  >&lt;p&gt;tryInvoke is protected from null properties.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Script.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/BooleanGetExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/DuckGetExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/DuckSetExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/IndexedType.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/MapGetExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/MapSetExecutor.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1786350.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13100028">JEXL-239</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3awdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-218] Overloaded JexlArithmetic.empty() method is not called for a class implementing Map interface</title>
                <link>https://issues.apache.org/jira/browse/JEXL-218</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Sorry for not providing a test case but this is a rare problem I haven&apos;t managed to catch. I have a class which implements a &lt;tt&gt;Map&lt;/tt&gt; interface and I have an overloaded &lt;tt&gt;JexlArithmetic.empty()&lt;/tt&gt; and &lt;tt&gt;JexlArithmetic.size()&lt;/tt&gt; methods for this class, and these methods are &lt;b&gt;not&lt;/b&gt; related to correspondent &lt;tt&gt;Map.isEmpty()&lt;/tt&gt; and &lt;tt&gt;Map.size()&lt;/tt&gt; methods, they provide separate semantics in my case. Apart from the point that this design is questionable, most of the time everything works as expected in jexl, i.e. when &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;empty(x)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; or &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;size(x)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; operators are used in scripting, the overloaded &lt;tt&gt;JexlArithmetic.empty()&lt;/tt&gt; and &lt;tt&gt;JexlArithmetic.size()&lt;/tt&gt; are called. But sometimes in rare circumstances these operators are not called and &lt;tt&gt;Map.isEmpty()&lt;/tt&gt; and &lt;tt&gt;Map.size()&lt;/tt&gt; methods respectively are called instead. I suspect this has something to do with operators caching, may be you&apos;ll be able to check the code?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005147">JEXL-218</key>
            <summary>Overloaded JexlArithmetic.empty() method is not called for a class implementing Map interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2016 12:12:50 +0000</created>
                <updated>Fri, 16 Sep 2016 06:49:56 +0000</updated>
                            <resolved>Fri, 16 Sep 2016 06:49:55 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15495566" author="dmitri_blinov" created="Fri, 16 Sep 2016 06:49:55 +0000"  >&lt;p&gt;This issue was resolved as bug in client code, has nothing to do with jexl, sorry.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33nxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-217] Interpreter.getAttribute() raises exception in non-strict mode when cached property resolver is used</title>
                <link>https://issues.apache.org/jira/browse/JEXL-217</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m chasing strange bug where regardless of the &lt;tt&gt;JexlContext&lt;/tt&gt; operating in non-strict mode the &lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt; is thrown in the script like this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;entity = args[0]; @lenient {copy = args[1]; xwsp = args[2]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;here is the stack trace&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Caused by: java.lang.ArrayIndexOutOfBoundsException&lt;br/&gt;
	at java.lang.reflect.Array.get(Native Method)&lt;br/&gt;
	at org.apache.commons.jexl3.internal.introspection.ListGetExecutor.tryInvoke(ListGetExecutor.java:88) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.getAttribute(Interpreter.java:1700) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:945) &lt;br/&gt;
	at org.apache.commons.jexl3.parser.ASTArrayAccess.jjtAccept(ASTArrayAccess.java:18) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1013) &lt;br/&gt;
	at org.apache.commons.jexl3.parser.ASTReference.jjtAccept(ASTReference.java:18) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.executeAssign(Interpreter.java:1119) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1062) &lt;br/&gt;
	at org.apache.commons.jexl3.parser.ASTAssignment.jjtAccept(ASTAssignment.java:18) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:578) &lt;br/&gt;
	at org.apache.commons.jexl3.parser.ASTBlock.jjtAccept(ASTBlock.java:18) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter.processAnnotation(Interpreter.java:1848) &lt;br/&gt;
	at org.apache.commons.jexl3.internal.Interpreter$1.call(Interpreter.java:1856) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately I haven&apos;t managed to create and provide reproducible test case, but from looking into the code I think the problem fires when the Interpreter tries to call cached method &lt;tt&gt;ListGetExecutor.tryInvoke()&lt;/tt&gt; but does not catch subsequent exception.  &lt;/p&gt;

&lt;p&gt;I rewrote the code as follows and the problem seemed to go away&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Interpreter.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        ...
        Exception xcause = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-comment&quot;&gt;// attempt to reuse last executor cached in &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; JexlNode.value
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (node != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; cache) {
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; cached = node.jjtGetValue();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cached &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; JexlPropertyGet) {
                JexlPropertyGet vg = (JexlPropertyGet) cached;

                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {

                   &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = vg.tryInvoke(object, attribute);
                   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!vg.tryFailed(value)) {
                       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value;
                   }

                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception xany) {
                    xcause = xany;
                }

            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (xcause == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {

           &lt;span class=&quot;code-comment&quot;&gt;// resolve that property
&lt;/span&gt;
           List&amp;lt;PropertyResolver&amp;gt; resolvers = uberspect.getResolvers(&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;, object);
           JexlPropertyGet vg = uberspect.getPropertyGet(resolvers, object, attribute);
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (vg != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
               &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                   &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = vg.invoke(object);
                   &lt;span class=&quot;code-comment&quot;&gt;// cache executor in &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; JexlNode.value
&lt;/span&gt;                   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (node != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; cache &amp;amp;&amp;amp; vg.isCacheable()) {
                       node.jjtSetValue(vg);
                   }
                   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value;
               } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception xany) {
                   xcause = xany;
               }
           }
        }
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13000688">JEXL-217</key>
            <summary>Interpreter.getAttribute() raises exception in non-strict mode when cached property resolver is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Aug 2016 14:24:24 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:23 +0000</updated>
                            <resolved>Wed, 31 Aug 2016 10:25:35 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15451842" author="henrib" created="Wed, 31 Aug 2016 10:25:37 +0000"  >&lt;p&gt;Cached and non-cached calls are now protected by the same try/catch block.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Operators.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1758541.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32wfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-214] Redundant call of fillInStackTrace() in JexlEngine.createInfo() ?</title>
                <link>https://issues.apache.org/jira/browse/JEXL-214</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I wonder what is the call of &lt;tt&gt;fillInStackTrace()&lt;/tt&gt; for ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlInfo createInfo() {
        JexlInfo info = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        Throwable xinfo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Throwable();
        xinfo.fillInStackTrace();
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As far as I know the constructor of Throwable is implemented already calling this method. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13000359">JEXL-214</key>
            <summary>Redundant call of fillInStackTrace() in JexlEngine.createInfo() ?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Aug 2016 12:53:52 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:19 +0000</updated>
                            <resolved>Wed, 31 Aug 2016 10:35:43 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15451871" author="henrib" created="Wed, 31 Aug 2016 10:35:44 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlEngine.java&lt;br/&gt;
Committed revision 1758577.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32uev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-213] rename JexlBuilder.loader(Charset arg) to JexlBuilder.charset(Charset arg)</title>
                <link>https://issues.apache.org/jira/browse/JEXL-213</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;There seems to be a copy-paste bug in method in &lt;tt&gt;JexlBuilder&lt;/tt&gt; class&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlBuilder loader(Charset arg) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.charset = arg;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;obviously the method should be named &lt;tt&gt;charset&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13000058">JEXL-213</key>
            <summary>rename JexlBuilder.loader(Charset arg) to JexlBuilder.charset(Charset arg)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2016 15:53:23 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:07 +0000</updated>
                            <resolved>Wed, 31 Aug 2016 10:41:46 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15451881" author="henrib" created="Wed, 31 Aug 2016 10:41:46 +0000"  >
&lt;p&gt;Add charset(Charset arg) to JexlBuilder, deprecated loader(Charset...) which is indeed a mistake (but public API).&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlBuilder.java&lt;br/&gt;
Committed revision 1758578.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32sjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-209] Unsolvable function/method &apos;&lt;?&gt;.&lt;null&gt;(...)&apos;</title>
                <link>https://issues.apache.org/jira/browse/JEXL-209</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following code throws error &lt;b&gt;Unsolvable function/method&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.a = function() {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1}; x[&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;]()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;while the following code evaluates as expected&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.a = function() {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1}; x.a()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and returns 1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994539">JEXL-209</key>
            <summary>Unsolvable function/method &apos;&lt;?&gt;.&lt;null&gt;(...)&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2016 10:08:48 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:21 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 13:47:44 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15407784" author="henrib" created="Thu, 4 Aug 2016 13:47:44 +0000"  >&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1755186.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ui7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-208] Documentation typos/inconsistencies</title>
                <link>https://issues.apache.org/jira/browse/JEXL-208</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Noticed on &lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/reference/syntax.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-jexl/reference/syntax.html&lt;/a&gt; that there are two operands that are defined then in the examples reversed.&lt;/p&gt;

&lt;p&gt;Starts With=^&lt;br/&gt;
The syntactically ... &quot;abcdef&quot; ^= &quot;abc&quot; returns true. Note that through duck-typing, user classes exposing a public &apos;startsWith&apos; method will allow their instances to behave has left-hand-size operands of this operator.&lt;/p&gt;

&lt;p&gt;AND&lt;/p&gt;

&lt;p&gt;Not Starts With!^&lt;br/&gt;
This is the negation of the &apos;starts with&apos; operator. a ^! &quot;abc&quot; is ...&lt;/p&gt;</description>
                <environment>&lt;p&gt;(Chrome MacOSX)&lt;/p&gt;</environment>
        <key id="12994082">JEXL-208</key>
            <summary>Documentation typos/inconsistencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joedragons">Joe Tom</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2016 21:00:14 +0000</created>
                <updated>Sat, 27 Aug 2016 09:41:30 +0000</updated>
                            <resolved>Mon, 1 Aug 2016 22:22:32 +0000</resolved>
                                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15402936" author="garydgregory" created="Mon, 1 Aug 2016 22:22:32 +0000"  >&lt;p&gt;This looks like it is fixed in trunk: &lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/jexl/trunk/src/site/xdoc/reference/syntax.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/jexl/trunk/src/site/xdoc/reference/syntax.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15403952" author="joedragons" created="Tue, 2 Aug 2016 13:22:15 +0000"  >&lt;p&gt;Verified thanks!&lt;/p&gt;</comment>
                            <comment id="15422538" author="dmitri_blinov" created="Tue, 16 Aug 2016 10:05:41 +0000"  >&lt;p&gt;I also have prepared a PR #3 regarding some typos in documentation, can it be applied?&lt;/p&gt;</comment>
                            <comment id="15432230" author="henrib" created="Tue, 23 Aug 2016 06:35:11 +0000"  >&lt;p&gt;Please submit the patch, I&apos;ll apply it.&lt;/p&gt;</comment>
                            <comment id="15441147" author="dmitri_blinov" created="Sat, 27 Aug 2016 09:41:30 +0000"  >&lt;p&gt;Sorry I don&apos;t know which diff format to use, this is the one I got from github&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/src/site/xdoc/reference/syntax.xml b/src/site/xdoc/reference/syntax.xml
index c6a85b2..cc034b8 100644
--- a/src/site/xdoc/reference/syntax.xml
+++ b/src/site/xdoc/reference/syntax.xml
@@ -538,7 +538,7 @@
                         It also checks whether any collection, set or map (on keys) contains a value or not; in that &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, it behaves
                         as an &lt;span class=&quot;code-quote&quot;&gt;&quot;in&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                         Note that arrays and user classes exposing a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;contains&apos;&lt;/span&gt; method will allow their instances
-                        to behave has right-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
+                        to behave as right-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                         &amp;lt;code&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt; =~ [&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;e&quot;&lt;/span&gt;,f&quot;]&amp;lt;/code&amp;gt; returns &amp;lt;code&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/code&amp;gt;.
                     &amp;lt;/td&amp;gt;
                 &amp;lt;/tr&amp;gt;
@@ -552,7 +552,7 @@
                         It also checks whether any collection, set or map (on keys) does not contain a value; in that &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, it behaves
                         as &lt;span class=&quot;code-quote&quot;&gt;&quot;not in&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                         Note that arrays and user classes exposing a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;contains&apos;&lt;/span&gt; method will allow their instances
-                        to behave has right-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
+                        to behave as right-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                         &amp;lt;code&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt; !~ [&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;e&quot;&lt;/span&gt;,f&quot;]&amp;lt;/code&amp;gt; returns &amp;lt;code&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/code&amp;gt;.
                     &amp;lt;/td&amp;gt;
                 &amp;lt;/tr&amp;gt;
@@ -562,7 +562,7 @@
                         The &amp;lt;code&amp;gt;=^&amp;lt;/code&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; is a &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;-hand &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the &lt;span class=&quot;code-quote&quot;&gt;&apos;startsWith&apos;&lt;/span&gt; method.
                         For example, &amp;lt;code&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;abcdef&quot;&lt;/span&gt; =^ &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt; &amp;lt;/code&amp;gt; returns &amp;lt;code&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/code&amp;gt;.
                         Note that through duck-typing, user classes exposing a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;startsWith&apos;&lt;/span&gt; method will allow their instances
-                        to behave has left-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
+                        to behave as left-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                     &amp;lt;/td&amp;gt;
                 &amp;lt;/tr&amp;gt;
                 &amp;lt;tr&amp;gt;
@@ -577,7 +577,7 @@
                     &amp;lt;td&amp;gt;The &amp;lt;code&amp;gt;=$&amp;lt;/code&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; is a &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;-hand &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the &lt;span class=&quot;code-quote&quot;&gt;&apos;endsWith&apos;&lt;/span&gt; method.
                         For example, &amp;lt;code&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;abcdef&quot;&lt;/span&gt; =$ &lt;span class=&quot;code-quote&quot;&gt;&quot;def&quot;&lt;/span&gt; &amp;lt;/code&amp;gt; returns &amp;lt;code&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/code&amp;gt;.
                         Note that through duck-typing, user classes exposing an &lt;span class=&quot;code-quote&quot;&gt;&apos;endsWith&apos;&lt;/span&gt; method will allow their instances
-                        to behave has left-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
+                        to behave as left-hand side operands of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;.
                     &amp;lt;/td&amp;gt;
                 &amp;lt;/tr&amp;gt;
                 &amp;lt;tr&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31rov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-207] Inconsistent error handling</title>
                <link>https://issues.apache.org/jira/browse/JEXL-207</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I can&apos;t figure out what is the logic behind current implementation of script interruptablity/error handling.&lt;/p&gt;

&lt;p&gt;For example the following script will execute up to the end and return 42 in any mode (strict/silent)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.1; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;whereas the following script will break with exception &quot;bean is null&quot; also in any mode (strict/silent)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.1 = 2; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the following script will throw an exception in strict mode regardless of being silent/non-silent&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;z = [1,2]; x = z[3]; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The documentation states that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The strict flag tells the engine when and if null as operand is considered an error, the silent flag tells the engine what to do with the error (log as warning or throw exception)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;From the first example we see that null is not considered as error when we resolve bean property value, even does not log a message, while it might be expected in strict mode. From the second example we see that null is always considered as an error when we set bean property value, but is never ignored (always breaks script execution), even in silent mode. From the third example we see that AIOOBE is also considered as an error that breaks script execution in strict mode, regardless of silent/non-silent mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989705">JEXL-207</key>
            <summary>Inconsistent error handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2016 08:09:02 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:24 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 15:01:12 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15402059" author="henrib" created="Mon, 1 Aug 2016 13:50:57 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlException.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/InterpreterBase.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Operators.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/AnnotationTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticOperatorTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/CaptureLog.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ExceptionTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptCallableTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptTest.java&lt;br/&gt;
src/test/resources/log4j.xml // !!!!&lt;br/&gt;
src/test/scripts/testAdd.jexl&lt;br/&gt;
Committed revision 1754746.&lt;/p&gt;</comment>
                            <comment id="15404329" author="dmitri_blinov" created="Tue, 2 Aug 2016 16:33:59 +0000"  >&lt;p&gt;Do I understand that now we have three combinations of inital parameters:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;non-strict mode - errors and exceptions are ignored always silently&lt;/li&gt;
	&lt;li&gt;strict verbose (non-silent) - errors and exceptions are breaking script execution&lt;/li&gt;
	&lt;li&gt;strict silent - errors and exceptions are not breaking script execution but log message is written about&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15406160" author="henrib" created="Wed, 3 Aug 2016 16:31:47 +0000"  >&lt;p&gt;Seems &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-210&quot; title=&quot;The way to cancel script execution with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-210&quot;&gt;&lt;del&gt;JEXL-210&lt;/del&gt;&lt;/a&gt; questions the current solution.&lt;/p&gt;</comment>
                            <comment id="15407198" author="dmitri_blinov" created="Thu, 4 Aug 2016 05:36:26 +0000"  >&lt;p&gt;Replied at &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-210&quot; title=&quot;The way to cancel script execution with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-210&quot;&gt;&lt;del&gt;JEXL-210&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15407901" author="henrib" created="Thu, 4 Aug 2016 15:01:13 +0000"  >&lt;p&gt;Bulk fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-210&quot; title=&quot;The way to cancel script execution with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-210&quot;&gt;&lt;del&gt;JEXL-210&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-207&quot; title=&quot;Inconsistent error handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-207&quot;&gt;&lt;del&gt;JEXL-207&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-197&quot; title=&quot;Add annotations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-197&quot;&gt;&lt;del&gt;JEXL-197&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/InterpreterBase.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/AnnotationTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1755195.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12994606">JEXL-210</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i310on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-206] testCallableCancel() test hangs sporadically</title>
                <link>https://issues.apache.org/jira/browse/JEXL-206</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I&apos;m struggling with strange behaviour of the building process, it seems that time after time the process hangs somewhere in the middle of the tests stage. First I thought it was somehow related to memory problems so I changed fork mode of the test plugin by adding                     &amp;lt;forkMode&amp;gt;pertest&amp;lt;/forkMode&amp;gt; to maven-surefire-plugin configuration. But that helped for a couple of times to cleanly build jexl and run all tests successfully. The other times it simply hanged on test stage. I have managed to detect that it is the testCallableCancel() test that hangs. One of its worker threads has a stack trace as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:893)
org.apache.commons.jexl3.parser.ASTWhileStatement.jjtAccept(ASTWhileStatement.java:18)
org.apache.commons.jexl3.internal.Interpreter.visit(Interpreter.java:1119)
org.apache.commons.jexl3.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:55)
org.apache.commons.jexl3.internal.Interpreter.interpret(Interpreter.java:210)
org.apache.commons.jexl3.internal.Script$Callable.interpret(Script.java:364)
org.apache.commons.jexl3.internal.Script$Callable.call(Script.java:372)
   - locked org.apache.commons.jexl3.internal.Script$Callable@18399f62
java.util.concurrent.FutureTask.run(FutureTask.java:262)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have adjusted the test code with prinln() to dig further what is going on:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCallableCancel() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCallableCancel(): started&quot;&lt;/span&gt;);

        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Script.Callable c = (Script.Callable) e.callable(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = 42;
        Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; kc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; call() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCallableCancel(): cancel() is called&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; c.cancel();
            }

        };

        Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; xkc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; call() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCallableCancel(): run() is called&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; c.call();
            }

        };

        ExecutorService executor = Executors.newFixedThreadPool(2);
        Future&amp;lt;?&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; = executor.submit(xkc);
        Future&amp;lt;?&amp;gt; kfc = executor.submit(kc);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            Assert.assertTrue((&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;) kfc.get());

            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCallableCancel(): canceled()&quot;&lt;/span&gt;);

            t = &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.get();
            Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should have been cancelled&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException xexec) {
            &lt;span class=&quot;code-comment&quot;&gt;// ok, ignore
&lt;/span&gt;            Assert.assertTrue(xexec.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; JexlException.Cancel);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            executor.shutdown();
        }
        Assert.assertTrue(c.isCancelled());

        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCallableCancel(): finished&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the test hangs it prints the following:&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;testCallableCancel(): started&lt;br/&gt;
testCallableCancel(): run() is called&lt;br/&gt;
testCallableCancel(): cancel() is called&lt;br/&gt;
testCallableCancel(): canceled()&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the test runs as normal and does not hang it prints the following:&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;testCallableCancel(): started&lt;br/&gt;
testCallableCancel(): run() is called&lt;br/&gt;
testCallableCancel(): cancel() is called&lt;br/&gt;
testCallableCancel(): canceled()&lt;br/&gt;
testCallableCancel(): finished&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12988659">JEXL-206</key>
            <summary>testCallableCancel() test hangs sporadically</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jul 2016 09:02:13 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:18 +0000</updated>
                            <resolved>Thu, 14 Jul 2016 15:04:52 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15372876" author="dmitri_blinov" created="Tue, 12 Jul 2016 13:32:03 +0000"  >&lt;p&gt;Sorry for previous misinformation about testCancelLoopWait(), it turned out that was not testCancelLoopWait() that hanged but the one that was run after it.&lt;/p&gt;</comment>
                            <comment id="15373277" author="henrib" created="Tue, 12 Jul 2016 17:20:17 +0000"  >&lt;p&gt;No worries, thanks for the report; I updated the test with a latch, tell me if you can reproduce.&lt;/p&gt;</comment>
                            <comment id="15374593" author="dmitri_blinov" created="Wed, 13 Jul 2016 08:29:14 +0000"  >&lt;p&gt;After two hours of continious testing I can tell the problem seems to go away&lt;/p&gt;</comment>
                            <comment id="15377083" author="henrib" created="Thu, 14 Jul 2016 15:04:52 +0000"  >&lt;p&gt;Added latch in test;&lt;br/&gt;
Added early cancellation detection in interpreter&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
Revision 1752426.&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptCallableTest.java&lt;br/&gt;
Revision 1752595.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30u8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-204] Script is not interrupted by a method call throwing Exception</title>
                <link>https://issues.apache.org/jira/browse/JEXL-204</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following test case fails with the message &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;java.lang.AssertionError: should have thrown a Cancel&lt;br/&gt;
        at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
        at org.apache.commons.jexl3.ScriptInterruptableTest.testExceptionCancellable(ScriptInterruptableTest.java:73)&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@SuppressWarnings({&lt;span class=&quot;code-quote&quot;&gt;&quot;UnnecessaryBoxing&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;AssertEqualsBetweenInconvertibleTypes&quot;&lt;/span&gt;})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ScriptInterruptableTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlTestCase {
    &lt;span class=&quot;code-comment&quot;&gt;//Logger LOGGER = Logger.getLogger(VarTest.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName());
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ScriptInterruptableTest() {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;ScriptInterruptableTest&quot;&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DummyInterrupt {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; except() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
           &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cancelled by purpose&quot;&lt;/span&gt;);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapContext &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext.NamespaceResolver {

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resolveNamespace(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testExceptionCancellable() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).cancellable(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();

        JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestContext();

        ctxt.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DummyInterrupt());

        &lt;span class=&quot;code-comment&quot;&gt;// run an interrupt
&lt;/span&gt;        JexlScript sint = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.except(); &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        Script.Callable c = (Script.Callable) sint.callable(ctxt);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            t = c.call();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c.isCancellable()) {
                Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should have thrown a Cancel&quot;&lt;/span&gt;);
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Cancel xjexl) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!c.isCancellable()) {
                Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;should not have thrown &quot;&lt;/span&gt; + xjexl);
            }
        }
        Assert.assertTrue(c.isCancelled());
        Assert.assertNotEquals(42, t);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12988134">JEXL-204</key>
            <summary>Script is not interrupted by a method call throwing Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Jul 2016 15:40:21 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:13 +0000</updated>
                            <resolved>Thu, 14 Jul 2016 15:07:03 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15370478" author="henrib" created="Mon, 11 Jul 2016 09:50:34 +0000"  >&lt;p&gt;Cancellation is using InterruptedException; if I&apos;m not mistaken, the following DummyInterrupt will solve your issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DummyInterrupt {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; except() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
           &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InterruptedException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cancelled by purpose&quot;&lt;/span&gt;);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15377085" author="henrib" created="Thu, 14 Jul 2016 15:07:03 +0000"  >&lt;p&gt;A cancellable script will stop execution when an InterruptedException is raised (or its execution thread is interrupted).&lt;/p&gt;</comment>
                            <comment id="15377236" author="dmitri_blinov" created="Thu, 14 Jul 2016 16:31:16 +0000"  >&lt;p&gt;I can&apos;t figure out what is the logic behind current implementation of script interruptablity/error handling.&lt;/p&gt;

&lt;p&gt;For example the following script will execute up to the end and return 42 in any mode (strict/silent)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.1; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;whereas the following script will break with exception &quot;bean is null&quot; also in any mode (strict/silent)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.1 = 2; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the following script will throw an exception in strict mode regardless of being silent/non-silent&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;z = [1,2]; x = z[3]; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The documentation states that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The strict flag tells the engine when and if null as operand is considered an error, the silent flag tells the engine what to do with the error (log as warning or throw exception)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;From the first example we see that null is not considered as error when we resolve bean property value, even does not log a message, while it might be expected in strict mode. From the second example we see that null is always considered as an error when we set bean property value, but is never ignored (always breaks script execution), even in silent mode. From the third example we see that AIOOBE is also considered as an error that breaks script execution in strict mode, regardless of silent/non-silent mode.&lt;/p&gt;</comment>
                            <comment id="15378996" author="henrib" created="Fri, 15 Jul 2016 08:10:01 +0000"  >&lt;p&gt;Continues as &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-207&quot; title=&quot;Inconsistent error handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-207&quot;&gt;&lt;del&gt;JEXL-207&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30rhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-203] JexlArithmetic.options() diverts Interpreter to use default implementation of JexlArithmetic instead of custom one</title>
                <link>https://issues.apache.org/jira/browse/JEXL-203</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;If JexlContext implements JexlEngine.Options and it provides values for strictness, scale and MathContext that are different from what was specified during creation of JexlArithmetics, then instance of wrong JexlArithmetic class is created instead of custom class previously used. Apparently the JexlArithmetic.options() method could then be overloaded in custom class, but I don&apos;t like the idea of copying all that code from version to version, so may be more robust solution could be found to this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987084">JEXL-203</key>
            <summary>JexlArithmetic.options() diverts Interpreter to use default implementation of JexlArithmetic instead of custom one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jul 2016 08:18:42 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:08 +0000</updated>
                            <resolved>Mon, 1 Aug 2016 13:55:24 +0000</resolved>
                                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15369613" author="dmitri_blinov" created="Sun, 10 Jul 2016 11:56:59 +0000"  >&lt;p&gt;I think more appropriate solution to this would be following the factory pattern although at the cost of breaking up existing API and binary compatibility. &lt;/p&gt;

&lt;p&gt;For example there would be an interface &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; ArithmeticFactory {
   &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlArithmetic createArithmetic();

   &lt;span class=&quot;code-comment&quot;&gt;// with options
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlArithmetic createArithmetic(JexlEngine.Options options);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;JexlEngine then should be changed to be iniitialized not with the instance of JexlArithmetic class but instead with an implementation of ArithmeticFactory where one can choose between the default JexlArithmeticFactory which would instantiate instances of existing JexlArithmetic class or provide an extended ArithmeticFactory that would instantiate instances of desired type.&lt;/p&gt;

&lt;p&gt;Thus the developer will be given clear understanding of what is required from him/her to extend JexlArithmetic behaviour.&lt;/p&gt;</comment>
                            <comment id="15370511" author="henrib" created="Mon, 11 Jul 2016 10:16:20 +0000"  >&lt;p&gt;Override the options(...) method in your JexlArithmetic derived class is the current way of dealing with this. Not ideal but allows to solve your issue about arithmetic creation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlArithmetic options(JexlEngine.Options options) {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; ostrict = options.isStrictArithmetic() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
                          ? isStrict()
                          : options.isStrictArithmetic();
        MathContext bigdContext = options.getArithmeticMathContext();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bigdContext == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            bigdContext = getMathContext();
        }
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bigdScale = options.getArithmeticMathScale();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bigdScale == &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MIN_VALUE) {
            bigdScale = getMathScale();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((ostrict != isStrict())
                || bigdScale != getMathScale()
                || bigdContext != getMathContext()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyJexlArithmetic(ostrict, bigdContext, bigdScale);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15402066" author="henrib" created="Mon, 1 Aug 2016 13:55:25 +0000"  >&lt;p&gt;Simplified the process; user-defined arithmetic should override &apos;createWithOptions(...)&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Creates a JexlArithmetic instance.
     * Called by options(...) method when another instance of the same &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;of arithmetic is required.
     * @see #options(org.apache.commons.jexl3.JexlEngine.Options)
     *
     * @param astrict     whether &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; arithmetic is lenient or strict
     * @param bigdContext the math context instance to use &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; +,-,/,*,% operations on big decimals.
     * @param bigdScale   the scale used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; big decimals.
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; is a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic instance
     */
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; JexlArithmetic createWithOptions(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; astrict, MathContext bigdContext, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bigdScale) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic(astrict, bigdContext, bigdScale);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30l13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-202] Detect invalid (addition/subtraction/etc)-assignment operator usage with non-assignable l-value during script parsing</title>
                <link>https://issues.apache.org/jira/browse/JEXL-202</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;While the code like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2 = 3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; throws exception &quot;assignment error in ..&quot; during parsing, the code like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2 += 3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is parsed successfully and only throws exception &quot;illegal assignment form 0&quot; in runtime which makes it harder for debug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987068">JEXL-202</key>
            <summary>Detect invalid (addition/subtraction/etc)-assignment operator usage with non-assignable l-value during script parsing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jul 2016 07:12:25 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:11 +0000</updated>
                            <resolved>Wed, 6 Jul 2016 09:42:21 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15364058" author="henrib" created="Wed, 6 Jul 2016 09:42:21 +0000"  >&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/JexlParser.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/parser/ParserTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1751647.&lt;/p&gt;</comment>
                            <comment id="15364104" author="dmitri_blinov" created="Wed, 6 Jul 2016 10:27:01 +0000"  >&lt;p&gt;Could you please also fix typo in message &apos;assignement error in..&apos;. should be &apos;assignment ...&lt;/p&gt;</comment>
                            <comment id="15365089" author="henrib" created="Wed, 6 Jul 2016 21:06:51 +0000"  >&lt;p&gt;Sorry, I dont understand what you&apos;d like changed; you want to get rid of &quot;error in&quot; in the exception message ?&lt;/p&gt;</comment>
                            <comment id="15365644" author="dmitri_blinov" created="Thu, 7 Jul 2016 05:39:01 +0000"  >&lt;p&gt;Sorry, I meant to remove the &apos;e&apos; letter from the word assign*e*ment. The phrase is ok.&lt;/p&gt;</comment>
                            <comment id="15365929" author="henrib" created="Thu, 7 Jul 2016 10:34:04 +0000"  >&lt;p&gt;Done &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30kxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-196] Script execution hangs while calling method with one argument without parameter</title>
                <link>https://issues.apache.org/jira/browse/JEXL-196</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;While it is obviously an error to do such a thing, the script execution hangs indefinitely if the method with one argument of type Object is called without any parameter at all.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapContext &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext.NamespaceResolver {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resolveNamespace(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hangs(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testHangs() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript e = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;hangs()&quot;&lt;/span&gt;);
        Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; c = e.callable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestContext());

        ExecutorService executor = Executors.newFixedThreadPool(1);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            Future&amp;lt;?&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; = executor.submit(c);
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.get(10, TimeUnit.SECONDS);
            Assert.assertEquals(1, t);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            executor.shutdown();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The expected behaviour is to report an error&lt;/p&gt;</description>
                <environment></environment>
        <key id="12972057">JEXL-196</key>
            <summary>Script execution hangs while calling method with one argument without parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2016 13:20:02 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:20 +0000</updated>
                            <resolved>Thu, 26 May 2016 21:16:38 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15302950" author="henrib" created="Thu, 26 May 2016 21:16:39 +0000"  >&lt;p&gt;Break out of method resolution loop when already failed to resolve through context method&lt;/p&gt;

&lt;p&gt;Committed revision 1745646.&lt;/p&gt;

&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptCallableTest.java..&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yd9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-193] InterruptedException is swallowed in function call in silent and non-strict mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-193</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following test case fails with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: Values should be different. Actual: 42
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failEquals(Assert.java:185)
	at org.junit.Assert.assertNotEquals(Assert.java:161)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapContext &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext.NamespaceResolver {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; interrupt() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InterruptedException();
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInterrupt() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)).strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
        JexlScript e = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;interrupt(); &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42&quot;&lt;/span&gt;);
        Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; c = e.callable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestContext());

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = c.call();
        Assert.assertNotEquals(42, t);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected behaviour is to cancel script execution&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959371">JEXL-193</key>
            <summary>InterruptedException is swallowed in function call in silent and non-strict mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Apr 2016 09:55:28 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:22 +0000</updated>
                            <resolved>Tue, 10 May 2016 19:06:39 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15245913" author="dmitri_blinov" created="Mon, 18 Apr 2016 16:11:39 +0000"  >&lt;p&gt;I&apos;ve been able to fix it locally by patching Interpreter.java &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; interpret(JexlNode node) {
    ....
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException xjexl) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (xjexl &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; JexlException.Cancel) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; xjexl;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (silent) {
                logger.warn(xjexl.getMessage(), xjexl.getCause());
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; xjexl.clean();
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and adding additional catch &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; call(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlNode node, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; target, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; functor, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ASTArguments argNode) {
        ...
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InvocationTargetException ite) {

            Throwable targetException = ite.getTargetException();

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (targetException &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; InterruptedException) {
               &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlException.Cancel(node);
            }

            xjexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlException(node, methodName, ite);
      ....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hope this&apos;ll help to fix it...&lt;/p&gt;</comment>
                            <comment id="15262181" author="henrib" created="Thu, 28 Apr 2016 14:03:10 +0000"  >&lt;p&gt;Refined handling of interruption (InterruptedException handling &amp;amp; interrupted()), more checks around cancellation (blocks,set/map/array literals), refactored internal Callable, more tests&lt;/p&gt;

&lt;p&gt;Revision: 1741426&lt;/p&gt;

&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Closure.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Script.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptCallableTest.java&lt;/p&gt;

</comment>
                            <comment id="15271930" author="dmitri_blinov" created="Thu, 5 May 2016 06:00:05 +0000"  >&lt;p&gt;I wonder should we also check for thread cancellation just before returning a value from script, so as to guarantee that if thread have been cancelled no value is returned by JEXL&lt;/p&gt;</comment>
                            <comment id="15271997" author="dmitri_blinov" created="Thu, 5 May 2016 07:10:53 +0000"  >&lt;p&gt;BTW, I just have noticed that cancellation exception is still not thrown in Interpreter.interpret() in silent or non-strict mode. While I understand the conception&lt;br/&gt;
of silent execution I think exceptions like InterruptedException or OutOfMemoryError are kind of special (exceptional exceptions, he-he), and the invoking code should be informed no matter what mode jexl is configured with if such an exception was taken place &lt;/p&gt;</comment>
                            <comment id="15273990" author="henrib" created="Fri, 6 May 2016 12:53:35 +0000"  >&lt;p&gt;On checking cancellation when handling &apos;return&apos;;  if the return argument evaluation did not throw a cancel exception, we have a result and we were not interrupted. Not sure what we&apos;d functionally gain by an extra check.&lt;br/&gt;
On the exception throwing when cancellation/interruption occur, do you have a use-case that suffers from the current behavior? Asynchronous/cancellable execution is best handled through Future&amp;lt;&amp;gt; which seemingly shield this detail.&lt;br/&gt;
OOM is an error you can (at least, will) not recover from, InterruptedException are (should be, at least in many useful scenarios) recoverable . &lt;/p&gt;</comment>
                            <comment id="15274264" author="dmitri_blinov" created="Fri, 6 May 2016 15:58:39 +0000"  >&lt;p&gt;Suppose we have a multi-threaded system where each request is processed by some thread from the pool, and we have a policy for each request not to take longer then specified amount of time, and for requests that are not able to complete within the specified period we want those requests to be interrupted. That may be implemented by invoking Thread.interrupt() which by design should cancel all outstanding processing. If by chance the request is using jexl scripting when thread was interrupted, I expect jexl not only to break current script execution but somehow to notify me that the script processing has been ended unexpectedly, so I could decide how this should be handled, possibly rolling back pending transaction etc. As I see now from the code that exception is only thrown by in non-silent mode. If I chose to use silent mode to suit some other purposes, I&apos;ll never know that the thread was interrupted.&lt;/p&gt;</comment>
                            <comment id="15274284" author="henrib" created="Fri, 6 May 2016 16:10:54 +0000"  >&lt;p&gt;Use a Future and a call get with a timeout to implement this behavior and everything is taken care of; you receive a TimeoutException if it took too long. Look at tests in ScriptCallableTest for some examples.&lt;/p&gt;</comment>
                            <comment id="15274295" author="dmitri_blinov" created="Fri, 6 May 2016 16:17:22 +0000"  >&lt;p&gt;As I understand that will be only one part of the solution. From the point of monitoring thread I will know the executing thread has timed out, the problem is that will just not prevent the executing thread from continuing. The solution still needs the other part, to allow the executing thread to know it was interrupted and need not to continue. In silent mode jexl will break script execution but will clear thread&apos;s interrupted state and return null instead of throwing exception. From the point of executing thread the returned null may be a valid result, not a signal about something went wrong. So the executing thread will never know it is timed out and continue its transaction as normal.&lt;/p&gt;</comment>
                            <comment id="15274308" author="henrib" created="Fri, 6 May 2016 16:29:28 +0000"  >&lt;p&gt;Call future.cance(true) in the TimeoutException handling.&lt;/p&gt;</comment>
                            <comment id="15274354" author="dmitri_blinov" created="Fri, 6 May 2016 17:05:25 +0000"  >&lt;p&gt;Future.cancel(true) will &lt;b&gt;attempt&lt;/b&gt; to stop the task by invoking Thread.interrupt() for executing thread. Whether the executing thread will stop or not depends on how it is implemented. Jexl will check that thread is interrupted, break current script execution, but if in silent mode, will clear thread&apos;s interrupted state and return null. So the thread &lt;b&gt;will not&lt;/b&gt; stop. If jexl is in non-silent mode, it will clear thread&apos;s interrupted state but throw Cancel exception. I can catch Cancel exception and re-throw InterruptedException instead and the thread eventually &lt;b&gt;will&lt;/b&gt; stop. What I&apos;m trying to propose is that jexl should throw Cancel exception regardless of its mode, silent or non-silent, to let me know it was interrupted during execution.&lt;/p&gt;</comment>
                            <comment id="15274434" author="henrib" created="Fri, 6 May 2016 17:46:40 +0000"  >&lt;p&gt;Jexl will break current script execution, the callable call method will return null, the thread returned to the executor pool in the examples or ready to be joined (i.e. thread has stopped).&lt;/p&gt;</comment>
                            <comment id="15274488" author="dmitri_blinov" created="Fri, 6 May 2016 18:11:16 +0000"  >&lt;p&gt;I think correct test case should be this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapContext &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext.NamespaceResolver {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; interrupt() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InterruptedException();
        }
    }

@Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInterrupt() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)).strict(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).create();
        JexlScript e = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;interrupt(); &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42&quot;&lt;/span&gt;);
        Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; c = e.callable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestContext());
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
           &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; t = c.call();
           Assert.fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should have thrown JexlException.Cancel&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (JexlException.Cancel je) {
           &lt;span class=&quot;code-comment&quot;&gt;// Fine
&lt;/span&gt;        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15278586" author="henrib" created="Tue, 10 May 2016 18:03:09 +0000"  >&lt;p&gt;Conclusion is that we need another flag to control how &apos;cancellation&apos; is handled. The specification is the following:&lt;/p&gt;

&lt;p&gt;The &apos;cancellable&apos; option - accessible through the JexlBuilder &amp;amp; JexlEngine.Options - determines what happens when a script/expression/callable/closure is interrupted or cancelled during evaluation. When cancellable is true, a JexlException.Cancel is thrown; when false, the script execution stops and returns null.&lt;br/&gt;
Default behavior is to be cancellable when verbose (i.e. not silent, throw exceptions on errors)  and strict (considering interrupt as an error).&lt;/p&gt;</comment>
                            <comment id="15278692" author="henrib" created="Tue, 10 May 2016 19:06:39 +0000"  >
&lt;p&gt;Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-193&quot; title=&quot;InterruptedException is swallowed in function call in silent and non-strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-193&quot;&gt;&lt;del&gt;JEXL-193&lt;/del&gt;&lt;/a&gt; take 2; added a cancellable flag that controls whether JexlException.Cancel are throw when evaluation is interrupted/cancelled.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlBuilder.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/JexlEngine.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Engine.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Script.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/JexlEvalContext.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ReadonlyContext.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ScriptCallableTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1743249.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w7p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-192] Invalid return type when expected result is null</title>
                <link>https://issues.apache.org/jira/browse/JEXL-192</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In jexl2 this code correctly outputs the line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        Record r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Record();
        r.setHeader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordHeader());
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;r&quot;&lt;/span&gt;, r );
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.s.objects.record.RecordUtils&quot;&lt;/span&gt;, com.s.objects.record.RecordUtils.class );
        Expression e = jexl.createExpression( &lt;span class=&quot;code-quote&quot;&gt;&quot;com.s.objects.record.RecordUtils.getHeaderAgeOrResolveItFromDOB(r)&quot;&lt;/span&gt; );
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( e.evaluate(jc) );        
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The signature of the method getHeaderAgeOrResolveItFromDOB() is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; getHeaderAgeOrResolveItFromDOB( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Record rec ) {
        ...
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in jexl3 this code produces:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com.s.objects.record.RecordUtils
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        Record r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Record();
        r.setHeader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordHeader());
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;r&quot;&lt;/span&gt;, r );
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.s.objects.record.RecordUtils&quot;&lt;/span&gt;, com.s.objects.record.RecordUtils.class );
        JexlExpression e = jexl.createExpression( &lt;span class=&quot;code-quote&quot;&gt;&quot;com.s.objects.record.RecordUtils.getHeaderAgeOrResolveItFromDOB(r)&quot;&lt;/span&gt; );
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( e.evaluate(jc) );        
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it returns the class of the utility rather than the value null! For non null values it returns the proper type (Integer);&lt;/p&gt;

&lt;p&gt;I think jexl3 version 3.0 was not really ready for prime time.&lt;br/&gt;
I really screwed up my project upgrading to 3.0.&lt;br/&gt;
When do you guys anticipate to release 3.1?&lt;br/&gt;
Is there a way to work with a snapshot after this fix?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952430">JEXL-192</key>
            <summary>Invalid return type when expected result is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="biliboc">Constantin Mitocaru</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2016 13:13:44 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:23 +0000</updated>
                            <resolved>Tue, 22 Mar 2016 16:25:34 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15206539" author="henrib" created="Tue, 22 Mar 2016 15:24:55 +0000"  >&lt;p&gt;I fail reproducing your issue on the trunk with the current information; can you pinpoint what I must be missing ?&lt;br/&gt;
My test code is this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C192 {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; C192() {}

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; callme(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; n) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (n == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; n &amp;gt;= 0? 42 : -42;
            }
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test192() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.y.z&quot;&lt;/span&gt;,  C192.class);
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        JexlExpression js0 = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.y.z.callme(t)&quot;&lt;/span&gt;);
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertEquals(0, js0.evaluate(jc));
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;, 10);
        Assert.assertEquals(42, js0.evaluate(jc));
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;, -10);
        Assert.assertEquals(-42, js0.evaluate(jc));
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        Assert.assertEquals(0, js0.evaluate(jc));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15206556" author="biliboc" created="Tue, 22 Mar 2016 15:30:21 +0000"  >&lt;p&gt;Please make it so your method returns null sometimes. For instance:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C192 {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; C192() {}

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; callme(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; n) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (n == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; n &amp;gt;= 0? 42 : -42;
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;    </comment>
                            <comment id="15206711" author="henrib" created="Tue, 22 Mar 2016 16:25:34 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1736210.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v0wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-191] Jexl3 unsolvable property exception when using enum</title>
                <link>https://issues.apache.org/jira/browse/JEXL-191</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;This code used to work under jexl2&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; Gender { MALE, FEMALE};

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args ) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ClassNotFoundException {
    JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
    Record r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Record();
    r.setHeader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordHeader());
    JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;r&quot;&lt;/span&gt;, r );
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.sytrue.objects.Gender&quot;&lt;/span&gt;, Gender.class );
    Expression e = jexl.createExpression( &lt;span class=&quot;code-quote&quot;&gt;&quot;r.header.gender=com.sytrue.objects.Gender.FEMALE&quot;&lt;/span&gt; );
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( e.evaluate(jc) );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but under jexl3 it throws an exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args ) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ClassNotFoundException {
    JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
    Record r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Record();
    r.setHeader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordHeader());
    JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;r&quot;&lt;/span&gt;, r );
    jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.sytrue.objects.Gender&quot;&lt;/span&gt;, Gender.class );
    JexlExpression e = jexl.createExpression( &lt;span class=&quot;code-quote&quot;&gt;&quot;r.header.gender=com.sytrue.objects.Gender.FEMALE&quot;&lt;/span&gt; );
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( e.evaluate(jc) );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The exception is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.commons.jexl3.JexlException$Property: com.sytrue.objects.record.app.JexlTestApp.main@1:42 unsolvable property &lt;span class=&quot;code-quote&quot;&gt;&apos;FEMALE&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Temporary workaround is using the valueOf method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JexlExpression e = jexl.createExpression( &lt;span class=&quot;code-quote&quot;&gt;&quot;r.header.gender=com.sytrue.objects.Gender.valueOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;FEMALE&apos;&lt;/span&gt;)&quot;&lt;/span&gt; );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that I no longer can access the enum type in jexl3.&lt;br/&gt;
Is there any reason this doesn&apos;t work anymore or it is a bug&lt;/p&gt;</description>
                <environment></environment>
        <key id="12951205">JEXL-191</key>
            <summary>Jexl3 unsolvable property exception when using enum</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="biliboc">Constantin Mitocaru</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Mar 2016 13:36:57 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:20 +0000</updated>
                            <resolved>Fri, 18 Mar 2016 08:51:13 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15201175" author="henrib" created="Fri, 18 Mar 2016 08:32:38 +0000"  >&lt;p&gt;Thanks for reporting the bug - confirmed, reproduced; committing a fix soon.&lt;/p&gt;</comment>
                            <comment id="15201194" author="henrib" created="Fri, 18 Mar 2016 08:51:13 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/PublicFieldsTest.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;/p&gt;

&lt;p&gt;Committed revision 1735550.&lt;/p&gt;</comment>
                            <comment id="15303790" author="klapsa" created="Fri, 27 May 2016 09:13:53 +0000"  >&lt;p&gt;Does anyone knows when version 3.1 will be published?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://stackoverflow.com/questions/36061706/jexl3-unsolvable-property-exception-when-using-enum]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2utt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-190] local function within context is not resolved if function resolver class without namespace is specified</title>
                <link>https://issues.apache.org/jira/browse/JEXL-190</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;z = function(x) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x + 1}; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; z(1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; returns error unsolvable function/method &apos;z&apos; while &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; z = function(x) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x + 1}; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; z(1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; returns 2&lt;/p&gt;</description>
                <environment></environment>
        <key id="12944474">JEXL-190</key>
            <summary>local function within context is not resolved if function resolver class without namespace is specified</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2016 12:56:23 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:03 +0000</updated>
                            <resolved>Fri, 18 Mar 2016 14:03:14 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15168769" author="henrib" created="Fri, 26 Feb 2016 10:13:11 +0000"  >&lt;p&gt;Hi Dimitri;&lt;br/&gt;
I&apos;m not able to reproduce the issue. May be something in your context implementation ?&lt;br/&gt;
My test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test180() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sglobal = &lt;span class=&quot;code-quote&quot;&gt;&quot;z = (x)-&amp;gt;{ &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x + 1}; z(41)&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; slocal = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; t = (x)-&amp;gt;{ &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x + 41}; t(1)&quot;&lt;/span&gt;;
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        JexlScript jglobal = jexl.createScript(sglobal);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; oglobal = jglobal.execute(jc);
        Assert.assertEquals(42, oglobal);
        JexlScript jlocal = jexl.createScript(slocal);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; olocal = jlocal.execute(jc);
        Assert.assertEquals(42, olocal);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15168884" author="dmitri_blinov" created="Fri, 26 Feb 2016 12:17:39 +0000"  >&lt;p&gt;It has turned out that the problem is reproduced if I try to initialize JEXLEngine with functions without a namespace in a way like this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    functions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
    &lt;span class=&quot;code-comment&quot;&gt;// Register &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; function namespaces
&lt;/span&gt;    functions.put(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultFunctions(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;));
...

    &lt;span class=&quot;code-comment&quot;&gt;// Jexl Setup
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; verboseScripting = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; strict = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;

    JexlBuilder jb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder();
    jb.silent(!verboseScripting);
    jb.strict(strict);
    jb.namespaces(functions);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To be sure, the class DefaultFunctions does not contain method z. If I comment out the line  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-comment&quot;&gt;// functions.put(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultFunctions(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;)); &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; everything works as expected. Now I wonder if it&apos;s correct to register functions with null namespace ?&lt;/p&gt;</comment>
                            <comment id="15169223" author="henrib" created="Fri, 26 Feb 2016 15:51:08 +0000"  >&lt;p&gt;I usually put &apos;default&apos; functions in the context (i.e extend JexlContext and implement functions as methods of that class) and only use &apos;named&apos; namespaces. But nothing in the code precludes using a &apos;null&apos; namespace.&lt;br/&gt;
Your use-case fix is thus; when solving a function call (without a namespace), if a variable in the context exists with that name, it will be evaluated and used. The code expects this variable value to be a &apos;function&apos; object  (i.e. something that can be called like a function; a method, a closure, etc) and will fail at runtime if not.&lt;br/&gt;
This only restates the fact that a variable - local or global - can mask a (default) method.&lt;/p&gt;</comment>
                            <comment id="15170395" author="dmitri_blinov" created="Sat, 27 Feb 2016 06:33:32 +0000"  >&lt;p&gt;Well, if null namespaces are not prohibited, then we have a bug in the current implementation, which prevents any functions from global context from being resolved (incorrect) while allowing functions from local context to be used (correct), if JEXLEngine was built with namespace resolver map containing &apos;null&apos; key.&lt;/p&gt;</comment>
                            <comment id="15197073" author="dmitri_blinov" created="Wed, 16 Mar 2016 09:14:46 +0000"  >&lt;p&gt;As far as I can understand the logic the problem lies in Interpreter.java &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; visit(ASTFunctionNode node, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; data) {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; argc = node.jjtGetNumChildren();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (argc == 2) {
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; namespace = resolveNamespace(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, node);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (namespace == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                namespace = context;
            }
            ASTIdentifier functionNode = (ASTIdentifier) node.jjtGetChild(0);
            ASTArguments argNode = (ASTArguments) node.jjtGetChild(1);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; call(node, namespace, functionNode, argNode);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if we initialized JexlEngine with namespace resolver map containing &apos;null&apos; key, then JexlContext is never checked as it is only checked if there is nothing returned by resolveNamespace. So even if a variable in the context exists with that name, it will never be evaluated.&lt;/p&gt;</comment>
                            <comment id="15198835" author="henrib" created="Thu, 17 Mar 2016 06:34:11 +0000"  >&lt;p&gt;I&apos;ve been working on a fix but stumbled on a potential issue wrt to caching and variables (local or global) holding &apos;functors&apos;. I should commit something momentarily; thanks for your patience.&lt;/p&gt;</comment>
                            <comment id="15201499" author="henrib" created="Fri, 18 Mar 2016 14:03:14 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/MethodTest.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;/p&gt;

&lt;p&gt;Committed revision 1735607.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tqrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-189] Possible bug in Interpreter.isCancelled()</title>
                <link>https://issues.apache.org/jira/browse/JEXL-189</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Reported by FindBugs is the message: &lt;/p&gt;

&lt;p&gt;&quot;Questionable use of non-short-circuit logic in org.apache.commons.jexl3.internal.Interpreter.isCancelled()&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isCancelled() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cancelled | &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.interrupted()) {
            cancelled = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cancelled;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe it is better to replace method as &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isCancelled() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.interrupted())
            cancelled = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cancelled;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12935601">JEXL-189</key>
            <summary>Possible bug in Interpreter.isCancelled()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 12:06:32 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:09 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 18:06:51 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15159336" author="henrib" created="Tue, 23 Feb 2016 18:06:51 +0000"  >&lt;p&gt;Used this opportunity to avoid tinkering with the thread interruption status (see Goetz - Java concurrency in practice @ 7.1 p 141)&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
Committed revision 1731917.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s8br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-188] Possible bug in JexlArithmetic.isFloatingPointNumber</title>
                <link>https://issues.apache.org/jira/browse/JEXL-188</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Reported by FindBugs is the message &lt;/p&gt;

&lt;p&gt;&quot;Useless condition: it&apos;s known that ch &amp;lt;= &apos;9&apos; at this point&quot;   &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ch != &lt;span class=&quot;code-quote&quot;&gt;&apos;+&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch != &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch &amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;9&apos;&lt;/span&gt;) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Possibly &amp;amp;&amp;amp; (ch &amp;lt; &apos;0&apos; || ch &amp;gt; &apos;9&apos;) was meant ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935600">JEXL-188</key>
            <summary>Possible bug in JexlArithmetic.isFloatingPointNumber</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 11:58:38 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:15 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 18:02:26 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15159324" author="henrib" created="Tue, 23 Feb 2016 18:02:26 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlArithmetic.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticTest.java&lt;br/&gt;
Committed revision 1731915.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s8bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-186] Performance regression in arithmetic operations compared to JEXL 2.1</title>
                <link>https://issues.apache.org/jira/browse/JEXL-186</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Compared to JEXL 2.1.1, arithmetic operations are slower in 3.0.&lt;/p&gt;

&lt;p&gt;The culprit is the logic around operators overloading; when the JexlArithmetic does not overload any operator, discovering whether it overloads one is repeated each time an interpreter is created (which is a costly introspection operation).&lt;/p&gt;

&lt;p&gt;As a workaround, one ca use an arithmetic that does overload an operator (for instance size) as in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JMeterArithmetic &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JMeterArithmetic(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; astrict) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(astrict);
        }

        /**
         * A workaround to create an &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; overload
         * @param jma an improbable parameter class
         * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1
         */
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size(JMeterArithmetic jma) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And use an instance of that class at engine creation time as in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
                    .cache(512)
                    .silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                    .strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                    .arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JMeterArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;))
                    .create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12933387">JEXL-186</key>
            <summary>Performance regression in arithmetic operations compared to JEXL 2.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="p.mouawad@ubik-ingenierie.com">Philippe Mouawad</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jan 2016 16:27:52 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:18 +0000</updated>
                            <resolved>Sun, 31 Jan 2016 21:50:11 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15112694" author="henrib" created="Fri, 22 Jan 2016 17:06:35 +0000"  >&lt;p&gt;Correcting arithmetic operator overloading caching / discovery&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
Committed revision 1726257.&lt;/p&gt;</comment>
                            <comment id="15112990" author="pmouawad" created="Fri, 22 Jan 2016 20:24:05 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
As per mailing list discussion, find the test case.&lt;br/&gt;
When I run the bench with JVM options:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;-XX:+PrintCompilation -XX:CICompilerCount=1 -Xbatch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;JEXL2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;     60    1    b        java.lang.String::hashCode (55 bytes)
     67    2    b        java.lang.String::indexOf (70 bytes)
     83    3    b        sun.nio.cs.UTF_8$Encoder::encode (361 bytes)
     96    4    b        java.lang.String::charAt (29 bytes)
    101    5    b        java.lang.String::lastIndexOf (52 bytes)
    103    6    b        java.lang.String::indexOf (166 bytes)
    127    7    b        java.lang.String::lastIndexOf (151 bytes)
    134    8    b        java.lang.String::replace (127 bytes)
    150    9    b        sun.net.www.ParseUtil::encodePath (336 bytes)
    164   10    b        java.lang.String::equals (81 bytes)
    170   11    b        java.lang.Object::&amp;lt;init&amp;gt; (1 bytes)
    171   12    b        java.io.UnixFileSystem::normalize (75 bytes)
    176   13     n       java.lang.System::arraycopy (native)   (static)
    184   14    b        java.lang.String::startsWith (72 bytes)
    224   15    b        java.lang.String::length (6 bytes)
    229   16    b        java.lang.Math::min (11 bytes)
    260   17    b        java.util.HashMap::indexFor (6 bytes)
    261   18    b        java.util.HashMap::hash (55 bytes)
    263   19    b        java.lang.CharacterData::of (120 bytes)
    263   20    b        java.lang.CharacterDataLatin1::getProperties (11 bytes)
    277   21    b        java.lang.String::lastIndexOf (13 bytes)
    287   22    b        java.lang.Character::digit (6 bytes)
    287   23    b        java.lang.Character::digit (10 bytes)
    288   24    b        java.lang.CharacterDataLatin1::digit (91 bytes)
    289   25    b        java.lang.String::substring (79 bytes)
    290   26    b        org.apache.commons.jexl2.parser.SimpleNode::jjtGetChild (7 bytes)
    291   27    b        java.lang.Integer::parseInt (261 bytes)
    314   28    b        java.lang.String::&amp;lt;init&amp;gt; (15 bytes)
    315   29    b        java.util.HashMap::put (142 bytes)
    321   30    b        java.lang.Number::&amp;lt;init&amp;gt; (5 bytes)
    324   31    b        java.lang.Integer::stringSize (21 bytes)
    325   32    b        java.lang.Integer::getChars (131 bytes)
    331   33    b        org.apache.commons.jexl2.MapContext::set (13 bytes)
    331   34    b        org.apache.commons.jexl2.parser.SimpleNode::jjtGetNumChildren (17 bytes)
    331   35    b        java.lang.Integer::toString (8 bytes)
    335   36    b        java.lang.Integer::toString (48 bytes)
    337   37    b        java.math.BigInteger::longValue (32 bytes)
    352   38     n       java.lang.Thread::currentThread (native)   (static)
    358   39    b        java.lang.ref.Reference::get (5 bytes)
    358   40    b        java.lang.Float::isNaN (12 bytes)
    370   41    b        sun.misc.VM::isBooted (4 bytes)
    371   42    b        java.lang.Math::min (46 bytes)
    372   43    b        org.apache.commons.jexl2.parser.ASTNumberLiteral::jjtAccept (9 bytes)
    373   44    b        org.apache.commons.jexl2.Interpreter::visit (27 bytes)
    373   45    b        org.apache.commons.jexl2.parser.ASTNumberLiteral::getLiteral (5 bytes)
    373   46    b        org.apache.commons.jexl2.JexlArithmetic::isFloatingPointNumber (66 bytes)
    375   47    b        java.math.BigInteger::trustedStripLeadingZeroInts (37 bytes)
    376   48    b        org.apache.commons.jexl2.JexlArithmetic::toBigInteger (184 bytes)
    380   49    b        java.math.BigInteger::&amp;lt;init&amp;gt; (8 bytes)
    381   50    b        java.math.BigInteger::&amp;lt;init&amp;gt; (360 bytes)
    396   51    b        java.math.BigInteger::compareTo (71 bytes)
    400   52   !b        org.apache.commons.jexl2.Interpreter::visit (205 bytes)
    414   53    b        java.math.BigInteger::add (178 bytes)
    430   54    b        java.util.HashMap::getEntry (86 bytes)
    454   55    b        java.util.Arrays::copyOf (19 bytes)
    466   56    b        java.util.AbstractMap::&amp;lt;init&amp;gt; (15 bytes)
    467   57    b        java.util.HashMap::&amp;lt;init&amp;gt; (119 bytes)
    469   58    b        java.util.HashMap::&amp;lt;init&amp;gt; (9 bytes)
    475   59    b        java.lang.ref.SoftReference::get (29 bytes)
    476   60    b        java.lang.ThreadLocal::getMap (5 bytes)
    477   61    b        java.lang.ThreadLocal::access$400 (5 bytes)
    477   62    b        java.lang.ThreadLocal::get (34 bytes)
    481   63    b        java.util.LinkedHashMap::get (25 bytes)
    485   64    b        java.util.HashMap::initHashSeedAsNeeded (61 bytes)
    486   65    b        java.lang.Integer::highestOneBit (38 bytes)
    486   66    b        java.math.BigInteger::&amp;lt;init&amp;gt; (24 bytes)
    486   67    b        java.util.Hashtable::initHashSeedAsNeeded (61 bytes)
    487   68    b        java.lang.Integer::valueOf (54 bytes)
    488   69    b        java.util.Hashtable::&amp;lt;init&amp;gt; (135 bytes)
    490   70    b        java.util.Dictionary::&amp;lt;init&amp;gt; (5 bytes)
    490   71    b        java.util.Hashtable::&amp;lt;init&amp;gt; (9 bytes)
    491   72    b        java.lang.String::&amp;lt;init&amp;gt; (20 bytes)
    492   73    b        java.util.Properties::&amp;lt;init&amp;gt; (6 bytes)
    493   74    b        java.util.Properties::&amp;lt;init&amp;gt; (10 bytes)
    494   75    b        PerfJexl2::test (96 bytes)
    515   76    b        org.apache.commons.jexl2.MapContext::&amp;lt;init&amp;gt; (6 bytes)
    516   77    b        org.apache.commons.jexl2.MapContext::&amp;lt;init&amp;gt; (24 bytes)
    518   78    b        java.lang.Thread::getName (8 bytes)
    519   79    b        java.lang.String::valueOf (9 bytes)
    521   80    b        PerfJexl2::getJexlEngine (48 bytes)
    522   81    b        org.apache.commons.jexl2.JexlEngine::createExpression (7 bytes)
    525   82    b        org.apache.commons.jexl2.JexlEngine::createExpression (56 bytes)
    528   83   !b        org.apache.commons.jexl2.JexlEngine::parse (242 bytes)
    544   84    b        org.apache.commons.jexl2.JexlEngine::cleanExpression (81 bytes)
    548   85    b        java.lang.String::subSequence (7 bytes)
    550   86    b        java.lang.String::toString (2 bytes)
    550   87    b        org.apache.commons.jexl2.JexlEngine$SoftCache::get (38 bytes)
    554   88    b        org.apache.commons.jexl2.JexlEngine::createExpression (11 bytes)
    555   89    b        org.apache.commons.jexl2.ExpressionImpl::&amp;lt;init&amp;gt; (20 bytes)
    555   90    b        org.apache.commons.jexl2.ExpressionImpl::evaluate (50 bytes)
    558   91    b        org.apache.commons.jexl2.JexlEngine::createInterpreter (14 bytes)
    560   92    b        org.apache.commons.jexl2.JexlEngine::isStrict (13 bytes)
    561   93    b        org.apache.commons.jexl2.JexlEngine::isLenient (8 bytes)
    561   94    b        org.apache.commons.jexl2.JexlArithmetic::isLenient (13 bytes)
    561   95    b        org.apache.commons.jexl2.JexlEngine::isSilent (5 bytes)
    561   96    b        org.apache.commons.jexl2.JexlEngine::createInterpreter (22 bytes)
    562   97    b        org.apache.commons.jexl2.Interpreter::&amp;lt;init&amp;gt; (99 bytes)
    564   98    b        org.apache.commons.jexl2.parser.ASTJexlScript::createFrame (20 bytes)
    564   99    b        org.apache.commons.jexl2.Interpreter::setFrame (34 bytes)
    564  100   !b        org.apache.commons.jexl2.Interpreter::interpret (117 bytes)
    565  101    b        org.apache.commons.jexl2.parser.ASTAdditiveNode::jjtAccept (9 bytes)
    566  102    b        java.math.BigInteger::add (123 bytes)
    568  103    b        org.apache.commons.jexl2.JexlArithmetic::narrowBigInteger (87 bytes)
    582  104 %  b        PerfJexl2::bench @ 9 (54 bytes)
    587   29             java.util.HashMap::put (142 bytes)   made not entrant
    587  104 %           PerfJexl2::bench @ -2 (54 bytes)   made not entrant
Time:505ms
    587  105    b        PerfJexl2::bench (54 bytes)
    591  106    b        java.util.HashMap$Entry::&amp;lt;init&amp;gt; (26 bytes)
    591  107    b        java.util.HashMap::addEntry (69 bytes)
    597  108 %  b        PerfJexl2::bench @ 9 (54 bytes)
    605  109    b        java.util.HashMap::put (142 bytes)
Time:34ms
Time:15ms
Time:15ms
Time:8ms
Time:7ms
Time:7ms
Time:7ms
Time:9ms
Time:7ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;JEXL3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;     65    1    b        java.lang.String::hashCode (55 bytes)
     72    2    b        java.lang.String::indexOf (70 bytes)
     88    3    b        sun.nio.cs.UTF_8$Encoder::encode (361 bytes)
     98    4    b        java.lang.String::charAt (29 bytes)
    106    5    b        java.lang.String::lastIndexOf (52 bytes)
    110    6    b        java.lang.String::indexOf (166 bytes)
    134    7    b        java.lang.String::lastIndexOf (151 bytes)
    142    8    b        java.lang.String::replace (127 bytes)
    153    9    b        sun.net.www.ParseUtil::encodePath (336 bytes)
    170   10    b        java.lang.String::equals (81 bytes)
    175   11    b        java.io.UnixFileSystem::normalize (75 bytes)
    178   12    b        java.lang.Object::&amp;lt;init&amp;gt; (1 bytes)
    180   13     n       java.lang.System::arraycopy (native)   (static)
    186   14    b        java.lang.String::startsWith (72 bytes)
    216   15    b        java.lang.Math::min (11 bytes)
    243   16    b        java.lang.String::length (6 bytes)
    268   17    b        java.util.HashMap::getEntry (86 bytes)
    276   18    b        java.util.HashMap::get (29 bytes)
    285   19    b        org.apache.commons.jexl3.internal.introspection.Uberspect::getArithmetic (219 bytes)
    298   20     n       java.lang.Thread::currentThread (native)   (static)
    300   21    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::getState (5 bytes)
    301   22     n       sun.misc.Unsafe::compareAndSwapInt (native)   
    301   23    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::compareAndSetState (13 bytes)
    303   24    b        java.util.concurrent.locks.ReentrantReadWriteLock::readLock (5 bytes)
    303   25    b        java.util.concurrent.locks.ReentrantReadWriteLock::readLock (5 bytes)
    311   26    b        java.util.HashMap::indexFor (6 bytes)
    313   27    b        java.lang.ref.Reference::get (5 bytes)
    316   28    b        java.lang.ref.SoftReference::get (29 bytes)
    319   29    b        java.util.concurrent.locks.ReentrantReadWriteLock$Sync::exclusiveCount (5 bytes)
    319   30   !b        org.apache.commons.jexl3.internal.introspection.Uberspect::base (103 bytes)
    320   31   !b        org.apache.commons.jexl3.internal.introspection.Introspector::getMap (161 bytes)
    328   32    b        java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock::lock (9 bytes)
    330   33    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::acquireShared (14 bytes)
    332   34    b        java.util.concurrent.locks.ReentrantReadWriteLock$Sync::tryAcquireShared (177 bytes)
    333   35    b        java.util.concurrent.locks.ReentrantReadWriteLock$Sync::sharedCount (5 bytes)
    334   36    b        java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync::readerShouldBlock (5 bytes)
    334   37    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::apparentlyFirstQueuedIsExclusive (38 bytes)
    334   38    b        java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock::unlock (10 bytes)
    336   39    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::releaseShared (16 bytes)
    337   40    b        java.util.concurrent.locks.ReentrantReadWriteLock$Sync::tryReleaseShared (147 bytes)
    338   41    b        java.util.concurrent.locks.AbstractQueuedSynchronizer::doReleaseShared (79 bytes)
    344   42    b        java.util.HashMap::hash (55 bytes)
    382   43  s b        java.lang.Throwable::getOurStackTrace (80 bytes)
    392   44     n       java.lang.Throwable::getStackTraceElement (native)   
    393   45    b        java.lang.String::startsWith (7 bytes)
    410   46    b        java.lang.AbstractStringBuilder::ensureCapacityInternal (16 bytes)
    424   47    b        java.lang.StackTraceElement::getClassName (5 bytes)
    424   48    b        java.lang.String::getChars (62 bytes)
    425   49    b        java.lang.AbstractStringBuilder::append (48 bytes)
    438   50    b        java.lang.StringBuilder::append (8 bytes)
    453   51    b        org.apache.commons.jexl3.JexlEngine::createInfo (144 bytes)
    477   52     n       java.lang.Object::clone (native)   
    484   53    b        java.lang.CharacterData::of (120 bytes)
    484   54    b        java.lang.CharacterDataLatin1::getProperties (11 bytes)
    486   55    b        java.util.HashMap::put (142 bytes)
    505   56    b        org.apache.commons.jexl3.parser.SimpleNode::jjtGetChild (7 bytes)
    506   57    b        org.apache.commons.jexl3.MapContext::set (13 bytes)
    507   58    b        java.math.BigInteger::longValue (32 bytes)
    539   59    b        java.lang.Float::isNaN (12 bytes)
    560   60     n       java.lang.Throwable::fillInStackTrace (native)   
    564   61    b        sun.misc.VM::isBooted (4 bytes)
    566   62    b        java.lang.Math::min (46 bytes)
    568   63    b        java.math.BigInteger::valueOf (62 bytes)
    571   64    b        java.util.concurrent.atomic.AtomicInteger::get (5 bytes)
    571   65    b        java.lang.Character::getType (9 bytes)
    572   66    b        java.lang.CharacterDataLatin1::getType (11 bytes)
    573   67    b        java.lang.Character::isSpaceChar (5 bytes)
    573   68    b        java.lang.Character::isSpaceChar (19 bytes)
    574   69    b        org.apache.commons.jexl3.internal.Engine::getUberspect (5 bytes)
    574   70    b        org.apache.commons.jexl3.internal.introspection.Uberspect::getVersion (8 bytes)
    575   71    b        java.util.concurrent.atomic.AtomicInteger::intValue (5 bytes)
    575   72    b        org.apache.commons.jexl3.parser.ASTNumberLiteral::jjtAccept (7 bytes)
    575   73    b        org.apache.commons.jexl3.internal.Interpreter::visit (27 bytes)
    576   74    b        org.apache.commons.jexl3.parser.ASTNumberLiteral::getLiteral (8 bytes)
    576   75    b        org.apache.commons.jexl3.parser.NumberParser::getLiteralValue (5 bytes)
    576   76    b        org.apache.commons.jexl3.JexlArithmetic::isFloatingPointNumber (116 bytes)
    577   77    b        org.apache.commons.jexl3.JexlArithmetic::toBigInteger (219 bytes)
    579   78    b        java.lang.Integer::longValue (6 bytes)
    579   79    b        java.math.BigInteger::compareTo (71 bytes)
    582   80    b        java.math.BigInteger::add (178 bytes)
    638   81    b        java.lang.String::substring (79 bytes)
    652   82    b        java.util.Arrays::copyOf (19 bytes)
    655   83  s b        java.lang.Throwable::fillInStackTrace (29 bytes)
    667   84     n       java.lang.Object::hashCode (native)   
    692   85    b        java.util.AbstractCollection::&amp;lt;init&amp;gt; (5 bytes)
    698   86    b        java.util.AbstractMap::&amp;lt;init&amp;gt; (15 bytes)
    699   87    b        java.util.HashMap::&amp;lt;init&amp;gt; (119 bytes)
    701   88    b        java.util.HashMap::&amp;lt;init&amp;gt; (9 bytes)
    704   89    b        java.util.AbstractSet::&amp;lt;init&amp;gt; (5 bytes)
    711   90     n       sun.misc.Unsafe::getObjectVolatile (native)   
    724   91    b        java.util.concurrent.ConcurrentHashMap::hash (81 bytes)
    728   92    b        java.lang.String::&amp;lt;init&amp;gt; (15 bytes)
    733   93    b        java.lang.Number::&amp;lt;init&amp;gt; (5 bytes)
    736   94    b        java.lang.ThreadLocal::getMap (5 bytes)
    737   95    b        java.lang.ThreadLocal::access$400 (5 bytes)
    737   96    b        java.lang.ThreadLocal::get (34 bytes)
    748   97    b        java.util.LinkedHashMap::get (25 bytes)
    753   98    b        java.util.HashMap::initHashSeedAsNeeded (61 bytes)
    754   99    b        java.lang.Integer::highestOneBit (38 bytes)
    754  100    b        java.lang.Integer::stringSize (21 bytes)
    756  101    b        sun.misc.SharedSecrets::getJavaLangAccess (4 bytes)
    756  102    b        java.lang.Integer::getChars (131 bytes)
    763  103    b        java.util.concurrent.ConcurrentHashMap::get (141 bytes)
    766  104    b        java.math.BigInteger::&amp;lt;init&amp;gt; (24 bytes)
    766  105    b        java.util.Hashtable::initHashSeedAsNeeded (61 bytes)
    767  106    b        java.lang.Integer::valueOf (54 bytes)
    768  107    b        java.util.Hashtable::&amp;lt;init&amp;gt; (135 bytes)
    770  108    b        java.util.Dictionary::&amp;lt;init&amp;gt; (5 bytes)
    770  109    b        java.util.Hashtable::&amp;lt;init&amp;gt; (9 bytes)
    771  110    b        java.lang.String::&amp;lt;init&amp;gt; (20 bytes)
    773  111    b        java.util.Properties::&amp;lt;init&amp;gt; (6 bytes)
    774  112    b        java.util.Properties::&amp;lt;init&amp;gt; (10 bytes)
    775  113    b        org.apache.commons.jexl3.parser.SimpleNode::jjtGetNumChildren (17 bytes)
    775  114   !b        java.lang.Class::getEnumConstantsShared (76 bytes)
    776  115    b        org.apache.commons.jexl3.JexlOperator::values (10 bytes)
    776  116    b        PerfJexl3::test (96 bytes)
    806  117    b        org.apache.commons.jexl3.MapContext::&amp;lt;init&amp;gt; (6 bytes)
    807  118    b        org.apache.commons.jexl3.MapContext::&amp;lt;init&amp;gt; (24 bytes)
    808  119    b        java.lang.Thread::getName (8 bytes)
    811  120    b        java.lang.String::valueOf (9 bytes)
    812  121    b        PerfJexl3::getJexlEngine (48 bytes)
    814  122    b        org.apache.commons.jexl3.JexlEngine::createExpression (7 bytes)
    827  123    b        org.apache.commons.jexl3.internal.Engine::createExpression (7 bytes)
    837  124    b        org.apache.commons.jexl3.internal.Engine::createExpression (59 bytes)
    847  125     n       java.lang.Throwable::getStackTraceDepth (native)   
    847  126    b        org.apache.commons.jexl3.internal.Engine::trimSource (85 bytes)
    855  127    b        java.lang.String::subSequence (7 bytes)
    858  128    b        java.lang.String::toString (2 bytes)
    859  129   !b        org.apache.commons.jexl3.internal.Engine::parse (140 bytes)
    872  130    b        org.apache.commons.jexl3.internal.Engine$SoftCache::get (38 bytes)
    877  131    b        org.apache.commons.jexl3.parser.ASTJexlScript::getScope (5 bytes)
    877  132    b        org.apache.commons.jexl3.internal.Script::&amp;lt;init&amp;gt; (36 bytes)
    878  133    b        org.apache.commons.jexl3.internal.Script::evaluate (46 bytes)
    880  134    b        org.apache.commons.jexl3.internal.Script::checkCacheVersion (34 bytes)
    881  135    b        org.apache.commons.jexl3.internal.Script::createFrame (9 bytes)
    882  136    b        org.apache.commons.jexl3.parser.ASTJexlScript::createFrame (28 bytes)
    882  137    b        org.apache.commons.jexl3.internal.Script::createInterpreter (10 bytes)
    889  138    b        org.apache.commons.jexl3.internal.Engine::createInterpreter (11 bytes)
    893  139    b        org.apache.commons.jexl3.internal.Interpreter::&amp;lt;init&amp;gt; (283 bytes)
    898  140    b        org.apache.commons.jexl3.parser.ParserVisitor::&amp;lt;init&amp;gt; (5 bytes)
    898  141    b        org.apache.commons.jexl3.internal.Engine::isStrict (5 bytes)
    898  142    b        org.apache.commons.jexl3.internal.Engine::isSilent (5 bytes)
    898  143    b        org.apache.commons.jexl3.JexlArithmetic::isStrict (5 bytes)
    898  144    b        org.apache.commons.jexl3.internal.Operators::&amp;lt;init&amp;gt; (31 bytes)
    899  145    b        java.util.EnumSet::noneOf (63 bytes)
    901  146    b        java.util.EnumSet::getUniverse (10 bytes)
    901  147    b        java.lang.System$2::getEnumConstantsShared (8 bytes)
    902  148    b        java.util.RegularEnumSet::&amp;lt;init&amp;gt; (12 bytes)
    902  149    b        java.util.EnumSet::&amp;lt;init&amp;gt; (15 bytes)
    903  150    b        java.util.HashMap::getForNullKey (42 bytes)
    903  151    b        java.util.RegularEnumSet::isEmpty (15 bytes)
    903  152   !b        org.apache.commons.jexl3.internal.Interpreter::interpret (623 bytes)
    944  153    b        org.apache.commons.jexl3.parser.ASTAddNode::jjtAccept (7 bytes)
    978  154   !b        org.apache.commons.jexl3.internal.Interpreter::visit (88 bytes)
   1009  155   !b        org.apache.commons.jexl3.internal.Operators::tryOverload (159 bytes)
   1010  156   !b        org.apache.commons.jexl3.JexlArithmetic::add (215 bytes)
   1034  157    b        java.math.BigInteger::add (123 bytes)
   1037  158    b        org.apache.commons.jexl3.JexlArithmetic::narrowBigInteger (87 bytes)
   1047  159    b        java.lang.Integer::toString (8 bytes)
   1050  160    b        java.lang.Integer::toString (48 bytes)
   1106  161 %  b        PerfJexl3::bench @ 9 (54 bytes)
   1165   55             java.util.HashMap::put (142 bytes)   made not entrant
   1165  161 %           PerfJexl3::bench @ -2 (54 bytes)   made not entrant
Time:1077ms
   1165  162    b        PerfJexl3::bench (54 bytes)
   1172  163    b        java.util.HashMap$Entry::&amp;lt;init&amp;gt; (26 bytes)
   1172  164    b        java.util.HashMap::addEntry (69 bytes)
   1186  165 %  b        PerfJexl3::bench @ 9 (54 bytes)
   1218  166    b        java.util.HashMap::put (142 bytes)
Time:199ms
Time:169ms
Time:172ms
Time:171ms
Time:168ms
Time:167ms
Time:176ms
Time:175ms
Time:171ms

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15113103" author="henrib" created="Fri, 22 Jan 2016 21:22:00 +0000"  >&lt;p&gt;Big slowdown comes from &apos;debug&apos; mode which creates exceptions to capture stack trace.&lt;br/&gt;
Try this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder()
                    .cache(512)
                    .debug(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
                    .silent(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                    .strict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                    .arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JMeterArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;))
                    .create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15113142" author="henrib" created="Fri, 22 Jan 2016 21:40:46 +0000"  >&lt;p&gt;Reduced benchmarks to their gist; creating the script in the loop or out does not radically change the performance profile. &lt;/p&gt;</comment>
                            <comment id="15113164" author="pmouawad" created="Fri, 22 Jan 2016 21:45:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt;,&lt;br/&gt;
It&apos;s now ok with JMeterArithmetic and debug(false)&lt;br/&gt;
Bug shouldn&apos;t debug be false by default ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;
</comment>
                            <comment id="15113188" author="henrib" created="Fri, 22 Jan 2016 21:59:56 +0000"  >&lt;p&gt;Better yet - than debug(false) - is to create expressions / scripts with a JexlInfo that can then be used to track locations of errors.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; e = engine.createExpression(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;JEXL-186&quot;&lt;/span&gt;, 1, 1), &lt;span class=&quot;code-quote&quot;&gt;&quot;1+2&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15125529" author="henrib" created="Sun, 31 Jan 2016 21:50:11 +0000"  >&lt;p&gt;The code is corrected in the trunk; there is a workaround in the worst (immediate) case using a customized JexlArithmetic.&lt;br/&gt;
About changing the default creation flags, my experience with integrating JEXL means tailoring the startup engine sequence anyway. The current default generates some useful information in case of errors...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783929" name="PerfJexl2.java" size="948" author="henrib" created="Fri, 22 Jan 2016 21:40:46 +0000"/>
                            <attachment id="12783905" name="PerfJexl2.java" size="1806" author="pmouawad" created="Fri, 22 Jan 2016 20:24:05 +0000"/>
                            <attachment id="12783931" name="PerfJexl3.java" size="1454" author="henrib" created="Fri, 22 Jan 2016 21:43:25 +0000"/>
                            <attachment id="12783904" name="PerfJexl3.java" size="1880" author="pmouawad" created="Fri, 22 Jan 2016 20:24:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rup3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-184] dot-ed identifiers parsing failure</title>
                <link>https://issues.apache.org/jira/browse/JEXL-184</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;An expression like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;foo.0.1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; fails at parsing time; parser sees a double where it should not&lt;/p&gt;</description>
                <environment></environment>
        <key id="12920976">JEXL-184</key>
            <summary>dot-ed identifiers parsing failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Dec 2015 06:24:22 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:17 +0000</updated>
                            <resolved>Fri, 11 Dec 2015 06:52:09 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15052295" author="henrib" created="Fri, 11 Dec 2015 06:52:09 +0000"  >
&lt;p&gt;Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-184&quot; title=&quot;dot-ed identifiers parsing failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-184&quot;&gt;&lt;del&gt;JEXL-184&lt;/del&gt;&lt;/a&gt;; updated parser with lexical state dedicated to dot-identifier &lt;/p&gt;

&lt;p&gt;RELEASE-NOTES.txt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Debugger.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/Parser.jjt&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/TokenMgrError.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArrayAccessTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/JexlTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1719265.&lt;/p&gt;</comment>
                            <comment id="15204281" author="henrib" created="Mon, 21 Mar 2016 14:10:17 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pr5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-183] Array parsing gives inconsistent results when no data present</title>
                <link>https://issues.apache.org/jira/browse/JEXL-183</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Create expression and execute with a result of false:   foo.0 == &quot;Napa&quot;&lt;br/&gt;
Same expression with [] tries to evaluate &quot;Napa&quot; as numeric so a NumberFormatException is thrown for:  foo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; == &quot;Napa&quot;&lt;/p&gt;

&lt;p&gt;java.lang.NumberFormatException: For input string: &quot;Napa&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;br/&gt;
	at java.lang.Long.parseLong(Long.java:441)&lt;br/&gt;
	at java.lang.Long.parseLong(Long.java:483)&lt;br/&gt;
	at org.apache.commons.jexl2.JexlArithmetic.toLong(JexlArithmetic.java:906)&lt;br/&gt;
	at org.apache.commons.jexl2.JexlArithmetic.compare(JexlArithmetic.java:719)&lt;br/&gt;
	at org.apache.commons.jexl2.JexlArithmetic.equals(JexlArithmetic.java:759)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1198)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.ASTNENode.jjtAccept(ASTNENode.java:18)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.interpret(Interpreter.java:232)&lt;br/&gt;
	at org.apache.commons.jexl2.ExpressionImpl.evaluate(ExpressionImpl.java:65)&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12919025">JEXL-183</key>
            <summary>Array parsing gives inconsistent results when no data present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="richard@sysgen.co.uk">Richard Tomlinson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2015 17:08:27 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:08 +0000</updated>
                            <resolved>Fri, 4 Dec 2015 21:31:31 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15042269" author="henrib" created="Fri, 4 Dec 2015 21:31:31 +0000"  >&lt;p&gt;Already fixed in 3.0 trunk.&lt;/p&gt;</comment>
                            <comment id="15204247" author="henrib" created="Mon, 21 Mar 2016 14:10:08 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pf4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-181] Cannot create inline Map with array or function call as the key</title>
                <link>https://issues.apache.org/jira/browse/JEXL-181</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems that inline maps can be created only if:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the keys are string literals or a numbers&lt;/li&gt;
	&lt;li&gt;the keys are variables&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The followings throw exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{ [&lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;2&apos;&lt;/span&gt;] : someValue }
{ myVar.callFunction() : someValue }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example stacktrace for expression: &lt;/p&gt;
{ &apos;step&apos;.toString() : [1, 2] }

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.jexl2.JexlException$Parsing: @1:21 parsing error near &lt;span class=&quot;code-quote&quot;&gt;&apos;... g() : [1,  ...&apos;&lt;/span&gt;
     at org.apache.commons.jexl2.JexlEngine.parse(JexlEngine.java:1260)
     at org.apache.commons.jexl2.JexlEngine.createScript(JexlEngine.java:506)
     at org.everit.expression.jexl.JexlExpressionCompiler.compile(JexlExpressionCompiler.java:63)
     at org.everit.templating.html.internal.HTMLNodeVisitor.compileExpression(HTMLNodeVisitor.java:174)
     at org.everit.templating.html.internal.HTMLNodeVisitor.processEhtAttribute(HTMLNodeVisitor.java:406)
     at org.everit.templating.html.internal.HTMLNodeVisitor.fillEhtTagNodeWithAttribute(HTMLNodeVisitor.java:190)
     at org.everit.templating.html.internal.HTMLNodeVisitor.handleEWTNode(HTMLNodeVisitor.java:270)
     at org.everit.templating.html.internal.HTMLNodeVisitor.visitTag(HTMLNodeVisitor.java:634)
     at org.htmlparser.nodes.TagNode.accept(TagNode.java:700)
     at org.everit.templating.html.HTMLTemplateCompiler.compile(HTMLTemplateCompiler.java:125)
     at biz.everit.therapy.portal.WebTemplateRenderer.&amp;lt;init&amp;gt;(WebTemplateRenderer.java:57)
     at biz.everit.therapy.series.demo.DemoSeriesServlet.&amp;lt;init&amp;gt;(DemoSeriesServlet.java:46)
     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
     at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:442)
     at org.everit.osgi.ecm.component.ri.internal.ComponentContextImpl.starting(ComponentContextImpl.java:760)
     at org.everit.osgi.ecm.component.ri.internal.ComponentContextImpl.open(ComponentContextImpl.java:564)
     at org.everit.osgi.ecm.component.ri.internal.ComponentContainerImpl.open(ComponentContainerImpl.java:110)
     at org.everit.osgi.ecm.extender.ri.internal.ECMCapabilityTracker.addingBundle(ECMCapabilityTracker.java:105)
     at org.everit.osgi.ecm.extender.ri.internal.ECMCapabilityTracker.addingBundle(ECMCapabilityTracker.java:44)
     at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:469)
     at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:1)
     at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
     at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)
     at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
     at org.eclipse.osgi.internal.framework.BundleContextImpl.dispatchEvent(BundleContextImpl.java:902)
     at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
     at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
     at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEventPrivileged(EquinoxEventPublisher.java:165)
     at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEvent(EquinoxEventPublisher.java:75)
     at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEvent(EquinoxEventPublisher.java:67)
     at org.eclipse.osgi.internal.framework.EquinoxContainerAdaptor.publishModuleEvent(EquinoxContainerAdaptor.java:102)
     at org.eclipse.osgi.container.Module.publishEvent(Module.java:466)
     at org.eclipse.osgi.container.Module.start(Module.java:457)
     at org.eclipse.osgi.internal.framework.EquinoxBundle.start(EquinoxBundle.java:392)
     at org.eclipse.osgi.internal.framework.EquinoxBundle.start(EquinoxBundle.java:411)
     at org.everit.osgi.dev.richconsole.internal.upgrade.UpgradeProcess.finish(UpgradeProcess.java:243)
     at org.everit.osgi.dev.richconsole.internal.upgrade.UpgradeServiceImpl.deployBundles(UpgradeServiceImpl.java:116)
     at org.everit.osgi.dev.richconsole.internal.BundleDeployerFrame$6$1.run(BundleDeployerFrame.java:242)
     at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.commons.jexl2.parser.ParseException: parse error
     at org.apache.commons.jexl2.parser.Parser.generateParseException(Parser.java:3935)
     at org.apache.commons.jexl2.parser.Parser.jj_consume_token(Parser.java:3817)
     at org.apache.commons.jexl2.parser.Parser.Block(Parser.java:200)
     at org.apache.commons.jexl2.parser.Parser.Statement(Parser.java:110)
     at org.apache.commons.jexl2.parser.Parser.JexlScript(Parser.java:72)
     at org.apache.commons.jexl2.parser.Parser.parse(Parser.java:24)
     at org.apache.commons.jexl2.JexlEngine.parse(JexlEngine.java:1248)
     ... 41 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12916482">JEXL-181</key>
            <summary>Cannot create inline Map with array or function call as the key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="balazs.zsoldos">Balazs Zsoldos</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Nov 2015 16:07:21 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:06 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 21:44:44 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15029264" author="henrib" created="Thu, 26 Nov 2015 21:44:44 +0000"  >&lt;p&gt;This is fixed in 3.0. The following test runs with no error.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testVariableMap() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlScript script = JEXL.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;{ [&lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;2&apos;&lt;/span&gt;.toString()] : someValue }&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;someValue&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = script.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 42);
        Assert.assertTrue(result &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Map);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Map.Entry&amp;lt;?,?&amp;gt; e : ((Map&amp;lt;?,?&amp;gt;) result).entrySet()) {
            key = e.getKey();
            value = e.getValue();
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
        }
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; gg = ((Map) result).get(key);
        Assert.assertEquals(42, ((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) gg).intValue());
        Assert.assertEquals(value, ((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) gg).intValue());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15204238" author="henrib" created="Mon, 21 Mar 2016 14:10:06 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ozgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-180] Documentation - suggests using float for financials</title>
                <link>https://issues.apache.org/jira/browse/JEXL-180</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The examples page:&lt;br/&gt;
&lt;a href=&quot;https://commons.apache.org/proper/commons-jexl/reference/examples.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-jexl/reference/examples.html&lt;/a&gt;&lt;br/&gt;
Uses a Float type to represent dollar amounts.  This is a bad idea--floating point values are not large enough to represent larger transactions and this could teach developers bad habits, especially in enterprise environments.&lt;/p&gt;

&lt;p&gt;At the least you should use the Double class in your example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875663">JEXL-180</key>
            <summary>Documentation - suggests using float for financials</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kr99">Kimball Robinson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 19:24:32 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:14 +0000</updated>
                            <resolved>Wed, 18 Nov 2015 11:10:02 +0000</resolved>
                                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14901202" author="michael-o" created="Mon, 21 Sep 2015 19:02:45 +0000"  >&lt;p&gt;Not even double as it suffers from floating point problem. See &lt;a href=&quot;http://stackoverflow.com/q/3730019/696632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/q/3730019/696632&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15010774" author="henrib" created="Wed, 18 Nov 2015 11:10:02 +0000"  >&lt;p&gt;Example now uses a Number.&lt;/p&gt;</comment>
                            <comment id="15010859" author="michael-o" created="Wed, 18 Nov 2015 12:09:40 +0000"  >&lt;p&gt;Henri, using &lt;tt&gt;BigDecimal&lt;/tt&gt; would be best practice with financials.&lt;/p&gt;</comment>
                            <comment id="15010879" author="henrib" created="Wed, 18 Nov 2015 12:16:38 +0000"  >&lt;p&gt;Michael, a BigDecimal is a Number and the example no longer gives a bad hint; it only supposes people know their field (like you).&lt;br/&gt;
If you feel like it, you can contribute better documentation and examples to the project.&lt;br/&gt;
The only caveat is that no-one feels like producing an official release so all this is anyway moot...&lt;/p&gt;</comment>
                            <comment id="15028825" author="dmitri_blinov" created="Thu, 26 Nov 2015 14:06:30 +0000"  >&lt;p&gt;Could you give a brief overview of what is needed to produce an official release?&lt;/p&gt;</comment>
                            <comment id="15029057" author="henrib" created="Thu, 26 Nov 2015 16:16:45 +0000"  >&lt;p&gt;Please use the mailing list for such questions. Procedure is at &lt;a href=&quot;https://commons.apache.org/releases/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/releases/&lt;/a&gt;&lt;/p&gt;
{prepare.html,release.html}
</comment>
                            <comment id="15204268" author="henrib" created="Mon, 21 Mar 2016 14:10:14 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kcsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-179] new() operator is broken</title>
                <link>https://issues.apache.org/jira/browse/JEXL-179</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;As an example, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.util.HashSet&quot;&lt;/span&gt;); x.add(1); x
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following script generates log output&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[DEBUG] EvaluationContext.evaluateScript: expr: x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.util.HashSet&quot;&lt;/span&gt;); x.add(1); x
[WARN ] org.apache.commons.jexl3.JexlEngine: EvaluationContext.evaluateScript@493 java.util.HashSet
[WARN ] org.apache.commons.jexl3.JexlEngine: EvaluationContext.evaluateScript@493![30,38]: &lt;span class=&quot;code-quote&quot;&gt;&apos;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(&apos;&lt;/span&gt;java.util.HashSet&apos;);
x.add(1);
x;
&apos; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; value variable x
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12860309">JEXL-179</key>
            <summary>new() operator is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 16:29:08 +0000</created>
                <updated>Sat, 29 Aug 2015 07:21:25 +0000</updated>
                            <resolved>Sat, 29 Aug 2015 07:21:25 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14720547" author="henrib" created="Fri, 28 Aug 2015 20:51:42 +0000"  >&lt;p&gt;There is something else causing the problem.&lt;br/&gt;
Besides test147b/test147c in Issues, the following code works:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test179() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().create();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashSet&apos;&lt;/span&gt;); x.add(1); x&quot;&lt;/span&gt;;
        JexlScript e = jexl.createScript(src);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = e.execute(jc);
        Assert.assertTrue(o &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Set);
        Assert.assertTrue(((Set) o).contains(1));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14721000" author="dmitri_blinov" created="Sat, 29 Aug 2015 07:21:25 +0000"  >&lt;p&gt;I apologize for false alarm, the problem was identified to be in overloaded Uberspect.getMethod where MethodExecutor returned from base class apparently didn&apos;t contain any method for constructor invocation resulting in NPE&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jjd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-172] Unexpected divide error for numerator which contains division in strict mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-172</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;It seems that evaluating expressions which contains nested divisions causes an exception to be thrown with cause &quot;divide error&quot;.&lt;/p&gt;

&lt;p&gt;The following expression is valid math and should return 100:&lt;/p&gt;

&lt;p&gt;1 / (1 / 100)&lt;/p&gt;

&lt;p&gt;Instead it throws:&lt;/p&gt;

&lt;p&gt;org.apache.commons.jexl2.JexlException: org.hisp.dhis.commons.util.ExpressionUtils.evaluate@81!&lt;span class=&quot;error&quot;&gt;&amp;#91;0,13&amp;#93;&lt;/span&gt;: &apos;1 / (1 / 100);&apos; divide error&lt;/p&gt;

&lt;p&gt;This only applies to strict mode. However it could be argued that this should pass even in strict mode.&lt;/p&gt;

&lt;p&gt;I could not find anything in the docs about this so please excuse me if I missed something.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Java 7 OpenJDK&lt;/p&gt;</environment>
        <key id="12851380">JEXL-172</key>
            <summary>Unexpected divide error for numerator which contains division in strict mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="larshelge">Lars Helge &#216;verland</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2015 12:22:56 +0000</created>
                <updated>Mon, 21 Mar 2016 14:17:31 +0000</updated>
                            <resolved>Wed, 5 Aug 2015 13:24:50 +0000</resolved>
                                    <version>2.1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14658204" author="henrib" created="Wed, 5 Aug 2015 13:24:50 +0000"  >&lt;p&gt;When all operands are integers, the operation is performed on integers without conversion. In this case (1 / 100) returns 0 and 1 / 0 throws an exception in strict mode.&lt;br/&gt;
The workaround is to use &apos;doubles&apos; in you expression like: (1 / (1.0 / 100))  &lt;br/&gt;
Or you can derive JexlArithmetic and overload (at least) the divide method.&lt;/p&gt;</comment>
                            <comment id="14658676" author="larshelge" created="Wed, 5 Aug 2015 18:50:37 +0000"  >&lt;p&gt;Right. Okay makes sense. Thanks.&lt;/p&gt;</comment>
                            <comment id="15204295" author="henrib" created="Mon, 21 Mar 2016 14:17:31 +0000"  >&lt;p&gt;Post 3.0 clean up&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ibaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-171] Map access operator does not work if key name clashes with map property name</title>
                <link>https://issues.apache.org/jira/browse/JEXL-171</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The following example returns &lt;b&gt;false&lt;/b&gt;, according to documentation should return &lt;b&gt;2&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;i = new (&quot;java.util.HashMap&quot;); i.a = 1; i&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;empty&amp;quot;&amp;#93;&lt;/span&gt; = 2; i&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;empty&amp;quot;&amp;#93;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12849852">JEXL-171</key>
            <summary>Map access operator does not work if key name clashes with map property name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2015 06:13:29 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:07 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 20:19:49 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14647938" author="henrib" created="Thu, 30 Jul 2015 17:00:08 +0000"  >
&lt;p&gt;Made property executors discovery customizable, use different strategies when solving &apos;.&apos; (POJO) and &apos;[]&apos; (Map); added specific test.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlOperator.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/IntegerRange.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/LongRange.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/DuckSetExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/SandboxUberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/introspection/JexlUberspect.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
Committed revision 1693456.&lt;/p&gt;</comment>
                            <comment id="14648765" author="dmitri_blinov" created="Fri, 31 Jul 2015 05:18:55 +0000"  >&lt;p&gt;Great, can we have also an annotation for this to be able to specify property resolution order for a particular class ?&lt;/p&gt;

&lt;p&gt;Something like this...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@JexlProperty({JexlUberspect.ResolverType.MAP, JexlUberspect.ResolverType.LIST})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14648816" author="dmitri_blinov" created="Fri, 31 Jul 2015 06:37:20 +0000"  >&lt;p&gt;Oops, I have just bumped into a problem when accessing a Map property via &apos;.&apos; still returns a property of the object implementing a Map and not a key-value from Map. I&apos;m using custom Uberspect implementation which overrides the default one with the follwing code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;ResolverType&amp;gt; resolvingOrder = Arrays.asList(
        JexlUberspect.ResolverType.MAP, 
        JexlUberspect.ResolverType.LIST, 
        JexlUberspect.ResolverType.CONTAINER,
        JexlUberspect.ResolverType.PROPERTY, 
        JexlUberspect.ResolverType.DUCK);
   }

   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlPropertyGet getPropertyGet(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier) {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPropertyGet(resolvingOrder, obj, identifier);
   }

   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlPropertySet getPropertySet(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; arg) {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPropertySet(resolvingOrder, obj, identifier, arg);
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but that code just seems not to be used. After peeping into Interpeter.java I have found that indeed the strategy for accessing methods is not taken from Uberspect but is constructed on the fly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        List&amp;lt;JexlUberspect.ResolverType&amp;gt; strategy = (node == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || !(node.jjtGetParent()&lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ASTArrayAccess) ? JexlUberspect.POJO : JexlUberspect.MAP;
        JexlPropertyGet vg = uberspect.getPropertyGet(strategy, object, attribute);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it&apos;s a bad idea to break a rule of thumb that &lt;b&gt;a.b&lt;/b&gt; should be equal to &lt;b&gt;a[&quot;b&quot;]&lt;/b&gt;. If one wants to change the order for property resolution globally the custom Uberspect implementation is right and sufficient way to do so, and combined with annotations for particular objects we can provide virtually any desired flexibility&lt;/p&gt;</comment>
                            <comment id="14648901" author="henrib" created="Fri, 31 Jul 2015 08:03:51 +0000"  >&lt;p&gt;Need to revisit resolving strategy customization.&lt;br/&gt;
Per-class strategy ?&lt;br/&gt;
Annotations and/or configuration ?&lt;br/&gt;
Should we differentiate &apos;.&apos; and &apos;[]&apos;? &lt;/p&gt;</comment>
                            <comment id="14648938" author="dmitri_blinov" created="Fri, 31 Jul 2015 08:43:20 +0000"  >&lt;p&gt;Should we also consider adding some type of custom property resolvers ?&lt;/p&gt;

&lt;p&gt;For example I have j.u.Date and I want give users the ablity to address specific parts of date with date.yyyy of even apply formatting like date&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;yyyy-MM-dd&amp;quot;&amp;#93;&lt;/span&gt;. For now the only way for this was a wrapper class with a Map interface, but it has complications of introducing a new type to framework and checking/coercing here and there. So If I could just add a custom property resolver for a j.u.Date class...&lt;/p&gt;</comment>
                            <comment id="14649267" author="henrib" created="Fri, 31 Jul 2015 14:13:37 +0000"  >
&lt;p&gt;JexlUberspect gained a new method: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Gets the strategy to apply &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; resolving properties.
     * &amp;lt;p&amp;gt;Default behavior is to use POJO &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; db is &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, MAP &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; db is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
     * @param db access &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; flag, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; dot (&lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt; ) or &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; bracket (&lt;span class=&quot;code-quote&quot;&gt;&apos;[]&apos;&lt;/span&gt;)
     * @param clazz the property owner class
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the strategy
     */
List&amp;lt;ResolverType&amp;gt; getStrategy(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; db, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; clazz);
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is called by the interpreter before calls to getPropertyGet/getPropertySet.&lt;br/&gt;
This allows per-class choice of strategy (by derivation/implementation, use clazz to lookup desired strategy) and also allows to differentiate between &apos;.&apos; and &apos;[ ... ]&apos;.&lt;br/&gt;
For instance, if we want maps to always behave like maps, one could implement a JexlUberspect with the following override:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;ResolverType&amp;gt; getStrategy(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; db, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; clazz) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Map.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;isAssignableFrom(clazz)? JexlUberspect.MAP : JexlUberspect.POJO;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Operators.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/SandboxUberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/introspection/JexlUberspect.java&lt;/p&gt;

&lt;p&gt;Committed revision 1693604.&lt;/p&gt;</comment>
                            <comment id="14649307" author="dmitri_blinov" created="Fri, 31 Jul 2015 15:04:20 +0000"  >&lt;p&gt;I wonder why the following two methods in Uberspect.java are hardcoded to POJO and do not use new getStrategy() method?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlPropertyGet getPropertyGet(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPropertyGet(POJO, obj, identifier);
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JexlPropertySet getPropertySet(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; arg) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPropertySet(POJO, obj, identifier, arg);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should I override them also with getStrategy() ?&lt;/p&gt;</comment>
                            <comment id="14649468" author="henrib" created="Fri, 31 Jul 2015 16:55:05 +0000"  >&lt;p&gt;They hardcode the previous/default behavior.&lt;br/&gt;
You should override them if you need to call these methods directly.&lt;br/&gt;
The script &amp;amp; template engines won&apos;t call them.&lt;/p&gt;

&lt;p&gt;I&apos;m not really satisfied with this current solution though...&lt;/p&gt;</comment>
                            <comment id="14650376" author="henrib" created="Sat, 1 Aug 2015 15:02:38 +0000"  >&lt;p&gt;A cleaner solution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Reified the resolver strategy in JexlUberspect.ResolverStrategy.&lt;/li&gt;
	&lt;li&gt;Made strategy member of Uberspect, filled at creation time; added option to pass it down.&lt;br/&gt;
This allows implementing and using strategy without having to derive the Uberspect.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Using the &apos;map&apos; strategy is now as simple as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().strategy(JexlUberspect.MAP_STRATEGY).create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlBuilder.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/Uberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/introspection/JexlUberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/introspection/SandboxUberspect.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Engine.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/StrategyTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/internal/introspection/DiscoveryTest.java&lt;/p&gt;

&lt;p&gt;Revision: 1693711&lt;/p&gt;

&lt;p&gt;// not strictly related (nitpicking on javadoc, moving testes around, etc):&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Debugger.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/IntegerRange.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/LongRange.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticTest.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/IssuesTest.java&lt;/p&gt;</comment>
                            <comment id="14651487" author="dmitri_blinov" created="Mon, 3 Aug 2015 06:21:25 +0000"  >&lt;p&gt;Any thoughts about custom property resolvers yet?&lt;/p&gt;</comment>
                            <comment id="14651504" author="henrib" created="Mon, 3 Aug 2015 06:45:57 +0000"  >&lt;p&gt;No thoughts (besides hacking/deriving Uberspect);&lt;br/&gt;
If you have a use case not covered by the current resolvers, you may want to create a new ticket.&lt;/p&gt;</comment>
                            <comment id="14709555" author="henrib" created="Mon, 24 Aug 2015 16:22:44 +0000"  >&lt;p&gt;Solution is too complex and does not provide a base for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-174&quot; title=&quot;Overloadable property access operators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-174&quot;&gt;&lt;del&gt;JEXL-174&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Furthermore, it (still) does not cleanly covers cases where &apos;.&apos; and &apos;[]&apos; operators may/could/do have different behaviors; for maps in this particular bug case, the &apos;.&apos; operator should attempt finding properties before using the get/put methods and the &apos;[]&apos; operator should always use the get/put methods.&lt;br/&gt;
This would require adding 2 methods to JexlUberspect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JexlPropertyGet getArrayGet(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier);
JexlPropertySet getArraySet(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; identifier, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; arg);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14717445" author="henrib" created="Thu, 27 Aug 2015 20:19:49 +0000"  >&lt;p&gt;Reverted to a solution where the strategy is applied to seek an ordered list of PropertyResolver (new interface) allowing customization.&lt;br/&gt;
The strategy apply method uses an operator - and an object - as argument; it means a strategy could behave in 4 different ways (set+get * array+property operators) for one class...&lt;/p&gt;</comment>
                            <comment id="15204243" author="henrib" created="Mon, 21 Mar 2016 14:10:07 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i227:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-169] A string is wrongly identified as FloatingPointNumber</title>
                <link>https://issues.apache.org/jira/browse/JEXL-169</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When concatenating two strings with one containing an &apos;e&apos; character, an ArithmeticException is thrown.&lt;/p&gt;

&lt;p&gt;The problem lies in the JexlArithmetic.isFloatingPointNumber() method in line 200.&lt;/p&gt;

&lt;p&gt;return ((string.indexOf(46) != -1) || (string.indexOf(101) != -1) || (string.indexOf(69) != -1));&lt;/p&gt;

&lt;p&gt;With this solution also the String &quot;New York&quot; or &quot;hello.world&quot; are floating point numbers. A solution with a regular expression would be better&lt;/p&gt;</description>
                <environment></environment>
        <key id="12848912">JEXL-169</key>
            <summary>A string is wrongly identified as FloatingPointNumber</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="rnesselrath">Robert Ne&#223;elrath</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2015 14:44:52 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:08 +0000</updated>
                            <resolved>Sat, 25 Jul 2015 16:09:06 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14641565" author="henrib" created="Sat, 25 Jul 2015 12:10:36 +0000"  >&lt;p&gt;JexlArithmetic.isFloatingPointNumber() will use the following regexp:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * The &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; regular expression pattern.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Pattern FLOAT_PATTERN = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;^[+-]?\\d*(\\.\\d*)?([eE]?[+-]?\\d*)?$&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14641710" author="henrib" created="Sat, 25 Jul 2015 16:09:06 +0000"  >&lt;p&gt;JexlArithmetic.isFloatingPointNumber(...)  now checks much more precisely whether a string is amenable to float coercion.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlArithmetic.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticTest.java&lt;br/&gt;
src/site/xdoc/changes.xml&lt;/p&gt;

&lt;p&gt;Committed revision 1692633.&lt;/p&gt;</comment>
                            <comment id="15204244" author="henrib" created="Mon, 21 Mar 2016 14:10:08 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hwdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-167] Possible loss of value when converting BigDecimal to BigInteger</title>
                <link>https://issues.apache.org/jira/browse/JEXL-167</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In JexlArithmetic.java method &lt;b&gt;public BigInteger toBigInteger(Object val)&lt;/b&gt; uses the following case for BigDecimals as for any other numbers:&lt;br/&gt;
...&lt;br/&gt;
 else if (val instanceof Number) {&lt;br/&gt;
            return BigInteger.valueOf(((Number) val).longValue());&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;For large BigDecimals &amp;gt; Long.MAX_VALUE it may lead to loss of value. Please consider using BigDecimal.toBigInteger() method for that case?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12848799">JEXL-167</key>
            <summary>Possible loss of value when converting BigDecimal to BigInteger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2015 05:40:07 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:11 +0000</updated>
                            <resolved>Fri, 24 Jul 2015 06:18:22 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14639992" author="henrib" created="Fri, 24 Jul 2015 06:18:22 +0000"  >&lt;p&gt;Use BigDecimal.toBigInteger(...) to coerce big decimal to big integer&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/JexlArithmetic.java&lt;br/&gt;
Committed revision 1692459.&lt;/p&gt;</comment>
                            <comment id="15204256" author="henrib" created="Mon, 21 Mar 2016 14:10:11 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hvon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-166] Incorrect operator symbol for bitwise complement in jexlArithmetic</title>
                <link>https://issues.apache.org/jira/browse/JEXL-166</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In JexlArithmetic operator is defined as&lt;br/&gt;
        COMPLEMENT(&quot;-&quot;, &quot;bitwiseComplement&quot;, 1),&lt;br/&gt;
should be as&lt;br/&gt;
        COMPLEMENT(&quot;~&quot;, &quot;bitwiseComplement&quot;, 1),&lt;/p&gt;</description>
                <environment></environment>
        <key id="12846210">JEXL-166</key>
            <summary>Incorrect operator symbol for bitwise complement in jexlArithmetic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2015 07:15:10 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:11 +0000</updated>
                            <resolved>Thu, 23 Jul 2015 15:35:54 +0000</resolved>
                                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14639009" author="henrib" created="Thu, 23 Jul 2015 15:35:54 +0000"  >&lt;p&gt;Committed revision 1692406&lt;/p&gt;</comment>
                            <comment id="15204259" author="henrib" created="Mon, 21 Mar 2016 14:10:11 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hfvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-163] empty(new (&quot;java.lang.Long&quot;, 4294967296)) returns true</title>
                <link>https://issues.apache.org/jira/browse/JEXL-163</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;should return false&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844414">JEXL-163</key>
            <summary>empty(new (&quot;java.lang.Long&quot;, 4294967296)) returns true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Jul 2015 08:06:24 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:13 +0000</updated>
                            <resolved>Sun, 12 Jul 2015 20:48:48 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14624002" author="henrib" created="Sun, 12 Jul 2015 20:48:48 +0000"  >&lt;p&gt;Check for double 0.0d instead of long 0L for numbers in empty(), updated parser to do a better job at parsing doubles, added test, updated changes.xml&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/Parser.jjt&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1690529.&lt;/p&gt;</comment>
                            <comment id="15204265" author="henrib" created="Mon, 21 Mar 2016 14:10:13 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h57z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-162] empty() function throws an exception : unsupported type</title>
                <link>https://issues.apache.org/jira/browse/JEXL-162</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;empty() : unsupported type : class com.sun.org.apache.xerces.internal.dom.ElementImpl.&lt;/p&gt;

&lt;p&gt;Exepected behaviour - just return false if neither:&lt;/p&gt;

&lt;p&gt;    Object is null&lt;br/&gt;
    Object is an empty string&lt;br/&gt;
    Object is an array of length zero&lt;br/&gt;
    Object is a collection of size zero&lt;br/&gt;
    Object is an empty map&lt;br/&gt;
.....&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844266">JEXL-162</key>
            <summary>empty() function throws an exception : unsupported type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jul 2015 19:31:07 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:13 +0000</updated>
                            <resolved>Sat, 11 Jul 2015 20:52:52 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14623341" author="henrib" created="Sat, 11 Jul 2015 10:31:58 +0000"  >&lt;p&gt;The documented behavior is not what you expect.&lt;br/&gt;
It actually states : Returns &lt;b&gt;true&lt;/b&gt; if the expression following is either...&lt;br/&gt;
The rationale is that &apos;emptiness&apos; must have a meaning for the object considered, a callable method implementation.&lt;br/&gt;
I agree though that a &lt;em&gt;lenient&lt;/em&gt; arithmetic should return &apos;false&apos; (and &apos;size&apos; should return 0) rather than generate an error.&lt;/p&gt;

&lt;p&gt;You can implement your behavior by subclassing JexlArithmetic and overload the &apos;empty&apos; method as in the following where an &apos;empty&apos; node is a node without attributes nor children.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;XmlArithmetic &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; XmlArithmetic(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; lenient) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(lenient);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; empty(org.w3c.dom.Element elt) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; !elt.hasAttributes() &amp;amp;&amp;amp; !elt.hasChildNodes();
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test162() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlBuilder().arithmetic(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XmlArithmetic(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)).create();
        JexlScript s0 = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;empty(x)&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;);
        Document xml;
        Node x;
        &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; r;
        xml = getDocument(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;node info=&lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt;/&amp;gt;&quot;&lt;/span&gt;);
        x = xml.getLastChild();
        r = (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;) s0.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, x);
        Assert.assertFalse(r);
        xml = getDocument(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;node&amp;gt;some content&amp;lt;/node&amp;gt;&quot;&lt;/span&gt;);
        x = xml.getLastChild();
        r = (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;) s0.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, x);
        Assert.assertFalse(r);
        xml = getDocument(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;node/&amp;gt;&quot;&lt;/span&gt;);
        x = xml.getLastChild();
        r = (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;) s0.execute(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, x);
        Assert.assertTrue(r);
    }
        
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Document getDocument(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; xml) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, SAXException, ParserConfigurationException {
        DocumentBuilder xmlBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        InputStream stringInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(xml.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; xmlBuilder.parse(stringInputStream);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14623401" author="dmitri_blinov" created="Sat, 11 Jul 2015 13:49:03 +0000"  >&lt;p&gt;You are right that JEXL documentation does not clearly state that empty() operator will ever return &lt;b&gt;false&lt;/b&gt;, but from experience with EL, in which spec clearly defines &quot;otherwise return false&quot;, and from behaviour of JEXL 2.1, I was kind of expecting this behaviour. I understand your point about &apos;emptiness&apos; which must have special meaning for objects like maps and collections etc, but in EL and JEXL we are get used to little nifty things like type coercions, so for me personally it&apos;s not obvious why in that case we must be so strict.&lt;/p&gt;

&lt;p&gt;And you are right, I&apos;m getting this exception in lenient mode, which I hope will be fixed.&lt;/p&gt;

&lt;p&gt;And thanks for suggesting how to implement empty() for XML nodes, I&apos;ll definitly play with it.&lt;/p&gt;</comment>
                            <comment id="14623572" author="henrib" created="Sat, 11 Jul 2015 20:52:52 +0000"  >&lt;p&gt;Point taken; the empty/size operators are back to being lenient.&lt;br/&gt;
Overloads may throw exceptions that will be handled specifically. &lt;/p&gt;

&lt;p&gt;Added specific exception/method for operator error handling, updated behavior to be as lenient as 2.x, added test, clarified doc and updated changes.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl3/JexlException.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/internal/Interpreter.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/Parser.jjt&lt;br/&gt;
src/site/xdoc/changes.xml&lt;br/&gt;
src/site/xdoc/reference/syntax.xml&lt;br/&gt;
src/test/java/org/apache/commons/jexl3/ArithmeticTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1690404.&lt;/p&gt;</comment>
                            <comment id="15204264" author="henrib" created="Mon, 21 Mar 2016 14:10:13 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h4bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-161] Assignment to Indexed property is broken in 3.0</title>
                <link>https://issues.apache.org/jira/browse/JEXL-161</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;In JEXL 2.1.1 the assignment of XML attribute to org.w3c.dom.Element via setAttribute(java.lang.String name, java.lang.String value) method worked as suggested - indexed property was resolvable and assignable. In JEXL 3.0 this is broken - unsolvable property &apos;....&apos; &lt;/p&gt;

&lt;p&gt;By peeping to Uberspect.java I noticed that the following method &lt;/p&gt;

&lt;p&gt;public JexlPropertySet getPropertySet(final Object obj, final Object identifier, Object arg) &lt;/p&gt;

&lt;p&gt;does not contain any references to IndexedType class to resolve indexed property when assigning. As it works correctly in 2.1 I do not see any reason for this to be as by design, so I classify this as a bug.&lt;/p&gt;

&lt;p&gt;The example of JEXL script, sorry I haven&apos;t figure out how to provide full test case here:&lt;/p&gt;

&lt;p&gt;x = xml:child(doc, &apos;ConfigSet&apos;); x.attribute.ConfigSetNo = &apos;123&apos;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12843809">JEXL-161</key>
            <summary>Assignment to Indexed property is broken in 3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2015 09:25:28 +0000</created>
                <updated>Fri, 10 Jul 2015 19:14:40 +0000</updated>
                            <resolved>Fri, 10 Jul 2015 19:14:40 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14622312" author="henrib" created="Fri, 10 Jul 2015 13:48:07 +0000"  >&lt;p&gt;Without a test case from you, it is very difficult to determine if there is an issue and what it is.&lt;br/&gt;
The following code does behave correctly in 2.0 and 3.0 (besides renaming  - JexlScript vs Script, JexlEngine vs Engine).&lt;br/&gt;
Can you try to describe your issue better - without assumption on the &apos;why&apos; but just the &apos;what&apos; ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Document getDocument(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; xml) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, SAXException, ParserConfigurationException {
        DocumentBuilder xmlBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        InputStream stringInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(xml.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; xmlBuilder.parse(stringInputStream);
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test161() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();

        Document xml = getDocument(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;node info=&lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt;/&amp;gt;&quot;&lt;/span&gt;);
        NamedNodeMap nnm = xml.getLastChild().getAttributes();
        Attr info = (Attr) nnm.getNamedItem(&lt;span class=&quot;code-quote&quot;&gt;&quot;info&quot;&lt;/span&gt;);
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;123&quot;&lt;/span&gt;, info.getValue());

        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, xml.getLastChild());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; y = &lt;span class=&quot;code-quote&quot;&gt;&quot;456&quot;&lt;/span&gt;;
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;, y);
        JexlScript s = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;x.attribute.info = y&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; r = s.execute(jc);
        nnm = xml.getLastChild().getAttributes();
        info = (Attr) nnm.getNamedItem(&lt;span class=&quot;code-quote&quot;&gt;&quot;info&quot;&lt;/span&gt;);
        Assert.assertEquals(y, r);
        Assert.assertEquals(y, info.getValue());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14622784" author="dmitri_blinov" created="Fri, 10 Jul 2015 19:14:40 +0000"  >&lt;p&gt;Sorry the problem is not related to this. Everything works as expected&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h1jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-159] Difference in handling between Jexl expression evaluation and LazyDynaMap</title>
                <link>https://issues.apache.org/jira/browse/JEXL-159</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>
&lt;p&gt;LazyDynaMap seems to support a full stop in the attribute name, but the Jexl expression evaluation expects this to signify a nested object.&lt;br/&gt;
The second test below fails, even though the first assertion is correct. Please can you take a look?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JexlTest {

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testUnderscoreInName() {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jexlExp = &lt;span class=&quot;code-quote&quot;&gt;&quot;(x.length_mm * x.width)&quot;&lt;/span&gt;;
        Expression e = jexl.createExpression( jexlExp );
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();

        LazyDynaMap object = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LazyDynaMap();
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;length_mm&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10.0&quot;&lt;/span&gt;); 
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;width&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5.0&quot;&lt;/span&gt;);

        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, object );

	    assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;)e.evaluate(jc)).doubleValue(), 50d, 0d);
   }

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFullStopInName() {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jexlExp = &lt;span class=&quot;code-quote&quot;&gt;&quot;(x.length.mm * x.width)&quot;&lt;/span&gt;;
        Expression e = jexl.createExpression( jexlExp );
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();

        LazyDynaMap object = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LazyDynaMap();
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;length.mm&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10.0&quot;&lt;/span&gt;); 
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;width&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5.0&quot;&lt;/span&gt;);
        
        assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, object.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;length.mm&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;10.0&quot;&lt;/span&gt;);

        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, object );

	    assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;)e.evaluate(jc)).doubleValue(), 50d, 0d);
	}
	
	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFullStopInNameMakingSubObject() {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jexlExp = &lt;span class=&quot;code-quote&quot;&gt;&quot;(x.length.mm * x.width)&quot;&lt;/span&gt;;
        Expression e = jexl.createExpression( jexlExp );
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();

        LazyDynaMap object = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LazyDynaMap();
        LazyDynaMap subObject = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LazyDynaMap();
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;length&quot;&lt;/span&gt;, subObject);
        subObject.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;mm&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10.0&quot;&lt;/span&gt;);
        object.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;width&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5.0&quot;&lt;/span&gt;);
        
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;, object );

	    assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;)e.evaluate(jc)).doubleValue(), 50d, 0d);
	}

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12840804">JEXL-159</key>
            <summary>Difference in handling between Jexl expression evaluation and LazyDynaMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Rexzz">Mike Day</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2015 11:15:37 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:17 +0000</updated>
                            <resolved>Fri, 26 Jun 2015 12:16:07 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14602791" author="henrib" created="Fri, 26 Jun 2015 12:16:07 +0000"  >&lt;p&gt;JEXL behaves as intended on this occasion (on 2.0 and 3.0).&lt;/p&gt;

&lt;p&gt;When solving doted variable expressions, there are 2 cases: the &apos;fully nested&apos; case and the &apos;antish&apos; case.&lt;br/&gt;
Using &quot;x.y.z&quot; as an expression:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fully nested means that at each step a non-null object or property can be accessed; &apos;x&apos; must be a variable (defined in the context or as an argument or as a local variable) pointing to an instance having a &apos;y&apos; property that contains an instance with a &apos;z&apos; property. Note that such an expression is equivalent to &quot;x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;y&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;z&amp;#39;&amp;#93;&lt;/span&gt;&quot;.&lt;/li&gt;
	&lt;li&gt;Antish variable means a fully qualified name &apos;x.y.z&apos;; there is a variable in the context where &apos;x.y.z&apos; - the full path -  is a key in the context map.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When JEXL can solve the top-level (aka the &apos;x&apos; in our example), it stops considering antish variables as a possibility. This (still) seems like the sane thing to do to avoid confusing a property expression and an antish variable. &lt;/p&gt;

&lt;p&gt;In 3.0, com.nellarmonia.jexl.internal.Interpreter.visit(ASTReference node, Object data) could be modified (or the interpreter derived) to try to implement a different behavior...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gjb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-158] Handle locale decimal separators correctly</title>
                <link>https://issues.apache.org/jira/browse/JEXL-158</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;running ArithmeticTest in a German environment, the methods testBigLiteralValue and testBigLiterals fail.&lt;/p&gt;

&lt;p&gt;testBigLiteralValue&apos;s Exception:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: check parse failed: 9223372036854775806,5b /******** */ 9223372036854775806.5B&lt;br/&gt;
	at org.apache.commons.jexl3.internal.Util.debuggerCheck(Util.java:72)&lt;br/&gt;
	at org.apache.commons.jexl3.JexlTestCase.debuggerCheck(JexlTestCase.java:71)&lt;br/&gt;
	at org.apache.commons.jexl3.JexlTestCase.tearDown(JexlTestCase.java:57)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: org.apache.commons.jexl3.JexlException$Parsing: sun.reflect.NativeMethodAccessorImpl.invoke0@1:20 parsing error in &apos;,&apos;&lt;br/&gt;
	... 25 more&lt;/p&gt;


&lt;p&gt;testBigLiterals&apos; Exception:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: check parse failed: {&lt;br/&gt;
    a = 10h;&lt;br/&gt;
    b = 10h;&lt;br/&gt;
    c = 42,0b;&lt;br/&gt;
    d = 42,0b;&lt;br/&gt;
} /******** */ &lt;/p&gt;
{a = 10H; b = 10h; c = 42.0B; d = 42.0b;}
&lt;p&gt;	at org.apache.commons.jexl3.internal.Util.debuggerCheck(Util.java:72)&lt;br/&gt;
	at org.apache.commons.jexl3.JexlTestCase.debuggerCheck(JexlTestCase.java:71)&lt;br/&gt;
	at org.apache.commons.jexl3.JexlTestCase.tearDown(JexlTestCase.java:57)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: org.apache.commons.jexl3.JexlException$Parsing: sun.reflect.NativeMethodAccessorImpl.invoke0@4:11 parsing error in &apos;,&apos;&lt;br/&gt;
	... 25 more&lt;/p&gt;

&lt;p&gt;If I change system&apos;s language to English, everything is fine.&lt;/p&gt;

&lt;p&gt;In Germany we use &apos;,&apos; as decimal separator!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian Jessie 8.1 64 Bit &lt;br/&gt;
Maven 3.0.5-3 &lt;br/&gt;
OpenJDK 7u79-2.5.5-1~deb8u1 &lt;br/&gt;
German language&lt;/p&gt;</environment>
        <key id="12840776">JEXL-158</key>
            <summary>Handle locale decimal separators correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zwiebelchen">Lars Cebulla</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2015 09:19:12 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:17 +0000</updated>
                            <resolved>Fri, 26 Jun 2015 11:27:19 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14602721" author="henrib" created="Fri, 26 Jun 2015 11:27:19 +0000"  >&lt;p&gt;src/main/java/org/apache/commons/jexl3/parser/ASTNumberLiteral.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl3/parser/NumberParser.java&lt;/p&gt;

&lt;p&gt;Committed revision 1687760.&lt;/p&gt;

&lt;p&gt;JEXL:&lt;br/&gt;
Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-158&quot; title=&quot;Handle locale decimal separators correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-158&quot;&gt;&lt;del&gt;JEXL-158&lt;/del&gt;&lt;/a&gt;, using EN locale based format when stringifying a big decimal&lt;/p&gt;</comment>
                            <comment id="15204279" author="henrib" created="Mon, 21 Mar 2016 14:10:17 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gj4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-157] Replace File.pathSeparator with File.separator</title>
                <link>https://issues.apache.org/jira/browse/JEXL-157</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I got errors when I try to compile / test JEXL because ClassCreatorTest fails.&lt;br/&gt;
At line 51, it uses &quot;File.pathSeparator&quot;, which is wrong. It has to be just &quot;File.separator&quot;.&lt;/p&gt;

&lt;p&gt;Thanks in advance!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian Jessie 8.1 64 Bit&lt;br/&gt;
Maven 3.0.5-3&lt;br/&gt;
OpenJDK 7u79-2.5.5-1~deb8u1&lt;br/&gt;
German language&lt;/p&gt;</environment>
        <key id="12840567">JEXL-157</key>
            <summary>Replace File.pathSeparator with File.separator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="zwiebelchen">Lars Cebulla</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2015 15:10:32 +0000</created>
                <updated>Sat, 5 Jun 2021 10:55:07 +0000</updated>
                            <resolved>Sat, 5 Jun 2021 10:55:00 +0000</resolved>
                                    <version>2.1.1</version>
                    <version>3.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14602667" author="henrib" created="Fri, 26 Jun 2015 10:26:25 +0000"  >&lt;p&gt;Baffled by why it wasn&apos;t spotted before; thanks for reporting the issue.&lt;br/&gt;
Done. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14608065" author="sebb@apache.org" created="Tue, 30 Jun 2015 10:07:12 +0000"  >&lt;p&gt;Jexl3:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1688417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1688417&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-157&quot; title=&quot;Replace File.pathSeparator with File.separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-157&quot;&gt;&lt;del&gt;JEXL-157&lt;/del&gt;&lt;/a&gt; Replace File.pathSeparator with File.separator&lt;br/&gt;
Alternate fix - use File(parent,child) ctor&lt;/p&gt;

&lt;p&gt;Jexl2:&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/r1688418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1688418&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-157&quot; title=&quot;Replace File.pathSeparator with File.separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-157&quot;&gt;&lt;del&gt;JEXL-157&lt;/del&gt;&lt;/a&gt; Replace File.pathSeparator with File.separator&lt;br/&gt;
Alternate fix - use File(parent,child) ctor&lt;/p&gt;</comment>
                            <comment id="14608077" author="sebb@apache.org" created="Tue, 30 Jun 2015 10:18:54 +0000"  >&lt;p&gt;Note: it was probably not spotted because System.getProperty(&quot;java.io.tmpdir&quot;) returns a string ending with &quot;/&quot;  - i.e. the separator char - (at least on my system) and pathSeparator (:) is valid as a leading filename character on many systems.&lt;/p&gt;

&lt;p&gt;I think it&apos;s safer to use the appropriate File class ctor rather than making assumptions about how OS file path names are constructed.&lt;/p&gt;</comment>
                            <comment id="15204255" author="henrib" created="Mon, 21 Mar 2016 14:10:10 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ghvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-156] BigDecimal does not take precedence in arithmetic operations</title>
                <link>https://issues.apache.org/jira/browse/JEXL-156</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;According to javadoc on org.apache.commons.jexl2.JexlArithmetic for arithmetic operations when either operand is BigDecimal both are coerced to BigDecimal to perform operation.&lt;br/&gt;
During formula evaluation however operation is calculated on BigDecimals only if both operands are BigDecimal. If one of them is float(double) calculations are done on Double.&lt;br/&gt;
Example:&lt;br/&gt;
Given method&lt;br/&gt;
Object evaluate(String formula) {&lt;br/&gt;
return new JexlEngine().createExpression().evaluate(new MapContext()) ;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;evaluate(&quot;463.0B * 0.1&quot;) returns 46.300000000000004 of type java.lang.Double&lt;br/&gt;
while&lt;br/&gt;
evaluate(&quot;463.0B * 0.1B&quot;) returns 46.30 of type java.math.BigDecimal&lt;/p&gt;

&lt;p&gt;From my perspective this is a bug as operation is performed on type with less precise result causing as in above example floating point representation error for quite trivial calculation.&lt;/p&gt;

&lt;p&gt;While reporting this bug I also noticed similar downgrade for operations on BigDecimal and integral values :&lt;br/&gt;
evaluate(&quot;463.0B * 1&quot;) returns java.lang.Integer&lt;br/&gt;
evaluate(&quot;463.0B * 1L&quot;) returns java.lang.Long&lt;br/&gt;
while&lt;br/&gt;
evaluate(&quot;463.0 * 1&quot;) returns java.lang.Double&lt;br/&gt;
evaluate(&quot;463.0 * 1L&quot;) returns java.lang.Double&lt;br/&gt;
Fortunately for results that cannot be expressed as integral value BigDecimal is returned so precision of calculations is not lost.&lt;/p&gt;

&lt;p&gt;From what I have seen in sources this issue should not occur in JEXL3 however it is not yet released.&lt;br/&gt;
I&apos;m willing to contribute a patch for that If this would result in release of JEXL2 with a fix in the near future. Would that be possible?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838746">JEXL-156</key>
            <summary>BigDecimal does not take precedence in arithmetic operations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="waldemar.horbowicz">Waldemar Horbowicz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 10:25:04 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:18 +0000</updated>
                            <resolved>Thu, 23 Jul 2015 15:49:58 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14591733" author="henrib" created="Thu, 18 Jun 2015 12:52:42 +0000"  >&lt;p&gt;Thanks for the issue; you are correct, this does not occur on 3.0 trunk.&lt;br/&gt;
I verified using the following test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test156() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; ra = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;463.0d * 0.1&quot;&lt;/span&gt;).evaluate(jc);
        Assert.assertEquals(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.class, ra.getClass());
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; r0 = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;463.0B * 0.1&quot;&lt;/span&gt;).evaluate(jc);
        Assert.assertEquals(java.math.BigDecimal.class, r0.getClass());
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; r1 = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;463.0B * 0.1B&quot;&lt;/span&gt;).evaluate(jc);
        Assert.assertEquals(java.math.BigDecimal.class, r1.getClass());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;About a patch, last I checked - &amp;lt; 2 months ago -, no Apache member seemed interested in releasing JEXL.&lt;br/&gt;
As a side note, despite being un-released, the 3.0 trunk has been field-tested for sometime (if you can use it).&lt;/p&gt;</comment>
                            <comment id="14639040" author="henrib" created="Thu, 23 Jul 2015 15:49:58 +0000"  >&lt;p&gt;Not a problem in 3.0 and no 2.x is likely to be ever produced.&lt;/p&gt;</comment>
                            <comment id="15204283" author="henrib" created="Mon, 21 Mar 2016 14:10:18 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g78v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-155] Variable names / values not looked up correctly</title>
                <link>https://issues.apache.org/jira/browse/JEXL-155</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;take a look at this example:&lt;/p&gt;

&lt;p&gt;JexlEngine jexlEngine = new JexlEngine();&lt;br/&gt;
Expression jexlExpresssion = jexlEngine.createExpression(&quot;first.second.name&quot;);&lt;br/&gt;
HashMap map = new HashMap();&lt;br/&gt;
map.put(&quot;first.second.name&quot;, &quot;RIGHT&quot;);&lt;br/&gt;
map.put(&quot;name&quot;, &quot;WRONG&quot;);&lt;br/&gt;
MapContext context = new MapContext(map);&lt;br/&gt;
Object value = jexlExpresssion.evaluate(context);&lt;br/&gt;
System.err.println(&quot;Value:&quot; + value);&lt;/p&gt;

&lt;p&gt;I would expect getting &quot;Value:RIGHT&quot; printed out but it was &quot;Value:WRONG&quot;.&lt;br/&gt;
If I don&apos;t put &quot;first.second.name&quot; in the map, the output is &quot;Value:WRONG&quot;, too. Here I would expect NULL as result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837811">JEXL-155</key>
            <summary>Variable names / values not looked up correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zwiebelchen">Lars Cebulla</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 11:35:18 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:05 +0000</updated>
                            <resolved>Wed, 17 Jun 2015 09:39:55 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14589545" author="henrib" created="Wed, 17 Jun 2015 09:39:55 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
Thanks for submitting the issue.&lt;br/&gt;
The 3.0 trunk behaves as expected:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test155() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlExpression jexlExpresssion = jexlEngine.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;first.second.name&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;first.second.name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;RIGHT&quot;&lt;/span&gt;);
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;WRONG&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = jexlExpresssion.evaluate(jc);
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;RIGHT&quot;&lt;/span&gt;, value.toString());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15204235" author="henrib" created="Mon, 21 Mar 2016 14:10:05 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g1kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-154] JEXL method lookup incorrectly interprets object array param as varargs</title>
                <link>https://issues.apache.org/jira/browse/JEXL-154</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Say I have an object in my context with a method like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; asList(T[] array) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Arrays.asList(array);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I call that from a JEXL expression with something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;utils.asList([&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The JEXL method finder seems to treat the method like a varargs method, and puts the whole string array into the first element of the formal parameter, rather than mapping the string array onto the object array. That is, the method receives an array of length 1, with that first element being a string array of length 2.&lt;/p&gt;

&lt;p&gt;To illustrate further, the problem goes away if I change the method to look like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; asList(T[] array, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ... dummy) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Arrays.asList(array);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;since this forces the T[] array to be interpreted correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832700">JEXL-154</key>
            <summary>JEXL method lookup incorrectly interprets object array param as varargs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="davidloone">David Loone</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 12:29:51 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:06 +0000</updated>
                            <resolved>Sun, 31 May 2015 08:50:35 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14566462" author="henrib" created="Sun, 31 May 2015 08:48:27 +0000"  >&lt;p&gt;The issue does not occur on 3.0 trunk.&lt;br/&gt;
The following test passes. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Utils {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; asList(T[] array) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Arrays.asList(array);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; asList(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] array) {
           List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; l = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(array.length);
           &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i : array) {
               l.add(i);
           }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; l;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test148a() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;u&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utils());
        
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src = &lt;span class=&quot;code-quote&quot;&gt;&quot;u.asList([&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;])&quot;&lt;/span&gt;;
        JexlScript e = jexl.createScript(src);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = e.execute(jc);
        Assert.assertTrue(o &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; List);
        Assert.assertEquals(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;), o);
        
        src = &lt;span class=&quot;code-quote&quot;&gt;&quot;u.asList([1, 2])&quot;&lt;/span&gt;;
        e = jexl.createScript(src);
        o = e.execute(jc);
        Assert.assertTrue(o &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; List);
        Assert.assertEquals(Arrays.asList(1, 2), o);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15204237" author="henrib" created="Mon, 21 Mar 2016 14:10:06 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f73z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-153] javadoc fails with 1.8.0</title>
                <link>https://issues.apache.org/jira/browse/JEXL-153</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;OpenJDK 1.8.0&apos;s javadoc is much more strict about HTML usage in javadoc.  The attached patch fixes&lt;/p&gt;</description>
                <environment>&lt;p&gt;Fedora w/ OpenJDK 1.8.0&lt;/p&gt;</environment>
        <key id="12821407">JEXL-153</key>
            <summary>javadoc fails with 1.8.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="opoplawski">Orion Poplawski</reporter>
                        <labels>
                            <label>javadoc</label>
                    </labels>
                <created>Thu, 16 Apr 2015 03:38:36 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:16 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 12:41:08 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14497510" author="opoplawski" created="Thu, 16 Apr 2015 03:39:34 +0000"  >&lt;p&gt;This is against the 2.0 branch.&lt;/p&gt;</comment>
                            <comment id="14572690" author="sebb@apache.org" created="Thu, 4 Jun 2015 12:41:08 +0000"  >&lt;p&gt;Thanks. Applied with one change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-     * Test &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; left &amp;amp;lt;= right.
+     * Test &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; left &amp;amp;le;= right.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;was replaced by&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-     * Test &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; left &amp;amp;lt;= right.
+     * Test &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; left &amp;amp;le; right.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1683534&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1683534&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-153&quot; title=&quot;javadoc fails with 1.8.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-153&quot;&gt;&lt;del&gt;JEXL-153&lt;/del&gt;&lt;/a&gt; - Javadoc 8 fixes&lt;/p&gt;</comment>
                            <comment id="15204275" author="henrib" created="Mon, 21 Mar 2016 14:10:16 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12725772" name="apache-commons-jexl-javadoc.patch" size="17984" author="opoplawski" created="Thu, 16 Apr 2015 03:39:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dbqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-148] Incorrect Map Property get</title>
                <link>https://issues.apache.org/jira/browse/JEXL-148</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;If I try to execute jelly statement that assigns values to map and gets values from that map after. In one particular case map value is not accessible, I assume there is an error. &lt;/p&gt;

&lt;p&gt;&quot;var x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x.one&quot; results to 1&lt;br/&gt;
&quot;x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x.one&quot; results to 1&lt;br/&gt;
&quot;x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;&quot; results to 1&lt;br/&gt;
&quot;var x = new (&quot;java.util.HashMap&quot;); x.one = 1; x.two = 2; x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;&quot; result to null&lt;/p&gt;

&lt;p&gt;The script is evaluated in the following usual manner:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
       Script s = jexl.createScript(expr);&lt;br/&gt;
       try {&lt;br/&gt;
          Object result = s.execute(jc);&lt;br/&gt;
..&lt;/p&gt;

&lt;p&gt;I&apos;m ready to provide more details if nessesary&lt;/p&gt;</description>
                <environment></environment>
        <key id="12780496">JEXL-148</key>
            <summary>Incorrect Map Property get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmitri_blinov">Dmitri Blinov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2015 13:25:53 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:11 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:26:16 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14354596" author="henrib" created="Tue, 10 Mar 2015 09:39:05 +0000"  >&lt;p&gt;Not reproduced on 3.0 trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test148() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] scripts = {&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x.one&quot;&lt;/span&gt;, &lt;span class=&quot;code-comment&quot;&gt;// results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x.one&quot;&lt;/span&gt;,&lt;span class=&quot;code-comment&quot;&gt;// results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x[&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;]&quot;&lt;/span&gt;,&lt;span class=&quot;code-comment&quot;&gt;//results to 1
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;java.util.HashMap&apos;&lt;/span&gt;); x.one = 1; x.two = 2; x[&lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt;]&quot;&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// result to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?
&lt;/span&gt;        };

        JexlEngine JEXL = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s : scripts) {
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = JEXL.createScript(s).execute(jc);
            Assert.assertEquals(1, o);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14354881" author="dmitri_blinov" created="Tue, 10 Mar 2015 13:33:18 +0000"  >&lt;p&gt;Sorry could you adjust the test case as follows ?&lt;/p&gt;

&lt;p&gt;    public void test148() throws Exception {&lt;br/&gt;
        String[] scripts = &lt;/p&gt;
{&quot;var x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x.one&quot;, // results to 1
            &quot;x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x.one&quot;,// results to 1
            &quot;x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x[&apos;one&apos;]&quot;,//results to 1
            &quot;var x = new (&apos;java.util.HashMap&apos;); x.one = 1; x.two = 2; x[&apos;one&apos;]&quot;// result to null?
        }
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;        JexlEngine JEXL = new Engine();&lt;br/&gt;
        for (String s : scripts) &lt;/p&gt;
{
            JexlContext jc = new MapContext();
            Object o = JEXL.createScript(s).execute(jc);
            Assert.assertEquals(1, o);
        }
&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="14354904" author="henrib" created="Tue, 10 Mar 2015 13:51:45 +0000"  >&lt;p&gt;Same result with 3.0 with the JexlContext created for each script evaluation.&lt;/p&gt;</comment>
                            <comment id="14354910" author="dmitri_blinov" created="Tue, 10 Mar 2015 13:58:29 +0000"  >&lt;p&gt;I&apos;m getting the following exception for 2.1.1.&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.jexl2.JexlException: com.msy.ext.JexlTest.main@48!&lt;span class=&quot;error&quot;&gt;&amp;#91;56,61&amp;#93;&lt;/span&gt;: &apos;var x = new (&apos;java.util.HashMap&apos;);x.one = 1;x.two = 2;x&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;one&amp;#39;&amp;#93;&lt;/span&gt;;&apos; object is null&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.getAttribute(Interpreter.java:1532)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:480)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTArrayAccess.jjtAccept(ASTArrayAccess.java:18)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1335)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTReference.jjtAccept(ASTReference.java:18)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:950)&lt;br/&gt;
        at org.apache.commons.jexl2.parser.ASTJexlScript.jjtAccept(ASTJexlScript.java:38)&lt;br/&gt;
        at org.apache.commons.jexl2.Interpreter.interpret(Interpreter.java:230)&lt;br/&gt;
        at org.apache.commons.jexl2.ExpressionImpl.execute(ExpressionImpl.java:107)&lt;br/&gt;
        at com.msy.ext.JexlTest.main(JexlTest.java:48)&lt;/p&gt;</comment>
                            <comment id="14354915" author="henrib" created="Tue, 10 Mar 2015 14:03:04 +0000"  >&lt;p&gt;That&apos;s unfortunate ( I&apos;ve stopped maintaining 2.x ). Maybe someone else is interested in fixing it...&lt;/p&gt;</comment>
                            <comment id="14354925" author="dmitri_blinov" created="Tue, 10 Mar 2015 14:05:47 +0000"  >&lt;p&gt;Sorry for troubling you then. Looking forward for 3.0 release. Many thanks in advance.&lt;/p&gt;</comment>
                            <comment id="15204257" author="henrib" created="Mon, 21 Mar 2016 14:10:11 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26ipj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-147] Array literal with variable parts never re-evaluated</title>
                <link>https://issues.apache.org/jira/browse/JEXL-147</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Suppose there are two integer variables &apos;one&apos; (with value 1) and &apos;two&apos; (with value 2). Now I create an array variable with this expression:&lt;/p&gt;

&lt;p&gt;myArray = [ one, two ]&lt;/p&gt;

&lt;p&gt;Now I change the values of these variables later (&apos;one&apos; to 5 and &apos;two&apos; to 6), and evaluate the same expression again:&lt;/p&gt;

&lt;p&gt;myArray = [ one, two ]&lt;/p&gt;

&lt;p&gt;Now I would expect &quot;myArray&quot; to be created again, this time with values 5 and 6. However, the second time, nothing really happens. Internally, &quot;myArray&quot; remains the same array from the first invocation (same Java String array object instance), with the same values (1 and 2). But since I was using variables with different values in the expression, I would expect the array to change / be re-created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12751108">JEXL-147</key>
            <summary>Array literal with variable parts never re-evaluated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marcelschoen">Marcel Schoen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Oct 2014 15:24:39 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:12 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:28:21 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14187147" author="henrib" created="Tue, 28 Oct 2014 17:34:16 +0000"  >&lt;p&gt;On the 3.0 trunk, the issue as described does not occur:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test147() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine JEXL = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        JexlExpression e147 = JEXL.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;quux = [one, two]&quot;&lt;/span&gt;);

        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, 1);
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, 2);
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] o1 = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[])e147.evaluate(jc);
        assertEquals(1, o1[0]);
        assertEquals(2, o1[1]);

        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, 10);
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, 20);
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] o2 = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) e147.evaluate(jc);
        assertEquals(10, o2[0]);
        assertEquals(20, o2[1]);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15204262" author="henrib" created="Mon, 21 Mar 2016 14:10:12 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21o87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-146] Performance problem in Interpreter.unknownVariable mechanism</title>
                <link>https://issues.apache.org/jira/browse/JEXL-146</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When JEXL is used in non-strict mode it silently ignores unknown variables.  However it still constructs a &lt;tt&gt;JexlException.Variable&lt;/tt&gt; exception, even though it doesn&apos;t throw it.&lt;/p&gt;

&lt;p&gt;Constructing exceptions in Java is expensive.  If you happen to have a situation where unknown variables are common then this becomes a performance problem.  It is showing up as an issue in our application.&lt;/p&gt;

&lt;p&gt;Inspecting the source of &lt;tt&gt;Interpreter&lt;/tt&gt; it looks like a similar issue could also occur with a number of the other exceptions.  They are always created, even if they are not going to be thrown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745178">JEXL-146</key>
            <summary>Performance problem in Interpreter.unknownVariable mechanism</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmaplesden">David Maplesden</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Oct 2014 07:02:01 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:16 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:24:00 +0000</resolved>
                                    <version>2.1.1</version>
                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14154487" author="dmaplesden" created="Wed, 1 Oct 2014 07:08:43 +0000"  >&lt;p&gt;The fix for this is fairly straight-forward, it just requires delaying the construction of the exception until the moment it is actually going to be thrown.  The information required to construct the appropriate exception can be passed through to the appropriate point.&lt;/p&gt;

&lt;p&gt;I am happy to provide a patch for the change.  What is the best way to do this?  I can provide a pull request for the github mirror project or a patch file on this ticket?&lt;/p&gt;

&lt;p&gt;It would be great to have it available in a stable release.  Doesn&apos;t look like there has been one of those in some time, is there any chance of one in the near future?  If so, should I provide a patch for 3.0 or 2.1?&lt;/p&gt;</comment>
                            <comment id="14154589" author="henrib" created="Wed, 1 Oct 2014 09:07:51 +0000"  >&lt;p&gt;Committed a fix in the 3.0 trunk (unsolvable variable/property/method); let me know if this is what you expected.&lt;/p&gt;

&lt;p&gt;On the release subject, you should post/ask to the mailing list to see if any committer is interested in releasing 3.0.&lt;/p&gt;</comment>
                            <comment id="14154654" author="dmaplesden" created="Wed, 1 Oct 2014 10:56:12 +0000"  >&lt;p&gt;Hi Henri,&lt;/p&gt;

&lt;p&gt;Thanks for your quick response.&lt;/p&gt;

&lt;p&gt;I haven&apos;t done a line by line check but it certainly looks like it has addressed my main concern, delaying the construction of the exceptions until the point where they are actually thrown.  Looks good.  Some of the other changes I don&apos;t completely understand but I trust you do!&lt;/p&gt;

&lt;p&gt;One thing I did notice, the way you now temporarily change the `strictEngine` member variable means the class is no longer thread-safe.  I&apos;m not 100% sure that it was thread-safe before, but it seems possible that it was intended to be given that most of the member variables are final or volatile.  You may need to double-check that usage.  Although looking closer it looks like `functors` was already not used in a thread-safe manner... so maybe the class is not intended to be thread-safe.&lt;/p&gt;

&lt;p&gt;Anyway, thank you for the change, it does look like it will address my problem.&lt;/p&gt;</comment>
                            <comment id="14154717" author="henrib" created="Wed, 1 Oct 2014 12:07:22 +0000"  >&lt;p&gt;An Interpreter instance is created for each expression/script execution; it should not be possible to share an interpreter between 2 threads so the thread safety (of isStrictEngine) is not really a concern. The only exception is the &apos;cancelled&apos; flag which allows thread cancellation of a script running as a callable.&lt;br/&gt;
You are however absolutely right about the potential issue with the functors; these should definitely not be shared between interpreter instances. I&apos;ve made corrections accordingly; Closure/callable no longer acquire a reference to their caller functor. Thanks for spotting the issue.&lt;/p&gt;</comment>
                            <comment id="15204276" author="henrib" created="Mon, 21 Mar 2016 14:10:16 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20o8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-145] Incorrect test case in SandboxTest</title>
                <link>https://issues.apache.org/jira/browse/JEXL-145</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Whilst debugging blacklisting of static functions using the Sandbox class and unable to get it to work I checked the testcase SandboxTest. I subsequently found that the test of System.exit() in testRestrict() passes not because System.currentTimeMillis() is whitelisted but because of a signature mismatch i.e System.exit() requires an int parameter. Changing the expression to System.exit(1) causes the test to end prematruely due to exit() being called.&lt;/p&gt;

&lt;p&gt;The white listing fails in SandboxUberspectImpl.getMethod() because obj is a Class and getClass().getName() returns &quot;java.lang.Class&quot; which doesn&apos;t match &quot;java.lang.System&quot; as specified in SandboxTest.testRestrict().&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.7.0_45&lt;/p&gt;</environment>
        <key id="12732841">JEXL-145</key>
            <summary>Incorrect test case in SandboxTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianc">Ian Cunningham</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Aug 2014 14:21:59 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:12 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:23:43 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14090869" author="ianc" created="Fri, 8 Aug 2014 15:25:51 +0000"  >&lt;p&gt;A potential fix is to replace code of the format&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;String actual = sandbox.execute(obj.getClass().getName(), method);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;with&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;String objClassName = (obj instanceof Class) ? ((Class&amp;lt;?&amp;gt;)obj).getName() : obj.getClass().getName();
String actual = sandbox.execute(objClassName, method);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14091806" author="henrib" created="Sat, 9 Aug 2014 16:12:37 +0000"  >&lt;p&gt;Thanks for catching this; the fix you propose seems safe.&lt;br/&gt;
The jexl3 trunk has been updated with the fix included.&lt;/p&gt;</comment>
                            <comment id="15204261" author="henrib" created="Mon, 21 Mar 2016 14:10:12 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yosn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-144] Empty array property setting fails</title>
                <link>https://issues.apache.org/jira/browse/JEXL-144</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Suppose a bean has an array property setter method (e.g, public void setStrarr(String []) ).&lt;br/&gt;
If I use an expression like this with an empty array, then it fails with the error message, &quot;inaccessible or unknown property strarr&quot;.&lt;/p&gt;

&lt;p&gt;  // example expression&lt;br/&gt;
  bean.strarr = [ ];&lt;/p&gt;</description>
                <environment></environment>
        <key id="12677202">JEXL-144</key>
            <summary>Empty array property setting fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Nov 2013 04:47:22 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:06 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:15:36 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13811873" author="woon_san" created="Sat, 2 Nov 2013 04:53:51 +0000"  >&lt;p&gt;The error seems to happen because it tries to resolve the type of the first array item in order to find the best setter method.&lt;br/&gt;
However, if an empty array is provided, it cannot detect the component type of the array, and so it fails to find a proper method from the object array (Object[]) argument.&lt;/p&gt;</comment>
                            <comment id="13811875" author="woon_san" created="Sat, 2 Nov 2013 05:00:29 +0000"  >&lt;p&gt;Attaching patches:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jexl2-empty-array-patch.txt for 2.0 branch&lt;/li&gt;
	&lt;li&gt;jexl3-empty-array-patch.txt for trunk&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All the internal method cache objects (ClassMap, MethodMap, MethodKey, etc) do not have the argument information. So, they cannot detect if the property value argument is an empty array.&lt;br/&gt;
Therefore, the most proper location to improve is PropertySetExecutor.java, IMHO, where methods are looked up by the input argument and its type.&lt;/p&gt;

&lt;p&gt;Basically, PropertySetExecutor now finds an array setter method by the method name if no proper method was found yet.&lt;br/&gt;
And, it invokes the detected method with a newly created empty array object later by the detected array component type.&lt;/p&gt;

&lt;p&gt;Please review the patches.&lt;/p&gt;

&lt;p&gt;Thanks in advance,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13811927" author="sebb@apache.org" created="Sat, 2 Nov 2013 10:20:55 +0000"  >&lt;p&gt;What about overloaded methods? How does JEXL know which one to choose?&lt;/p&gt;</comment>
                            <comment id="13812269" author="woon_san" created="Sun, 3 Nov 2013 05:34:40 +0000"  >&lt;p&gt;Hi Sebb,&lt;/p&gt;

&lt;p&gt;That&apos;s a good point! My initial patch just chose the first found one, but I don&apos;t think it was quite right.&lt;/p&gt;

&lt;p&gt;So, I&apos;m uploading new patches (jexl2-empty-array-patch-2.txt for 2.0 branch and jexl3-empty-array-patch-2.txt for trunk), which now fails to find the setter method if there&apos;s an ambiguity due to the overloaded setter methods.&lt;br/&gt;
JEXL can now report the following exception message in that case:&lt;br/&gt;
&quot;&apos;quux.arr2 = [  ];&apos; unknown, ambiguous or inaccessible property arr2&quot;&lt;/p&gt;

&lt;p&gt;In summary, JEXL can now set an empty array if there&apos;s only one setter method with the property name and array type parameter, but it fails and reports the ambiguity if there are any other overloaded methods.&lt;br/&gt;
I think this should be fine.&lt;/p&gt;

&lt;p&gt;Please review those.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13813066" author="henrib" created="Mon, 4 Nov 2013 18:08:06 +0000"  >&lt;p&gt;Hi;&lt;br/&gt;
Nice addition!&lt;/p&gt;

&lt;p&gt;Just to nitpick, it seems the boolean property isEmptyArrayValue could be &quot;removed&quot; since the emptyArrayComponentType is not null only when the other one is true (emptyArrayComponentType != null &amp;lt;=&amp;gt; isEmprtyArrayValue == true). I&apos;m also wondering if there could be another way (from the JEXL3/Uberspect may be) to avoid adding this emptyComponentType in the setter when the property is actually not an array...&lt;/p&gt;

&lt;p&gt;Btw, I&apos;ve got many uncommitted JEXL3 modifications (no-one seemed interested in JEXL2+ and the release cycle/process was too long/costly for my sole/own usage); just let me know if JEXL3 is something you could consider using.&lt;br/&gt;
Cheers&lt;/p&gt;</comment>
                            <comment id="13813428" author="woon_san" created="Mon, 4 Nov 2013 23:49:36 +0000"  >&lt;p&gt;Hi Henri,&lt;/p&gt;

&lt;p&gt;Thanks a lot for the review and remark!&lt;br/&gt;
I&apos;m attaching a revised patch for 2.0 branch (jexl2-empty-array-patch-3.txt) and another for trunk (jexl3-empty-array-patch-3.txt) which don&apos;t have &apos;isEmptyArrayValue&apos; member any more.&lt;/p&gt;

&lt;p&gt;Regarding &quot;another way (from the JEXL3/Uberspect)&quot;, yes, that looks a lot better to add this kind of code in Uberspect.java maybe instead of PropertySetExecutor even though I don&apos;t fully understand the design changes in JEXL3 yet. I&apos;ll try to understand JEXL3 Uberspect and try a patch in that way soon. (So, you can disregard the patch for trunk now.)&lt;/p&gt;

&lt;p&gt;By the way, I&apos;m going to use JEXL2 in our document processing engine module (which is based on SCXML 2.0) in the short term. So, we&apos;re definitely interested in having this feature in JEXL2, not JEXL3 in the short term.&lt;br/&gt;
In the longer term, I&apos;ll probably want to upgrade it to JEXL3 because it might be more flexible/customizable and stable.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13814409" author="woon_san" created="Tue, 5 Nov 2013 23:42:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrib&quot; class=&quot;user-hover&quot; rel=&quot;henrib&quot;&gt;henrib&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Your idea (adding determination code into Uberspect instead of PropertySetExecutor) seems better.&lt;br/&gt;
So, I&apos;d like to ask your opinion on my improvement idea.&lt;br/&gt;
In JEXL3, I think I can do the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Improve Uberspect#getPropertySet() to return a separate executor type instance when the argument is an empty array.&lt;br/&gt;
  So, I think we can add EmptyArrayPropertySetExecutor by extending PropertySetExecutor. Its #discover() is used to get an executor instance in that case. We don&apos;t have to keep the member in Executor classes any more.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;How does it sound to you?&lt;/p&gt;

&lt;p&gt;Also, in the same approach, I think we can improve Introspector#getSetExecutor() for JEXL2.&lt;/p&gt;

&lt;p&gt;If it sounds okay to you, I will post new patches. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13814433" author="sebb@apache.org" created="Wed, 6 Nov 2013 00:16:00 +0000"  >&lt;p&gt;Please can we keep discussions of Jexl3 etc. to the developer list? They are off-topic for this JIRA.&lt;/p&gt;</comment>
                            <comment id="13815610" author="woon_san" created="Thu, 7 Nov 2013 03:38:03 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m attaching new patches (jexl2-empty-array-patch-4.txt for 2.0 branch and jexl3-empty-array-patch-4.txt for trunk).&lt;/p&gt;

&lt;p&gt;These improve PropertySetExecutor class not to introduce a new member variable any more. Instead, it resolves the array component type when executing the setter method. This doesn&apos;t make any difference in performance now because the array component type resolution is done only once anyway.&lt;/p&gt;

&lt;p&gt;I also considered improving Uberspect instead as mentioned before, but that approach has to introduce a new EmptyArrayPropertySetExecutor, which doesn&apos;t seem to be really simple and nice to me.&lt;/p&gt;

&lt;p&gt;Therefore, I decided to improve the PropertySetExecutor only, not to have a new property there.&lt;/p&gt;

&lt;p&gt;Could you please review the new patches?&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13831663" author="henrib" created="Mon, 25 Nov 2013 17:47:51 +0000"  >&lt;p&gt;Committed the fix in jexl3 (plus a few other things).&lt;/p&gt;</comment>
                            <comment id="14369500" author="henrib" created="Thu, 19 Mar 2015 15:15:36 +0000"  >&lt;p&gt;Fixed in 3.0 a while ago&lt;/p&gt;</comment>
                            <comment id="15204236" author="henrib" created="Mon, 21 Mar 2016 14:10:06 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12611809" name="jexl2-empty-array-patch-2.txt" size="9260" author="woon_san" created="Sun, 3 Nov 2013 05:34:40 +0000"/>
                            <attachment id="12612062" name="jexl2-empty-array-patch-3.txt" size="9173" author="woon_san" created="Mon, 4 Nov 2013 23:49:36 +0000"/>
                            <attachment id="12612523" name="jexl2-empty-array-patch-4.txt" size="8295" author="woon_san" created="Thu, 7 Nov 2013 03:38:03 +0000"/>
                            <attachment id="12611743" name="jexl2-empty-array-patch.txt" size="7125" author="woon_san" created="Sat, 2 Nov 2013 05:00:29 +0000"/>
                            <attachment id="12611810" name="jexl3-empty-array-patch-2.txt" size="10425" author="woon_san" created="Sun, 3 Nov 2013 05:34:40 +0000"/>
                            <attachment id="12612063" name="jexl3-empty-array-patch-3.txt" size="10338" author="woon_san" created="Mon, 4 Nov 2013 23:49:36 +0000"/>
                            <attachment id="12612524" name="jexl3-empty-array-patch-4.txt" size="8785" author="woon_san" created="Thu, 7 Nov 2013 03:38:03 +0000"/>
                            <attachment id="12611744" name="jexl3-empty-array-patch.txt" size="7895" author="woon_san" created="Sat, 2 Nov 2013 05:00:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pgzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-142] Map expression issue with empty key</title>
                <link>https://issues.apache.org/jira/browse/JEXL-142</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Map expressions fail if key is an empty string:  map&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;&amp;#39;&amp;#93;&lt;/span&gt;   &lt;/p&gt;

&lt;p&gt;Attachement contains patch with a fix and test case.&lt;/p&gt;

&lt;p&gt;java.lang.StringIndexOutOfBoundsException: String index out of range: 3&lt;br/&gt;
	at java.lang.AbstractStringBuilder.charAt(Unknown Source)&lt;br/&gt;
	at java.lang.StringBuilder.charAt(Unknown Source)&lt;br/&gt;
	at org.apache.commons.jexl2.internal.PropertyGetExecutor.discoverGet(PropertyGetExecutor.java:103)&lt;br/&gt;
	at org.apache.commons.jexl2.internal.PropertyGetExecutor.discover(PropertyGetExecutor.java:82)&lt;br/&gt;
	at org.apache.commons.jexl2.internal.PropertyGetExecutor.&amp;lt;init&amp;gt;(PropertyGetExecutor.java:38)&lt;br/&gt;
	at org.apache.commons.jexl2.internal.Introspector.getGetExecutor(Introspector.java:230)&lt;br/&gt;
	at org.apache.commons.jexl2.introspection.UberspectImpl.getPropertyGet(UberspectImpl.java:136)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.getAttribute(Interpreter.java:1537)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:482)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.ASTArrayAccess.jjtAccept(ASTArrayAccess.java:18)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1317)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.ASTReference.jjtAccept(ASTReference.java:18)&lt;br/&gt;
	at org.apache.commons.jexl2.Interpreter.interpret(Interpreter.java:232)&lt;br/&gt;
	at org.apache.commons.jexl2.ExpressionImpl.evaluate(ExpressionImpl.java:65)&lt;br/&gt;
	at org.apache.commons.jexl2.MapLiteralTest.testLiteralWithNumbers(MapLiteralTest.java:99)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12630651">JEXL-142</key>
            <summary>Map expression issue with empty key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jbaliuka">Juozas Baliuks</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Feb 2013 15:07:06 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:17 +0000</updated>
                            <resolved>Thu, 19 Mar 2015 15:16:25 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13815952" author="woon_san" created="Thu, 7 Nov 2013 13:29:48 +0000"  >&lt;p&gt;Hi Juozas,&lt;/p&gt;

&lt;p&gt;I think it&apos;s a nice catch and appreciate your patch (I&apos;m not a JEXL committer though).&lt;br/&gt;
It&apos;s a minor thing, but if you keep the same coding style (e.g, 4 spaces indentation instead of tabs), then I guess the patch should be more readable and easy to catch what&apos;s needed to change. Could you please do that again with proper indentation?&lt;br/&gt;
Thank you again.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13817237" author="jbaliuka" created="Fri, 8 Nov 2013 12:53:02 +0000"  >&lt;p&gt;Updated patch to fix indentation issues.&lt;/p&gt;</comment>
                            <comment id="13817239" author="jbaliuka" created="Fri, 8 Nov 2013 12:54:20 +0000"  >&lt;p&gt;Downgraded  issue to trivial because workaround is trivial.&lt;br/&gt;
null  instead of empty string works for me too.&lt;/p&gt;</comment>
                            <comment id="13817856" author="woon_san" created="Fri, 8 Nov 2013 23:46:22 +0000"  >&lt;p&gt;Thanks for updating the patch!&lt;br/&gt;
I&apos;m afraid that it might be better to improve PropertyGetExecutor#discoverGet() so that it can return null when property string is empty because #discoverGet() is also called by BooleanGetExecutor as well.&lt;br/&gt;
Anyway, I hope to get this fixed soon.&lt;/p&gt;

&lt;p&gt;Thanks again and cheers!&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13819024" author="jbaliuka" created="Mon, 11 Nov 2013 15:27:50 +0000"  >&lt;p&gt; I think it is better to change  Introspector or both because  this guard in Introspector saves a few redundant operations and it is useful here. &lt;/p&gt;</comment>
                            <comment id="13831665" author="henrib" created="Mon, 25 Nov 2013 17:48:51 +0000"  >&lt;p&gt;Committed the fix in jexl3 (plus a few other things).&lt;/p&gt;</comment>
                            <comment id="15204280" author="henrib" created="Mon, 21 Mar 2016 14:10:17 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12612818" name="JEXL-142.patch" size="1402" author="jbaliuka" created="Fri, 8 Nov 2013 12:53:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hp3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-141] Suffix for Big Decimal  and Big Integer Literal is incorrectly mentioned in Java docs</title>
                <link>https://issues.apache.org/jira/browse/JEXL-141</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Suffix for BigDecimal Literal and Big Integer Literal is incorrectly mentioned on  &lt;a href=&quot;http://commons.apache.org/jexl/reference/syntax.html#Literals&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/jexl/reference/syntax.html#Literals&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Correct Big Decimal Suffix is  &apos;B&apos; (Instead of &apos;H&apos; )&lt;br/&gt;
Correct Big Integer Suffix is &apos;H&apos;  (Instead of &apos;B&apos;)&lt;/p&gt;

&lt;p&gt;This can be clearly verified by looking at ASTNumberLiteral.java&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12615433">JEXL-141</key>
            <summary>Suffix for Big Decimal  and Big Integer Literal is incorrectly mentioned in Java docs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="harrybvp@gmail.com">Harpreet Singh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Nov 2012 08:03:39 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:09 +0000</updated>
                            <resolved>Fri, 9 Nov 2012 15:46:29 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13494057" author="henrib" created="Fri, 9 Nov 2012 15:46:29 +0000"  >&lt;p&gt;Thanks for the report. Fixed documentation, code is correct.&lt;/p&gt;</comment>
                            <comment id="15204249" author="henrib" created="Mon, 21 Mar 2016 14:10:09 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256711</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iqkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>107400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-138] Erroneous &quot;inaccessible or unknown property&quot; warning</title>
                <link>https://issues.apache.org/jira/browse/JEXL-138</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL displays an erroneous &quot;inaccessible or unknown property&quot; warning when you try to access a property is both accessible, and known, but that happens to return null.&lt;/p&gt;

&lt;p&gt;Please see the attached test case. JEXL reports:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&apos;foo.bar;&apos; inaccessible or unknown property foo&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;But foo is clearly an accessible and known property because it is accessed directly 2 lines above, and 1 line above we access &apos;foo.baz&apos; which works without error.&lt;/p&gt;

&lt;p&gt;The difference seems to be that getBaz() returns &quot;baz&quot; whereas getBar() returns null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12598518">JEXL-138</key>
            <summary>Erroneous &quot;inaccessible or unknown property&quot; warning</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="kennardconsulting">Kennard Consulting</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2012 09:36:16 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:16 +0000</updated>
                            <resolved>Thu, 12 Jul 2012 13:43:20 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13412640" author="kennardconsulting" created="Thu, 12 Jul 2012 09:37:32 +0000"  >&lt;p&gt;Unit test&lt;/p&gt;</comment>
                            <comment id="13412788" author="henrib" created="Thu, 12 Jul 2012 13:43:20 +0000"  >&lt;p&gt;Hello Richard;&lt;br/&gt;
I&apos;ve difficulties reproducing your exact test case but the bug does exist in 2.1.1 with the engine in strict mode.&lt;br/&gt;
It can not be reproduced in 2.1.2 (since Interpreter.java version 1332806) and 3.0 source code.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInaccessibleProperty() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine engine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine(); &lt;span class=&quot;code-comment&quot;&gt;// 1332806
&lt;/span&gt;        engine.setStrict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        JexlContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        context.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo138());
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;baz&quot;&lt;/span&gt;, engine.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.baz&quot;&lt;/span&gt;).evaluate(context));
        Assert.assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, engine.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.bar&quot;&lt;/span&gt;).evaluate(context));
    }

    &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// Inner class
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo138 {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getBar() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getBaz() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;baz&quot;&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13414217" author="kennardconsulting" created="Sat, 14 Jul 2012 00:47:05 +0000"  >&lt;p&gt;Terrific! Thanks Henri. I look forward to the next release.&lt;/p&gt;</comment>
                            <comment id="15033348" author="ksb" created="Tue, 1 Dec 2015 08:43:43 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I would also be happy to have a release available containing this fix.&lt;/p&gt;

&lt;p&gt;Can anyone say when 2.1.2 (or 3.0) is published?&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Bjoern&lt;/p&gt;</comment>
                            <comment id="15039175" author="faizanali04@hotmail.com" created="Fri, 4 Dec 2015 00:05:59 +0000"  >&lt;p&gt;Hey, any updates on a fix for this? &lt;/p&gt;</comment>
                            <comment id="15040818" author="henrib" created="Fri, 4 Dec 2015 06:42:51 +0000"  >&lt;p&gt;The bug is resolved in 2.1.2 and 3.0 (trunk) branches as its state describes.&lt;br/&gt;
Unfortunately, no one seems interested in publishing a release; try asking on the mailing list.&lt;/p&gt;</comment>
                            <comment id="15204278" author="henrib" created="Mon, 21 Mar 2016 14:10:16 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12536198" name="JexlTest.java" size="1170" author="kennardconsulting" created="Thu, 12 Jul 2012 09:37:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-137] Invalid script variable list for nested array/map access</title>
                <link>https://issues.apache.org/jira/browse/JEXL-137</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;On behalf of Tomas Kukosa:&lt;br/&gt;
If the expression contains nested array/map access then the getVariables() method does not return the right value. &lt;br/&gt;
The result of test code below is: &lt;/p&gt;

&lt;p&gt;script: A+B&lt;span class=&quot;error&quot;&gt;&amp;#91;C&amp;#93;&lt;/span&gt;+D[E&lt;span class=&quot;error&quot;&gt;&amp;#91;F&amp;#93;&lt;/span&gt;]+x[y&lt;span class=&quot;error&quot;&gt;&amp;#91;z&amp;#93;&lt;/span&gt;] &lt;br/&gt;
variables: [&lt;span class=&quot;error&quot;&gt;&amp;#91;A&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;C&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;B&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;D&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;] &lt;/p&gt;

&lt;p&gt;E, F, y, z variables got lost somewhere. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12598364">JEXL-137</key>
            <summary>Invalid script variable list for nested array/map access</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jul 2012 12:15:52 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:13 +0000</updated>
                            <resolved>Wed, 11 Jul 2012 12:25:45 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13411432" author="henrib" created="Wed, 11 Jul 2012 12:25:45 +0000"  >&lt;p&gt;In 3.0:&lt;br/&gt;
Added new inner class Engine.VarCollector to properly collect variables;&lt;br/&gt;
Updated TemplateEngine to use new Engine.VarCollector;&lt;br/&gt;
Updated test;&lt;br/&gt;
Added Dumper class to ease characterizing AST related issues;&lt;/p&gt;

&lt;p&gt;jexl3/trunk/src/main/java/org/apache/commons/jexl3/internal/Engine.java&lt;br/&gt;
jexl3/trunk/src/main/java/org/apache/commons/jexl3/internal/TemplateEngine.java&lt;br/&gt;
jexl3/trunk/src/main/java/org/apache/commons/jexl3/parser/ASTIdentifierAccess.java&lt;br/&gt;
jexl3/trunk/src/main/java/org/apache/commons/jexl3/parser/ParserVisitor.java&lt;br/&gt;
jexl3/trunk/src/test/java/org/apache/commons/jexl3/VarTest.java&lt;br/&gt;
jexl3/trunk/src/test/java/org/apache/commons/jexl3/internal/Dumper.java&lt;/p&gt;

&lt;p&gt;Committed revision 1360141.&lt;/p&gt;

&lt;p&gt;In 2.1.2:&lt;br/&gt;
Modified JexlEngine.getVariable() logic and test;&lt;br/&gt;
Added Dumper class to ease characterizing AST related issues;&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/JexlEngine.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/Dumper.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/VarTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1360142.&lt;/p&gt;</comment>
                            <comment id="15204267" author="henrib" created="Mon, 21 Mar 2016 14:10:13 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-136] Script calls within scripts may fail with number arguments</title>
                <link>https://issues.apache.org/jira/browse/JEXL-136</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Jexl attempts to narrow arguments when solving function names; unfortunately,&lt;br/&gt;
this may cause issues when the function is a script and the argument type is expected to remain untouched.&lt;/p&gt;

&lt;p&gt;The map key in the following code is an Integer; by calling the function fn01, the interpreter fails to find a method and retries after &apos;narrowing&apos; the argument which becomes a Byte. The Byte is not equal to the Integer map key with the same value; the test fails.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       @Test
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test136() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
            JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Engine();
            JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
            JexlScript script;
            JexlExpression expr;
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result;

            script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = $TAB[idx]; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;idx&quot;&lt;/span&gt;);
            jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;fn01&quot;&lt;/span&gt;, script);

            script = jexl.createScript(&lt;span class=&quot;code-quote&quot;&gt;&quot;$TAB = { 1:11, 2:22, 3:33}; IDX=2;&quot;&lt;/span&gt;);
            script.execute(jc);

            expr = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;fn01(IDX)&quot;&lt;/span&gt;);
            result = expr.evaluate(jc);
            assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;EXPR01 result&quot;&lt;/span&gt;, 22, result);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12598069">JEXL-136</key>
            <summary>Script calls within scripts may fail with number arguments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2012 19:04:45 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:09 +0000</updated>
                            <resolved>Mon, 9 Jul 2012 19:10:12 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13409742" author="henrib" created="Mon, 9 Jul 2012 19:10:12 +0000"  >&lt;p&gt;Changed logic of Interpreter.call to narrow only after trying all other possibilities.&lt;/p&gt;


&lt;p&gt;jexl2/src/main/java/org/apache/commons/jexl2/Interpreter.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/IssuesTest.java&lt;/p&gt;

&lt;p&gt;Committed revision 1359338.&lt;/p&gt;</comment>
                            <comment id="15204251" author="henrib" created="Mon, 21 Mar 2016 14:10:09 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194471</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-135] using map as script parameter or local variable</title>
                <link>https://issues.apache.org/jira/browse/JEXL-135</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;On behalf of Tomas Kukosa:&lt;/p&gt;

&lt;p&gt;Hello, &lt;/p&gt;

&lt;p&gt;I use jexl 2.1.1 and I can not access map passed as a script parameter. &lt;/p&gt;

&lt;p&gt;When I have the script with &apos;stat&apos; parameter and following code: &lt;br/&gt;
  var a = state;  ## OK &lt;br/&gt;
  var b = state&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;;  ## ERROR &lt;br/&gt;
the first assignment works OK but the second fails with the reason &apos;undefined variable state&apos; &lt;br/&gt;
Also I can see that the interpreter tried to get &apos;state&apos; variable from context. &lt;/p&gt;

&lt;p&gt;The same result is seen if parameter is assigned to local variable and then it is accessed through it. &lt;/p&gt;

&lt;p&gt;Is it a bug or intentional behavior? &lt;/p&gt;

&lt;p&gt;Regards, &lt;br/&gt;
Tomas &lt;/p&gt;</description>
                <environment></environment>
        <key id="12597251">JEXL-135</key>
            <summary>using map as script parameter or local variable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jul 2012 18:16:24 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:15 +0000</updated>
                            <resolved>Thu, 5 Jul 2012 09:26:30 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13406932" author="henrib" created="Thu, 5 Jul 2012 09:26:30 +0000"  >&lt;p&gt;Committed 1332806.&lt;br/&gt;
Fix in parser.jjt, identifiers used in array access expression were not checked against local variables.&lt;/p&gt;</comment>
                            <comment id="15204272" author="henrib" created="Mon, 21 Mar 2016 14:10:15 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-134] Issue with evaluation of concat of variables : \r + \n gives 0</title>
                <link>https://issues.apache.org/jira/browse/JEXL-134</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Consider the following example :&lt;/p&gt;

&lt;p&gt;		String jexlExp = &quot;$$__INPUT + nl&quot;;&lt;br/&gt;
		Expression e = jexl.createExpression( jexlExp );&lt;br/&gt;
		// Create a context and add data&lt;br/&gt;
		JexlContext jc = new MapContext();&lt;br/&gt;
		jc.set(&quot;$$__INPUT&quot;, &quot;\r&quot; );&lt;br/&gt;
		jc.set(&quot;nl&quot;, &quot;\n&quot;);&lt;br/&gt;
		// Now evaluate the expression, getting the result&lt;br/&gt;
		Object o = e.evaluate(jc);&lt;/p&gt;

&lt;p&gt;The result is 0 instead of &quot;\r\n&quot;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Xp, jdk1.6.0_14&lt;/p&gt;</environment>
        <key id="12596375">JEXL-134</key>
            <summary>Issue with evaluation of concat of variables : \r + \n gives 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="mmokashi">Manoj Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 11:00:38 +0000</created>
                <updated>Tue, 29 Jun 2021 06:59:13 +0000</updated>
                            <resolved>Sun, 1 Jul 2012 15:37:13 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13404738" author="henrib" created="Sun, 1 Jul 2012 14:59:25 +0000"  >&lt;p&gt;Thanks for the bug report.&lt;br/&gt;
The culprit is the usage of trim in JexlArithemtic coercion methods toDouble and toBigDecimal which, in this case, will treat strings as empty and allow coercion to 0.&lt;br/&gt;
As a workaround, till 2.1.2 is released, you can derive JexlArithmetic and override the add method to treat String arguments early as in the following example.&lt;br/&gt;
Hope this helps.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Arithmetic134 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Arithmetic134() {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        }
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; add(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; lhs, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; rhs) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lhs &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; &amp;amp;&amp;amp; rhs &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) lhs) + ((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) rhs);
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
               &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.add(lhs, rhs);
            }
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test134() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Arithmetic134(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jexlExp = &lt;span class=&quot;code-quote&quot;&gt;&quot;$$__INPUT + nl&quot;&lt;/span&gt;;
        Expression e = jexl.createExpression( jexlExp );
        &lt;span class=&quot;code-comment&quot;&gt;// Create a context and add data
&lt;/span&gt;        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;$$__INPUT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\r&quot;&lt;/span&gt; );
        jc.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;nl&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// Now evaluate the expression, getting the result
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = e.evaluate(jc);
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;\r\n&quot;&lt;/span&gt;, o);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13404746" author="henrib" created="Sun, 1 Jul 2012 15:37:13 +0000"  >&lt;p&gt;Fix by removing occurrences of trim in JexlArithmetic coercions&lt;br/&gt;
src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl2/IssuesTest.java&lt;br/&gt;
Committed revision 1355930.&lt;/p&gt;</comment>
                            <comment id="13404897" author="mmokashi" created="Mon, 2 Jul 2012 05:58:22 +0000"  >&lt;p&gt;Hi Henri, thanks for the quick resolution &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xniv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-132] divide zero error and others</title>
                <link>https://issues.apache.org/jira/browse/JEXL-132</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;code snippet&#65306;&lt;br/&gt;
		String exp;&lt;br/&gt;
		Expression expression;&lt;br/&gt;
		JexlEngine engine = new JexlEngine();&lt;/p&gt;


&lt;p&gt;		exp = &quot;1/0&quot;;&lt;br/&gt;
		expression = engine.createExpression(exp);&lt;br/&gt;
		System.out.println(expression.evaluate(null));&lt;/p&gt;

&lt;p&gt;this will print 0.0,shoud it indicate an error by throwing exception or return value?&lt;br/&gt;
----------------------------------------------&lt;/p&gt;


&lt;p&gt;code snippet&#65306;&lt;br/&gt;
		exp = &quot;1/0.0&quot;;&lt;br/&gt;
		expression = engine.createExpression(exp);&lt;br/&gt;
		System.out.println(expression.evaluate(null));&lt;br/&gt;
this will print 0.0 too,but in fact it should return Infinity.&lt;br/&gt;
----------------------------------------------&lt;/p&gt;


&lt;p&gt;code snippet:&lt;br/&gt;
		exp = &quot;Math.abs(-1)&quot;;&lt;br/&gt;
		expression = engine.createExpression(exp);&lt;br/&gt;
		System.out.println(expression.evaluate(null));&lt;/p&gt;

&lt;p&gt;I don&apos;t know whether this is a bug.JEXL cannot invoke java static method directly,it will throw an exception&lt;br/&gt;
----------------------------------------------&lt;/p&gt;



&lt;p&gt;code snippet:&lt;br/&gt;
		exp = &quot;a.abs(-1)&quot;;&lt;br/&gt;
		class MyMath {&lt;br/&gt;
			public double abs(double d) &lt;/p&gt;
{
				return Math.abs(d);
			}
&lt;p&gt; &lt;br/&gt;
		}&lt;br/&gt;
		Object obj = new MyMath();&lt;br/&gt;
		expression = engine.createExpression(exp);&lt;br/&gt;
		MapContext c = new MapContext();&lt;br/&gt;
		c.set(&quot;a&quot;, obj);&lt;br/&gt;
		System.out.println(expression.evaluate(c));&lt;/p&gt;

&lt;p&gt;er,this is very strange,if MyMath is not public(whether in a independent file or not),it will return null;but if MyMath is a public class,it will behave correctly&lt;/p&gt;</description>
                <environment>&lt;p&gt;JEXL2.1.1 jdk1.5.0_22&lt;/p&gt;</environment>
        <key id="12554877">JEXL-132</key>
            <summary>divide zero error and others</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="freish">freish</reporter>
                        <labels>
                            <label>jexl</label>
                    </labels>
                <created>Fri, 11 May 2012 08:15:10 +0000</created>
                <updated>Fri, 11 May 2012 12:40:16 +0000</updated>
                            <resolved>Fri, 11 May 2012 12:38:52 +0000</resolved>
                                    <version>2.1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13273196" author="henrib" created="Fri, 11 May 2012 12:20:03 +0000"  >&lt;p&gt;Hi;&lt;br/&gt;
About the &quot;MyMath&quot; class behavior, Jexl only looks by design at &quot;public&quot; classes; what you observe is thus not a bug (might be an RFE).&lt;br/&gt;
Division by zero will throw an exception if the JexlEngine (or at least the JexlArithmetic) is set to strict mode.&lt;/p&gt;

&lt;p&gt;That being said, the JexlArithmetic behavior can be altered by deriving the class.&lt;br/&gt;
And the &quot;preferred&quot; way of dealing with the &quot;Math&quot; class - or any class only meant to expose static methods - it to use it as a namespace.&lt;br/&gt;
The following code might help you getting started in this direction:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;IssuesTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Arithmetic132 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JexlArithmetic {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Arithmetic132() {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; divideZero(BigDecimal x) {
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ls = x.signum();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ls &amp;lt; 0) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.NEGATIVE_INFINITY;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ls &amp;gt; 0) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.POSITIVE_INFINITY;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.NaN;
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; divideZero(BigInteger x) {
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ls = x.signum();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ls &amp;lt; 0) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.NEGATIVE_INFINITY;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ls &amp;gt; 0) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.POSITIVE_INFINITY;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.NaN;
            }
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; divide(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; left, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; right) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; right == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; controlNullNullOperands();
            }
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; either are bigdecimal use that type
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; BigDecimal || right &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; BigDecimal) {
                BigDecimal l = toBigDecimal(left);
                BigDecimal r = toBigDecimal(right);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigDecimal.ZERO.equals(r)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; divideZero(l);
                }
                BigDecimal result = l.divide(r, getMathContext());
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; narrowBigDecimal(left, right, result);
            }
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; either are floating point (&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; or &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;) use &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isFloatingPointNumber(left) || isFloatingPointNumber(right)) {
                &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; l = toDouble(left);
                &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; r = toDouble(right);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;(l / r);
            }
            &lt;span class=&quot;code-comment&quot;&gt;// otherwise treat as integers
&lt;/span&gt;            BigInteger l = toBigInteger(left);
            BigInteger r = toBigInteger(right);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigInteger.ZERO.equals(r)) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; divideZero(l);
            }
            BigInteger result = l.divide(r);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; narrowBigInteger(left, right, result);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; mod(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; left, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; right) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; right == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; controlNullNullOperands();
            }
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; either are bigdecimal use that type
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (left &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; BigDecimal || right &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; BigDecimal) {
                BigDecimal l = toBigDecimal(left);
                BigDecimal r = toBigDecimal(right);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigDecimal.ZERO.equals(r)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; divideZero(l);
                }
                BigDecimal remainder = l.remainder(r, getMathContext());
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; narrowBigDecimal(left, right, remainder);
            }
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; either are floating point (&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; or &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;) use &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isFloatingPointNumber(left) || isFloatingPointNumber(right)) {
                &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; l = toDouble(left);
                &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; r = toDouble(right);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;(l % r);
            }
            &lt;span class=&quot;code-comment&quot;&gt;// otherwise treat as integers
&lt;/span&gt;            BigInteger l = toBigInteger(left);
            BigInteger r = toBigInteger(right);
            BigInteger result = l.mod(r);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BigInteger.ZERO.equals(r)) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; divideZero(l);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; narrowBigInteger(left, right, result);
        }
    }

    JexlEngine createJexl132() {
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; ns = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
        ns.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;math&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.class);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Arithmetic132(), ns, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test132a() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = createJexl132();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;1/0&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; evaluate = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.isInfinite((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) evaluate));

        expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;-1/0&quot;&lt;/span&gt;;
        evaluate = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.isInfinite((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) evaluate));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test132b() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = createJexl132();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;1.0/0.0&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; evaluate = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.isInfinite((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) evaluate));

        expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;-1.0/0&quot;&lt;/span&gt;;
        evaluate = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.isInfinite((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) evaluate));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test132c() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = createJexl132();

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;math:abs(-42)&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; evaluate = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertEquals(42, evaluate);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="13273205" author="freish" created="Fri, 11 May 2012 12:40:16 +0000"  >&lt;p&gt;Thank you for reply.This is a big help!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-131]  UnifiedJexl (2.1.x)  / Jxlt (3.0) parsing may fail with NPE</title>
                <link>https://issues.apache.org/jira/browse/JEXL-131</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;From Clay Bruce email:&lt;br/&gt;
the offending code is the method startsWith which can be found at line 1345 in UnifiedJEXL.java.&lt;br/&gt;
Problem is that sequence is not tested to see if the index is available before trying to access it.&lt;/p&gt;

&lt;p&gt;A source with lines starting with leading spaces will trigger the bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12553426">JEXL-131</key>
            <summary> UnifiedJexl (2.1.x)  / Jxlt (3.0) parsing may fail with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Apr 2012 21:53:17 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:15 +0000</updated>
                            <resolved>Tue, 1 May 2012 20:26:35 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13266039" author="henrib" created="Tue, 1 May 2012 20:26:35 +0000"  >&lt;p&gt;Fixed in part of commit revision 1332806:&lt;/p&gt;

&lt;p&gt;jexl2/pom.xml&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/Interpreter.java&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/JexlEngine.java&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/JexlException.java&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/ObjectContext.java&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/UnifiedJEXL.java&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
jexl2/src/main/java/org/apache/commons/jexl2/parser/ASTNumberLiteral.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/ArithmeticTest.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/ArrayLiteralTest.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/ExceptionTest.java&lt;br/&gt;
jexl2/src/test/java/org/apache/commons/jexl2/IssuesTest.java&lt;/p&gt;</comment>
                            <comment id="13430775" author="sebb@apache.org" created="Wed, 8 Aug 2012 00:43:29 +0000"  >&lt;p&gt;See also:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://apache-commons.680414.n4.nabble.com/jexl-Unified-jexl-throws-exception-when-processing-white-space-in-file-tt4578778.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-commons.680414.n4.nabble.com/jexl-Unified-jexl-throws-exception-when-processing-white-space-in-file-tt4578778.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15204274" author="henrib" created="Mon, 21 Mar 2016 14:10:15 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-130] Ternary Conditional fails for Object values</title>
                <link>https://issues.apache.org/jira/browse/JEXL-130</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The documentation states on &lt;a href=&quot;http://commons.apache.org/jexl/reference/syntax.html#Operators&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/jexl/reference/syntax.html#Operators&lt;/a&gt; :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The usual ternary conditional operator condition ? if_true : if_false operator can be used as well as the&lt;br/&gt;
abbreviation value ?: if_false which returns the value if its evaluation is defined, non-null and non-false&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For object values however, it seems that this definition no longer holds in 2.1 and higher.&lt;/p&gt;

&lt;p&gt;The following unittests run successfully in 2.0.1, but the test &quot;ternaryConditional_mapContainsObject_shouldReturnObject&quot; fails in 2.1 and 2.1.1.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl2.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.*;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JexlTernaryConditionalTest
{
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void ternaryConditional_mapContainsString_shouldReturnString()
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; myName = &lt;span class=&quot;code-quote&quot;&gt;&quot;Test.Name&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; myValue = &lt;span class=&quot;code-quote&quot;&gt;&quot;Test.Value&quot;&lt;/span&gt;;

        JexlEngine myJexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        MapContext myMapContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        myMapContext.set(myName, myValue);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; myObjectWithTernaryConditional = myJexlEngine.createScript(myName + &lt;span class=&quot;code-quote&quot;&gt;&quot;?:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;).execute(myMapContext);
        Assert.assertEquals(myValue, myObjectWithTernaryConditional);
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void ternaryConditional_mapContainsObject_shouldReturnObject()
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; myName = &lt;span class=&quot;code-quote&quot;&gt;&quot;Test.Name&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; myValue = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;();

        JexlEngine myJexlEngine = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        MapContext myMapContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        myMapContext.set(myName, myValue);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; myObjectWithTernaryConditional = myJexlEngine.createScript(myName + &lt;span class=&quot;code-quote&quot;&gt;&quot;?:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;).execute(myMapContext);
        Assert.assertEquals(myValue, myObjectWithTernaryConditional);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12545807">JEXL-130</key>
            <summary>Ternary Conditional fails for Object values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="wbakker">William Bakker</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Mar 2012 10:51:10 +0000</created>
                <updated>Mon, 21 Mar 2016 14:10:08 +0000</updated>
                            <resolved>Fri, 9 Mar 2012 14:52:48 +0000</resolved>
                                    <version>2.1</version>
                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13226108" author="henrib" created="Fri, 9 Mar 2012 14:43:53 +0000"  >&lt;p&gt;Confirmed as bug; fix to come in JexlArithmetic.toBoolean() // non null values that can not be interpreted as boolean should return true&lt;/p&gt;</comment>
                            <comment id="13226118" author="henrib" created="Fri, 9 Mar 2012 14:52:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;/a&gt;&lt;br/&gt;
Committed revision 1298857.&lt;/p&gt;

&lt;p&gt;(NOT trunk BUT 2.0 branch!)&lt;/p&gt;</comment>
                            <comment id="13226126" author="henrib" created="Fri, 9 Mar 2012 15:11:16 +0000"  >&lt;p&gt;Thanks William! Very clear bug case btw.&lt;/p&gt;</comment>
                            <comment id="15204248" author="henrib" created="Mon, 21 Mar 2016 14:10:08 +0000"  >&lt;p&gt;Update issues resolved in 3.0 to closed &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-129] Inner type attributes cannot be resolved in expressions</title>
                <link>https://issues.apache.org/jira/browse/JEXL-129</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When using inner types e.g. for unit tests, it is impossible to resolve bean attributes from beans that are otherwise available in the JexlContext. I don&apos;t know about the implications for real world systems, but in testing this can be a pain.&lt;/p&gt;

&lt;p&gt;Junit Example: &lt;/p&gt;

&lt;p&gt;package test;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.jexl2.Expression;&lt;br/&gt;
import org.apache.commons.jexl2.JexlContext;&lt;br/&gt;
import org.apache.commons.jexl2.JexlEngine;&lt;br/&gt;
import org.apache.commons.jexl2.MapContext;&lt;br/&gt;
import org.junit.Test;&lt;/p&gt;

&lt;p&gt;import static junit.framework.Assert.assertEquals;&lt;/p&gt;

&lt;p&gt;public class TestJEXL {&lt;br/&gt;
    @Test&lt;br/&gt;
    public void test() &lt;/p&gt;
{
        JexlEngine jexl = new JexlEngine();
        Expression exp = jexl.createExpression(&quot;b.i + b.i&quot;);

        FakeBean b = new FakeBean();
        JexlContext jc = new MapContext();
        jc.set(&quot;b&quot;, b);

        Object results = exp.evaluate(jc);
        System.out.println(results);
        assertEquals(20,results);

    }

&lt;p&gt;    private static class FakeBean {&lt;br/&gt;
        private int i = 10;&lt;br/&gt;
        private String key = &quot;myval&quot;;&lt;/p&gt;

&lt;p&gt;        public int getI() &lt;/p&gt;
{
            return i;
        }

&lt;p&gt;        public void setI(int i) &lt;/p&gt;
{
            this.i = i;
        }

&lt;p&gt;        public String getKey() &lt;/p&gt;
{
            return key;
        }

&lt;p&gt;        public void setKey(String key) &lt;/p&gt;
{
            this.key = key;
        }

&lt;p&gt;    }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 6&lt;/p&gt;</environment>
        <key id="12541806">JEXL-129</key>
            <summary>Inner type attributes cannot be resolved in expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="aagudo">Antonio Agudo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 14:30:01 +0000</created>
                <updated>Mon, 21 Mar 2016 14:18:22 +0000</updated>
                            <resolved>Sat, 11 Feb 2012 08:35:02 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13203661" author="joehni" created="Wed, 8 Feb 2012 15:24:07 +0000"  >&lt;p&gt;The class is private, therefore reflection fails. It does not matter that the methods itself are public.&lt;/p&gt;</comment>
                            <comment id="13206055" author="henrib" created="Sat, 11 Feb 2012 08:35:02 +0000"  >&lt;p&gt;As Joerg described, private classes/fields are not accessible to reflection thus can not be called through JEXL.&lt;br/&gt;
It would be too dangerous/insecure to call setAccessible and/or use a very liberal security policy (ReflectPermission. suppressAccessChecks).&lt;/p&gt;</comment>
                            <comment id="15204300" author="henrib" created="Mon, 21 Mar 2016 14:18:22 +0000"  >&lt;p&gt;Post 3.0 clean up&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227093</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-125] Unable to invoke method with ObjectContext</title>
                <link>https://issues.apache.org/jira/browse/JEXL-125</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Hi, I&apos;m trying to invoke a method on Object context but I can&apos;t get it to work.&lt;br/&gt;
I don&apos;t know if it&apos;s a bug or I&apos;m doing it wrong.&lt;/p&gt;

&lt;p&gt;Here it is the code I&apos;m using:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;JexlTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; it.test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl2.Expression;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl2.JexlContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl2.JexlEngine;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.jexl2.ObjectContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JexlTest {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; method() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;OK&quot;&lt;/span&gt;;
        }
    }
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        jexl.setStrict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        Expression e = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;method()&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;Foo&amp;gt;(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(e.evaluate(jc));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the exception I&apos;m getting:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.jexl2.JexlException: it.test.JexlTest.test@19![0,8]: &apos;method();&apos; method error
	at org.apache.commons.jexl2.Interpreter.call(Interpreter.java:1078)
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1100)
	at org.apache.commons.jexl2.parser.ASTMethodNode.jjtAccept(ASTMethodNode.java:18)
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1317)
	at org.apache.commons.jexl2.parser.ASTReference.jjtAccept(ASTReference.java:18)
	at org.apache.commons.jexl2.Interpreter.interpret(Interpreter.java:232)
	at org.apache.commons.jexl2.ExpressionImpl.evaluate(ExpressionImpl.java:65)
	at it.test.JexlTest.test(JexlTest.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:274)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:242)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:58)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:240)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:48)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:233)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:303)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:202)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.apache.commons.jexl2.JexlException$Property: org.apache.commons.jexl2.ObjectContext.get@42![0,9]: &apos;#0.method;&apos; inaccessible or unknown property #0
	at org.apache.commons.jexl2.Interpreter.visit(Interpreter.java:1341)
	at org.apache.commons.jexl2.parser.ASTReference.jjtAccept(ASTReference.java:18)
	at org.apache.commons.jexl2.JexlEngine.getProperty(JexlEngine.java:615)
	at org.apache.commons.jexl2.JexlEngine.getProperty(JexlEngine.java:587)
	at org.apache.commons.jexl2.ObjectContext.get(ObjectContext.java:42)
	at org.apache.commons.jexl2.Interpreter.call(Interpreter.java:1047)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using a MapContext with variable &quot;foo&quot; set to &apos;new Foo()&apos; and the expression &quot;foo.method()&quot; gives no error.&lt;br/&gt;
Anyway for my use it&apos;s more practical a ObjectContext, as I have only one object in the context.&lt;/p&gt;

&lt;p&gt;Thank you for very much and keep up the excellent work!&lt;/p&gt;

&lt;p&gt;Matteo Trotta&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6.0_20 on Windows 7&lt;/p&gt;</environment>
        <key id="12538450">JEXL-125</key>
            <summary>Unable to invoke method with ObjectContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="mtrotta">Matteo Trotta</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2012 18:51:40 +0000</created>
                <updated>Tue, 22 Mar 2016 17:02:33 +0000</updated>
                            <resolved>Tue, 22 Mar 2016 17:02:33 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13186602" author="maurizio.cucchiara" created="Sun, 15 Jan 2012 21:43:38 +0000"  >&lt;p&gt;I&apos;m not a JEXL guru, but looking at the source code, I guess that the code fragment you provided is not right (see below examples).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Example 1&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        jexl.setStrict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectContext&amp;lt;Foo&amp;gt;(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo());
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;OK&quot;&lt;/span&gt;, jc.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;method()&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Example 2&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        jexl.setStrict(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        Expression e = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;method()&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FooContext(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo());
        Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;FOOBAR&quot;&lt;/span&gt;, e.evaluate(jc));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooContext &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ObjectContext&amp;lt;Foo&amp;gt; {
        FooContext(JexlEngine jexl, Foo foo) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(jexl, foo);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; method() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;FOOBAR&quot;&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Just another side note: when you are not sure if you are facing a bug or not, I strongly advise to ask to &lt;a href=&quot;http://commons.apache.org/jexl/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the user ML&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;HTH&lt;/p&gt;</comment>
                            <comment id="13186801" author="henrib" created="Mon, 16 Jan 2012 09:20:47 +0000"  >&lt;p&gt;This indeed is not a bug; the JexlContext only solves variables. To solve &apos;functions&apos;, you need a NamespaceResolver.&lt;br/&gt;
In case Maurizio&apos;s solution is not generic enough, you need an ObjectContext that implements NamespaceResolver. &lt;br/&gt;
Unfortunately, the wrapped object in ObjectContext is not accessible (private) so some duplication/copy/paste is needed.&lt;br/&gt;
One solution can thus be the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TestFoo125.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo125 {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; method() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;OK&quot;&lt;/span&gt;;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo125Context &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; JexlContext, NamespaceResolver {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JexlEngine jexl;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Foo125 object;
        
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resolveNamespace(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Foo125Context(JexlEngine engine, Foo125 wrapped) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.jexl = engine;
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.object = wrapped;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; jexl.getProperty(object, name);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void set(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value) {
            jexl.setProperty(object, name, value);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; has(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; jexl.getUberspect().getPropertyGet(object, name, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test125() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        Expression e = jexl.createExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;method()&quot;&lt;/span&gt;);
        JexlContext jc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo125Context(jexl, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo125());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;OK&quot;&lt;/span&gt;, e.evaluate(jc));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13186806" author="henrib" created="Mon, 16 Jan 2012 09:22:54 +0000"  >&lt;p&gt;Not an issue, however ObjectContext should expose the wrapped object as &apos;protected&apos; (will do in 3.0).&lt;/p&gt;</comment>
                            <comment id="13186812" author="mtrotta" created="Mon, 16 Jan 2012 09:42:55 +0000"  >&lt;p&gt;Ok, at the moment I can use the solution proposed by Maurizio in Example 1 as workaround.&lt;/p&gt;

&lt;p&gt;Perhaps this is more a feature request than a bug, but why not make ObjectContext already implement NamespaceResolver as in the example you proposed?&lt;/p&gt;

&lt;p&gt;Then there would be no need to extend ObjectContext and access a protected variable, ObjectContext would do all the job.&lt;/p&gt;

&lt;p&gt;Thank you very much&lt;/p&gt;</comment>
                            <comment id="15206786" author="henrib" created="Tue, 22 Mar 2016 17:01:26 +0000"  >&lt;p&gt;Implemented in 3.0 as described by Matteo&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-124] Array parameters to methods don&apos;t work anymore</title>
                <link>https://issues.apache.org/jira/browse/JEXL-124</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I have some code that worked in 2.0.1 and fails in 2.1.  It looks like this:&lt;/p&gt;

&lt;p&gt;${tool.jsbuilder(&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;form2js&amp;#39;, &amp;#39;js2form&amp;#39;, &amp;#39;jquery.dirtyform&amp;#39;&amp;#93;&lt;/span&gt;)}&lt;/p&gt;

&lt;p&gt;(it&apos;s being called from a cambridge template, but that doesn&apos;t matter).  The jsbuilder() method simply takes a String[].&lt;/p&gt;

&lt;p&gt;Now it throws an exception, the exact nature of which is getting eaten by something.  The error message looks like &quot;Could not execute the expression: Error evaluating exception on line: 13, column: 15, expression: tool.jsbuilder([&quot;... and then the parameters.&lt;/p&gt;

&lt;p&gt;Sorry about not making a nice test case out of this but I&apos;m in a hurry and reverting to 2.0.1 for now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535360">JEXL-124</key>
            <summary>Array parameters to methods don&apos;t work anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="stickfigure">Jeff Schnitzer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2011 19:56:26 +0000</created>
                <updated>Fri, 30 Dec 2011 10:18:48 +0000</updated>
                            <resolved>Thu, 15 Dec 2011 23:43:33 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13170530" author="henrib" created="Thu, 15 Dec 2011 22:23:04 +0000"  >&lt;p&gt;Reproduced on test case, something about org.apache.commons.jexl2.internal.MethodExecutor handleVarArgs.&lt;/p&gt;</comment>
                            <comment id="13170565" author="henrib" created="Thu, 15 Dec 2011 23:12:06 +0000"  >&lt;p&gt;Committed fix revision 1214986.&lt;br/&gt;
Seems like a regression induced by the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-101&quot; title=&quot;Vararg methods where the first argument is no vararg can not be called with only the fixed parameters given&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-101&quot;&gt;&lt;del&gt;JEXL-101&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13170587" author="henrib" created="Thu, 15 Dec 2011 23:43:33 +0000"  >&lt;p&gt;Fixed in 2.0 branch&lt;/p&gt;</comment>
                            <comment id="13171366" author="sebb@apache.org" created="Sat, 17 Dec 2011 00:27:36 +0000"  >&lt;p&gt;I&apos;ve just uploaded a 2.1.1 SNAPSHOT build if you want to give that a try:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl/2.1.1-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl/2.1.1-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13177609" author="henrib" created="Fri, 30 Dec 2011 10:18:48 +0000"  >&lt;p&gt;Fixed and released in 2.1.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xodz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-117] JEXL not evaluating java Long</title>
                <link>https://issues.apache.org/jira/browse/JEXL-117</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Trying to evaluate a long in a Jexl expression and the engine tries to cast it to an Integer.&lt;/p&gt;

&lt;p&gt;Expression e = engine.createExpression(&quot;TIMESTAMP &amp;gt; 20100102000000&quot;);&lt;br/&gt;
JexlContext ctx = new MapContext();&lt;br/&gt;
ctx.set(&quot;TIMESTAMP&quot;, new Long(&quot;20100103000000&quot;));&lt;br/&gt;
e.evaluate(ctx);&lt;/p&gt;

&lt;p&gt;throws a NumberFormatException  at Integer.parseInt().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12514211">JEXL-117</key>
            <summary>JEXL not evaluating java Long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="dlmarion">Dave Marion</reporter>
                        <labels>
                            <label>Long</label>
                            <label>NumberFormatException</label>
                    </labels>
                <created>Fri, 15 Jul 2011 12:36:44 +0000</created>
                <updated>Wed, 14 Dec 2011 09:36:56 +0000</updated>
                            <resolved>Fri, 15 Jul 2011 18:36:00 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13065921" author="dlmarion" created="Fri, 15 Jul 2011 13:35:09 +0000"  >&lt;p&gt;Related to this, I see that there are no node types for Long and Double, only Integer and Float. Why is that? Could that be a potential solution to this problem?&lt;/p&gt;</comment>
                            <comment id="13066120" author="henrib" created="Fri, 15 Jul 2011 18:36:00 +0000"  >&lt;p&gt;I&apos;ve added a test in the trunk based on your code (see IssuesTest.test117()); the issue does not appear anymore.&lt;br/&gt;
I suspect this was the same pb as &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-112&quot; title=&quot;Cannot parse Integer.MIN_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-112&quot;&gt;&lt;del&gt;JEXL-112&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13066123" author="dlmarion" created="Fri, 15 Jul 2011 18:37:15 +0000"  >&lt;p&gt;Great, do you know when 2.0.2 will be released? I just put in a workaround by extending the Interpreter.&lt;/p&gt;</comment>
                            <comment id="13066421" author="henrib" created="Sat, 16 Jul 2011 12:35:47 +0000"  >&lt;p&gt;No defined date and most likely a 2.1 instead (see &lt;a href=&quot;http://apache-commons.680414.n4.nabble.com/JEXL-Towards-a-JEXL-2-1-release-tt3669436.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-commons.680414.n4.nabble.com/JEXL-Towards-a-JEXL-2-1-release-tt3669436.html&lt;/a&gt;).&lt;br/&gt;
In the mean time, you can use a 2.0.2-SNAPSHOT available in &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-jexl/&lt;/a&gt; .&lt;br/&gt;
Cheers,&lt;br/&gt;
Henrib&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-112] Cannot parse Integer.MIN_VALUE</title>
                <link>https://issues.apache.org/jira/browse/JEXL-112</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Cannot parse Integer.MIN_VALUE, because parsing does not take account of the sign.&lt;/p&gt;

&lt;p&gt;Sample code to show the error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JEXL = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
JEXL.createScript(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.toString(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE)); &lt;span class=&quot;code-comment&quot;&gt;// OK
&lt;/span&gt;JEXL.createScript(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.toString(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MIN_VALUE+1)); &lt;span class=&quot;code-comment&quot;&gt;// OK
&lt;/span&gt;JEXL.createScript(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.toString(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MIN_VALUE)); &lt;span class=&quot;code-comment&quot;&gt;// FAILS with java.lang.NumberFormatException: For input string: &lt;span class=&quot;code-quote&quot;&gt;&quot;2147483648&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that the input does not include the minus sign, which is presumably going to be applied later.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12508944">JEXL-112</key>
            <summary>Cannot parse Integer.MIN_VALUE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jun 2011 11:27:41 +0000</created>
                <updated>Wed, 14 Dec 2011 09:33:37 +0000</updated>
                            <resolved>Tue, 14 Jun 2011 13:36:50 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13049175" author="henrib" created="Tue, 14 Jun 2011 13:36:50 +0000"  >&lt;p&gt;Committed revision 1135562.&lt;br/&gt;
M       src/test/java/org/apache/commons/jexl2/IssuesTest.java&lt;br/&gt;
M       src/test/java/org/apache/commons/jexl2/ArithmeticTest.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/Interpreter.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/parser/Parser.jjt&lt;br/&gt;
D       src/main/java/org/apache/commons/jexl2/parser/ASTIntegerLiteral.java&lt;br/&gt;
D       src/main/java/org/apache/commons/jexl2/parser/ASTFloatLiteral.java&lt;br/&gt;
A  +    src/main/java/org/apache/commons/jexl2/parser/ASTNumberLiteral.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/Debugger.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/internal/introspection/IntrospectorBase.java&lt;/p&gt;

&lt;p&gt;Also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-24&quot; title=&quot;Support Long for integer literal instead of Integers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-24&quot;&gt;&lt;del&gt;JEXL-24&lt;/del&gt;&lt;/a&gt;; the fix adds syntax for literals of type double, big decimal, long and&lt;br/&gt;
big integer.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12351793">JEXL-24</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46624</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xqsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-111] expression execute error</title>
                <link>https://issues.apache.org/jira/browse/JEXL-111</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;i run jexl with bsf3.1. The jars are:bsf-api-3.1.jar,commons-jexl-2.0.1.jar and commons-logging-1.1.1.jar.&lt;br/&gt;
the express is as follows:&lt;br/&gt;
&quot;((x&amp;gt;0)?\&quot;FirstValue\&quot;+(y-x):\&quot;SecondValue\&quot;+x)&quot;.&lt;br/&gt;
however the value y is ,if x is a integer,the expression get right.but if x is a float point number such as 1.0,an Exception is thrown:&lt;br/&gt;
org.apache.commons.jexl2.JexlException: org.apache.commons.jexl2.scripting.JexlScriptEngine.eval@214!&lt;span class=&quot;error&quot;&gt;&amp;#91;0,5&amp;#93;&lt;/span&gt;: &apos;x &amp;gt; 0? &apos;FirstValue&apos; + y - x : &apos;SecondValue&apos; + x;&apos; &amp;gt; error&lt;/p&gt;


&lt;p&gt;Then,what&apos;s the matter with this?&lt;/p&gt;</description>
                <environment>&lt;p&gt;sun hotspot&lt;/p&gt;</environment>
        <key id="12507358">JEXL-111</key>
            <summary>expression execute error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="freish">freish</reporter>
                        <labels>
                            <label>bsf</label>
                    </labels>
                <created>Mon, 16 May 2011 13:04:21 +0000</created>
                <updated>Wed, 14 Dec 2011 09:33:53 +0000</updated>
                            <resolved>Sat, 21 May 2011 15:06:08 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="13037395" author="henrib" created="Sat, 21 May 2011 14:53:46 +0000"  >&lt;p&gt;This seems to be fixed in 2.0.2(snapshot).&lt;br/&gt;
I&apos;ve added a specific test based on your case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-109] error when i define a variable named &lt;LITERAL&gt;.&lt;LITERAL&gt;.  </title>
                <link>https://issues.apache.org/jira/browse/JEXL-109</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description></description>
                <environment></environment>
        <key id="12498971">JEXL-109</key>
            <summary>error when i define a variable named &lt;LITERAL&gt;.&lt;LITERAL&gt;.  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="publicocean0">Cristian Lorenzetto</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Feb 2011 23:10:07 +0000</created>
                <updated>Wed, 14 Dec 2011 09:36:22 +0000</updated>
                            <resolved>Thu, 17 Mar 2011 19:10:07 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12996371" author="henrib" created="Fri, 18 Feb 2011 12:20:42 +0000"  >&lt;p&gt;Do you have a test case for the kind of expression you&apos;d like to use?&lt;br/&gt;
For instance, something like the following:&lt;br/&gt;
&amp;lt;code&amp;gt;&lt;br/&gt;
    public void test109() throws Exception &lt;/p&gt;
{
        JexlEngine jexl = new JexlEngine();
        Object value;
        JexlContext context = new MapContext();
        context.set(&quot;foo.bar&quot;, 40);
        value = jexl.createExpression(&quot;foo.bar + 2&quot;).evaluate(context);
        assertEquals(42, value);
    }
&lt;p&gt;&amp;lt;/code&amp;gt;&lt;br/&gt;
If you are really trying to define a variable named &quot;foo.bar.&quot;, this is not a bug but an RFE that I&apos;d vote against adding without a use-case.&lt;br/&gt;
Cheers&lt;/p&gt;</comment>
                            <comment id="13008079" author="henrib" created="Thu, 17 Mar 2011 19:10:07 +0000"  >&lt;p&gt;Since it was never possible to do it, this would be a new feature. Besides the fact that no scripting language I know allows this syntax, there is no strong case for it. Thus, wont fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-108] parsing error if i define a empty literal array/map</title>
                <link>https://issues.apache.org/jira/browse/JEXL-108</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description></description>
                <environment></environment>
        <key id="12498970">JEXL-108</key>
            <summary>parsing error if i define a empty literal array/map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="publicocean0">Cristian Lorenzetto</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Feb 2011 23:07:21 +0000</created>
                <updated>Wed, 14 Dec 2011 09:32:29 +0000</updated>
                            <resolved>Fri, 18 Feb 2011 12:51:13 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12996383" author="henrib" created="Fri, 18 Feb 2011 12:51:13 +0000"  >&lt;p&gt;Modified parser and associated classes to accept empty array literal &quot;[]&quot; and empty map literal &quot;{ : }&quot;.&lt;br/&gt;
Committed revision 1071986.&lt;br/&gt;
M       src/test/java/org/apache/commons/jexl2/IssuesTest.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/parser/Parser.jjt&lt;br/&gt;
A       src/main/java/org/apache/commons/jexl2/parser/ASTMapLiteral.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/parser/ASTArrayLiteral.java&lt;br/&gt;
M       src/main/java/org/apache/commons/jexl2/Debugger.java&lt;br/&gt;
M       pom.xml&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xonb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-107] literals and parenthesized expressions can not be used as references</title>
                <link>https://issues.apache.org/jira/browse/JEXL-107</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&apos;Q4&apos;.toLowerCase() results in a parsing exception;&lt;br/&gt;
(3 + 4).toString() results in a parsing exception&lt;/p&gt;</description>
                <environment></environment>
        <key id="12497999">JEXL-107</key>
            <summary>literals and parenthesized expressions can not be used as references</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Feb 2011 15:54:29 +0000</created>
                <updated>Wed, 14 Dec 2011 09:32:14 +0000</updated>
                            <resolved>Tue, 8 Feb 2011 16:09:25 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12992021" author="henrib" created="Tue, 8 Feb 2011 16:09:25 +0000"  >&lt;p&gt;Parser.jjt, Interpreter.java, Debugger.java, IssuesTest.java&lt;br/&gt;
Committed 1068460.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xohz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-105] Array literals are considered constant even when they are not</title>
                <link>https://issues.apache.org/jira/browse/JEXL-105</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JexlContext context = new MapContext();&lt;br/&gt;
Expression selectExp = new JexlEngine().createExpression(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;a.propA&amp;#93;&lt;/span&gt;&quot;);&lt;br/&gt;
context.set(&quot;a&quot;, new A(&quot;a1&quot;, &quot;p1&quot;));&lt;br/&gt;
System.out.println(Arrays.toString((Object[])selectExp.evaluate(context)));		&lt;/p&gt;

&lt;p&gt;--&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;p1&amp;#93;&lt;/span&gt;		&lt;/p&gt;

&lt;p&gt;//selectExp = new JexlEngine().createExpression(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;a.propA&amp;#93;&lt;/span&gt;&quot;);&lt;br/&gt;
context.set(&quot;a&quot;, new A(&quot;a2&quot;, &quot;p2&quot;));&lt;br/&gt;
System.out.println(Arrays.toString((Object[])selectExp.evaluate(context)));		&lt;/p&gt;

&lt;p&gt;--&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;p1&amp;#93;&lt;/span&gt; correct answer should be &lt;span class=&quot;error&quot;&gt;&amp;#91;p2&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;// A&apos;s class definition&lt;br/&gt;
public class A {&lt;/p&gt;

&lt;p&gt;	String nameA;&lt;/p&gt;

&lt;p&gt;	String propA;&lt;/p&gt;

&lt;p&gt;	public A(String nameA, String propA) &lt;/p&gt;
{
		this.nameA = nameA;
		this.propA = propA;
	}

&lt;p&gt;	@Override&lt;br/&gt;
	public String toString() &lt;/p&gt;
{
		return &quot;A [nameA=&quot; + nameA + &quot;, propA=&quot; + propA + &quot;]&quot;;
	}

&lt;p&gt;	public String getNameA() &lt;/p&gt;
{
		return nameA;
	}

&lt;p&gt;	public String getPropA() &lt;/p&gt;
{
		return propA;
	}
&lt;p&gt;}&lt;/p&gt;
</description>
                <environment>&lt;p&gt;JDK 1.6 SE on Windows XP&lt;/p&gt;</environment>
        <key id="12493724">JEXL-105</key>
            <summary>Array literals are considered constant even when they are not</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="cary.thompson">Cary Thompson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Dec 2010 02:36:43 +0000</created>
                <updated>Wed, 14 Dec 2011 09:32:59 +0000</updated>
                            <resolved>Tue, 21 Dec 2010 17:34:23 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12973731" author="henrib" created="Tue, 21 Dec 2010 16:13:21 +0000"  >&lt;p&gt;Thanks for the test case, bug is confirmed.&lt;br/&gt;
Culprit is Interpreter#visit(ASTArrayLiteral node, Object data) which wrongfully considers an array literal as a constant evaluation.&lt;/p&gt;</comment>
                            <comment id="12973784" author="henrib" created="Tue, 21 Dec 2010 17:34:23 +0000"  >&lt;p&gt;Fixed at revision 1051571.&lt;br/&gt;
Added JexlNode.isConstant() to allow detection of constant expressions; &lt;br/&gt;
Fixed ASTArrayLiteral to detect at parsing time whether the array is constant or not;&lt;br/&gt;
Added specific test105 in IssuesTest&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xohb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-104] NPE in JexlArithmetic when an Array-Expression containing a null is used.</title>
                <link>https://issues.apache.org/jira/browse/JEXL-104</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When using the Array-Expression like &lt;span class=&quot;error&quot;&gt;&amp;#91;x, y, z&amp;#93;&lt;/span&gt; a NPE occurs when one of the array elements is null.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;import org.apache.commons.jexl2.Expression;&lt;br/&gt;
import org.apache.commons.jexl2.JexlEngine;&lt;br/&gt;
import org.apache.commons.jexl2.MapContext;&lt;/p&gt;

&lt;p&gt;public class JexlArithmeticBug {&lt;br/&gt;
	public static void main(String[] args) &lt;/p&gt;
{
		JexlEngine engine = new JexlEngine();
		String jexlExp = &quot;[null, null]&quot;;
		Expression e = engine.createExpression(jexlExp);
		System.out.println(e.evaluate(new MapContext()));
	}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;As one can see in the Stacktrace, JexlArithmetic.narrowArrayType doesn&apos;t expect null values at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12471268">JEXL-104</key>
            <summary>NPE in JexlArithmetic when an Array-Expression containing a null is used.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="aha@scireum.de">Andreas Haufler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2010 10:04:03 +0000</created>
                <updated>Wed, 14 Dec 2011 09:33:15 +0000</updated>
                            <resolved>Wed, 11 Aug 2010 18:32:11 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12897201" author="aha@scireum.de" created="Wed, 11 Aug 2010 10:07:50 +0000"  >&lt;p&gt;The first file (JexlArithmeticBug.java) shows the bug. The second file (FixedJexlArithmetic.java) is a suggested fix, BUT it is just a give re-write of the original code. I&apos;m not too deep into reflection with arrays and all that so the original author might want to take a look at it and might apply a better fix.&lt;/p&gt;</comment>
                            <comment id="12897372" author="henrib" created="Wed, 11 Aug 2010 18:32:11 +0000"  >&lt;p&gt;Thanks Andreas for catching this one and submitting a fix.&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;br/&gt;
src/test/java/org/apache/commons/jexl2/ArrayLiteralTest.java&lt;br/&gt;
Committed revision 984516.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451765" name="FixedJexlArithmetic.java" size="1549" author="aha@scireum.de" created="Wed, 11 Aug 2010 10:07:50 +0000"/>
                            <attachment id="12451764" name="JexlArithmeticBug.java" size="403" author="aha@scireum.de" created="Wed, 11 Aug 2010 10:07:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xojb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-103] Inputstream reads no byte if it is called into a class runnable </title>
                <link>https://issues.apache.org/jira/browse/JEXL-103</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;Inputstream instance  reads no byte if it is called into a class runnable. if i call the same function in the java code it works , if i call it in the jexl code it enter in the function but than it dont read any bytes in the stream &lt;/p&gt;</description>
                <environment></environment>
        <key id="12469723">JEXL-103</key>
            <summary>Inputstream reads no byte if it is called into a class runnable </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="publicocean0">Cristian Lorenzetto</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jul 2010 15:46:37 +0000</created>
                <updated>Wed, 14 Dec 2011 09:35:17 +0000</updated>
                            <resolved>Fri, 18 Feb 2011 14:11:03 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12897373" author="henrib" created="Wed, 11 Aug 2010 18:35:28 +0000"  >&lt;p&gt;Can you submit a test case please ? I&apos;m not sure I understand your intention.&lt;/p&gt;</comment>
                            <comment id="12996420" author="henrib" created="Fri, 18 Feb 2011 14:11:03 +0000"  >&lt;p&gt;No test case and no news for a long time; dismissed as can not reproduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xruf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-101] Vararg methods where the first argument is no vararg can not be called with only the fixed parameters given</title>
                <link>https://issues.apache.org/jira/browse/JEXL-101</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When you have a public String testVarArgsMixed(Integer fixed, Integer[] args) in a class Test, put a test instance in the context and evaluate the expression test.testVarArgsMixed(1), the MethodExecutor is not able to find the method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463428">JEXL-101</key>
            <summary>Vararg methods where the first argument is no vararg can not be called with only the fixed parameters given</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="tobiasschulte">Tobias Schulte</reporter>
                        <labels>
                            <label>varargs</label>
                    </labels>
                <created>Fri, 30 Apr 2010 12:52:03 +0000</created>
                <updated>Wed, 14 Dec 2011 09:32:43 +0000</updated>
                            <resolved>Sat, 1 May 2010 09:51:08 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12862658" author="tobiasschulte" created="Fri, 30 Apr 2010 12:53:44 +0000"  >&lt;p&gt;This patch fixes the issue. &lt;/p&gt;</comment>
                            <comment id="12862823" author="henrib" created="Fri, 30 Apr 2010 19:28:36 +0000"  >&lt;p&gt;Good catch and thanks for the patch.&lt;/p&gt;

&lt;p&gt;There are in facts 2 causes:&lt;br/&gt;
The varargs handling in MethodExecutor.handleVarArgs which does not property address all cases (number parms, number args, null).&lt;br/&gt;
But also the compatibility check made performed by MethodKey.isApplicable which does not cover check the type of parameters before the vararg.&lt;br/&gt;
I should commit a fix in the trunk soon.&lt;/p&gt;</comment>
                            <comment id="12863002" author="henrib" created="Sat, 1 May 2010 09:51:08 +0000"  >&lt;p&gt;Committed revision 939962.&lt;br/&gt;
src/test/java/org/apache/commons/jexl2/MethodTest.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl2/internal/MethodExecutor.java&lt;br/&gt;
src/main/java/org/apache/commons/jexl2/internal/introspection/MethodKey.java&lt;/p&gt;</comment>
                            <comment id="12863255" author="tobiasschulte" created="Mon, 3 May 2010 07:08:32 +0000"  >&lt;p&gt;But in Java, when you make a vararg call, the args-array will never be null. The only way to have args be null, would be in calling &lt;/p&gt;

&lt;p&gt;test.callMixed(1, (Integer[])null);&lt;/p&gt;

&lt;p&gt;Especially, when calling&lt;/p&gt;

&lt;p&gt;test.callMixed(1, null);&lt;/p&gt;

&lt;p&gt;I would expect args to be an array of length one with null as element (and in the case of testCallMixedVarArgMethod a NullPointerException). &lt;/p&gt;</comment>
                            <comment id="12863257" author="joehni" created="Mon, 3 May 2010 07:55:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;But in Java, when you make a vararg call, the args-array will never be null.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is wrong.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test.callMixed(1);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this call the args array is null.&lt;/p&gt;</comment>
                            <comment id="12863259" author="tobiasschulte" created="Mon, 3 May 2010 08:06:32 +0000"  >&lt;p&gt;In the debugger of my IDE (Eclipse 3.5.1) when I step through&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test.callMixed(1);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the args-array is an empty array. &lt;/p&gt;</comment>
                            <comment id="12863274" author="tobiasschulte" created="Mon, 3 May 2010 08:42:05 +0000"  >&lt;p&gt;I wanted to give another example, that shows the real problem, but it seems that java.util.Formatter, where i thought would be a problem, itself is not consistent.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%1$s&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;outputs &quot;null&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%1$s %2$s %3$s&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;outputs &quot;null null null&quot; (but should throw a MissingFormatArgumentException, at least if I understand the documentation correctly)&lt;/p&gt;

&lt;p&gt;but&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%1$s %2$s %3$s&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;throws a MissingFormatArgumentException. &lt;/p&gt;

&lt;p&gt;Since we are using formatters I thought your optimization in MethodExecutor would cause MissingFormatArgumentExceptions, which it does not seem to do.&lt;/p&gt;

&lt;p&gt;But nontheless I would expect callMixed(1, null) to be equal to callMixed(1, new Integer[]&lt;/p&gt;
{null}
&lt;p&gt;).&lt;/p&gt;</comment>
                            <comment id="12863275" author="tobiasschulte" created="Mon, 3 May 2010 08:46:23 +0000"  >&lt;p&gt;OK, you are right, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test.callMixed(1, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;calls the method with args being null. I was sure, it would be an array of size 1. &lt;/p&gt;

&lt;p&gt;OK: in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
test.callMixed(1, value);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;args is an array of size 1 with args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; == null. Learned something new today. &lt;/p&gt;</comment>
                            <comment id="12863399" author="henrib" created="Mon, 3 May 2010 16:45:04 +0000"  >&lt;p&gt;revision 940507: added explicit comments in MethodExecutor and specific test in MethodTest.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443286" name="jexl-varargs.patch" size="5147" author="tobiasschulte" created="Fri, 30 Apr 2010 12:53:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xpdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-100] Array access expressions fail when evaluated twice and cache is enabled</title>
                <link>https://issues.apache.org/jira/browse/JEXL-100</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;When caching is enabled, a cached array expression using an integer literal will fail at evaluation, the integer literal throwing an exception trying to coerce a ListGetExecutor to Integer.&lt;br/&gt;
Sole workaround is to disable cache entirely which is not always possible; critical!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12460237">JEXL-100</key>
            <summary>Array access expressions fail when evaluated twice and cache is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Mar 2010 14:32:02 +0000</created>
                <updated>Wed, 7 Apr 2010 14:40:53 +0000</updated>
                            <resolved>Sun, 28 Mar 2010 16:45:05 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12850690" author="henrib" created="Sun, 28 Mar 2010 16:45:05 +0000"  >&lt;p&gt;New Revision: 928405&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=928405&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=928405&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Updated Parser.jjt to define all acceptable tokens resulting in cleaner lexer.&lt;br/&gt;
Added &apos;register&apos; syntax (#0-9) used by JexlEngine.&lt;/p&gt;
{s,g}
&lt;p&gt;etProperty: syntax only&lt;br/&gt;
valid through ALLOW_REGISTER flag and REGISTERS lexical state.&lt;br/&gt;
Completed literal handling (array, integer, string, float).&lt;/p&gt;

&lt;p&gt;Added:&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/parser/ASTArrayLiteral.java&lt;br/&gt;
(with props)&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/parser/ASTFloatLiteral.java&lt;br/&gt;
(with props)&lt;br/&gt;
Modified:&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/Interpreter.java&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/JexlArithmetic.java&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/JexlEngine.java&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/parser/ASTIntegerLiteral.java&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/parser/ASTStringLiteral.java&lt;br/&gt;
    commons/proper/jexl/trunk/src/main/java/org/apache/commons/jexl2/parser/Parser.jjt&lt;br/&gt;
    commons/proper/jexl/trunk/src/test/java/org/apache/commons/jexl2/JexlTestCase.java&lt;/p&gt;</comment>
                            <comment id="12854524" author="henrib" created="Wed, 7 Apr 2010 14:40:53 +0000"  >&lt;p&gt;Fix delivered through 2.0.1 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xo27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-98] Quote escaping cannot be escaped</title>
                <link>https://issues.apache.org/jira/browse/JEXL-98</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I want to invoke a &quot;replace&quot; method which (pretty much like String.replace()) takes three String parameters:&lt;/p&gt;

&lt;p&gt;function.replace(String text, String oldPart, String newPart)&lt;/p&gt;

&lt;p&gt;If I invoke it to replace single backslash characters with double backslash characters (which is admittedly a VERY special use case), I invoke it in my unit test with an expression like this one:&lt;/p&gt;

&lt;p&gt;  function.replace(&apos;DOMAIN\somename&apos;, &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;, &apos;\\\\&apos;)&lt;/p&gt;

&lt;p&gt;The result with JEXL 1.x was a string &quot;DOMAIN&lt;br class=&quot;atl-forced-newline&quot; /&gt;somename&quot;. But with JEXL 2, I get this error:&lt;/p&gt;

&lt;p&gt;2010-03-11 14:50:59,681 &lt;span class=&quot;error&quot;&gt;&amp;#91;CC:&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RC:&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;CN:&amp;#93;&lt;/span&gt; - &lt;span class=&quot;error&quot;&gt;&amp;#91;SYSTEM&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INVALID_EXPR&amp;#93;&lt;/span&gt; Invalid expression in configuration. Expression: &apos;function.replace(&apos;DOMAIN\myname&apos;, &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;, &apos;\\\\&apos;) / Exception: org.apache.commons.jexl2.JexlException: com.usp.sls.toolkit.expression.impl.Jexl2Provider.getScript@441tokenization failed&apos;&lt;br/&gt;
org.apache.commons.jexl2.JexlException: com.usp.sls.toolkit.expression.impl.Jexl2Provider.getScript@441tokenization failed&lt;br/&gt;
	at org.apache.commons.jexl2.JexlEngine.parse(JexlEngine.java:816)&lt;br/&gt;
	at org.apache.commons.jexl2.JexlEngine.createScript(JexlEngine.java:414)&lt;br/&gt;
	at org.apache.commons.jexl2.JexlEngine.createScript(JexlEngine.java:397)&lt;br/&gt;
	at com.usp.sls.toolkit.expression.impl.Jexl2Provider.getScript(Jexl2Provider.java:441)&lt;br/&gt;
	at com.usp.sls.toolkit.expression.impl.Jexl2Provider.evaluateExpression(Jexl2Provider.java:152)&lt;br/&gt;
	at com.usp.sls.toolkit.expression.Expression.evaluateExpression(Expression.java:201)&lt;br/&gt;
	at com.usp.sls.toolkit.expression.JexlTest.testReplace(JexlTest.java:84)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:164)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:228)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:223)&lt;br/&gt;
	at org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:35)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: org.apache.commons.jexl2.parser.TokenMgrError: Lexical error at line 1, column 42.  Encountered: &quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; (92), after : &quot;&quot;&lt;br/&gt;
	at org.apache.commons.jexl2.parser.ParserTokenManager.getNextToken(ParserTokenManager.java:1564)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.Parser.jj_scan_token(Parser.java:3914)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.Parser.jj_3R_118(Parser.java:2776)&lt;br/&gt;
	at org.apache.commons.jexl2.parser.Parser.jj_3R_111(Parser.java:2759)&lt;/p&gt;

&lt;p&gt;Obviously, the JEXL parser thinks that the backslash in the first string is meant to escape the following quote, which it isn&apos;t. The String should actually end there. So, I tried to escape the escape character, like this:&lt;/p&gt;

&lt;p&gt;  function.replace(&apos;DOMAIN\somename&apos;, &apos;\\\\&apos;, &apos;\\\\\\\\&apos;)&lt;/p&gt;

&lt;p&gt;But to no avail, same error.&lt;/p&gt;

&lt;p&gt;So, can escape characters be escaped in JEXL 2?&lt;/p&gt;</description>
                <environment>&lt;p&gt;All Java&lt;/p&gt;</environment>
        <key id="12458813">JEXL-98</key>
            <summary>Quote escaping cannot be escaped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="marcelschoen">Marcel Schoen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Mar 2010 14:03:16 +0000</created>
                <updated>Wed, 7 Apr 2010 14:40:53 +0000</updated>
                            <resolved>Thu, 11 Mar 2010 21:33:53 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12844136" author="henrib" created="Thu, 11 Mar 2010 16:59:56 +0000"  >&lt;p&gt;There is definitely a problem in the grammar wrt escaping.&lt;br/&gt;
A workaround is to use Unicode escaping for the backslashes like the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;fn98 {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; replace(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; target, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; replacement) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; str.replace(target, replacement);
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test98() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; expr = &lt;span class=&quot;code-quote&quot;&gt;&quot;fn:replace(&lt;span class=&quot;code-quote&quot;&gt;&apos;DOMAIN\\somename&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\\u005c&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\\u005c\\u005c&apos;&lt;/span&gt;)&quot;&lt;/span&gt;;
        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; funcs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
        funcs.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;fn&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; fn98());
        jexl.setFunctions(funcs);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = jexl.createExpression(expr).evaluate(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertEquals(expr, &lt;span class=&quot;code-quote&quot;&gt;&quot;DOMAIN\\\\somename&quot;&lt;/span&gt;, value);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12844243" author="henrib" created="Thu, 11 Mar 2010 21:33:53 +0000"  >&lt;p&gt;922023	Thu Mar 11 22:13:34 CET 2010	henrib&lt;br/&gt;
Parser.jjt modified to allow proper escaping (backslash);&lt;br/&gt;
Added test for &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-98&quot; title=&quot;Quote escaping cannot be escaped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-98&quot;&gt;&lt;del&gt;JEXL-98&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-97&quot; title=&quot;JEXL parses long expressions with lots of parenthesis slowly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-97&quot;&gt;&lt;del&gt;JEXL-97&lt;/del&gt;&lt;/a&gt;;&lt;br/&gt;
Added a formatting space in JexlException&lt;br/&gt;
Issue #&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-98&quot; title=&quot;Quote escaping cannot be escaped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-98&quot;&gt;&lt;del&gt;JEXL-98&lt;/del&gt;&lt;/a&gt; - Quote escaping cannot be escaped&lt;/p&gt;

&lt;p&gt;trunk/src/test/java/org/apache/commons/jexl2/IssuesTest.java &lt;br/&gt;
trunk/src/main/java/org/apache/commons/jexl2/parser/Parser.jjt &lt;br/&gt;
trunk/src/main/java/org/apache/commons/jexl2/JexlException.java&lt;br/&gt;
Committed revision 922023.&lt;/p&gt;</comment>
                            <comment id="12854522" author="henrib" created="Wed, 7 Apr 2010 14:40:53 +0000"  >&lt;p&gt;Fix delivered through 2.0.1 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xref:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-97] JEXL parses long expressions with lots of parenthesis slowly</title>
                <link>https://issues.apache.org/jira/browse/JEXL-97</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;JEXL&apos;s parser uses an unbounded JavaCC LOOKAHEAD to distinguish assignment expressions from other expressions.  The result is certain expressions take exponential time to parse.  The example snippet below demonstrates the problem.  On my machine parsing the expression below takes ~120 seconds.  Changing the parser to remove the LOOKAHEAD can get this to parse in milliseconds.  The lookahead appears to be in all versions of the parser source.&lt;/p&gt;

&lt;p&gt;import org.apache.commons.jexl.Expression;&lt;br/&gt;
import org.apache.commons.jexl.ExpressionFactory;&lt;/p&gt;

&lt;p&gt;public class SlowParse {&lt;/p&gt;

&lt;p&gt;    public static void main(String[] args) throws Exception &lt;/p&gt;
{

        String input = 

            &quot;(((((((((((((((((((((((((z+y)/x)*w)-v)*u)/t)-s)*r)/q)+p)-o)*n)-m)+l)*k)+j)/i)+h)*g)+f)/e)+d)-c)/b)+a)&quot;;

        // Make sure everything is loaded...

        Expression expr = ExpressionFactory.createExpression(input);

        long start = System.nanoTime();

        expr = ExpressionFactory.createExpression(input);

        long end = System.nanoTime();

        System.out.printf(&quot;Parse took %.1f seconds\n&quot;, (end-start)/1e+9);

    }

&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java&lt;/p&gt;</environment>
        <key id="12455971">JEXL-97</key>
            <summary>JEXL parses long expressions with lots of parenthesis slowly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jeffi">Jeff Ichnowski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2010 01:19:24 +0000</created>
                <updated>Fri, 12 Mar 2010 11:25:37 +0000</updated>
                            <resolved>Thu, 11 Mar 2010 21:38:53 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12832345" author="jeffi" created="Thu, 11 Feb 2010 01:26:01 +0000"  >&lt;p&gt;Attaching a proposal for a patch to fix this issue.  The change will make the parser slightly more permissive in what it allows for the left-hand side of an assignment expression.  If this is not acceptable, we could also add a check during or after the parse, to make sure assignment expressions are correct.&lt;/p&gt;</comment>
                            <comment id="12832418" author="henrib" created="Thu, 11 Feb 2010 08:07:38 +0000"  >&lt;p&gt;I&apos;ve been trying to reproduce this behavior on 2.x trunk with this code added as a method in IssuesTest.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test97() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        JexlContext ctxt = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapContext();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; v = &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;; v &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;; ++v) {
            ctxt.set(&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toString(v), 10);
        }
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; input =
            &lt;span class=&quot;code-quote&quot;&gt;&quot;(((((((((((((((((((((((((z+y)/x)*w)-v)*u)/t)-s)*r)/q)+p)-o)*n)-m)+l)*k)+j)/i)+h)*g)+f)/e)+d)-c)/b)+a)&quot;&lt;/span&gt;;

        JexlEngine jexl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEngine();
        Expression script;
        &lt;span class=&quot;code-comment&quot;&gt;// Make sure everything is loaded...
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; start = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.nanoTime();
        script = jexl.createExpression(input);
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = script.evaluate(ctxt);
        assertEquals(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf(11), value);
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; end = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.nanoTime();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;Parse took %.3f seconds\n&quot;&lt;/span&gt;, (end-start)/1e+9);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Runs in .003s on my box (os x, 2.8Ghz, jdk1.5 and jdk1.6).&lt;br/&gt;
Checked original code in 2.0 using jexl-compat lib and the performance is the same (aka normal).&lt;/p&gt;

&lt;p&gt;I&apos;ve been able to reproduce it with JEXL 1; it seems to be fixed in 2.0.&lt;/p&gt;
</comment>
                            <comment id="12832420" author="henrib" created="Thu, 11 Feb 2010 08:21:58 +0000"  >&lt;p&gt;Per previous tests, pb shows up in JEXL1.x but is fixed in JEXL 2.x.&lt;/p&gt;</comment>
                            <comment id="12832675" author="jeffi" created="Thu, 11 Feb 2010 20:08:19 +0000"  >&lt;p&gt;Thanks for the quick attention!  Confirmed on my end too.  My apologies for not being clear that it was limited to 1.x as far as we&apos;ve tried.  Our problem is in 1.1 and we&apos;ve got too much tied into it currently to do a major upgrade quickly.  Is there a possibility of a 1.1 patch?&lt;/p&gt;

&lt;p&gt;The LOOKAHEAD and recognized syntax in JEXL 2.0 is much simpler.  Perhaps a 1.1 patch release (if planned) could use the 2.0 structure instead of the patch I proposed above.  Unfortunately it would break anything that depended on expressions like  &quot;(a) = 1&quot; being recognized (which currently is by 1.1).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;JEXL 2.0 Expression&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void Expression() #void : {}
{
    LOOKAHEAD( Reference() &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; ) Assignment()
|
    ConditionalExpression()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;JEXL 1.1 Expression with Problem&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void Expression() : {}
{
    LOOKAHEAD( PrimaryExpression() &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; ) Assignment()
|
    ConditionalOrExpression()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;JEXL 1.0 Alternate Fix&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void Expression() : {}
{
    LOOKAHEAD( Reference() &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; ) Assignment()
|
    ConditionalOrExpression()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12833085" author="henrib" created="Fri, 12 Feb 2010 17:47:57 +0000"  >&lt;p&gt;There is no &quot;plan&quot; in getting a new 1.1 out AFAIK ; 2.0 is supposed to replace it (hopefully with some added benefits).&lt;br/&gt;
You always have the choice of a local 1.1 fix / release if you are in an emergency situation.&lt;/p&gt;

&lt;p&gt;May I suggest you have a closer look at 2.0 and assess how much you miss from 1.1 ? The jexl-compat lib might give you a quick evaluation path.&lt;/p&gt;

&lt;p&gt;If you can elaborate what you mean by &quot;too much tied into it&quot; in a post to the mailing list, you&apos;ll most likely get advice/help on migrating/reimplementing features .&lt;/p&gt;</comment>
                            <comment id="12844244" author="henrib" created="Thu, 11 Mar 2010 21:38:53 +0000"  >&lt;p&gt;The 2.0 version fixes the issue; no foreseeable 1.1. version planned.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435537" name="proposed.patch" size="400" author="jeffi" created="Thu, 11 Feb 2010 01:52:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-90] Jexl parser allows invalid expressions, e.g. &quot;a=1 b=2 3&quot;</title>
                <link>https://issues.apache.org/jira/browse/JEXL-90</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The current 2.0 branch (SVN rev 809337) includes changes to allow the final &quot;;&quot; to be omitted from statements, however the change also allows a script such as the following to pass:&lt;/p&gt;

&lt;p&gt;a=1 b=2 3&lt;/p&gt;

&lt;p&gt;The parser should insist on statement terminators, e.g.&lt;/p&gt;

&lt;p&gt;a=1; b=2; 3&lt;/p&gt;</description>
                <environment></environment>
        <key id="12434491">JEXL-90</key>
            <summary>Jexl parser allows invalid expressions, e.g. &quot;a=1 b=2 3&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2009 09:14:03 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:50 +0000</updated>
                            <resolved>Wed, 2 Sep 2009 10:25:36 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12750374" author="henrib" created="Wed, 2 Sep 2009 10:25:36 +0000"  >
&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=810445&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=810445&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log: &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-90&quot; title=&quot;Jexl parser allows invalid expressions, e.g. &amp;quot;a=1 b=2 3&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-90&quot;&gt;&lt;del&gt;JEXL-90&lt;/del&gt;&lt;/a&gt;: fix in Parser, enforce 2 expressions are separated by a semi-colon (&apos;;&apos;) in StatementExpression. &lt;/p&gt;

&lt;p&gt;Modified: &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl/Debugger.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl/Interpreter.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl/parser/Parser.jjt &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/IssuesTest.java &lt;/p&gt;</comment>
                            <comment id="12843125" author="henrib" created="Tue, 9 Mar 2010 15:15:50 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xo6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-88] MethodKey.java - name clash getMostSpecific() with Java 1.5.0</title>
                <link>https://issues.apache.org/jira/browse/JEXL-88</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;I get the following error when trying to compile with Sun Java 1.5.0_20:&lt;/p&gt;

&lt;p&gt;src\main\java\org\apache\commons\jexl\util\introspection\MethodKey.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;199,26&amp;#93;&lt;/span&gt; name clash: getMostSpecific&lt;br/&gt;
(java.util.List&amp;lt;java.lang.reflect.Constructor&amp;lt;?&amp;gt;&amp;gt;) and getMostSpecific(java.util.List&amp;lt;java.lang.reflect.Method&amp;gt;) have the same erasure&lt;/p&gt;

&lt;p&gt;src\main\java\org\apache\commons\jexl\util\introspection\IntrospectorBase.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;177,30&amp;#93;&lt;/span&gt; getMostSpecific(java&lt;br/&gt;
.util.List&amp;lt;java.lang.reflect.Method&amp;gt;) in org.apache.commons.jexl.util.introspection.MethodKey cannot be applied to (java.util.List&amp;lt;java.lang.reflect.C&lt;br/&gt;
onstructor&amp;lt;?&amp;gt;&amp;gt;)&lt;/p&gt;

&lt;p&gt;Compiles OK with Java 1.6.0_16 and Eclipse, but it ought to compile with Java 1.5.0 as well&lt;/p&gt;</description>
                <environment></environment>
        <key id="12433561">JEXL-88</key>
            <summary>MethodKey.java - name clash getMostSpecific() with Java 1.5.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2009 11:20:00 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:50 +0000</updated>
                            <resolved>Fri, 21 Aug 2009 00:34:32 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12745414" author="sebb@apache.org" created="Thu, 20 Aug 2009 11:57:19 +0000"  >&lt;p&gt;I suggest renaming both methods, eg&lt;/p&gt;

&lt;p&gt;getMostSpecificMethod&lt;br/&gt;
getMostSpecificConstructor or getMostSpecificCtor&lt;/p&gt;</comment>
                            <comment id="12745679" author="henrib" created="Thu, 20 Aug 2009 21:40:50 +0000"  >&lt;p&gt;Patch renames methods as getMostSpecificConstructor &amp;amp; getMostSpecificMethod&lt;/p&gt;</comment>
                            <comment id="12745729" author="rahul@apache.org" created="Thu, 20 Aug 2009 23:42:09 +0000"  >&lt;p&gt;Lets spell things out fully (as the patch has done) &amp;#8211; so +1 to ...Constructor instead of ...Ctor.&lt;/p&gt;</comment>
                            <comment id="12745739" author="sebb@apache.org" created="Fri, 21 Aug 2009 00:34:32 +0000"  >&lt;p&gt;Thanks for the patch; applied:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=806404&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=806404&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-88&quot; title=&quot;MethodKey.java - name clash getMostSpecific() with Java 1.5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-88&quot;&gt;&lt;del&gt;JEXL-88&lt;/del&gt;&lt;/a&gt; MethodKey.java - name clash getMostSpecific() with Java 1.5.0&lt;/p&gt;</comment>
                            <comment id="12843123" author="henrib" created="Tue, 9 Mar 2010 15:15:50 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12417184" name="JEXL-88.patch" size="2370" author="henrib" created="Thu, 20 Aug 2009 21:40:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xqcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-87] Inconsistent behaviour of arithmetical operations</title>
                <link>https://issues.apache.org/jira/browse/JEXL-87</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;BigInteger(7) / BigInteger(2) == 3&lt;br/&gt;
whereas&lt;br/&gt;
BigDecimal(7) / BigDecimal(2) == 4, because the result is rounded up.&lt;/p&gt;

&lt;p&gt;I would expect the results to be the same.&lt;/p&gt;

&lt;p&gt;Rather worse is:&lt;/p&gt;

&lt;p&gt;BigDecimal(7) % BigDecimal(2) == -1&lt;/p&gt;

&lt;p&gt;which makes no sense at all.&lt;/p&gt;

&lt;p&gt;Seems to me that the arithmetic &quot;rules&quot; need revisiting and rationalising - for example why should Integer be treated as double?&lt;/p&gt;

&lt;p&gt;At present literal numbers are treated as Integer or Float; there&apos;s no option to generate Long or Double literals.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12433558">JEXL-87</key>
            <summary>Inconsistent behaviour of arithmetical operations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrib">Henri Biestro</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2009 10:46:00 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:50 +0000</updated>
                            <resolved>Wed, 2 Sep 2009 14:19:28 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12746469" author="henrib" created="Sat, 22 Aug 2009 15:26:30 +0000"  >&lt;p&gt;About literals, it could be convenient &amp;amp; easy to add syntactic notations for the different literal types :&lt;br/&gt;
123L for (Long) 123&lt;br/&gt;
12.3d for Double&lt;br/&gt;
12.3D for BigDecimal (capital &apos;D&apos;))&lt;br/&gt;
123I for BigInteger (capital &apos;I&apos;)&lt;/p&gt;

&lt;p&gt;On the arithmetic itself, it might be easier on the user-end to follow more common rules about types by avoiding automatic conversion &amp;amp; add coercion operators (or functions in the global namespace) - applying the &quot;lesser surprise principle&quot;. &lt;/p&gt;

&lt;p&gt;The &quot;more common rules&quot; would be composition rules based on a usual datatype ordering:&lt;br/&gt;
String &amp;gt; BigDecimal &amp;gt; Double &amp;gt; BigInteger &amp;gt; Long &amp;gt; Character &amp;gt; Int &amp;gt; Short  &amp;gt; Byte&lt;/p&gt;

&lt;p&gt;And all operations would do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x o y -&amp;gt; Compose(type(x), type(y)).o(x,y)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With compose being:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Compose(&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;, BigInteger) -&amp;gt; BigDecimal
Composte(t1, t2) -&amp;gt; Datatype.Max(t1, t2) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And each datatype implement its own code for each operation.&lt;/p&gt;

&lt;p&gt;Since arithmetic operations could then overflow, we&apos;d introduce explicit coercions to let users circumvent these cases.&lt;/p&gt;

&lt;p&gt;I however suspect such a scheme would be further away from the JSF/JSP EL spec.&lt;br/&gt;
WDYT ?&lt;/p&gt;
</comment>
                            <comment id="12750449" author="henrib" created="Wed, 2 Sep 2009 14:19:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-87&quot; title=&quot;Inconsistent behaviour of arithmetical operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-87&quot;&gt;&lt;del&gt;JEXL-87&lt;/del&gt;&lt;/a&gt;: &lt;br/&gt;
Fix in Parser.jjt, &quot;x + y / a + b&quot; was throwing a ParseException &lt;br/&gt;
Fixed JexlArithmetic; use the same algo wrt datatype for all operations, fixed modulo for BigDecimal and made integer results to scale down to &apos;int&apos; (was only to long) when possible &lt;br/&gt;
Fixed tests to check for &apos;int(eger)&apos; instead of &apos;long&apos; when needed. &lt;/p&gt;

&lt;p&gt;Modified: &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl/JexlArithmetic.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/main/java/org/apache/commons/jexl/parser/Parser.jjt &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/ArithmeticTest.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/ForEachTest.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/IssuesTest.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/JexlTest.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/ScriptTest.java &lt;br/&gt;
    commons/proper/jexl/branches/2.0/src/test/java/org/apache/commons/jexl/WhileTest.java &lt;/p&gt;</comment>
                            <comment id="12843122" author="henrib" created="Tue, 9 Mar 2010 15:15:50 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xqxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-81] Introspector does not use ListGetExecutor for List</title>
                <link>https://issues.apache.org/jira/browse/JEXL-81</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The introspector discovery for get/set executor should try List before Duck; as is, java Lists get are handled through DuckGetExecutor which is not strictly proper.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432516">JEXL-81</key>
            <summary>Introspector does not use ListGetExecutor for List</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 11:55:40 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:47 +0000</updated>
                            <resolved>Fri, 7 Aug 2009 17:53:09 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12740521" author="henrib" created="Fri, 7 Aug 2009 11:57:47 +0000"  >&lt;p&gt;Fix &amp;amp; tests for Introspector&lt;/p&gt;</comment>
                            <comment id="12740649" author="rahul@apache.org" created="Fri, 7 Aug 2009 17:43:33 +0000"  >&lt;p&gt;Quick glance at the patch suggests theres no difference in the body of testListIntrospection() and testMapIntrospection(). Please correct when you get a chance.&lt;/p&gt;</comment>
                            <comment id="12740653" author="rahul@apache.org" created="Fri, 7 Aug 2009 17:53:09 +0000"  >&lt;p&gt;Corrected test and committed in r802105:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802105&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12843119" author="henrib" created="Tue, 9 Mar 2010 15:15:47 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12432382">JEXL-79</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415842" name="JEXL-81.patch" size="4694" author="henrib" created="Fri, 7 Aug 2009 11:57:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xp9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-80] Lenient mode should not throw exception when {g,s}etting an undefined property</title>
                <link>https://issues.apache.org/jira/browse/JEXL-80</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;&lt;br/&gt;
In lenient mode, the Interpreter should not throw an exception when failing to access or set a property; this behavior is consistent with undefined variable handling &amp;amp; closer to 1.1 behavior. For arrays, this will avoid throwing when accessing past the boundaries.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432511">JEXL-80</key>
            <summary>Lenient mode should not throw exception when {g,s}etting an undefined property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 10:29:08 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:47 +0000</updated>
                            <resolved>Sat, 8 Aug 2009 02:06:35 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12740497" author="henrib" created="Fri, 7 Aug 2009 10:31:21 +0000"  >&lt;p&gt;Modifies Interpreter to correctly handle lenient mode in &lt;/p&gt;
{s,g}
&lt;p&gt;etAttribute&lt;/p&gt;</comment>
                            <comment id="12740648" author="rahul@apache.org" created="Fri, 7 Aug 2009 17:42:08 +0000"  >&lt;p&gt;Patch has become stale after &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-77&quot; title=&quot;Rename last Velocity originated classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-77&quot;&gt;&lt;del&gt;JEXL-77&lt;/del&gt;&lt;/a&gt; was resolved (atleast I&apos;m not able to apply cleanly). If you can refresh, that&apos;d be ideal.&lt;/p&gt;</comment>
                            <comment id="12740783" author="henrib" created="Fri, 7 Aug 2009 23:22:31 +0000"  >&lt;p&gt;Updated for trunk.&lt;/p&gt;</comment>
                            <comment id="12740820" author="rahul@apache.org" created="Sat, 8 Aug 2009 02:06:35 +0000"  >&lt;p&gt;Patch contains some whitespace-only changes. I&apos;ve applied the functional changes, and left the whitespace changes in visit(ASTArrayLiteral,Object) out. See r802284:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802284&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the patch, resolving as Fixed.&lt;/p&gt;</comment>
                            <comment id="12843118" author="henrib" created="Tue, 9 Mar 2010 15:15:47 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12432382">JEXL-79</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415902" name="JEXL-80.patch" size="4445" author="henrib" created="Fri, 7 Aug 2009 23:22:31 +0000"/>
                            <attachment id="12415837" name="JEXL-80.patch" size="4444" author="henrib" created="Fri, 7 Aug 2009 10:31:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xpgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194761</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-78] Ternary operator throws Exception when JexlEngine in strict mode</title>
                <link>https://issues.apache.org/jira/browse/JEXL-78</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;The ternary operator should handle undefined, null as false in the condition independantly of the JexlEngine flags.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432332">JEXL-78</key>
            <summary>Ternary operator throws Exception when JexlEngine in strict mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 21:45:48 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:47 +0000</updated>
                            <resolved>Thu, 6 Aug 2009 12:06:09 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12739774" author="henrib" created="Wed, 5 Aug 2009 21:47:56 +0000"  >&lt;p&gt;Fix, test &amp;amp; syntax doc.&lt;br/&gt;
Moved the Ternary operator tests to the IfTest class.&lt;/p&gt;</comment>
                            <comment id="12740013" author="sebb@apache.org" created="Thu, 6 Aug 2009 12:06:09 +0000"  >&lt;p&gt;Minor problem with XML part of patch was fixed:&lt;/p&gt;

&lt;p&gt;... The condition will evaluate to &amp;lt;code&amp;gt;false&amp;lt;/false&amp;gt; ...&lt;/p&gt;

&lt;p&gt;Otherwise applied to SVN in:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=801617&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=801617&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-78&quot; title=&quot;Ternary operator throws Exception when JexlEngine in strict mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-78&quot;&gt;&lt;del&gt;JEXL-78&lt;/del&gt;&lt;/a&gt; Ternary operator throws Exception when JexlEngine in strict mode&lt;/p&gt;</comment>
                            <comment id="12843117" author="henrib" created="Tue, 9 Mar 2010 15:15:47 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415674" name="JEXL-78.patch" size="7946" author="henrib" created="Wed, 5 Aug 2009 21:47:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xqmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-76] Remove unnecessary class VisitorAdapter</title>
                <link>https://issues.apache.org/jira/browse/JEXL-76</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;VisitorAdapter.java is not used and does not provide any service even for derivation.&lt;br/&gt;
svn del src/main/java/org/apache/commons/jexl/parser/VisitorAdapter.java&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432292">JEXL-76</key>
            <summary>Remove unnecessary class VisitorAdapter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henrib">Henri Biestro</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 15:15:14 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:47 +0000</updated>
                            <resolved>Fri, 7 Aug 2009 05:04:08 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12740402" author="rahul@apache.org" created="Fri, 7 Aug 2009 05:04:08 +0000"  >&lt;p&gt;Done, in r801883:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=801883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=801883&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12843115" author="henrib" created="Tue, 9 Mar 2010 15:15:47 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xrlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-71] Parsing errors?</title>
                <link>https://issues.apache.org/jira/browse/JEXL-71</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;While testing with a basic command-line utility, I got the following odd behaviours:&lt;/p&gt;

&lt;p&gt;Note: input is denoted by &amp;gt;.&lt;/p&gt;

&lt;p&gt;============&lt;/p&gt;

&lt;p&gt;&amp;gt; c.e&lt;br/&gt;
04-Aug-2009 23:25:46 org.apache.commons.jexl.Interpreter visit&lt;br/&gt;
WARNING: org.apache.commons.jexl.scripting.Main.main@51!&lt;span class=&quot;error&quot;&gt;&amp;#91;0,3&amp;#93;&lt;/span&gt;: &apos;c.e;&apos; undefined variable e.e&lt;br/&gt;
Return value: null&lt;br/&gt;
&amp;gt; c&lt;br/&gt;
Return value: &lt;/p&gt;
{2=3, 4=5}
&lt;p&gt;&amp;gt; e&lt;br/&gt;
Return value: 2&lt;/p&gt;

&lt;p&gt;The error message looks wrong - why is e.e mentioned? Surely it should be c.e?&lt;/p&gt;

&lt;p&gt;===========&lt;/p&gt;

&lt;p&gt;&amp;gt; a=&lt;span class=&quot;error&quot;&gt;&amp;#91;1,2&amp;#93;&lt;/span&gt;&lt;br/&gt;
Encountered &quot; &quot;,&quot; &quot;, &quot;&quot; at line 1, column 5.&lt;br/&gt;
Was expecting one of:&lt;br/&gt;
... etc.&lt;/p&gt;

&lt;p&gt;Same for&lt;/p&gt;

&lt;p&gt;&amp;gt; A=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;b&amp;#39;,&amp;#39;c&amp;#39;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;However, I would expect this to work, as this is the syntax for an array as shown on the website.&lt;br/&gt;
How does one create an array?&lt;/p&gt;

&lt;p&gt;=====&lt;/p&gt;

&lt;p&gt;&amp;gt; D=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;a&amp;#39;=&amp;gt;&amp;#39;b&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: &lt;/p&gt;
{a=b}
&lt;p&gt;&amp;gt; D&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;a&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: b&lt;/p&gt;

&lt;p&gt;This as expected. However, numbers behave rather oddly:&lt;/p&gt;

&lt;p&gt;&amp;gt; E=&lt;span class=&quot;error&quot;&gt;&amp;#91;1=&amp;gt;2&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: &lt;/p&gt;
{1=2}&lt;br/&gt;
&amp;gt; E&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: null&lt;br/&gt;
&amp;gt; E&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: null&lt;br/&gt;
&lt;br/&gt;
There does not appear to be a way to access the value.&lt;br/&gt;
Whereas, when using a string:&lt;br/&gt;
&lt;br/&gt;
F=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1&amp;#39;=&amp;gt;2&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: {1=2}
&lt;p&gt;F&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: 2&lt;br/&gt;
F&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
Return value: 2&lt;/p&gt;

&lt;p&gt;In this case, both the string and the bare number are usable as the key.&lt;/p&gt;

&lt;p&gt;====&lt;/p&gt;

&lt;p&gt;I can create test cases for these, but I&apos;d like to confirm that these are bugs first&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432215">JEXL-71</key>
            <summary>Parsing errors?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 22:42:28 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:46 +0000</updated>
                            <resolved>Thu, 6 Aug 2009 11:49:21 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                                                            <comments>
                            <comment id="12739253" author="henrib" created="Tue, 4 Aug 2009 23:50:16 +0000"  >&lt;p&gt;These definitely look like bugs to me.&lt;/p&gt;

&lt;p&gt;The first one I suspect is a benign bug in the Interpreter.&lt;br/&gt;
The third one on Maps seems to point the parser.jjt as the culprit (and I really dislike this map syntax btw, a jscript-llike one would seem more &quot;natural&quot;).&lt;br/&gt;
The second one about Arrays is an RFE (sic) since there is nothing in the grammar &amp;amp; parser that indicates it can create Arrays so it&apos;s going to take a bit more effort (should these be List or real arrays ie &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;) &lt;/p&gt;

&lt;p&gt;Should I create subtasks or different bugs for each ?&lt;/p&gt;</comment>
                            <comment id="12739270" author="sebb@apache.org" created="Wed, 5 Aug 2009 00:28:42 +0000"  >&lt;p&gt;Regarding Arrays, the Syntax document says:&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;br/&gt;
Array literal 	 &lt;/p&gt;

&lt;p&gt;You can construct an Object[] array by using&lt;/p&gt;

&lt;p&gt;[ item, item, item ]&lt;br/&gt;
&amp;lt;&amp;lt;&amp;lt;&amp;lt;&lt;/p&gt;

&lt;p&gt;So if the fix creates a List, then the docn needs to be changed as well.&lt;/p&gt;

&lt;p&gt;Of course it would be nice to be able to create either - there are likely to be use cases for both fixed and variable numbers of entries.&lt;br/&gt;
Maybe () could be used to create a List, and [] and array?&lt;/p&gt;

&lt;p&gt;Re subtasks: good idea.&lt;/p&gt;</comment>
                            <comment id="12739500" author="henrib" created="Wed, 5 Aug 2009 13:57:15 +0000"  >&lt;p&gt;A fix for the 3 subtasks that involves a syntax change for Maps literal and adds the Array literal + tests.&lt;br/&gt;
Will post separate patches for the &quot;variables&quot; subtask &amp;amp; Map/Integer soon.&lt;/p&gt;</comment>
                            <comment id="12739522" author="henrib" created="Wed, 5 Aug 2009 14:21:38 +0000"  >&lt;p&gt;Added dotted syntax for assignment test &amp;amp; fix ( x.1 = y )&lt;/p&gt;</comment>
                            <comment id="12739551" author="henrib" created="Wed, 5 Aug 2009 15:07:32 +0000"  >&lt;p&gt;Attached patches to &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-73&quot; title=&quot;Undefined variables not reported correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-73&quot;&gt;&lt;del&gt;JEXL-73&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-74&quot; title=&quot;Maps do not handle integer keys correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-74&quot;&gt;&lt;del&gt;JEXL-74&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Note (again) that the &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-71&quot; title=&quot;Parsing errors?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-71&quot;&gt;&lt;del&gt;JEXL-71&lt;/del&gt;&lt;/a&gt; patch includes this fixes plus &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt; at the cost of a syntax change.&lt;br/&gt;
Awaiting instructions. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12739689" author="rahul@apache.org" created="Wed, 5 Aug 2009 19:26:40 +0000"  >&lt;p&gt;Agreed that [ ]  is crowded syntax-wise and I didn&apos;t like the existing map literal syntax either. I think the JSON/ECMA-like syntax may be better. Note the map syntax hasn&apos;t been released so can be changed freely at this point. I&apos;m in favor of the change conceptually (haven&apos;t looked at the actual patch, and unlikely I&apos;ll get a chance over the next few days either).&lt;/p&gt;</comment>
                            <comment id="12739711" author="sebb@apache.org" created="Wed, 5 Aug 2009 20:09:44 +0000"  >&lt;p&gt;I&apos;m happy with the proposed new syntax for maps:&lt;/p&gt;

 { key1 : value1, key2 : value2 }

&lt;p&gt;It&apos;s slightly easier to type : rather than =&amp;gt; too.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;I&apos;ve had a look at the patch, and it mostly seems quite straightforward.&lt;/p&gt;

&lt;p&gt;However, there are some changes to Parser.jjt which I don&apos;t follow:&lt;/p&gt;

&lt;p&gt;1) Why are changes needed to EmptyFunction() and VoidFunction()?&lt;br/&gt;
2) Likewise PrimaryExpression()&lt;/p&gt;

&lt;p&gt;Are these essential for adding Array handling?&lt;/p&gt;</comment>
                            <comment id="12739731" author="henrib" created="Wed, 5 Aug 2009 20:35:21 +0000"  >
&lt;p&gt;1/ EmptyFunction &amp;amp; SizeFunction (I guess) used to work with Reference which ArrayLiteral &amp;amp; MapLiteral aren&apos;t; the change is necessary to use either of these literals as arguments.&lt;/p&gt;

&lt;p&gt;2/ PrimaryExpression is the final form of UnaryExpression of which ArrayLiteral &amp;amp; MapLiteral are part of; the LOOKAHEADs, besides helping the parser, will help in maintenance.&lt;/p&gt;

&lt;p&gt;Last version of the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt; based in the trunk; thanks for the previous commits.&lt;/p&gt;</comment>
                            <comment id="12739791" author="sebb@apache.org" created="Wed, 5 Aug 2009 22:30:52 +0000"  >&lt;p&gt;I can understand why one might need to add Expression() to empty and void, but I don&apos;t understand why Reference() is dropped?&lt;/p&gt;

&lt;p&gt;I&apos;ve just tried applying the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt;, and there are lots of failures.&lt;/p&gt;

&lt;p&gt;However, if I revert the parts of the patch that affect PrimaryExpression, EmptyFunction and SizeFunction I get far fewer errors, only:&lt;/p&gt;

&lt;p&gt;  testMapArrayLiteral(org.apache.commons.jexl.MapLiteralTest)&lt;br/&gt;
  testLiteralWithStrings(org.apache.commons.jexl.ArrayLiteralTest)&lt;br/&gt;
  testLiteralWithOneEntry(org.apache.commons.jexl.ArrayLiteralTest)&lt;br/&gt;
  testLiteralWithNumbers(org.apache.commons.jexl.ArrayLiteralTest)&lt;br/&gt;
  testSizeOfSimpleArrayLiteral(org.apache.commons.jexl.ArrayLiteralTest)&lt;br/&gt;
  testNotEmptySimpleArrayLiteral(org.apache.commons.jexl.ArrayLiteralTest)&lt;/p&gt;

&lt;p&gt;Maybe it would be worth applying the changes in stages:&lt;br/&gt;
1) Change Map syntax - should be straightforward&lt;br/&gt;
2) Add Array constructor&lt;br/&gt;
3) fix up loose ends&lt;/p&gt;

&lt;p&gt;Just a thought.&lt;/p&gt;</comment>
                            <comment id="12739936" author="henrib" created="Thu, 6 Aug 2009 08:25:24 +0000"  >&lt;p&gt;I&apos;ve just retested the patch both on Mac &amp;amp; Windows+cygwin using both Java1.5 &amp;amp; Java6 and have none of the issues you describe.&lt;/p&gt;

&lt;p&gt;svn co  &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/jexl/branches/2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/jexl/branches/2.0&lt;/a&gt;&lt;br/&gt;
Downloaded &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt;.patch in .../jexl ;&lt;br/&gt;
Applied the patch with &apos;cd .../jexl/branches/2.0; patch -p0 &amp;lt; ../../&lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt;.patch&apos;.&lt;br/&gt;
The patch applies cleanly with no rejects, not even fuzz.&lt;br/&gt;
&apos;mvn site&apos; : No errors.&lt;br/&gt;
Tried also through Netbeans+maven plugin without an hitch.&lt;/p&gt;

&lt;p&gt;Might be something wrong on your end...&lt;br/&gt;
Are you sure your repository was clean ?&lt;br/&gt;
Are you sure you applied the &lt;a href=&quot;https://issues.apache.org/jira/browse/JEXL-75&quot; title=&quot;Array literal syntax is not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JEXL-75&quot;&gt;&lt;del&gt;JEXL-75&lt;/del&gt;&lt;/a&gt;.patch ?&lt;br/&gt;
Are you using maven to build it using the pom.xml or some other tool ?(Eclipse?)&lt;/p&gt;</comment>
                            <comment id="12739997" author="sebb@apache.org" created="Thu, 6 Aug 2009 11:36:26 +0000"  >&lt;p&gt;I&apos;m fairly sure I applied patch-75 rather than patch-71, because I remember seeing that syntax.xml was updated, and that is only in patch-75.&lt;/p&gt;

&lt;p&gt;However, I started again and this time it all worked out OK. I don&apos;t know what went wrong before.&lt;/p&gt;</comment>
                            <comment id="12740007" author="sebb@apache.org" created="Thu, 6 Aug 2009 11:49:21 +0000"  >&lt;p&gt;I think this is all resolved now, apart from the suggestion of supporting growable arrays (Lists).&lt;/p&gt;

&lt;p&gt;I&apos;ll raise a separate enhancement request for that.&lt;/p&gt;</comment>
                            <comment id="12843113" author="henrib" created="Tue, 9 Mar 2010 15:15:46 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415606" name="JEXL-71.patch" size="19226" author="henrib" created="Wed, 5 Aug 2009 14:21:38 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12432275">JEXL-73</subtask>
                            <subtask id="12432276">JEXL-74</subtask>
                            <subtask id="12432277">JEXL-75</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xqkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[JEXL-67] Potential NPE in util.introspection.MethodKey</title>
                <link>https://issues.apache.org/jira/browse/JEXL-67</link>
                <project id="12310479" key="JEXL">Commons JEXL</project>
                    <description>&lt;p&gt;There are two potential NPEs in util.introspection.MethodKey (discovered by Eclipse)&lt;/p&gt;

&lt;p&gt;isInvocationConvertible&lt;br/&gt;
isStrictInvocationConvertible&lt;/p&gt;

&lt;p&gt;Both methods check for actual == null, but the check is part of a compound and condition so actual may still be null.&lt;/p&gt;

&lt;p&gt;The comments suggest that actual should not be null, so the code should either drop the null check entirely or check it properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431994">JEXL-67</key>
            <summary>Potential NPE in util.introspection.MethodKey</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Aug 2009 13:33:59 +0000</created>
                <updated>Tue, 9 Mar 2010 15:15:46 +0000</updated>
                            <resolved>Sat, 8 Aug 2009 02:53:56 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12738111" author="henrib" created="Sun, 2 Aug 2009 18:37:40 +0000"  >&lt;p&gt;refactored MethodKey attempting to remove ambiguity wrt null checks.&lt;br/&gt;
Findbugs - the Maven plugin version - does not see those neither does Netbeans.&lt;br/&gt;
Did not find (yet) a way to use Eclipse on an existing pom.xml (on Mac); any hint ?&lt;/p&gt;</comment>
                            <comment id="12738131" author="rahul@apache.org" created="Sun, 2 Aug 2009 21:02:49 +0000"  >&lt;p&gt;For Eclipse, I&apos;ve manually tweaked the source directories for the project to include the generated sources.&lt;/p&gt;</comment>
                            <comment id="12738450" author="henrib" created="Mon, 3 Aug 2009 17:41:34 +0000"  >&lt;p&gt;Any comments on the patch ? it cleans up  the visibility of some methods and masks using the Void.class as a signature for &apos;null&apos; arguments (parameters ie formal can not be null).&lt;/p&gt;</comment>
                            <comment id="12738576" author="rahul@apache.org" created="Mon, 3 Aug 2009 20:46:00 +0000"  >&lt;p&gt;No comments on the patch (haven&apos;t looked at it). I probably won&apos;t be looking at it this week either.&lt;/p&gt;</comment>
                            <comment id="12738585" author="henrib" created="Mon, 3 Aug 2009 21:02:41 +0000"  >&lt;p&gt;removed the MethodMap.AmbiguousException, replaced by MethodKey.AmbiguousException&lt;/p&gt;</comment>
                            <comment id="12740825" author="rahul@apache.org" created="Sat, 8 Aug 2009 02:53:56 +0000"  >&lt;p&gt;Thanks, applied in r802288:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=802288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Resolving as Fixed.&lt;/p&gt;</comment>
                            <comment id="12843112" author="henrib" created="Tue, 9 Mar 2010 15:15:46 +0000"  >&lt;p&gt;Bulk closing issues resolved in JEXL 2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415407" name="JEXL-67.patch" size="8670" author="henrib" created="Mon, 3 Aug 2009 21:02:41 +0000"/>
                            <attachment id="12415295" name="JEXL-67.patch" size="8260" author="henrib" created="Sun, 2 Aug 2009 18:37:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xr1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>195020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>